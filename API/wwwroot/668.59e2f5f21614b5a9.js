"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[668],{668:(EH,Fl,T)=>{T.r(Fl),T.d(Fl,{GridModule:()=>wH});var Ml=T(6895),kl=T(5450),Y=T(8256),uf=T(560),hf=T(1481),Z=T(8082),c=T(3520),f=T(3684),S=T(1553),b=T(1374),_=T(4596),C=T(4705),y=T(911),D=T(6129),E=T(6836),Sn="dx-state-focused",cf="dx-cell-focus-disabled",Nl=".dx-datagrid-rowsview .dx-row",Hl="".concat(Nl," > td"),Zl=".dx-treelist-rowsview .dx-row",zl="".concat(Zl," > td"),$l={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(Nl,"[tabindex]"),"".concat(Hl,"[tabindex]"),"".concat(Hl),"".concat(Zl,"[tabindex]"),"".concat(zl,"[tabindex]"),"".concat(zl)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},yn=!1,$a=!1,di=null;function Wl(i,e){var t=(0,c.Z)(i),a=t.attr("aria-label"),n=Kl(a,e.element()).index(t);di=(0,f.l)({},{ariaLabel:a,index:n},{viewInstance:e})}function Kl(i,e){var a,t=(0,c.Z)(e);if(i){var r=i?.replace(/"/g,'\\"');a=t.find('[aria-label="'.concat(r,'"][tabindex]'))}else a=t.find("[tabindex]");return a}function vf(i,e){var t=e?.getRootNode()||Z.Z.getDocument();for(var a in i){var r=i[a],n=(0,c.Z)(t).find(r).first();if(n.length)return n}}function Gl(){$a="visible"===Z.Z.getDocument().visibilityState}function Ul(){C.Z.off(Z.Z.getDocument(),"visibilitychange",Gl)}function Yl(i,e,t,a,r,n){if(e.option("useLegacyKeyboardNavigation"))return E.ZT;var s=()=>(0,c.Z)(e.element()),o=u=>function _f(i,e,t,a,r,n){var s=function gf(i,e,t){var a={event:e,handled:!1};return t?t(a):i._createActionByOption("onKeyDown")(a),a.handled}(e,t.originalEvent,n);if(!s){var o=(0,D.EV)(t);"enter"===o||"space"===o?(Wl(t.target,e),a&&a({event:t})):"tab"===o?r.addClass(Sn):En(i,e,t)}}(i,e,u,r,s(),n),l=()=>{yn=!0,s().removeClass(Sn)},d=()=>{!yn&&!$a&&s().addClass(Sn),yn=!1};return C.Z.on(t,"keydown",a,o),C.Z.on(t,"mousedown",a,l),C.Z.on(t,"focusin",a,d),()=>{C.Z.off(t,"keydown",a,o),C.Z.off(t,"mousedown",a,l),C.Z.off(t,"focusin",a,d)}}function bn(i){if(!i.option("useLegacyKeyboardNavigation")&&di){var e=di.viewInstance;if(e){var a=Kl(di.ariaLabel,e.element()).eq(di.index);di=null,C.Z.trigger(a,"focus")}}}function En(i,e,t){var a=(0,D.EV)(t);if(t.ctrlKey&&("upArrow"===a||"downArrow"===a))for(var r=Object.keys($l),n=r.indexOf(i);n>=0&&n<r.length;){n="upArrow"===a?--n:++n;var l=vf($l[r[n]],t.target);if(l&&l.length){l.attr("tabindex",e.option("tabindex")||0),C.Z.trigger(l,"focus"),l.removeClass(cf);break}}}var Mi=function(i,e,t,a,r){var n=e.getController("keyboardNavigation");e.option("useLegacyKeyboardNavigation")||n&&!n.isKeyboardEnabled()||(e.createAction("onKeyDown"),Yl(i,e,t,a,r,s=>{e.executeAction("onKeyDown",s)}))},j=T(7075),Wa=T(9694),ve=T(1760),oe=T(805),x=T(316),ne=T(7839),Fe=T(7455),wt=T(5303),B=T(4500),se=T(1037),In=T(3526),ae=T(5390),Ft=T(9890),jl="dx-column-indicators",xf=i=>class extends i{_applyColumnState(e){var t,a=this.option("rtlEnabled"),r=this._getColumnAlignment(e.column.alignment,a),n=(0,f.l)(!0,{columnAlignment:r},e),s=n.rootElement.hasClass("dx-group-panel-item"),o=this._createIndicatorContainer(n,s),l=(0,c.Z)("<span>").addClass(this._getIndicatorClassName(e.name)),u=(null===(t=this.component)||void 0===t?void 0:t.getController("columns"))?.getHeaderContentAlignment(r)||r;return n.container=o,n.indicator=l,this._renderIndicator(n),o[!s&&e.showColumnLines||"left"!==u?"prependTo":"appendTo"](e.rootElement),l}_getIndicatorClassName(e){}_getColumnAlignment(e,t){return t=t||this.option("rtlEnabled"),e&&"center"!==e?e:(0,ne.q)(t)}_createIndicatorContainer(e,t){var a=this._getIndicatorContainer(e.rootElement),r="left"===e.columnAlignment?"right":"left";return a.length||(a=(0,c.Z)("<div>").addClass(jl)),this.setAria("role","presentation",a),a.css("float",e.showColumnLines&&!t?r:null)}_getIndicatorContainer(e){return e&&e.find(".".concat(jl))}_getIndicatorElements(e){var t=this._getIndicatorContainer(e);return t&&t.children()}_renderIndicator(e){var t=e.container,a=e.indicator;t&&a&&t.append(a)}_updateIndicators(e){var r,t=this.getColumns(),a=this.getColumnElements();if(a&&t.length===a.length)for(var n=0;n<t.length;n++){r=a.eq(n),this._updateIndicator(r,t[n],e);var s=r.parent().data("options");s&&s.cells&&(s.cells[r.index()].column=t[n])}}_updateIndicator(e,t,a){if(!t.command)return this._applyColumnState({name:a,rootElement:e,column:t,showColumnLines:this.option("showColumnLines")})}},V=T(7462),le=T(7685),Q=T(6795),ql=(i,e)=>{var t;return null!==(t=Object.values(i).find(r=>{var n;return null===(n=r?.element())||void 0===n?void 0:n.hasClass(e)})?.element())&&void 0!==t?t:null};class Xl{constructor(e){var t=this;t._updateLockCount=0,t.component=e,t._actions={},t._actionConfigs={},(0,S.S6)(this.callbackNames()||[],function(a,r){var n=t.callbackFlags(r)||{};n.unique=!0,n.syncStrategy=!0,t[this]=(0,le.Z)(n)})}_endUpdateCore(){}init(){}callbackNames(){}callbackFlags(e){}publicMethods(){return[]}beginUpdate(){this._updateLockCount++}endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())}option(e){var{component:t}=this,a=t._optionCache;return 1===arguments.length&&a?(e in a||(a[e]=t.option(e)),a[e]):t.option.apply(t,arguments)}_silentOption(e,t){var{component:a}=this,r=a._optionCache;return r&&(r[e]=t),a._setOptionWithoutOptionChange(e,t)}localize(e){var t=this.component._optionCache;return t?(e in t||(t[e]=y.Z.format(e)),t[e]):y.Z.format(e)}on(e,t){return this.component.on.apply(this.component,arguments)}off(){return this.component.off.apply(this.component,arguments)}optionChanged(e){e.name in this._actions&&(this.createAction(e.name,this._actionConfigs[e.name]),e.handled=!0)}getAction(e){return this._actions[e]}setAria(e,t,a){var r=a.get(0),n="role"!==e&&"id"!==e?"aria-":"";r.setAttribute?r.setAttribute(n+e,t):a.attr(n+e,t)}_createComponent(e,t,a){return this.component._createComponent(e,t,a)}getController(e){return this.component._controllers[e]}createAction(e,t){if((0,_.mf)(e)){var a=this.component._createAction(e.bind(this),t);return function(r){a({event:r})}}this._actions[e]=this.component._createActionByOption(e,t),this._actionConfigs[e]=t}executeAction(e,t){var a=this._actions[e];return a&&a(t)}dispose(){var e=this;(0,S.S6)(e.callbackNames()||[],function(){e[this].empty()})}addWidgetPrefix(e){return"dx-".concat(this.component.NAME.slice(2).toLowerCase()).concat(e?"-".concat(e):"")}getWidgetContainerClass(){return this.addWidgetPrefix("dxDataGrid"===this.component.NAME?null:"container")}elementIsInsideGrid(e){return e.closest(".".concat(this.getWidgetContainerClass())).parent().is(this.component.$element())}}class Tn extends Xl{}class Ql extends Xl{constructor(e){super(e),this.renderCompleted=(0,le.Z)(),this.resizeCompleted=(0,le.Z)()}_isReady(){return this.component.isReady()}_endUpdateCore(){super._endUpdateCore(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))}_invalidate(e,t){this._requireRender=!0,this.component._requireResize=(0,B.Ym)()&&(this.component._requireResize||e),this._requireReady=this._requireReady||t}_renderCore(e){}_resizeCore(){}_parentElement(){return this._$parent}element(){return this._$element}getElementHeight(){var e=this.element();if(!e)return 0;var t=parseFloat(e.css("marginTop"))||0,a=parseFloat(e.css("marginBottom"))||0,{offsetHeight:r}=e.get(0);return r+t+a}isVisible(){return!0}getTemplate(e){return this.component._getTemplate(e)}getView(e){return this.component._views[e]}_getBorderedViews(){return{columnHeadersView:this.component._views.columnHeadersView,rowsView:this.component._views.rowsView,filterPanelView:this.component._views.filterPanelView,footerView:this.component._views.footerView}}render(e,t){var a=this._$element,r=this.isVisible();if((a||e)&&(this._requireReady=!1,a||(a=this._$element=(0,c.Z)("<div>").appendTo(e),this._$parent=e),a.toggleClass("dx-hidden",!r),this.component._views&&((i,e)=>{if(((i,e)=>{var t;if(!Object.keys(e).includes(i))return!1;var{rowsView:a}=e,r=function(i,e){var t={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(i);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(i,a[r])&&(t[a[r]]=i[a[r]])}return t}(e,["rowsView"]);return!!(0,_.$K)(null===(t=a?.element)||void 0===t?void 0:t.call(a))&&Object.values(r).filter(n=>{var s;return null===(s=n?.isVisible)||void 0===s?void 0:s.call(n)}).every(n=>(0,_.$K)(n?.element()))})(i,e)){var t=ql(e,"dx-bordered-top-view"),a=ql(e,"dx-bordered-bottom-view"),r=(i=>{var{columnHeadersView:e,rowsView:t}=i;return e?.isVisible()?e.element():t.element()})(e),n=(i=>{var{filterPanelView:e,footerView:t,rowsView:a}=i;return e?.isVisible()?e.element():t?.isVisible()?t.element():a.element()})(e);t&&!t.is(r)&&t.removeClass("dx-bordered-top-view"),a&&!a.is(n)&&a.removeClass("dx-bordered-bottom-view"),r.hasClass("dx-bordered-top-view")||r.addClass("dx-bordered-top-view"),n.hasClass("dx-bordered-bottom-view")||n.addClass("dx-bordered-bottom-view")}})(this.name,this._getBorderedViews()),r)){this.component._optionCache={};var n=this._renderCore(t);this.component._optionCache=void 0,n?n.done(()=>{this.renderCompleted.fire(t)}):this.renderCompleted.fire(t)}}resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1}focus(e){this.element().get(0).focus({preventScroll:e})}}function ed(i){var t={};return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forEach(a=>{var[r,n]=a,s=i[r];s&&(t[r]=(0,_.mf)(n)?n(s):s.inherit(n))}),t}const J={modules:[],View:Ql,ViewController:class Df extends Tn{getView(e){return this.component._views[e]}getViews(){return this.component._views}},Controller:Tn,registerModule(i,e){for(var{modules:t}=this,a=0;a<t.length;a++)if(t[a].name===i)return;e.name=i,t.push(e)},registerModulesOrder(i){this.modulesOrder=i},unregisterModule(i){this.modules=(0,E.h3)(this.modules,e=>e.name!==i)},processModules:function Rf(i,e){var{modules:t}=e,{modulesOrder:a}=e;function r(u){var h={};return(0,S.S6)(u,(p,v)=>{var g=new v(i);g.name=p,function Af(i,e,t){var a=t.publicMethods();a&&(0,S.S6)(a,(r,n)=>{if(!t[n])throw Q.Z.Error("E1006",e,n);if(i[n])throw Q.Z.Error("E1005",n);i[n]=function(){return t[n](...arguments)}})}(i,p,g),h[p]=g}),h}a&&t.sort((u,h)=>{var p=a.indexOf(u.name),v=a.indexOf(h.name);return p<0&&(p=1e6),v<0&&(v=1e6),p-v});var n={},s={};t.forEach(u=>{var{name:h,controllers:p={},views:v={}}=u;Object.entries(p).forEach(g=>{var[m,w]=g;if(n[m])throw Q.Z.Error("E1001",h,m);if(!(w?.prototype instanceof Tn))throw Q.Z.Error("E1002",h,m);n[m]=w}),Object.entries(v).forEach(g=>{var[m,w]=g;if(s[m])throw Q.Z.Error("E1003",h,m);if(!(w?.prototype instanceof Ql))throw Q.Z.Error("E1004",h,m);s[m]=w})});var o=t.filter(u=>{var{extenders:h}=u;return!!h}),l=o.reduce((u,h)=>{var{extenders:p}=h;return(0,V.Z)((0,V.Z)({},u),ed(u,p?.controllers))},n),d=o.reduce((u,h)=>{var{extenders:p}=h;return(0,V.Z)((0,V.Z)({},u),ed(u,p?.views))},s);i._controllers=r(l),i._views=r(d)},callModuleItemsMethod:function(i,e,t){t=t||[],i._controllers&&(0,S.S6)(i._controllers,function(){this[e]&&this[e].apply(this,t)}),i._views&&(0,S.S6)(i._views,function(){this[e]&&this[e].apply(this,t)})}};var q=T(1996),qe=T(3626),We=T(6619),St=T(4422),ki=T(2928),lt=T(6059),ie=T(2657),Me=T(8262),Vf={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function Ka(i){return Vf[i]}var Ni=7,Hi=["millisecond","second","minute","hour","day","week","month","quarter","year"],rd=function(i){var e,t,a,r=["millisecond","second","minute","hour","day","month","year"],n={};for(e=r.length-1;e>=0;e--)a=r[e],(t=Math.floor(i/Ka(a)))>0&&(n[a+"s"]=t,i-=Ga(a,t));return n};function Ga(i,e){return Ka(i)*e}function Ua(i){var t,e=-1;return(0,_.HD)(i)?i:(0,_.Kn)(i)?((0,S.S6)(i,function(a,r){for(t=0;t<Hi.length;t++)r&&(a===Hi[t]+"s"||a===Hi[t])&&e<t&&(e=t)}),Hi[e]):""}var Ff={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"},nd=function(i){return Math.floor(i/3)},sd=function(i){return 3*nd(i)};function od(i,e,t,a){i=new Date(i.getTime());var n,s,r=new Date(i.getTime()),o=Ua(e);switch(o){case"second":i=new Date(1e3*Math.floor(r.getTime()/1e3));break;case"minute":i=new Date(6e4*Math.floor(r.getTime()/6e4));break;case"hour":i=new Date(36e5*Math.floor(r.getTime()/36e5));break;case"year":i.setMonth(0);case"month":i.setDate(1);case"day":i.setHours(0,0,0,0);break;case"week":(i=pd(i,a||0)).setHours(0,0,0,0);break;case"quarter":n=sd(i.getMonth()),s=i.getMonth(),i.setDate(1),i.setHours(0,0,0,0),s!==n&&i.setMonth(n)}return t&&"hour"!==o&&"minute"!==o&&"second"!==o&&fd(r,i),i}function ld(i){return od(i,"day")}function dd(i,e,t){var a=new Date(i.getTime()),r=(0,_.HD)(e)?hd(e.toLowerCase()):(0,_.kE)(e)?rd(e):e;return r.years&&a.setFullYear(a.getFullYear()+r.years*t),r.quarters&&a.setMonth(a.getMonth()+3*r.quarters*t),r.months&&a.setMonth(a.getMonth()+r.months*t),r.weeks&&a.setDate(a.getDate()+7*r.weeks*t),r.days&&a.setDate(a.getDate()+r.days*t),r.hours&&a.setTime(a.getTime()+36e5*r.hours*t),r.minutes&&a.setTime(a.getTime()+6e4*r.minutes*t),r.seconds&&a.setTime(a.getTime()+1e3*r.seconds*t),r.milliseconds&&a.setTime(a.getTime()+r.milliseconds*t),a}var ud=function(i,e,t){var a=t?-1:1;return(0,_.J_)(i)?dd(i,e,a):(0,ie.zB)(i+e*a,e)};function Ya(i){return Le(i.getFullYear(),i.getMonth()+1,0).getDate()}function hd(i){var e={};switch(i){case"year":e.years=1;break;case"month":e.months=1;break;case"quarter":e.months=3;break;case"week":e.weeks=1;break;case"day":e.days=1;break;case"hour":e.hours=1;break;case"minute":e.minutes=1;break;case"second":e.seconds=1;break;case"millisecond":e.milliseconds=1}return e}function Dn(i,e){return cd(i,e)&&i.getMonth()===e.getMonth()}function cd(i,e){return i&&e&&i.getFullYear()===e.getFullYear()}function Zi(i){return i&&i.getFullYear()-i.getFullYear()%100}function zi(i){return i&&i.getFullYear()-i.getFullYear()%10}function pd(i,e){var t=(i.getDay()-e+Ni)%Ni,a=new Date(i);return a.setDate(i.getDate()-t),a}function _d(i){return Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())}function vd(i){return new Date(i,0,1)}function An(i){return new Date(i,11,31)}function gd(i,e){var t=i.getDay()-e+1;return t<=0&&(t+=Ni),t}function md(i,e,t){var a=i;return(0,_.$K)(i)?((0,_.$K)(e)&&i<e&&(a=e),(0,_.$K)(t)&&i>t&&(a=t),a):i}function fd(i,e){if((0,_.$K)(i)){var t=e.getHours()-i.getHours();if(0!==t){var a=1===t||-23===t?-1:1,r=new Date(e.getTime()+36e5*a);(a>0||r.getDate()===e.getDate())&&e.setTime(r.getTime())}}}function Cd(i,e){return 60*(e.getTimezoneOffset()-i.getTimezoneOffset())*1e3}var Le=function(i){var e=new Date(...arguments);return e.setFullYear(i),e},Mt={dateUnitIntervals:Hi,convertMillisecondsToDateUnits:rd,dateToMilliseconds:function(i){var e=0;return(0,_.Kn)(i)&&(0,S.S6)(i,function(t,a){e+=Ga(t.substr(0,t.length-1),a)}),(0,_.HD)(i)&&(e=Ga(i,1)),e},getNextDateUnit:function(i,e){switch(Ua(i)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return e?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},convertDateUnitToMilliseconds:Ga,getDateUnitInterval:Ua,getDateFormatByTickInterval:function Mf(i){return Ff[Ua(i)]||""},getDatesDifferences:function(i,e){var t=0,a={year:i.getFullYear()!==e.getFullYear(),month:i.getMonth()!==e.getMonth(),day:i.getDate()!==e.getDate(),hour:i.getHours()!==e.getHours(),minute:i.getMinutes()!==e.getMinutes(),second:i.getSeconds()!==e.getSeconds(),millisecond:i.getMilliseconds()!==e.getMilliseconds()};return(0,S.S6)(a,function(r,n){n&&t++}),0===t&&0!==Cd(i,e)&&(a.hour=!0,t++),a.count=t,a},correctDateWithUnitBeginning:od,trimTime:ld,setToDayEnd:function(i){var e=ld(i);return e.setDate(e.getDate()+1),new Date(e.getTime()-1)},roundDateByStartDayHour:function(i,e){var t=this.dateTimeFromDecimal(e),a=new Date(i);return(i.getHours()===t.hours&&i.getMinutes()<t.minutes||i.getHours()<t.hours)&&a.setHours(t.hours,t.minutes,0,0),a},dateTimeFromDecimal:function(i){return{hours:Math.floor(i),minutes:i%1*60}},addDateInterval:dd,addInterval:ud,getSequenceByInterval:function(i,e,t){var r,a=[];for(a.push((0,_.J_)(i)?new Date(i.getTime()):i),r=i;r<e;)r=ud(r,t),a.push(r);return a},getDateIntervalByString:hd,sameHoursAndMinutes:function qf(i,e){return i&&e&&i.getHours()===e.getHours()&&i.getMinutes()===e.getMinutes()},sameDate:function jf(i,e){return Dn(i,e)&&i.getDate()===e.getDate()},sameMonthAndYear:Dn,sameMonth:Dn,sameYear:cd,sameDecade:function(i,e){if((0,_.$K)(i)&&(0,_.$K)(e)){var t=i.getFullYear()-i.getFullYear()%10,a=e.getFullYear()-e.getFullYear()%10;return i&&e&&t===a}},sameCentury:function(i,e){if((0,_.$K)(i)&&(0,_.$K)(e)){var t=i.getFullYear()-i.getFullYear()%100,a=e.getFullYear()-e.getFullYear()%100;return i&&e&&t===a}},getDifferenceInMonth:function(i){var e=1;return"year"===i&&(e=12),"decade"===i&&(e=120),"century"===i&&(e=1200),e},getDifferenceInMonthForCells:function(i){var e=1;return"decade"===i&&(e=12),"century"===i&&(e=120),e},getFirstYearInDecade:zi,getFirstDecadeInCentury:Zi,getShortDateFormat:function(){return"yyyy/MM/dd"},getViewFirstCellDate:function(i,e){return"month"===i?Le(e.getFullYear(),e.getMonth(),1):"year"===i?Le(e.getFullYear(),0,e.getDate()):"decade"===i?Le(zi(e),e.getMonth(),e.getDate()):"century"===i?Le(Zi(e),e.getMonth(),e.getDate()):void 0},getViewLastCellDate:function(i,e){return"month"===i?Le(e.getFullYear(),e.getMonth(),Ya(e)):"year"===i?Le(e.getFullYear(),11,e.getDate()):"decade"===i?Le(zi(e)+9,e.getMonth(),e.getDate()):"century"===i?Le(Zi(e)+90,e.getMonth(),e.getDate()):void 0},getViewDown:function(i){switch(i){case"century":return"decade";case"decade":return"year";case"year":return"month"}},getViewUp:function(i){switch(i){case"month":return"year";case"year":return"decade";case"decade":return"century"}},getLastMonthDay:Ya,getLastMonthDate:function(i){if((0,_.$K)(i))return Le(i.getFullYear(),i.getMonth()+1,0)},getFirstMonthDate:function(i){if((0,_.$K)(i))return Le(i.getFullYear(),i.getMonth(),1)},getFirstWeekDate:pd,getWeekNumber:function Rn(i,e,t){var a=gd(vd(i.getFullYear()),e),r=gd(An(i.getFullYear()),e),n=Ni-a+1,s=Math.ceil((function iC(i){var e=_d(i)-_d(vd(i.getFullYear()));return 1+Math.floor(e/Ka("day"))}(i)-n)/7);switch(t){case"fullWeek":return n===Ni&&s++,0===s?Rn(An(i.getFullYear()-1),e,t):s;case"firstDay":return n>0&&s++,(s>52&&!(7===a||7===r)||54===s)&&(s=1),s;case"firstFourDays":return n>3&&s++,s>52&&!(4===a||4===r)&&(s=1),0===s?Rn(An(i.getFullYear()-1),e,t):s}},normalizeDateByWeek:function(i,e){var t=Mt.getDatesInterval(i,e,"day"),a=new Date(i);return t>=6&&(a=new Date(a.setDate(a.getDate()+7))),a},getQuarter:nd,getFirstQuarterMonth:sd,dateInRange:function(i,e,t,a){return"date"===a&&(e=e&&Mt.correctDateWithUnitBeginning(e,"day"),t=t&&Mt.correctDateWithUnitBeginning(t,"day"),i=i&&Mt.correctDateWithUnitBeginning(i,"day")),md(i,e,t)===i},intervalsOverlap:function(i){var{firstMin:e,firstMax:t,secondMin:a,secondMax:r}=i;return e<=a&&a<=t||e>a&&e<r||e<r&&t>r},roundToHour:function(i){var e=new Date(i.getTime());return e.setHours(e.getHours()+1),e.setMinutes(0),e},normalizeDate:md,getViewMinBoundaryDate:function(i,e){var t=Le(e.getFullYear(),e.getMonth(),1);return"month"===i||(t.setMonth(0),"year"===i)||("decade"===i&&t.setFullYear(zi(e)),"century"===i&&t.setFullYear(Zi(e))),t},getViewMaxBoundaryDate:function(i,e){var t=new Date(e);return t.setDate(Ya(e)),"month"===i||(t.setMonth(11),t.setDate(Ya(t)),"year"===i)||("decade"===i&&t.setFullYear(zi(e)+9),"century"===i&&t.setFullYear(Zi(e)+99)),t},fixTimezoneGap:fd,getTimezonesDifference:Cd,makeDate:function(i){return new Date(i)},getDatesInterval:function(i,e,t){var a=e.getTime()-i.getTime(),r=Ka(t)||1;return Math.floor(a/r)},getDatesOfInterval:function(i,e,t){for(var a=[],r=new Date(i.getTime());r<e;)a.push(new Date(r.getTime())),r=this.addInterval(r,t);return a},createDateWithFullYear:Le,getMachineTimezoneName:()=>typeof Intl<"u"?Intl.DateTimeFormat().resolvedOptions().timeZone:null,sameView:function(i,e,t){return Mt[(0,Me._A)("same "+i)](e,t)}};const L=Mt;var te=T(2384),wd=T(3568),On=T(7484);function ke(i,e){for(;i.length<e;)i="0"+i;return i}var $i={3:"abbreviated",4:"wide",5:"narrow"},Vn={y:function(i,e,t){var a=i[t?"getUTCFullYear":"getFullYear"]();return 2===e&&(a%=100),ke(a.toString(),e)},M:function(i,e,t,a){var r=i[t?"getUTCMonth":"getMonth"](),n=$i[e];return n?a.getMonthNames(n,"format")[r]:ke((r+1).toString(),Math.min(e,2))},L:function(i,e,t,a){var r=i[t?"getUTCMonth":"getMonth"](),n=$i[e];return n?a.getMonthNames(n,"standalone")[r]:ke((r+1).toString(),Math.min(e,2))},Q:function(i,e,t,a){var r=i[t?"getUTCMonth":"getMonth"](),n=Math.floor(r/3),s=$i[e];return s?a.getQuarterNames(s)[n]:ke((n+1).toString(),Math.min(e,2))},E:function(i,e,t,a){var r=i[t?"getUTCDay":"getDay"]();return a.getDayNames($i[e<3?3:e])[r]},a:function(i,e,t,a){var n=i[t?"getUTCHours":"getHours"]()<12?0:1;return a.getPeriodNames($i[e])[n]},d:function(i,e,t){return ke(i[t?"getUTCDate":"getDate"]().toString(),Math.min(e,2))},H:function(i,e,t){return ke(i[t?"getUTCHours":"getHours"]().toString(),Math.min(e,2))},h:function(i,e,t){return ke((i[t?"getUTCHours":"getHours"]()%12||12).toString(),Math.min(e,2))},m:function(i,e,t){return ke(i[t?"getUTCMinutes":"getMinutes"]().toString(),Math.min(e,2))},s:function(i,e,t){return ke(i[t?"getUTCSeconds":"getSeconds"]().toString(),Math.min(e,2))},S:function(i,e,t){return ke(i[t?"getUTCMilliseconds":"getMilliseconds"]().toString(),3).substr(0,e)},x:function(i,e,t){var a=t?0:i.getTimezoneOffset(),r=a>0?"-":"+",n=Math.abs(a),o=n%60,l=ke(Math.floor(n/60).toString(),2),d=ke(o.toString(),2);return r+l+(e>=3?":":"")+(e>1||o?d:"")},X:function(i,e,t){return t||!i.getTimezoneOffset()?"Z":Vn.x(i,e,t)},Z:function(i,e,t){return Vn.X(i,e>=5?3:2,t)}},xd=function(i,e){return function(t){var a,r,n,l,s=0,o=!1,d="";if(!t)return null;if(!i)return t;var u="Z"===i[i.length-1]||"'Z'"===i.slice(-3);for(a=0;a<i.length;a++)r=Vn[n=i[a]],s++,(l=n===i[a+1])||(r&&!o&&(d+=r(t,s,u,e)),s=0),"'"!==n||l?(o||!r)&&(d+=n):o=!o,"'"===n&&l&&a++;return d}},Sd=" .,:;/\\<>()-[]\u060c",yt=function(i){var e=i&&te.Z.convertDigits(i,!1).charCodeAt(0),t=te.Z.convertDigits("0",!1).charCodeAt(0);return t<=e&&e<t+10},_C=function(i,e,t,a){var r=i[t],n=i[t+1];if(!a&&("."===r||" "===r&&". m."===i.slice(t-1,t+3)||"-"===r&&!yt(n)))return!0;var s=a&&e.some(o=>i[t]!==o[t]);return Sd.indexOf(r)<0&&a===yt(r)&&(!a||s)},vC=function(i,e){if(!yt(i[e]))for(;e>0&&!yt(i[e-1])&&("."===i[e-1]||Sd.indexOf(i[e-1])<0);)e--;return e},yd=function(i,e){return Array.isArray(i)?i.map(function(t){return(e(t)||"").toString()}):(e(i)||"").toString()},CC=/[a-zA-Z]/g,bd=function(i){var e=[],t=yd(new Date(2009,8,8,6,5,4),i),a=t.split("").map(function(o,l){return l}),r=t,n={},s=[{date:new Date(2009,8,8,6,5,4,111),pattern:"S"},{date:new Date(2009,8,8,6,5,2),pattern:"s"},{date:new Date(2009,8,8,6,2,4),pattern:"m"},{date:new Date(2009,8,8,18,5,4),pattern:"H",isDigit:!0},{date:new Date(2009,8,8,2,5,4),pattern:"h",isDigit:!0},{date:new Date(2009,8,8,18,5,4),pattern:"a",isDigit:!1},{date:new Date(2009,8,1,6,5,4),pattern:"d"},{date:[new Date(2009,8,2,6,5,4),new Date(2009,8,3,6,5,4),new Date(2009,8,4,6,5,4)],pattern:"E"},{date:new Date(2009,9,6,6,5,4),pattern:"M"},{date:new Date(1998,8,8,6,5,4),pattern:"y"}];if(r&&(s.forEach(function(o){var l=function(i,e,t,a){var r=0,n=[],s=function(o){return i[r]!==o[r]&&(void 0===a||yt(i[r])===a)};for(Array.isArray(e)||(e=[e]),r=0;r<i.length;r++)if(t.indexOf(r)<0&&e.filter(s).length){r=vC(i,r);do{if(a=yt(i[r]),!n.length&&!a&&yt(e[0][r]))break;n.push(r),t.unshift(r),r++}while(i[r]&&_C(i,e,r,a));break}return 1===n.length&&("0"===i[t[0]-1]||"\u0660"===i[t[0]-1])&&t.unshift(t[0]-1),n}(t,yd(o.date,i),e,o.isDigit),d="M"!==o.pattern||n.d?o.pattern:"L";r=function(i,e,t,a){var r,n,s;if(!yt(i[e[0]]||"0")){for(var o=Math.max(e.length<=3?3:4,t.length);e.length>o;){for(s=a[n=e.pop()],a[n]=-1,r=n+1;r<a.length;r++)a[r]--;i=i.substr(0,s)+i.substr(s+1)}for(s=(n=e[e.length-1]+1)<a.length?a[n]:n;e.length<o;){for(e.push(e[e.length-1]+1),r=n;r<a.length;r++)a[r]++;i=i.substr(0,s)+" "+i.substr(s)}}return i=function(i,e,t,a){var r=e[0],n=r<a.length?a[r]:r;return e.forEach(function(s,o){i=i.substr(0,n+o)+(t.length>1?t[o]:t)+i.substr(n+o+1)}),1===e.length&&(i=(i=i.replace("0"+t,t+t)).replace("\u0660"+t,t+t)),i}(i,e,t,a),i}(r,l,d,a),n[d]=l.length}),r=function(i,e,t,a){var r=e.split("").map(function(n,s){return t.indexOf(s)<0&&(n.match(CC)||"'"===n)?a[s]:-1});return i.split("").map(function(n,s){var o=n,l=r.indexOf(s)>=0,d=s>0&&r.indexOf(s-1)>=0,u=r.indexOf(s+1)>=0;return l&&(d||(o="'"+o),u||(o+="'")),o}).join("")}(r,t,e,a),e.length))return r},Ed=T(9107),dt={3:"abbreviated",4:"wide",5:"narrow"},Id=function(i,e){return i>2?Object.keys(dt).map(function(t){return["format","standalone"].map(function(a){return e.getMonthNames(dt[t],a).join("|")}).join("|")}).join("|"):2===i?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},xC={":":function(i,e){var t=i>1?"{".concat(i,"}"):"",a=(0,E.hr)(e.getTimeSeparator());return":"!==a&&(a="".concat(a,"|:")),"".concat(a).concat(t)},y:function(i){return 2===i?"[0-9]{".concat(i,"}"):"[0-9]+?"},M:Id,L:Id,Q:function(i,e){return i>2?e.getQuarterNames(dt[i],"format").join("|"):"0?[1-4]"},E:function(i,e){return"\\D*"},a:function(i,e){return e.getPeriodNames(dt[i<3?3:i],"format").join("|")},d:function(i){return 2===i?"3[01]|[12][0-9]|0?[1-9]":"0??[1-9]|[12][0-9]|3[01]"},H:function(i){return 2===i?"2[0-3]|1[0-9]|0?[0-9]":"0??[0-9]|1[0-9]|2[0-3]"},h:function(i){return 2===i?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},m:function(i){return 2===i?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},s:function(i){return 2===i?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},S:function(i){return"[0-9]{1,".concat(i,"}")},w:function(i){return 2===i?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},x:function(i){return 3===i?"[+-](?:2[0-3]|[01][0-9]):(?:[0-5][0-9])|Z":"[+-](?:2[0-3]|[01][0-9])(?:[0-5][0-9])|Z"}},ut=Number,Ln=function(i,e){return i.map(t=>t.toLowerCase()).indexOf(e.toLowerCase())},Td=function(i,e,t){return e>2?["format","standalone"].map(function(a){return Object.keys(dt).map(function(r){var n=t.getMonthNames(dt[r],a);return Ln(n,i)})}).reduce(function(a,r){return a.concat(r)}).filter(function(a){return a>=0})[0]:ut(i)-1},SC={y:function(i,e){var t=ut(i);return 2===e?t<30?2e3+t:1900+t:t},M:Td,L:Td,Q:function(i,e,t){return e>2?t.getQuarterNames(dt[e],"format").indexOf(i):ut(i)-1},E:function(i,e,t){var a=t.getDayNames(dt[e<3?3:e],"format");return Ln(a,i)},a:function(i,e,t){var a=t.getPeriodNames(dt[e<3?3:e],"format");return Ln(a,i)},d:ut,H:ut,h:ut,m:ut,s:ut,S:function(i,e){for(e=Math.max(e,3),i=i.slice(0,3);e<3;)i+="0",e++;return ut(i)}},ja=["y","M","d","h","m","s","S"],Pn={y:"setFullYear",M:"setMonth",L:"setMonth",a:function(i,e,t){var a=i.getHours(),r=t.h;void 0!==r&&r!==a&&a--,e||12!==a?e&&12!==a&&(a+=12):a=0,i.setHours(a)},d:"setDate",H:"setHours",h:"setHours",m:"setMinutes",s:"setSeconds",S:"setMilliseconds"},yC=function(i,e){var t=i[e];if(!t)return 0;var a=0;do{e++,a++}while(i[e]===t);return a},bC=function(i,e){for(var t="",a=0;a<e;a++)t+=i;return t},Dd=function(i,e){for(var r,t="",a="",n=[],s=function(){a&&(n.push("'".concat(a,"'")),t+="".concat((0,E.hr)(a),")"),a="")},o=0;o<i.length;o++){var l=i[o],u=xC[l];if("'"!==l||(r=!r,"'"===i[o-1]))if(u&&!r){var h=yC(i,o),p=bC(l,h);s(),n.push(p),t+="(".concat(u(h,e),")"),o+=h-1}else a||(t+="("),a+=l}return s(),IC(n)||Ed.k.warn("The following format may be parsed incorrectly: ".concat(i,".")),{patterns:n,regexp:new RegExp("^".concat(t,"$"),"i")}},EC=["d","H","h","m","s","w","M","L","Q"],IC=function(i){var e=r=>{if(!r)return!1;var n=r[0];return["y","S"].includes(n)||EC.includes(n)&&r.length<3},t=!0,a=0;return i.every((r,n,s)=>{return e(r)&&("S"!==(o=r)[0]&&2!==o.length&&(t=++a<2),e(s[n+1])||(a=0)),t;var o})},PC=["January","February","March","April","May","June","July","August","September","October","November","December"],BC=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],FC=["AM","PM"],MC=["Q1","Q2","Q3","Q4"],Ad=(i,e)=>{var t={abbreviated:3,short:2,narrow:1};return(0,S.UI)(i,a=>a.substr(0,t[e]))};const ui={getMonthNames:function(i){return Ad(PC,i)},getDayNames:function(i){return Ad(BC,i)},getQuarterNames:function(i){return MC},getPeriodNames:function(i){return FC}},kC={"af-NA":1,agq:1,ak:1,ar:6,"ar-EH":1,"ar-ER":1,"ar-KM":1,"ar-LB":1,"ar-MA":1,"ar-MR":1,"ar-PS":1,"ar-SO":1,"ar-SS":1,"ar-TD":1,"ar-TN":1,asa:1,ast:1,az:1,"az-Cyrl":1,bas:1,be:1,bem:1,bez:1,bg:1,bm:1,br:1,bs:1,"bs-Cyrl":1,ca:1,ce:1,cgg:1,ckb:6,cs:1,cy:1,da:1,de:1,dje:1,dsb:1,dua:1,dyo:1,ee:1,el:1,"en-001":1,"en-AE":6,"en-BI":1,"en-MP":1,"en-MV":5,"en-SD":6,eo:1,es:1,et:1,eu:1,ewo:1,fa:6,ff:1,"ff-Adlm":1,fi:1,fo:1,fr:1,"fr-DJ":6,"fr-DZ":6,"fr-SY":6,fur:1,fy:1,ga:1,gd:1,gl:1,gsw:1,gv:1,ha:1,hr:1,hsb:1,hu:1,hy:1,ia:1,ig:1,is:1,it:1,jgo:1,jmc:1,ka:1,kab:6,kde:1,kea:1,khq:1,kk:1,kkj:1,kl:1,"ko-KP":1,ksb:1,ksf:1,ksh:1,ku:1,kw:1,ky:1,lag:1,lb:1,lg:1,ln:1,lrc:6,lt:1,lu:1,lv:1,"mas-TZ":1,mfe:1,mg:1,mgo:1,mi:1,mk:1,mn:1,ms:1,mua:1,mzn:6,naq:1,nds:1,nl:1,nmg:1,nnh:1,no:1,nus:1,nyn:1,os:1,pcm:1,pl:1,ps:6,"pt-AO":1,"pt-CH":1,"pt-CV":1,"pt-GQ":1,"pt-GW":1,"pt-LU":1,"pt-ST":1,"pt-TL":1,"qu-BO":1,"qu-EC":1,rm:1,rn:1,ro:1,rof:1,ru:1,rw:1,rwk:1,sah:1,sbp:1,sc:1,se:1,ses:1,sg:1,shi:1,"shi-Latn":1,si:1,sk:1,sl:1,smn:1,so:1,"so-DJ":6,sq:1,sr:1,"sr-Latn":1,sv:1,sw:1,"ta-LK":1,"ta-MY":1,teo:1,tg:1,"ti-ER":1,tk:1,to:1,tr:1,tt:1,twq:1,tzm:1,uk:1,uz:1,"uz-Arab":6,"uz-Cyrl":1,vai:1,"vai-Latn":1,vi:1,vun:1,wae:1,wo:1,xog:1,yav:1,yi:1,yo:1,zgh:1};var hi=T(6948),NC=/[\u200E\u200F]/g,HC=/[\u202F]/g,kt=i=>e=>{if(!i.timeZoneName){var t=e.getFullYear(),a=String(t).length<3,n=new Date(Date.UTC(a?t+400:t,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return a&&n.setFullYear(t),Fn(n,(0,f.l)({timeZone:"UTC"},i))}return Fn(e,i)},Bn={},ZC=i=>{var e=hi.Z.locale()+"/"+JSON.stringify(i);return Bn[e]||(Bn[e]=new Intl.DateTimeFormat(hi.Z.locale(),i).format),Bn[e]};function Fn(i,e){return ZC(e)(i).replace(NC,"").replace(HC," ")}var i,Mn=i=>new Intl.NumberFormat(hi.Z.locale()).format(i),zC=(i={},e=>{if(!(e in i)){if("0"===Mn(0))return i[e]=!1,!1;i[e]={};for(var t=0;t<10;++t)i[e][Mn(t)]=t}return i[e]}),qa=i=>{var e=zC(hi.Z.locale());return e?i.split("").map(t=>t in e?String(e[t]):t).join(""):i},Rd=i=>i.replace(/(\D)0+(\d)/g,"$1$2"),kn=i=>i.replace("d\u2019","de "),Nn={day:{day:"numeric"},dayofweek:{weekday:"long"},longdate:{weekday:"long",year:"numeric",month:"long",day:"numeric"},longdatelongtime:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},longtime:{hour:"numeric",minute:"numeric",second:"numeric"},month:{month:"long"},monthandday:{month:"long",day:"numeric"},monthandyear:{year:"numeric",month:"long"},shortdate:{},shorttime:{hour:"numeric",minute:"numeric"},shortyear:{year:"2-digit"},year:{year:"numeric"}};Object.defineProperty(Nn,"shortdateshorttime",{get:function(){var i=Intl.DateTimeFormat(hi.Z.locale()).resolvedOptions();return{year:i.year,month:i.month,day:i.day,hour:"numeric",minute:"numeric"}}});var WC=i=>"string"==typeof i&&Nn[i.toLowerCase()],Od={standalone:function(i,e){var t=new Date(1999,i,13,1);return kt({month:e})(t)},format:function(i,e){var t=new Date(0,i,13,1),r=kn(kt({day:"numeric",month:e})(t)).split(" ").filter(n=>n.indexOf("13")<0);return 1===r.length?r[0]:2===r.length?r[0].length>r[1].length?r[0]:r[1]:Od.standalone(i,e)}};const KC={engine:function(){return"intl"},getMonthNames:function(i,e){var t={wide:"long",abbreviated:"short",narrow:"narrow"}[i||"wide"];return e="format"===e?e:"standalone",Array.apply(null,new Array(12)).map((a,r)=>Od[e](r,t))},getDayNames:function(i){var t;return t={wide:"long",abbreviated:"short",short:"narrow",narrow:"narrow"}[i||"wide"],Array.apply(null,new Array(7)).map((a,r)=>kt({weekday:t})(new Date(0,0,r)))},getPeriodNames:function(){var i=kt({hour:"numeric",hour12:!0});return[1,13].map(e=>{var t=Mn(1),a=i(new Date(0,0,1,e)).split(t);return 2!==a.length?"":(a[0].length>a[1].length?a[0]:a[1]).trim()})},format:function(i,e){if(i){if(!e)return i;"function"!=typeof e&&!e.formatter&&(e=e.type||e);var t=WC(e);if(t)return kt(t)(i);var a=typeof e;return e.formatter||"function"===a||"string"===a?this.callBase.apply(this,arguments):kt(e)(i)}},parse:function(i,e){var t;return e&&!e.parser&&"string"==typeof i&&(i=kn(i),t=a=>kn(this.format(a,e))),this.callBase(i,t||e)},_parseDateBySimpleFormat:function(i,e){i=qa(i);var t=this.getFormatParts(e),a=i.split(/\D+/).filter(s=>s.length>0);if(t.length===a.length){var r=this._generateDateArgs(t,a),n=s=>{var l,o=(l=r,new Date(l.year,l.month,l.day,(l.hours+(s?12:0))%24,l.minutes,l.seconds));if(((i,e)=>Rd(i)===Rd(e))(qa(this.format(o,e)),i))return o};return n(!1)||n(!0)}},_generateDateArgs:function(i,e){var t=new Date,a={year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hours:0,minutes:0,seconds:0};return i.forEach((r,n)=>{var o=parseInt(e[n],10);"month"===r&&(o-=1),a[r]=o}),a},formatUsesMonthName:function(i){return"object"!=typeof i||i.type||i.format?this.callBase.apply(this,arguments):"long"===i.month},formatUsesDayName:function(i){return"object"!=typeof i||i.type||i.format?this.callBase.apply(this,arguments):"long"===i.weekday},getTimeSeparator:function(){return qa(Fn(new Date(2001,1,1,11,11),{hour:"numeric",minute:"numeric",hour12:!1})).replace(/\d/g,"")},getFormatParts:function(i){if("string"==typeof i)return this.callBase(i);var e=(0,f.l)({},Nn[i.toLowerCase()]),t=new Date(2001,2,4,5,6,7),a=kt(e)(t);return a=qa(a),[{name:"year",value:1},{name:"month",value:3},{name:"day",value:4},{name:"hours",value:5},{name:"minutes",value:6},{name:"seconds",value:7}].map(r=>({name:r.name,index:a.indexOf(r.value)})).filter(r=>r.index>-1).sort((r,n)=>r.index-n.index).map(r=>r.name)}};var UC=typeof Intl<"u",Hn={shortdate:"M/d/y",shorttime:"h:mm a",longdate:"EEEE, MMMM d, y",longtime:"h:mm:ss a",monthandday:"MMMM d",monthandyear:"MMMM y",quarterandyear:"QQQ y",day:"d",year:"y",shortdateshorttime:"M/d/y, h:mm a",longdatelongtime:"EEEE, MMMM d, y, h:mm:ss a",month:"LLLL",shortyear:"yy",dayofweek:"EEEE",quarter:"QQQ",hour:"HH",minute:"mm",second:"ss",millisecond:"SSS","datetime-local":"yyyy-MM-ddTHH':'mm':'ss"},YC={year:["y","yy","yyyy"],day:["d","dd"],month:["M","MM","MMM","MMMM"],hours:["H","HH","h","hh","ah"],minutes:["m","mm"],seconds:["s","ss"],milliseconds:["S","SS","SSS"]},Vd=(0,wd.Z)({engine:function(){return"base"},_getPatternByFormat:function(i){return Hn[i.toLowerCase()]},_expandPattern:function(i){return this._getPatternByFormat(i)||i},formatUsesMonthName:function(i){return-1!==this._expandPattern(i).indexOf("MMMM")},formatUsesDayName:function(i){return-1!==this._expandPattern(i).indexOf("EEEE")},getFormatParts:function(i){var e=this._getPatternByFormat(i)||i,t=[];return(0,S.S6)(e.split(/\W+/),(a,r)=>{(0,S.S6)(YC,(n,s)=>{s.includes(r)&&t.push(n)})}),t},getMonthNames:function(i){return ui.getMonthNames(i)},getDayNames:function(i){return ui.getDayNames(i)},getQuarterNames:function(i){return ui.getQuarterNames(i)},getPeriodNames:function(i){return ui.getPeriodNames(i)},getTimeSeparator:function(){return":"},is24HourFormat:function(i){for(var e=new Date(2017,0,20,11,0,0,0),t=new Date(2017,0,20,23,0,0,0),a=this.format(e,i),r=this.format(t,i),n=0;n<a.length;n++)if(a[n]!==r[n])return!isNaN(parseInt(a[n]))},format:function(i,e){if(i){if(!e)return i;var t;if("function"==typeof e)t=e;else if(e.formatter)t=e.formatter;else if((0,_.HD)(e=e.type||e))return e=Hn[e.toLowerCase()]||e,te.Z.convertDigits(xd(e,this)(i));if(t)return t(i)}},parse:function(i,e){var a,r,t=this;if(i){if(!e)return this.parse(i,"shortdate");if(e.parser)return e.parser(i);if("string"!=typeof e||Hn[e.toLowerCase()]){r=s=>{var o=t.format(s,e);return te.Z.convertDigits(o,!0)};try{a=bd(r)}catch{}}else a=e;if(a)return i=te.Z.convertDigits(i,!0),function(i,e){var t=Dd(i,e);return function(a){var r=t.regexp.exec(a);if(r){var n=new Date,s=new Date(n.getFullYear(),0,1),o=function(i){return i.map(function(e){return"'"===e[0]?"":"H"===e[0]?"h":e[0]})}(t.patterns),l=function(i){var e=i.map(function(t){return ja.indexOf(t)});return Math.max.apply(Math,e)}(o),d=function(i){var e=i.filter(function(t){return ja.indexOf(t)<0});return ja.concat(e)}(o),u={};return d.forEach(function(h,p){if(h&&!(p<ja.length&&p>l)){var v=o.indexOf(h);v>=0?function(i,e,t,a,r){var n=e[0],s=Pn[n],o=SC[n];if(s&&o){var l=o(t,e.length,a);r[e]=l,i[s]?i[s](l):s(i,l,r)}}(s,t.patterns[v],r[v+1],e,u):function(i,e,t){var a=Pn[e],n=t["g"+a.substr(1)]();i[a](n)}(s,h,n)}}),s}return null}}(a,this)(i);On.Z.log("W0012");var n=new Date(i);if(n&&!isNaN(n.getTime()))return n}},firstDayOfWeekIndex:function(){var i=hi.Z.getValueByClosestLocale(e=>kC[e]);return void 0===i?0:i}});UC&&Vd.inject(KC);const H=Vd;T(7987);const Ld=(0,wd.Z)({format:function(i,e){var t=(0,_.HD)(e)&&""!==e||(0,_.PO)(e)||(0,_.mf)(e),a=(0,_.kE)(i)||(0,_.J_)(i);return t&&a?(0,_.mf)(e)?e(i):((0,_.HD)(e)&&(e={type:e}),(0,_.kE)(i)?te.Z.format(i,e):(0,_.J_)(i)?H.format(i,e):void 0):(0,_.$K)(i)?i.toString():""},getTimeFormat:function(i){return i?"longtime":"shorttime"},_normalizeFormat:function(i){return Array.isArray(i)?1===i.length?i[0]:function(e){return i.map(function(t){return H.format(e,t)}).join(" ")}:i},getDateFormatByDifferences:function(i,e){var t=[],a=e&&i.millisecond&&!(i.year||i.month||i.day);return a?t.push(function(r){return r.getSeconds()+r.getMilliseconds()/1e3+"s"}):i.millisecond&&t.push("millisecond"),(i.hour||i.minute||!a&&i.second)&&t.unshift(this.getTimeFormat(i.second)),i.year&&i.month&&i.day?e&&"month"===e?"monthandyear":(t.unshift("shortdate"),this._normalizeFormat(t)):i.year&&i.month?"monthandyear":i.year&&i.quarter?"quarterandyear":i.year?"year":i.quarter?"quarter":i.month&&i.day?(t.unshift(e?function(r){return H.getMonthNames("abbreviated")[r.getMonth()]+" "+H.format(r,"day")}:"monthandday"),this._normalizeFormat(t)):i.month?"month":i.day?(t.unshift(e?"day":function(r){return H.format(r,"dayofweek")+", "+H.format(r,"day")}),this._normalizeFormat(t)):this._normalizeFormat(t)},getDateFormatByTicks:function(i){var e,t,a;if(i.length>1)for(e=L.getDatesDifferences(i[0],i[1]),a=1;a<i.length-1;a++)t=L.getDatesDifferences(i[a],i[a+1]),e.count<t.count&&(e=t);else e={year:!0,month:!0,day:!0,hour:i[0].getHours()>0,minute:i[0].getMinutes()>0,second:i[0].getSeconds()>0,millisecond:i[0].getMilliseconds()>0};return this.getDateFormatByDifferences(e)},getDateFormatByTickInterval:function(i,e,t){var a,r=function(o,l,d){switch(l){case"year":case"quarter":o.month=d;case"month":o.day=d;case"week":case"day":o.hour=d;case"hour":o.minute=d;case"minute":o.second=d;case"second":o.millisecond=d}};t=(0,_.HD)(t)?t.toLowerCase():t;var o,l,d,n=L.getDatesDifferences(i,e);return i!==e&&(o=n,l=i>e?e:i,!(d=i>e?i:e).getMilliseconds()&&d.getSeconds()?d.getSeconds()-l.getSeconds()==1&&(o.millisecond=!0,o.second=!1):!d.getSeconds()&&d.getMinutes()?d.getMinutes()-l.getMinutes()==1&&(o.second=!0,o.minute=!1):!d.getMinutes()&&d.getHours()?d.getHours()-l.getHours()==1&&(o.minute=!0,o.hour=!1):!d.getHours()&&d.getDate()>1?d.getDate()-l.getDate()==1&&(o.hour=!0,o.day=!1):1===d.getDate()&&d.getMonth()?d.getMonth()-l.getMonth()==1&&(o.day=!0,o.month=!1):!d.getMonth()&&d.getFullYear()&&d.getFullYear()-l.getFullYear()==1&&(o.month=!0,o.year=!1)),r(n,L.getDateUnitInterval(n),!0),r(n,a=L.getDateUnitInterval(t||"second"),!1),n[{week:"day"}[a]||a]=!0,this.getDateFormatByDifferences(n)}});var X=T(7771),bt=T(8027),Wi=T(6225),z=T(8961),Pd="dx-loadpanel-indicator",Bd="dx-loadpanel-message",Fd=Wi.Z.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{escape:E.ZT})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{message:y.Z.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:()=>(0,z.x2)(),options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:()=>(0,z.dC)(),options:{width:"auto",height:"auto"}}])},_init(){this.callBase.apply(this,arguments)},_render(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._setWrapperAria()},_setWrapperAria(){var{message:i}=this.option(),e=(0,z.yj)()?i:null,t=i?e:y.Z.format("Loading");this.setAria({role:"alert",label:t},this.$wrapper())},_renderContentImpl(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=(0,c.Z)("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show(){var i=this.option("delay");if(!i)return this.callBase();var e=(0,x.BH)(),t=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(()=>{t().done(()=>{e.resolve()})},i),e.promise()},_hide(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout(){clearTimeout(this._showTimeout)},_renderMessage(){if(this._$loadPanelContentWrapper){var i=this.option("message");if(i){var e=(0,c.Z)("<div>").addClass(Bd).text(i);this._$loadPanelContentWrapper.append(e)}}},_renderLoadIndicator(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=(0,c.Z)("<div>").addClass(Pd).appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,bt.Z,{indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent(){this.$content().find(".".concat(Bd)).remove(),this.$content().find(".".concat(Pd)).remove(),delete this._$indicator},_togglePaneVisible(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged(i){switch(i.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._setWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(i)}},_dispose(){this._clearShowTimeout(),this.callBase()}});(0,X.Z)("dxLoadPanel",Fd);const Md=Fd;var ew=["year","month","day"],tw=["year","month","day","hour","minute"],Zn=function(i){return"date"===i||"datetime"===i},zn=function(i){var e,t=[],a=["year","month","day","hour","minute","second"],r=i.headerFilter&&i.headerFilter.groupInterval,n="quarter"===r?"month":r;return Zn(i.dataType)&&null!==r?(t="datetime"===i.dataType?tw:ew,(e=a.indexOf(n))>=0&&(t=a.slice(0,e)).push(r),t):(0,_.$K)(r)?Array.isArray(r)?r:[r]:void 0};const Nt=function(){var i=function(r,n){var s=r.dataField||r.selector;return"search"===n&&(s=r.displayField||r.calculateDisplayValue||s),s},e=function(r,n){var s,o,l,u,d=i(this,n);if(Array.isArray(r)&&(0,_.$K)(r[0])&&(0,_.$K)(r[1]))return o=[d,">=",r[0]],l=[d,"<=",r[1]],Zn(this.dataType)&&(u=r[1]).getHours()+u.getMinutes()+u.getSeconds()+u.getMilliseconds()<1&&(s=new Date(r[1].getTime()),"date"===this.dataType&&s.setDate(r[1].getDate()+1),l=[d,"<",s]),[o,"and",l]},t=function(r,n,s){var o,l,d,p,u=(0,_.J_)(p=r)?[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]:(0,S.UI)((""+p).split("/"),function(v,g){return 1===g?Number(v)-1:Number(v)}),h=i(this,s);switch("headerFilter"===s?d=zn(this)[u.length-1]:"datetime"===this.dataType&&(d="minute"),d){case"year":o=new Date(u[0],0,1),l=new Date(u[0]+1,0,1);break;case"month":o=new Date(u[0],u[1],1),l=new Date(u[0],u[1]+1,1);break;case"quarter":o=new Date(u[0],3*u[1],1),l=new Date(u[0],3*u[1]+3,1);break;case"hour":o=new Date(u[0],u[1],u[2],u[3]),l=new Date(u[0],u[1],u[2],u[3]+1);break;case"minute":o=new Date(u[0],u[1],u[2],u[3],u[4]),l=new Date(u[0],u[1],u[2],u[3],u[4]+1);break;case"second":o=new Date(u[0],u[1],u[2],u[3],u[4],u[5]),l=new Date(u[0],u[1],u[2],u[3],u[4],u[5]+1);break;default:o=new Date(u[0],u[1],u[2]),l=new Date(u[0],u[1],u[2]+1)}switch(n){case"<":return[h,"<",o];case"<=":return[h,"<",l];case">":return[h,">=",l];case">=":return[h,">=",o];case"<>":return[[h,"<",o],"or",[h,">=",l]];default:return[[h,">=",o],"and",[h,"<",l]]}},a=function(r,n,s){var o=i(this,s),l=zn(this);if("headerFilter"===s&&l&&(0,_.$K)(r)){var d=(""+r).split("/"),u=Number(d[d.length-1]);return[[o,">=",u],"and",[o,"<",u+l[d.length-1]]]}return[o,n||"=",r]};return{defaultCalculateFilterExpression:function(r,n,s){var o=this,l=i(o,s),d=o.calculateDisplayValue&&"search"===s,u=d&&o.lookup&&o.lookup.dataType||o.dataType,h=null;if("headerFilter"!==s&&"filterBuilder"!==s||null!==r)if("string"!==u||o.lookup&&!d){if("between"===n)return e.apply(o,[r,s]);if(Zn(u)&&(0,_.$K)(r))return t.apply(o,arguments);if("number"===u)return a.apply(o,arguments);h=[l,n||"=",r]}else h=[l,n||"contains",r];else h=[l,n||"=",null],"string"===u&&(h=[h,"="===n?"or":"and",[l,n||"=",""]]);return h},getGroupInterval:zn}}();var kd="virtual",Nd="scrolling.mode",uw={year:i=>i&&i.getFullYear(),month:i=>i&&i.getMonth()+1,day:i=>i&&i.getDate(),quarter:i=>i&&Math.floor(i.getMonth()/3)+1,hour:i=>i&&i.getHours(),minute:i=>i&&i.getMinutes(),second:i=>i&&i.getSeconds()},hw=function(){var e=this.calculateCellValue(arguments[1]);if(!(0,_.$K)(e))return null;if(Hd(this.dataType))return uw[arguments[0]](e);if("number"===this.dataType){var a=arguments[0];return Math.floor(Number(e)/a)*a}},cw=function(i,e){return(0,_.mf)(i)&&(0,_.mf)(e)&&i.originalCallback&&e.originalCallback?i.originalCallback===e.originalCallback&&i.columnIndex===e.columnIndex:i===e};function Hd(i){return"date"===i||"datetime"===i}var Zd=function(i){i.get(0).textContent="\xa0"},$n=function(i){for(var e=(0,lt.G5)(i=i||[]),t=0;t<i.length;t++)i&&i[t]&&void 0!==i[t].isExpanded&&(e[t].isExpanded=i[t].isExpanded),i&&i[t]&&void 0!==i[t].groupInterval&&(e[t].groupInterval=i[t].groupInterval);return e},zd=function(i,e){var t=Ld.format(i,e.format)||i&&i.toString()||"",a={value:i,valueText:e.getDisplayFormat?e.getDisplayFormat(t):t,target:e.target||"row",groupInterval:e.groupInterval};return e.customizeText?e.customizeText.call(e,a):a.valueText},$d=function(i,e){var t=i.displayFormat||i.columnCaption&&e["".concat(i.summaryType,"OtherColumn")]||e[i.summaryType];return zd(i.value,{format:i.valueFormat,getDisplayFormat:a=>t?(0,qe.WU)(t,a,i.columnCaption):a,customizeText:i.customizeText})},Wd=function(i){var e=i.data&&i.data(),t=e&&e.dxComponents,a=t&&t[0];return a&&e[a]};const O={renderNoDataText(i){if(i=i||this.element()){var e=this.addWidgetPrefix("nodata"),t=i.find(".".concat(e)).last(),a=this._dataController.isEmpty(),r=this._dataController.isLoading();t.length||(t=(0,c.Z)("<span>").addClass(e)),t.parent().is(i)||t.appendTo(i),a&&!r?t.removeClass("dx-hidden").text(this._getNoDataText()):t.addClass("dx-hidden")}},renderLoadPanel(i,e,t){var a;this._loadPanel&&this._loadPanel.$element().remove(),(a=this.option("loadPanel"))&&("auto"===a.enabled?!t:a.enabled)?(a=(0,f.l)({shading:!1,message:a.text,container:e},a),this._loadPanel=this._createComponent((0,c.Z)("<div>").appendTo(e),Md,a)):this._loadPanel=null},calculateLoadPanelPosition(i){var e=(0,c.Z)((0,B.Jj)());return(0,b.Cr)(i)>(0,b.Cr)(e)?{of:e,boundary:i,collision:"fit"}:{of:i}},getIndexByKey(i,e,t){var a=-1;if(void 0!==i&&Array.isArray(e)){t=arguments.length<=2?"key":t;for(var r=0;r<e.length;r++){var n=(0,_.$K)(t)?e[r][t]:e[r];if((0,E.bY)(i,n)){a=r;break}}}return a},combineFilters(i,e){var t,a=[];e=e||"and";for(var r=0;r<i.length;r++)if(i[r]){if(1===(null===(t=i[r])||void 0===t?void 0:t.length)&&"!"===i[r][0]){if("and"===e)return["!"];if("or"===e)continue}a.length&&a.push(e),a.push(i[r])}if(1===a.length&&(a=a[0]),a.length)return a},checkChanges(i,e){for(var t=0,a=0;a<e.length;a++)i[e[a]]&&t++;return i.length&&i.length===t},equalFilterParameters:function i(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!i(e[a],t[a]))return!1;return!0}return(0,_.mf)(e)&&e.columnIndex>=0&&(0,_.mf)(t)&&t.columnIndex>=0?e.columnIndex===t.columnIndex&&(0,q.Ex)(e.filterValue)===(0,q.Ex)(t.filterValue)&&(0,q.Ex)(e.selectedFilterOperation)===(0,q.Ex)(t.selectedFilterOperation):(0,q.Ex)(e)==(0,q.Ex)(t)},proxyMethod(i,e,t){i[e]||(i[e]=function(){var a=this._dataSource;return a?a[e].apply(a,arguments):t})},formatValue:zd,getFormatOptionsByColumn:(i,e)=>({format:i.format,getDisplayFormat:i.getDisplayFormat,customizeText:i.customizeText,target:e,trueText:i.trueText,falseText:i.falseText}),getDisplayValue:(i,e,t,a)=>i.displayValueMap&&void 0!==i.displayValueMap[e]?i.displayValueMap[e]:i.calculateDisplayValue&&t&&"group"!==a?i.calculateDisplayValue(t):!i.lookup||"group"===a&&(i.calculateGroupValue||i.calculateDisplayValue)?e:i.lookup.calculateCellValue(e),getGroupRowSummaryText(i,e){for(var t="(",a=0;a<i.length;a++)t+=(a>0?", ":"")+$d(i[a],e);return t+")"},getSummaryText:$d,normalizeSortingInfo:$n,getFormatByDataType(i){switch(i){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(i,e){var t=[],a=i.dataField||i.name,r=Nt.getGroupInterval(i);return r?((0,S.S6)(r,(n,s)=>{t.push(e?{selector:a,groupInterval:s,isExpanded:n<r.length-1}:hw.bind(i,s))}),t):(e?t=[{selector:a,isExpanded:!1}]:(t=function(n){var s=i.calculateCellValue(n);return(void 0===s||""===s)&&(s=null),s},i.sortingMethod&&(t=[{selector:t,compare:i.sortingMethod.bind(i)}])),t)},equalSortParameters(i,e,t){if(i=$n(i),e=$n(e),Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(var a=0;a<i.length;a++)if(!cw(i[a].selector,e[a].selector)||i[a].desc!==e[a].desc||i[a].groupInterval!==e[a].groupInterval||!t&&Boolean(i[a].isExpanded)!==Boolean(e[a].isExpanded))return!1;return!0}return(!i||!i.length)==(!e||!e.length)},getPointsByColumns(i,e,t,a){for(var s,o,u,r=i.length,n=!1,l=a||0,d=[],h=0;h<=r;h++){h<r&&(o=(s=i.eq(h)).offset(),u="rtl"===s.css("direction"));var p={index:l,x:o?o.left+(!t&&u^h===r?(0,ne.l)(s[0]).width:0):0,y:o?o.top+(t&&h===r?(0,ne.l)(s[0]).height:0):0,columnIndex:l};if(!t&&h>0){var v=i.eq(h-1).offset();v.top<p.y&&(p.y=v.top)}e&&(n=e(p)),n||d.push(p),l++}return d},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(i,e){var t=(0,c.Z)(i);if(!(0,_.$K)(e.value)||e.data&&e.data.isContinuation||e.row.isNewRow)Zd(t);else{var a=e.component.getView("rowsView");t.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,c.Z)("<div>").addClass(e.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(t),a.setAria("label",a.localize(e.value?"dxDataGrid-ariaCollapse":"dxDataGrid-ariaExpand"),t)}}}),setEmptyText:Zd,isDateType:Hd,getSelectionRange(i){try{if(i)return{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd}}catch{}return{}},setSelectionRange(i,e){try{i&&i.setSelectionRange&&i.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}},focusAndSelectElement(i,e){var t=e.is(":focus");C.Z.trigger(e,"focus");var a=i.option("editing.selectTextOnEditStart"),r=e.get(0);if(!t&&a&&e.is(".dx-texteditor-input")&&!e.is("[readonly]")){var n=Wd(e.closest(".dx-texteditor"));(0,x.gx)(n&&n._loadItemDeferred).done(()=>{r.select()})}},getWidgetInstance:Wd,getLastResizableColumnIndex(i,e){var a,t=i.some(o=>o&&!o.command&&!o.fixed&&!1!==o.allowResizing);for(a=i.length-1;i[a];a--){var r=i[a];if(!(r.command||r.fixed||"adaptiveHidden"===(e&&e[a])||t&&!1===r.allowResizing))break}return a},isElementInCurrentGrid:(i,e)=>!(!e||!e.length)&&e.closest(".".concat(i.getWidgetContainerClass())).parent().is(i.component.$element()),isVirtualRowRendering(i){var e=i.option("scrolling.rowRenderingMode"),t=i.option(Nd)===kd,a="infinite"===i.option(Nd);return!(!1!==i.option("scrolling.legacyMode")||!t&&!a)||e===kd},getPixelRatio:i=>i.devicePixelRatio||1,getContentHeightLimit(i){return i.mozilla?8e6:15e6/this.getPixelRatio((0,B.Jj)())},normalizeLookupDataSource(i){var e;return i.items?e=i.items:(0,_.mf)(e=i.dataSource)&&!We.Z.isWrapped(e)&&(e=e({})),(0,ki.aN)(e)},getWrappedLookupDataSource(i,e,t){if(!e)return[];var a=this.normalizeLookupDataSource(i.lookup);if(i.calculateCellValue!==i.defaultCalculateCellValue)return a;var s,o,l,r=e.remoteOperations().groupPaging,n=i.displayField&&(0,_.HD)(i.displayField),d=(h,p)=>{var v,g=null!==(v=p.skip)&&void 0!==v?v:0;return h.slice(g,p.take?g+p.take:h.length)},u=(0,V.Z)((0,V.Z)({},a),{__dataGridSourceFilter:t,load:h=>{var v,g,m,p=new x.BH;return(v=h,g=function _w(i){return Array.isArray(i)||(i=[i]),i.map((e,t)=>(0,_.HD)(e)?{selector:e,isExpanded:t<i.length-1}:e)}(n?[i.dataField,i.displayField]:i.dataField),m=new x.BH,s&&(!r||v.skip===l&&v.take===o)?m.resolve(d(s,v)):(l=v.skip,o=v.take,e.load({filter:t,group:g,take:r?v.take:void 0,skip:r?v.skip:void 0}).done(I=>{s=I,m.resolve(r?I:d(I,v))}).fail(m.fail)),m).done(v=>{if(0!==v.length){var g=this.combineFilters(v.flatMap(w=>w.key).map(w=>[i.lookup.valueExpr,w]),"or");new St.o((0,V.Z)((0,V.Z)((0,V.Z)({},a),h),{filter:this.combineFilters([g,h.filter],"and"),paginate:!1})).load().done(p.resolve).fail(p.fail)}else p.resolve([])}).fail(p.fail),p},key:i.lookup.valueExpr,byKey(h){var p=(0,x.BH)();return this.load({filter:[i.lookup.valueExpr,"=",h]}).done(v=>{p.resolve(v[0])}),p.promise()}});return u},logHeaderFilterDeprecatedWarningIfNeed(i){var e=i._logDeprecatedOptionWarning.bind(i);(0,_.$K)(i.option("headerFilter.allowSearch"))&&e("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),(0,_.$K)(i.option("headerFilter.searchTimeout"))&&e("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});var t="dxPivotGrid"===i.NAME?"dataSource.fields":"columns",a=i.option(t);if(Array.isArray(a)){var r=n=>{n.forEach(s=>{var o,l=s.headerFilter||{};(0,_.$K)(l.allowSearch)&&e("".concat(t,"[].headerFilter.allowSearch"),{since:"23.1",alias:"".concat(t,"[].headerFilter.search.enabled")}),(0,_.$K)(l.searchMode)&&e("".concat(t,"[].headerFilter.searchMode"),{since:"23.1",alias:"".concat(t,"[].headerFilter.search.mode")}),null!==(o=s.columns)&&void 0!==o&&o.length&&r(s.columns)})};r(a)}}};var Kd="scroll-container",Ki="dx-row",Wn="dx-group-row",Kn="dx-master-detail-row",Gd="0.0001px",Gn="dxCellHintVisible",Iw={render(i){i.container.append(i.content)}},Xa=function(i){return"auto"===i?"":(0,_.kE)(i)?"".concat(i,"px"):i},Ud=function(i,e,t){i.style.width=i.style.maxWidth="auto"===e.width?"":t},Aw=function(i){i.resolve()},Yd=i=>"number"==typeof i?"".concat(i.toFixed(3),"px"):"adaptiveHidden"===i?Gd:i;class Gi extends(xf(J.View)){init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnChooserController=this.getController("columnChooser"),this._editorFactoryController=this.getController("editorFactory"),this._selectionController=this.getController("selection"),this._columnChooserView=this.getView("columnChooserView"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}dispose(){var e,t;if((0,B.Ym)()){var a=(0,B.Jj)();null===(e=this._templateTimeouts)||void 0===e||e.forEach(r=>a.clearTimeout(r)),null===(t=this._templateTimeouts)||void 0===t||t.clear()}}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":this._invalidate(!0,!0),e.handled=!0;break;case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this._invalidate(!0,!0),e.handled=!0}}_createScrollableOptions(){var e=this.option("scrolling"),t=this.option("scrolling.useNative"),a=(0,f.l)({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===t&&(t=!0),"auto"===t?(delete a.useNative,delete a.useSimulatedScrollbar):(a.useNative=!!t,a.useSimulatedScrollbar=!t),a}_updateCell(e,t){t.rowType&&this._cellPrepared(e,t)}_needToSetCellWidths(){return this.option("columnAutoWidth")}_createCell(e){var{column:t}=e,a=t.alignment||(0,ne.q)(this.option("rtlEnabled")),r=this._needToSetCellWidths(),n=Z.Z.createElement("td");n.style.textAlign=a;var s=(0,c.Z)(n);return"data"===e.rowType&&t.headerId&&!t.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",t.headerId,s),t.cssClass&&s.addClass(t.cssClass),Array.isArray(t.elementAttr)&&t.elementAttr.forEach(o=>{var{name:l,value:d}=o;s.attr(l,d)}),"expand"===t.command&&(s.addClass(t.cssClass),s.addClass(this.addWidgetPrefix("group-space"))),t.colspan>1?s.attr("colSpan",t.colspan):!t.isBand&&"auto"!==t.visibleWidth&&r&&((t.width||t.minWidth)&&(n.style.minWidth=Xa(t.minWidth||t.width)),t.width&&Ud(n,t,Xa(t.width))),s}_createRow(e,t){var a=(0,c.Z)("<".concat(t=t||"tr",">")).addClass(Ki);return"tr"===t&&this.setAria("role","row",a),a}_isAltRow(e){return e&&e.dataIndex%2==1}_createTable(e,t){var a=(0,c.Z)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!t?(a.attr("id","dx-".concat(new ve.Z)).append(this._createColGroup(e)),oe.Z.safari&&a.append((0,c.Z)("<thead>").append("<tr>")),this.setAria("role","presentation",a)):this.setAria("hidden",!0,a),this.setAria("role","presentation",(0,c.Z)("<tbody>").appendTo(a)),t)return a;oe.Z.mozilla&&C.Z.on(a,"mousedown","td",n=>{n.ctrlKey&&n.preventDefault()}),this.option("cellHintEnabled")&&C.Z.on(a,"mousemove",".dx-row > td",this.createAction(n=>{var s=n.event,o=(0,c.Z)(s.target),l=(0,c.Z)(s.currentTarget),d=l.parent(),u=this._columnsController.getVisibleColumns(),h=d.data("options"),p=l.index(),v=h&&h.cells&&h.cells[p],g=v?v.column:u[p],m=d.hasClass("dx-header-row"),w=d.hasClass("dx-data-row"),I=d.hasClass(Kn),A=d.hasClass(Wn),F=d.hasClass(this.addWidgetPrefix("filter-row"));I||F||w&&v&&(h.isEditing||v.isEditing||g?.showEditorAlways)||w&&(!g||g.cellTemplate)||m&&(!g||g.headerCellTemplate)||A&&(!g||g.groupIndex&&g.groupCellTemplate)||(o.data(Gn)&&(o.removeAttr("title"),o.data(Gn,!1)),o[0].scrollWidth-o[0].clientWidth>0&&!(0,_.$K)(o.attr("title"))&&(o.attr("title",o.text()),o.data(Gn,!0)))}));var r=n=>{var s=(0,c.Z)(n.currentTarget),o=(0,c.Z)(n.target).closest(".".concat("dx-field-item-content")),l=s.parent(),d=l.data("options"),u=d&&d.cells&&d.cells[s.index()];if(s.closest("table").is(n.delegateTarget)){var h=(0,f.l)({},u,{cellElement:(0,j.uD)(s),event:n,eventType:n.type});if(h.rowIndex=this.getRowIndex(l),o.length){var p=o.data("dx-form-item");p.column&&(h.column=p.column,h.columnIndex=this._columnsController.getVisibleIndex(h.column.index))}return h}};return C.Z.on(a,"mouseover",".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellHoverChanged",s)}),C.Z.on(a,"mouseout",".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellHoverChanged",s)}),C.Z.on(a,se.u,".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellClick",s)}),C.Z.on(a,In.u,".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellDblClick",s)}),function(i,e){var t,a,r;function n(s){return setTimeout(()=>{t=a=null},s)}C.Z.on(e,"touchstart touchend",".dx-row",s=>{clearTimeout(r),"touchstart"===s.type?(t=s.target,a=s.currentTarget,r=n(1e3)):r=n()}),C.Z.on(e,[se.u,In.u,ae.Z.down].join(" "),".dx-row",i.createAction(s=>{var{event:o}=s;t&&(o.target=t,o.currentTarget=a),(0,c.Z)(o.target).closest("a").length||(s.rowIndex=i.getRowIndex(o.currentTarget),s.rowIndex>=0&&(s.rowElement=(0,j.uD)((0,c.Z)(o.currentTarget)),s.columns=i.getColumns(),o.type===ae.Z.down?i._rowPointerDown(s):o.type===se.u?i._rowClick(s):i._rowDblClick(s)))}))}(this,a),a}_rowPointerDown(e){}_rowClick(){}_rowDblClick(){}_createColGroup(e){for(var t=(0,c.Z)("<colgroup>"),a=0;a<e.length;a++)for(var r=e[a].colspan||1,n=0;n<r;n++)t.append(this._createCol(e[a]));return t}_createCol(e){var t=e.visibleWidth||e.width;"adaptiveHidden"===t&&(t=Gd);var a=(0,c.Z)("<col>");return(0,Fe.cl)(a,t),a}renderDelayedTemplates(e){var t=this._delayedTemplates,a=t.filter(n=>!n.async),r=t.filter(n=>n.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(a,!1,e),this._renderDelayedTemplatesCoreAsync(r)}_renderDelayedTemplatesCoreAsync(e){if(e.length){var t=(0,B.Jj)().setTimeout(()=>{this._templateTimeouts.delete(t),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(t)}}_renderDelayedTemplatesCore(e,t,a){for(var r=new Date;e.length;){var n=e.shift(),{options:s}=n,o=Z.Z.getRootNode((0,c.Z)(s.container).get(0)),l=this.needWaitAsyncTemplates();if((!t||(0,c.Z)(s.container).closest(o).length||l)&&(a&&(s.change=a),n.template.render(s)),t&&new Date-r>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,t){var a;if(e&&e.render&&!(0,_.ZU)(e))a={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(n){e.render(n.container,n.model,n.change),n.deferred&&n.deferred.resolve()}};else if((0,_.mf)(e))a={render(n){var s=e((0,j.uD)(n.container),n.model,n.change);s&&(s.nodeType||(0,_.ZU)(s))&&n.container.append(s),n.deferred&&n.deferred.resolve()}};else{var r=(0,_.HD)(e)?e:(0,c.Z)(e).attr("id");r?(this._templatesCache[r]||(this._templatesCache[r]=this.getTemplate(e)),a=this._templatesCache[r]):a=this.getTemplate(e)}return a}renderTemplate(e,t,a,r,n){var s,o=this._processTemplate(t,a),{column:l}=a,d="data"===a.rowType,u=new x.BH,h={container:e,model:a,deferred:u,onRendered:()=>{this.isDisposed()?u.reject():u.resolve()}};if(o){a.component=this.component;var p=l&&(l.renderAsync&&d||this.option("renderAsync")&&(!1!==l.renderAsync&&(l.command||l.showEditorAlways)&&d||"filter"===a.rowType)),v=null!==(s=a.renderAsync)&&void 0!==s?s:p;!o.allowRenderToDetachedContainer&&!r||v?this._delayedTemplates.push({template:o,options:h,async:v}):o.render(h),this._templateDeferreds.add(u),C.Z.on(e,Ft.x,Aw.bind(null,u))}else u.reject();return u.promise().always(()=>{this._templateDeferreds.delete(u)})}_getBodies(e){return(0,c.Z)(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var t;return!!this.option().rowTemplate&&!(null===(t=this._getBodies(e))||void 0===t||!t.filter(".".concat(Ki)).length)}_wrapRowIfNeed(e,t,a){if(this._needWrapRow(a?e||this._tableElement:this._tableElement||e)){var s=(0,c.Z)("<tbody>").addClass(t.attr("class"));return this.setAria("role","presentation",s),s.append(t)}return t}_appendRow(e,t,a){(a=a||Iw).render({content:t,container:e})}_resizeCore(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){var t=this.element().parent();(!t||t.parent().length)&&this.renderDelayedTemplates(e)}_renderTable(e){(e=e||{}).columns=this._columnsController.getVisibleColumns();var t=e.change&&e.change.changeType,a=this._createTable(e.columns,"append"===t||"prepend"===t||"update"===t);return this._renderRows(a,e),a}_renderRows(e,t){for(var a=this._getRows(t.change),r=t.change&&t.change.columnIndices||[],n=t.change&&t.change.changeTypes||[],s=0;s<a.length;s++)this._renderRow(e,(0,f.l)({row:a[s],columnIndices:r[s],changeType:n[s]},t))}_renderRow(e,t){t.columnIndices||(t.row.cells=[]);var a=this._createRow(t.row),r=this._wrapRowIfNeed(e,a);"remove"!==t.changeType&&this._renderCells(a,t),this._appendRow(e,r);var n=(0,f.l)({columns:t.columns},t.row);this._addWatchMethod(n,t.row),this._rowPrepared(r,n,t.row)}_needRenderCell(e,t){return!t||t.indexOf(e)>=0}_renderCells(e,t){for(var a=0,{row:r}=t,{columns:n}=t,s=0;s<n.length;s++)this._needRenderCell(s,t.columnIndices)&&this._renderCell(e,(0,f.l)({column:n[s],columnIndex:a,value:r.values&&r.values[a],oldValue:r.oldValues&&r.oldValues[a]},t)),n[s].colspan>1?a+=n[s].colspan:a++}_updateCells(e,t,a){var r=e.children(),n=t.children(),s=this.option("highlightChanges"),o=this.addWidgetPrefix("cell-updated-animation");a.forEach((l,d)=>{var u=r.eq(l),h=n.eq(d);u.replaceWith(h),s&&!h.hasClass("dx-command-expand")&&h.addClass(o)}),function(i,e){if(i&&e){var r,t=i.attributes,a=e.attributes;for(r=0;r<t.length;r++){var n=t[r].nodeName;e.hasAttribute(n)||i.removeAttribute(n)}for(r=0;r<a.length;r++)i.setAttribute(a[r].nodeName,a[r].nodeValue)}}(e.get(0),t.get(0))}_setCellAriaAttributes(e,t){if("freeSpace"!==t.rowType){this.setAria("role","gridcell",e);var a=this._columnsController.getColumnIndexOffset();this.setAria("colindex",t.columnIndex+a+1,e)}}_renderCell(e,t){var a=this._getCellOptions(t);if(t.columnIndices){if(t.row.cells){var r=t.row.cells.findIndex(s=>s.columnIndex===a.columnIndex);t.row.cells[r]=a}}else t.row.cells.push(a);var n=this._createCell(a);return this._setCellAriaAttributes(n,a),this._renderCellContent(n,a,t),e.get(0).appendChild(n.get(0)),n}_renderCellContent(e,t,a){var r=this._getCellTemplate(t);(0,x.gx)(!r||this.renderTemplate(e,r,t,void 0,a.change)).done(()=>{this._updateCell(e,t)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){var t={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(t),t}_addWatchMethod(e,t){if(this.option("repaintChangesOnly")){var a=[];return(t=t||e).watch=t.watch||function(r,n,s){var o=r(t.data),l=function(d){d&&s&&s(d);var u=r(t.data);JSON.stringify(o)!==JSON.stringify(u)&&(d&&n(u),o=u)};return a.push(l),function(){var d=a.indexOf(l);d>=0&&a.splice(d,1)}},t.update=t.update||function(r,n){r&&(this.data=e.data=r.data,this.rowIndex=e.rowIndex=r.rowIndex,this.dataIndex=e.dataIndex=r.dataIndex,this.isExpanded=e.isExpanded=r.isExpanded,e.row&&!n&&(e.row=r)),a.forEach(s=>{s(r)})},t!==e&&(e.watch=t.watch.bind(t)),e}}_cellPrepared(e,t){t.cellElement=(0,j.uD)((0,c.Z)(e)),this.executeAction("onCellPrepared",t)}_rowPrepared(e,t,a){(0,Wa.aT)(e.get(0),"options",t),t.rowElement=(0,j.uD)(e),this.executeAction("onRowPrepared",t)}_columnOptionChanged(e){var{optionNames:t}=e;if(O.checkChanges(t,["width","visibleWidth"])){var r=this._columnsController.getVisibleColumns().map(n=>n.visibleWidth||n.width);this.setColumnWidths({widths:r,optionNames:t})}else this._requireReady||this.render()}getCellIndex(e,t){return e.length?e[0].cellIndex:-1}getTableElements(){return this._tableElement||(0,c.Z)()}getTableElement(e){return this._tableElement}setTableElement(e,t){this._tableElement=e}_afterRowPrepared(e){}_handleDataChanged(e){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){var t=this.element(),a=t&&t.children(".".concat(this.addWidgetPrefix(Kd))).not(".".concat(this.addWidgetPrefix("content-fixed")));(0,_.$K)(e)&&(0,_.$K)(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,a&&a.scrollLeft(e.left))}_getContent(e){var t;return null===(t=this._tableElement)||void 0===t?void 0:t.parent()}_removeContent(e){var t=this._getContent(e);t?.length&&t.remove()}_wrapTableInScrollContainer(e,t){var a=(0,c.Z)("<div>"),r=this.option("scrolling.useNative");return(!1===r||"auto"===r&&!wt.nativeScrolling)&&a.addClass(this.addWidgetPrefix("scrollable-simulated")),C.Z.on(a,"scroll",()=>{var n=a.scrollLeft();n!==this._scrollLeft&&this.scrollChanged.fire({left:n},this.name)}),a.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix(Kd)).append(e).appendTo(this.element()),this.setAria("role","presentation",a),a}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new x.BH;if(!e&&!this.needWaitAsyncTemplates())return t.resolve();var r=()=>x.gx.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?t.reject():this._templateDeferreds.size>0?r():t.resolve()}).fail(t.reject);return r(),t.promise()}_updateContent(e,t,a){return this.waitAsyncTemplates().done(()=>{this._removeContent(a),this.setTableElement(e,a),this._wrapTableInScrollContainer(e,a)})}_findContentElement(e){}_getWidths(e){if(!e)return[];var t=[];return e.toArray().forEach(r=>{var n=r.offsetWidth;if(r.getBoundingClientRect){var s=(0,ne.l)(r);s.width>r.offsetWidth-1&&(n=s.width)}t.push(n)}),t}getColumnWidths(e){if((this.option("forceApplyBindings")||E.ZT)(),e=e??this.getTableElement())for(var t=e.children("tbody:not(.dx-header)").children(),a=0;a<t.length;a++){var r=t.eq(a),n=r.hasClass(Wn),s=r.hasClass(Kn),o=r.hasClass("dx-error-row");if(!("none"===r.get(0).style.display||r.hasClass("dx-state-invisible")||n||s||o)){var u=r.children("td");return this._getWidths(u)}}return[]}getVisibleColumnIndex(e,t){return e}setColumnWidths(e){var{widths:t}=e,r=this.getTableElement();if(r?.length&&t){var n=this.getColumns(),s=this._needToSetCellWidths(),o=r.children("colgroup").children("col");o.toArray().forEach(l=>l.removeAttribute("style")),n.forEach((l,d)=>{if(s&&l.width&&!l.command)for(var u=Xa(l.visibleWidth||l.width),h=Xa(l.minWidth||u),p=r.children().children(".dx-row").not(".".concat(Kn)),v=0;v<p.length;v++){var g=this.getVisibleColumnIndex(d,v);if(g>=0){var m=p.eq(v),w=m.hasClass(Wn)?m.find("td[aria-colindex='".concat(g+1,"']:not(.").concat("dx-group-cell",")")):m.find("td").eq(g);if(w.length){var I=w.get(0);Ud(I,l,u),I.style.minWidth=h}}}var A=Yd(t[d]);(0,_.$K)(A)&&(0,Fe.cl)(o.eq(d),A)})}}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){if(!(e<0))return this._getRowElements().eq(e).children()}_getCellElement(e,t){var a=this.getCellElements(e),r=this._getVisibleColumnIndex(a,e,t);if(a?.length&&!(r<0)){var n=a.eq(r);return n.length>0?n:void 0}}_getRowElement(e){var t=this,a=(0,c.Z)(),r=t.getTableElements();if(S.S6(r,(n,s)=>{a=a.add(t._getRowElements((0,c.Z)(s)).eq(e))}),a.length)return a}getCellElement(e,t){var a=this._getCellElement(e,t);if(a)return(0,j.uD)(a)}getRowElement(e){var t=this._getRowElement(e),a=[];if(t&&!(0,j.uD)(t).get)for(var r=0;r<t.length;r++)a.push(t[r]);else a=t;return a}_getVisibleColumnIndex(e,t,a){if((0,_.HD)(a)){var r=this._columnsController.columnOption(a,"index");return this._columnsController.getVisibleIndex(r)}return a}getColumnElements(){}getColumns(e,t){return this._columnsController.getVisibleColumns(e)}getCell(e,t,a){var n,r=t||this._getRowElements();if(r.length>0&&e.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(e.rowIndex=e.rowIndex<r.length?e.rowIndex:r.length-1),(n=a||this.getCellElements(e.rowIndex))?.length>0))return n.eq(n.length>e.columnIndex?e.columnIndex:n.length-1)}getRowsCount(){var e=this.getTableElement();return e&&1===e.length?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement()){var a=(this.option().rowTemplate||this.option("dataRowTemplate"))&&e.find("> tbody.".concat(Ki));return a&&a.length?a:e.find("> tbody > "+".".concat(Ki,", > .").concat(Ki))}return(0,c.Z)()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){var t=this.element(),a=this.option("rtlEnabled");t&&t.css({paddingLeft:a?e:"",paddingRight:a?"":e})}isScrollbarVisible(e){var t=this.element(),a=this._tableElement;return!(!t||!a)&&(e?(0,b.Y_)(a)-(0,b.dz)(t)>0:(0,b.zp)(a)-(0,b.Cr)(t)>0)}isDisposed(){var e;return null===(e=this.component)||void 0===e?void 0:e._disposed}}var Un="text-content",jd="dx-header-row",Yn="dx-visibility-hidden",qd="dx-text-content-alignment-",kw="dx-sort-indicator",Nw="dx-sort-index-indicator",Zw="dx-header-filter-indicator",jn=function(i,e,t){var a=(0,c.Z)("<div>").addClass(i.addWidgetPrefix(Un));i.setAria("role","presentation",a),Xd(i,e,t.column,a);var r=i.option("showColumnLines"),n=i.getController("columns").getHeaderContentAlignment(t.column.alignment);return a[r||"right"===n?"appendTo":"prependTo"](e)};function Xd(i,e,t,a){var r=i._getIndicatorElements(e,!0),n=i._getIndicatorElements(e),s=r&&r.length,o=i._getColumnAlignment(t.alignment),l=".".concat(i._getIndicatorClassName("sort")),d=".".concat(i._getIndicatorClassName("sortIndex")),u=n.filter(l),h=n.children().filter(d);(a=a||e.children(".".concat(i.addWidgetPrefix(Un)))).toggleClass(qd+o,s>0).toggleClass(qd+("left"===o?"right":"left"),s>0&&"center"===t.alignment).toggleClass(kw,!!u.length).toggleClass(Nw,!!h.length).toggleClass(Zw,!!n.filter(".".concat(i._getIndicatorClassName("headerFilter"))).length)}var Qd={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:class Ww extends Gi{init(){super.init(),this._headerPanelView=this.getView("headerPanel"),this._headerFilterController=this.getController("headerFilter"),this._dataController=this.getController("data")}_createTable(){var e=super._createTable.apply(this,arguments);return C.Z.on(e,"mousedown selectstart",this.createAction(t=>{var{event:a}=t;a.shiftKey&&a.preventDefault()})),e}_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDefaultTemplate(e){var t=this;return function(a,r){var{caption:n}=e,s=!e.command||n&&"expand"!==e.command;"empty"===e.command?t._renderEmptyMessage(a,r):s?jn(t,a,r).text(n):e.command&&a.html("&nbsp;")}}_renderEmptyMessage(e,t){var a=this._getEmptyHeaderText();if(a){var r=jn(this,e,t);if(a.includes("{0}")){var[s,o]=a.split("{0}"),l=y.Z.format("dxDataGrid-emptyHeaderColumnChooserText"),d=this._columnChooserView,u=(0,c.Z)("<a>").text(l).addClass("dx-link");C.Z.on(u,"click",this.createAction(()=>d.showColumnChooser())),r.append(Z.Z.createTextNode(s)).append(u).append(Z.Z.createTextNode(o))}else r.text(a)}else e.html("&nbsp;")}_getEmptyHeaderText(){var e=!!this._columnChooserView.hasHiddenColumns(),t=!!this._headerPanelView.hasGroupedColumns();switch(!0){case e&&t:return y.Z.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case t:return y.Z.format("dxDataGrid-emptyHeaderWithGroupPanelText");case e:return y.Z.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}}_getHeaderTemplate(e){return e.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(e)}}_processTemplate(e,t){var a=this,{column:n}=t,s=super._processTemplate(e);return"header"===t.rowType&&s&&n.headerCellTemplate&&!n.command?{render(o){var l=jn(a,o.container,o.model);s.render((0,f.l)({},o,{container:l}))}}:s}_handleDataChanged(e){"refresh"===e.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())}_renderCell(e,t){var a=super._renderCell(e,t);return"header"===t.row.rowType&&(a.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||t.column&&!t.column.type&&a.attr("tabindex",this.option("tabindex")||0)),a}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),"header"===t.rowType&&(t.column.type||this.setAria("role","columnheader",e),t.column&&!t.column.command&&!t.column.isBand&&(e.attr("id",t.column.headerId),this.setAria("label","".concat(y.Z.format("dxDataGrid-ariaColumn")," ").concat(t.column.caption),e)))}_createRow(e){var t=super._createRow.apply(this,arguments);return t.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===e.rowType&&(t.addClass(jd),this._isLegacyKeyboardNavigation()||Mi("columnHeaders",this,t,"td",this._handleActionKeyDown.bind(this))),t}_processHeaderAction(e,t){}_handleActionKeyDown(e){var{event:t}=e,a=(0,c.Z)(t.target);if(this._lastActionElement=t.target,a.is(".dx-header-filter")){var r=this._headerFilterController,n=a.closest("td"),s=this.getColumnIndexByElement(n);s>=0&&r.showHeaderFilterMenu(s,!1)}else{var o=a.closest(".dx-row");this._processHeaderAction(t,o)}t.preventDefault()}_renderCore(){var e=this.element(),t={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){e.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",e);var a=this._updateContent(this._renderTable({change:t}),t);return this.getRowCount()>1&&e.addClass("dx-header-multi-row"),super._renderCore.apply(this,arguments),a}}_renderRows(){(this._dataController.isLoaded()||this._hasRowElements)&&(super._renderRows.apply(this,arguments),this._hasRowElements=!0)}_renderRow(e,t){var a=1===this.getRowCount()?null:t.row.rowIndex;t.columns=this.getColumns(a),super._renderRow(e,t)}_createCell(e){var{column:t}=e,a=super._createCell.apply(this,arguments);return t.rowspan>1&&"header"===e.rowType&&a.attr("rowSpan",t.rowspan),a}_getRows(){var e=[],t=this.getRowCount();if(this.option("showColumnHeaders"))for(var a=0;a<t;a++)e.push({rowType:"header",rowIndex:a});return e}_getCellTemplate(e){if("header"===e.rowType)return this._getHeaderTemplate(e.column)}_columnOptionChanged(e){var{changeTypes:t}=e,{optionNames:a}=e;t.grouping||t.groupExpanding?t.grouping&&(this._isGroupingChanged=!0):(super._columnOptionChanged(e),(a.width||a.visible)&&this.resizeCompleted.fire())}_isElementVisible(e){return e&&e.visible}_alignCaptionByCenter(e){var t=this._getIndicatorContainer(e,!0);t&&t.length&&(t.filter(".".concat(Yn)).remove(),(t=this._getIndicatorContainer(e)).clone().addClass(Yn).css("float","").insertBefore(e.children(".".concat(this.addWidgetPrefix(Un)))))}_updateCell(e,t){"header"===t.rowType&&"center"===t.column.alignment&&this._alignCaptionByCenter(e),super._updateCell.apply(this,arguments)}_updateIndicator(e,t,a){var r=super._updateIndicator.apply(this,arguments);return"center"===t.alignment&&this._alignCaptionByCenter(e),Xd(this,e,t),r}_getIndicatorContainer(e,t){var a=super._getIndicatorContainer(e);return t?a:a.filter(":not(.".concat(Yn,")"))}_isSortableElement(e){return!0}getHeadersRowHeight(){var e=this.getTableElement(),t=e&&e.find(".".concat(jd));return t&&t.toArray().reduce((a,r)=>a+(0,b.Cr)(r),0)||0}getHeaderElement(e){var t=this.getColumnElements();return t&&t.eq(e)}getColumnElements(e,t){var r,a=this,n=a._columnsController,s=a.getRowCount();if(a.option("showColumnHeaders")){if(s>1&&(!(0,_.$K)(e)||(0,_.$K)(t))){var o=[],l=(0,_.$K)(t)?n.getChildrenByBandColumn(t,!0):n.getVisibleColumns();return(0,S.S6)(l,(d,u)=>{var h=(0,_.$K)(e)?e:n.getRowIndex(u.index);(r=a._getCellElement(h,n.getVisibleIndex(u.index,h)))&&o.push(r.get(0))}),(0,c.Z)(o)}if(!e||e<s)return a.getCellElements(e||0)}}getColumnIndexByElement(e){var t=this.getCellIndex(e),a=e.closest(".dx-row"),{rowIndex:r}=a[0],n=this.getColumns(r)[t];return n?n.index:-1}getVisibleColumnIndex(e,t){var a=this.getColumns()[e];return a?this._columnsController.getVisibleIndex(a.index,t):-1}getColumnWidths(){var e=this.getColumnElements();return e&&e.length?this._getWidths(e):super.getColumnWidths.apply(this,arguments)}allowDragging(e){var t,a=e&&this._columnsController.getRowIndex(e.index),r=this.getColumns(a);return(null!==(t=this.option("allowColumnReordering"))&&void 0!==t?t:this._columnsController.isColumnOptionUsed("allowReordering"))&&e.allowReordering&&r.length>1}getBoundingRect(){var e=this.getColumnElements();return e&&e.length?{top:this.getTableElement().offset().top}:null}getName(){return"headers"}getColumnCount(){var e=this.getColumnElements();return e?e.length:0}isVisible(){return this.option("showColumnHeaders")}optionChanged(e){switch(e.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;default:super.optionChanged(e)}}getHeight(){return this.getElementHeight()}getContextMenuItems(e){var t=this,{column:a}=e;if(e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){var r=t.option("sorting");if(r&&"none"!==r.mode&&a&&a.allowSorting){var n=function(s){setTimeout(()=>{t._columnsController.changeSortOrder(a.index,s.itemData.value)})};return[{text:r.ascendingText,value:"asc",disabled:"asc"===a.sortOrder,icon:"context-menu-sort-asc",onItemClick:n},{text:r.descendingText,value:"desc",disabled:"desc"===a.sortOrder,icon:"context-menu-sort-desc",onItemClick:n},{text:r.clearText,value:"none",disabled:!a.sortOrder,icon:"context-menu-sort-none",onItemClick:n}]}}}getRowCount(){return this._columnsController&&this._columnsController.getRowCount()}setRowsOpacity(e,t,a){var r,n,s=this.getRowCount(),o=this._columnsController.getColumns(),l=o&&o[e],d=l&&l.isBand&&l.index,u=(p,v)=>{p.ownerBand===d&&(n.eq(v).css({opacity:t}),p.isBand&&this.setRowsOpacity(p.index,t,r+1))};if((0,_.$K)(d))for(r=a=a||0;r<s;r++)(n=this.getCellElements(r))&&this.getColumns(r).forEach(u)}}}};const P=(0,V.Z)((0,V.Z)((0,V.Z)({},J),O),{modules:[]});P.registerModule("columnHeaders",Qd);var ci=T(2429),Xe=T(4797),Kw=T(577),Jd=["filterValues","filterType","fixed","fixedPosition"],Qa=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(Jd),Gw={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},eu=Number.MAX_SAFE_INTEGER||9007199254740991,Et="groupExpand",qn=/columns\[(\d+)\]\.?/gi,jw={visible:!0,showInColumnChooser:!0},qw={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},Xw={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},pi="group",_i="columnChooser",Ui=T(6769),iu="yyyy/MM/dd",au=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,ru=/^(\d{2}):(\d{2})(:(\d{2}))?$/,nu=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],Jw=/^(\d{4})\/(\d{2})\/(\d{2})$/,su=function(i,e){var t;return(0,_.HD)(i)&&!e&&(t=function i0(i){var e=i.match(au);if(!e)return(e=i.match(ru))?new Date(0,0,0,we(e[1]),we(e[2]),we(e[4])):void 0;var t=we(e[1]),a=--e[3],r=e[5],n=0,s=0;n=we(e[14]),s=we(e[16]),"-"===e[13]&&(n=-n,s=-s);var p,l=we(e[6])-n,d=we(e[8])-s,u=we(e[10]),h=we(p=(p=e[11])||"")*Math.pow(10,3-p.length);return(p=>(t<100&&p.setFullYear(t),p))(e[12]?new Date(Date.UTC(t,a,r,l,d,u,h)):new Date(t,a,r,l,d,u,h))}(i)),t||function t0(i){var e=ou(i)===iu,t=!(0,_.J_)(i)&&Date.parse(i);if(!t&&e){var a=i.match(Jw);if(a){var r=new Date(we(a[1]),we(a[2]),we(a[3]));return r.setFullYear(we(a[1])),r.setMonth(we(a[2])-1),r.setDate(we(a[3])),r}}return(0,_.kE)(t)?new Date(t):i}(i)};function we(i){return+i||0}var ou=function(i){return"number"==typeof i?"number":(0,_.HD)(i)?((0,ci.Z)().forceIsoDateParsing&&(e=function(i,e){var t=i.match(au),a="";if(!t)return(t=i.match(ru))?t[3]?"HH:mm:ss":"HH:mm":void 0;for(var r=1;r<nu.length;r++)t[r]&&(a+=nu[r]||t[r]);return"Z"===t[12]&&(a+="'Z'"),t[14]&&(a+=t[15]?"xxx":t[16]?"xx":"x"),a}(i)),e||(i.indexOf(":")>=0?"yyyy/MM/dd HH:mm:ss":iu)):i?null:void 0;var e};const he={dateParser:su,deserializeDate:function(i){return"number"==typeof i?new Date(i):su(i,!(0,ci.Z)().forceIsoDateParsing)},serializeDate:function(i,e){return e?(0,_.J_)(i)?"number"===e?i&&i.valueOf?i.valueOf():null:xd(e,ui)(i):null:i},getDateSerializationFormat:ou};var lu=function(i){i.filterOperations=i.defaultFilterOperations},s0=1,Ja=function(i,e,t,a){var r={};if(e){(0,_.HD)(e)&&(e={dataField:e}),i.setName(e);var n={};if(e.command)n=(0,Xe.HR)(r,e);else{r=i.getCommonSettings(e),t&&t.name&&t.dataField&&(e=(0,f.l)({},e,{dataField:t.dataField}));var s=i._createCalculatedColumnOptions(e,a);e.type||(n={headerId:"dx-col-".concat(s0++)}),n=(0,Xe.HR)(n,jw),(0,Xe.HR)(n,r),(0,Xe.HR)(n,s),(0,Xe.HR)(n,e),(0,Xe.HR)(n,{selector:null})}return e.filterOperations===e.defaultFilterOperations&&lu(n),n}},vi=function i(e,t,a,r){var n=[];return t&&(0,S.S6)(t,(s,o)=>{var l=(r??0)+n.length,d=e._columnsUserState&&Jn(o,e._columnsUserState[l])&&e._columnsUserState[l],u=Ja(e,o,d,a);u&&(a&&(u.ownerBand=a),n.push(u),u.columns&&(n=n.concat(i(e,u.columns,u,n.length)),delete u.columns,u.hasColumns=!0))}),n},Ht=function(i,e){for(var t=[],a=e[i];a;)t.unshift(a),a=e[i=a.index];return t},o0=function i(e,t,a){var r=[],n=t[e];if(n)for(var s=0;s<n.length;s++){var o=n[s];(!(0,_.$K)(o.groupIndex)||o.showWhenGrouped)&&(r.push(o),a&&o.isBand&&(r=r.concat(i(o.index,t,a))))}return r},d0=function(i,e){var a,t=[],r=i.getBandColumnsCache(),n=function(o){return o.ownerBand===e.ownerBand};if(r.isPlain){var s=i._columns.indexOf(e);s>=0&&(t=["columns[".concat(s,"]")])}else for(a=i._columns.filter(n);a.length&&-1!==a.indexOf(e);)t.unshift("columns[".concat(a.indexOf(e),"]")),a=(e=r.columnParentByIndex[e.index])?i._columns.filter(n):[];return t.join(".")},u0=function i(e,t){var a=0,r=e.getChildrenByBandColumn(t,!0);return(0,S.S6)(r,(n,s)=>{s.isBand?(s.colspan=s.colspan||i(e,s.index),a+=s.colspan||1):a+=1}),a},Xn=function(i){var e=(0,_.dt)(i);return"string"!==e&&"boolean"!==e&&"number"!==e&&"date"!==e&&"object"!==e&&(e=void 0),e},du=function(i,e){switch(i){case"date":case"datetime":return he.getDateSerializationFormat(e);case"number":if((0,_.HD)(e))return"string";if((0,_.kE)(e))return null}},uu=function(i,e){i.deserializeValue||(O.isDateType(e)&&(i.deserializeValue=function(t){return he.deserializeDate(t)},i.serializeValue=function(t){return(0,_.HD)(t)?t:he.serializeDate(t,this.serializationFormat)}),"number"===e&&(i.deserializeValue=function(t){var a=parseFloat(t);return isNaN(a)?t:a},i.serializeValue=function(t,a){return"filter"===a?t:(0,_.$K)(t)&&"string"===this.serializationFormat?t.toString():t}))},p0=function(i){return!0===i.value?this.trueText||"true":!1===i.value?this.falseText||"false":i.valueText||""},hu=function(i){if("boolean"===i)return p0},cu=function(i){(0,S.S6)(i._columns,(e,t)=>{t.index=e}),(0,S.S6)(i._columns,(e,t)=>{(0,_.Kn)(t.ownerBand)&&(t.ownerBand=t.ownerBand.index)}),(0,S.S6)(i._commandColumns,(e,t)=>{t.index=-(e+1)})},pu=function(i,e){(0,Ui.Sq)(i._columns,"groupIndex",e,t=>{var{grouped:a}=t;return delete t.grouped,a})},Qn=function(i,e,t){var n,a=(0,_.Kn)(e)?e.rowIndex:null,r=t===pi?i.getGroupColumns():t===_i?i.getChooserColumns():i.getVisibleColumns(a);return e=(0,_.Kn)(e)?e.columnIndex:e,(n=r[e])&&n.type===Et&&(n=i._columns.filter(s=>n.type===s.type)[0]||n),n&&(0,_.$K)(n.index)?n.index:-1};function Jn(i,e){return i&&e&&e.name===(i.name||i.dataField)&&(e.dataField===i.dataField||i.name)}var _u=function(i){var l,d,u,e=i._columnsUserState,t=i._ignoreColumnOptionNames||[],a=i._columns,r={},n=[],s=!0,o=[];function h(m,w){if(w)for(var I=0;I<Qa.length;I++){var A=Qa[I];t.includes(A)||("dataType"===A?m[A]=m[A]||w[A]:Jd.includes(A)?A in w&&(m[A]=w[A]):("selectedFilterOperation"===A&&w[A]&&(m.defaultSelectedFilterOperation=m[A]||null),m[A]=w[A]))}}function p(m,w){for(var I=w.name||w.dataField,A=r[I]||0,F=0;F<m.length;F++)if(Jn(w,m[F])){if(!A)return r[I]=r[I]||0,r[I]++,F;A--}return-1}if(e){for(u=0;u<a.length;u++)d=p(e,a[u]),s=s&&d>=0,o.push(d);for(u=0;u<a.length;u++)l=a[u],d=o[u],(i._hasUserState||s)&&h(l,e[d]),d>=0&&(0,_.$K)(e[d].initialIndex)?n[d]=l:n.push(l);var v=!1;for(u=0;u<e.length;u++){var g=e[u];g.added&&p(a,g)<0&&(h(l=Ja(i,g.added),g),n.push(l),g.added.columns&&(v=!0))}v&&(cu(i),n=vi(i,n)),gi(i,n)}},Zt=function(i,e){cu(i),pu(i,e),function(i,e){(0,S.S6)(i._columns,(t,a)=>{(0,_.$K)(a.sortIndex)&&!tr(a.sortOrder)&&delete a.sortIndex}),(0,Ui.Sq)(i._columns,"sortIndex",e,t=>!(0,_.$K)(t.groupIndex)&&tr(t.sortOrder))}(i,e),wu(i),function(i,e){for(var t,a=[],r=i.getBandColumnsCache(),n=[],s=i._columns.filter(d=>!d.command),o=0;o<s.length;o++)t=s[o],Ht(o,r.columnParentByIndex).length?n.push(t):a.push(t);(0,Ui.Sq)(n,"visibleIndex",e),(0,Ui.Sq)(a,"visibleIndex",e)}(i,e)},er=function(i){i.resetColumnsCache()};function gi(i,e){i._previousColumns=i._columns,i._columns=e,er(i),i.updateColumnDataTypes()}var Qe=function(i,e,t,a){var r,n=i._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:a};t=(t=t||"all").split(".")[0];var{changeTypes:s}=n;e&&!s[e]&&(s[e]=!0,s.length++);var{optionNames:o}=n;t&&!o[t]&&(o[t]=!0,o.length++),(void 0===a||a!==n.columnIndex)&&((0,_.$K)(a)&&(null!==(r=n.columnIndices)&&void 0!==r||(n.columnIndices=[]),(0,_.$K)(n.columnIndex)&&n.columnIndices.push(n.columnIndex),n.columnIndices.push(a)),delete n.columnIndex),i._columnChanges=n,er(i)},Yi=function(i){var r,e=i.option("onColumnsChanging"),t=i._columnChanges;i.isInitialized()&&!i._updateLockCount&&t&&(e&&(i._updateLockCount++,e((0,f.l)({component:i.component},t)),i._updateLockCount--),i._columnChanges=void 0,(r=t.optionNames)&&["dataField","lookup","dataType","columns"].some(n=>r[n])?(i._reinitAfterLookupChanges=t?.optionNames.lookup,i.reinit(),i._reinitAfterLookupChanges=void 0):i.columnsChanged.fire(t))},f0=function(i,e,t,a){if(t>=0)a>=0||(e.lastSortOrder=e.sortOrder);else{var n=i.option("sorting.mode"),s=e.lastSortOrder;"single"===n&&i._columns.some(l=>l!==e&&(0,_.$K)(l.sortIndex))&&(s=void 0),e.sortOrder=s}},C0=function(i,e){var{value:t}=e,{optionName:a}=e,{prevValue:r}=e,{fullOptionName:n}=e,s="".concat(n,".").concat(a);!Gw[a]&&i._skipProcessingColumnsChange!==s&&(i._skipProcessingColumnsChange=s,i.component._notifyOptionChanged(s,t,r),i._skipProcessingColumnsChange=!1)},es=function(i,e,t,a,r){var o,l,d,n=(0,q.vb)(t),s=e.index;if(3===arguments.length)return n(e,{functionsAsIs:!0});var u=n(e,{functionsAsIs:!0});if(!(0,E.bY)(u,a,{maxDepth:5})){"groupIndex"===t||"calculateGroupValue"===t?(l="grouping",f0(i,e,a,u)):l="sortIndex"===t||"sortOrder"===t||"calculateSortValue"===t?"sorting":"columns";var h=(0,q.OM)(t);h(e,a,{functionsAsIs:!0});var p=d0(i,e);Xw[t]&&(Zt(i,e),a=n(e)),("name"===t||"allowEditing"===t)&&i._checkColumns(),!(0,_.$K)(u)&&!(0,_.$K)(a)&&0!==t.indexOf("buffer")&&(r=!0),r?er(i):(!Qa.includes(t)&&"visibleWidth"!==t&&(o=i.option("columns"),d=i.getColumnByPath(p,o),(0,_.HD)(d)&&(d=o[s]={dataField:d}),d&&Jn(d,e)&&h(d,a,{functionsAsIs:!0})),Qe(i,l,t,s)),p&&C0(i,{fullOptionName:p,optionName:t,value:a,prevValue:u})}};function tr(i){return"asc"===i||"desc"===i}var x0=function(i,e){if(this.dataField){var t=this.dataField.split("."),a=t.length-1;this.serializeValue&&(e=this.serializeValue(e));for(var r=0;r<a;r++){var n=t[r];i=i[n]=i[n]||{}}i[t[a]]=e}},S0=function i(e,t,a){var r=[];return e[t=t||0]&&(0,S.S6)(e[t],(n,s)=>{(s.ownerBand===a||s.type===Et)&&(s.isBand&&s.colspan?r.push.apply(r,i(e,t+1,s.index)):(!s.command||t<1)&&r.push(s))}),r},ts=(i,e)=>!!i._columns.filter(a=>a.type===e.type).length,vu=function(i,e){var t=i.option("rtlEnabled");return e.command&&!ts(i,e)||!e.fixedPosition?t?"right":"left":e.fixedPosition},gu=function(i,e,t,a){var r,n=this.getRowCount(),s=i[a]&&i[a].rowspan,o=e.filter(l=>l.type===t);return i.forEach((l,d)=>{l.type===t&&(r=d,s=i[d+1]?i[d+1].rowspan:n)}),s>1&&(o=(0,S.UI)(o,l=>(0,f.l)({},l,{rowspan:s}))),o.unshift.apply(o,(0,_.$K)(r)?[r,1]:[a,0]),i.splice.apply(i,o),s||1},mu=function(i,e){for(var t=i?i.toString():"0";t.length<e;)t="0".concat(t);return t},fu=(i,e,t,a)=>{for(var r,n,s=e.slice().map(v=>(0,f.l)({},v)),o=i._isColumnFixing(),l=t.slice().map(v=>(0,f.l)({fixed:o},v)),d=v=>t.reduce((g,m,w)=>m.type===(a&&v.type===Et?"expand":v.type)||m.command===v.command?w:g,-1),u=v=>v.command!==t[n].command,h=0;h<e.length;h++)(n=(r=e[h])&&(r.type||r.command)?d(r):-1)>=0&&(a?(s[h]=(0,f.l)({fixed:o},t[n],r),r.type!==Et&&(l=l.filter(u))):s[h]=(0,f.l)({},r,t[n],r.type===Et&&{visibleIndex:r.visibleIndex,index:r.index,headerId:r.headerId,allowFixing:0===r.groupIndex,allowReordering:0===r.groupIndex,groupIndex:r.groupIndex}));return e.length&&a&&l.length&&(s=s.concat(l)),s},Cu=(i,e)=>(0,_.$K)(e.fixed)||!e.type?e.fixed:i._isColumnFixing(),wu=i=>{i._bandColumnsCache=void 0},xu=(i,e)=>{var a,t=(0,_.HD)(e)&&e.substr(0,e.indexOf(":"));if(void 0!==e)return t&&(e=e.substr(t.length+1)),t?a=i.filter(r=>"".concat(r[t])===e)[0]:["index","name","dataField","caption"].some(r=>!!(a=i.filter(n=>n[r]===e)[0])),a},Su={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:y.Z.format("dxDataGrid-trueText"),falseText:y.Z.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:class D0 extends J.Controller{init(e){this._dataController=this.getController("data"),this._focusController=this.getController("focus"),this._stateStoringController=this.getController("stateStoring");var t=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!t,this._isColumnsFromOptions?(gi(this,t?vi(this,t):[]),_u(this)):gi(this,this._columnsUserState?vi(this,this._columnsUserState):this._columns),function(i){var e=i._getExpandColumnOptions();i.addCommandColumn(e)}(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):Zt(this),this._checkColumns()}_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){var t,a=[];return e&&e.items().length>0&&(t=O.normalizeSortingInfo(e.group()).length,a=function r(n,s){if(!n||!s)return n;for(var o=0;o<n.length;o++){var l=r(n[o].items||n[o].collapsedItems,s-1);if(l&&l.length)return l}}(e.items(),t)||[]),a}_endUpdateCore(){!this._skipProcessingColumnsChange&&Yi(this)}callbackNames(){return["columnsChanged"]}getColumnByPath(e,t){var a,r=[];return e.replace(qn,(n,s)=>(r.push(parseInt(s)),"")),r.length&&(a=t?r.reduce((n,s)=>n&&n.columns&&n.columns[s],{columns:t}):function(i,e){var t,a,n=function(o){return o.ownerBand===(t?t.index:void 0)};if(i.getBandColumnsCache().isPlain)t=i._columns[e[0]];else{a=i._columns.filter(n);for(var s=0;s<e.length;s++)(t=a[e[s]])&&(a=i._columns.filter(n))}return t}(this,r)),a}optionChanged(e){var t;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value!==e.previousValue&&!this.option("columns")&&(!Array.isArray(e.value)||!Array.isArray(e.previousValue))&&(this._columns=[]);break;case"columns":t=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),t=!0)),t&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":e.handled=!0,this.reinit("columnWidth"===e.fullName&&["width"]);break;case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){var t={},a=this.getColumnByPath(e.fullName),r=e.fullName.replace(qn,"");a&&(r?t[r]=e.value:t=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(a.index,t),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){var{component:t}=this;"width"===e.fullName.replace(qn,"")&&t._updateLockCount&&(t._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(e,t,a){var r=e&&e.isLoaded();if(this._dataSource=e,!this._dataSourceApplied||0===this._dataSourceColumnsCount||t||this.option("regenerateColumnsByVisibleItems")){if(r){if(!this._isColumnsFromOptions){var n=function(i,e){for(var a,t=i._getFirstItems(e),r={},n=[],s=0;s<t.length;s++)if(t[s])for(a in t[s])(!(0,_.mf)(t[s][a])||We.Z.isWrapped(t[s][a]))&&(r[a]=!0);for(a in r)if(0!==a.indexOf("__")){var o=Ja(i,a);n.push(o)}return n}(this,e);n.length&&(gi(this,n),this._dataSourceColumnsCount=this._columns.length,_u(this))}return this.updateColumns(e,t,a)}this._dataSourceApplied=!1,Zt(this)}else if(r&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(e))return Qe(this,"columns"),Yi(this),(new x.BH).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,wu(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){var t,a,r=(!e||!e.type)&&this.option("commonColumnSettings")||{},n=null!==(t=this.option("grouping"))&&void 0!==t?t:{},s=null!==(a=this.option("groupPanel"))&&void 0!==a?a:{};return(0,f.l)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:n.autoExpandAll,allowCollapsing:n.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||n.contextMenuEnabled},r)}isColumnOptionUsed(e){for(var t=0;t<this._columns.length;t++)if(this._columns[t][e])return!0}isAllDataTypesDefined(e){var t=this._columns;if(!t.length)return!1;for(var a=0;a<t.length;a++)if((t[a].dataField||t[a].calculateCellValue!==t[a].defaultCalculateCellValue)&&(!t[a].dataType||e&&t[a].deserializeValue&&void 0===t[a].serializationFormat))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){var e=[];return(0,S.S6)(this._columns,function(){(0,_.$K)(this.groupIndex)&&(e[this.groupIndex]=this)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=(0,_.$K)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,t){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,_.$K)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{var t=(0,f.l)(!0,{},e);return(0,_.$K)(t.dataField)||(t.dataField=t.name),t.filterOperations=e.filterOperations!==e.defaultFilterOperations?t.filterOperations:null,t})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){var s,o,l,e=[],t=this.getRowCount(),r={command:"transparent"},n=0;if(this._isColumnFixing())for(var d=0;d<=t;d++){s=0,l=null,o=null;for(var u=this.getVisibleColumns(d,!0),h=0;h<u.length;h++){var p=u[h-1],v=u[h];v.fixed?p&&p.fixed&&vu(this,p)!==vu(this,v)?(0,_.$K)(o)||(o=h):l=v.fixedPosition:(0===d&&(v.isBand&&v.colspan?n+=v.colspan:n++),s++,(0,_.$K)(o)||(o=h))}if(0===d&&(0===s||s>=u.length))return[];(0,_.$K)(o)||(o="right"===l?0:u.length),e[d]=u.slice(0),r.colspan||(r.colspan=n),e[d].splice(o,s,r)}return e.map(g=>g.map(m=>{var w=(0,V.Z)({},m);return w.headerId&&(w.headerId+="-fixed"),w}))}_isColumnFixing(){var e=this.option("columnFixing.enabled");return!e&&(0,S.S6)(this._columns,(t,a)=>{if(a.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){var t,e=this._getExpandColumnsCore(),a=e.filter(o=>0===o.groupIndex)[0],r=a&&a.fixed,n=this._isColumnFixing(),s=this.option("rtlEnabled");return e.length&&(t=this.columnOption("command:expand")),(0,S.UI)(e,o=>(0,f.l)({},o,{visibleWidth:null,minWidth:null,cellTemplate:(0,_.$K)(o.groupIndex)?null:o.cellTemplate,headerCellTemplate:null,fixed:!(!(0,_.$K)(o.groupIndex)||!r)||n,fixedPosition:s?"right":"left"},t,{index:o.index,type:o.type||Et}))}getBandColumnsCache(){if(!this._bandColumnsCache){var e=this._columns,t={},a={},r=!0;e.forEach(n=>{var{ownerBand:s}=n,o=(0,_.Kn)(s)?s.index:s,l=e[o];n.hasColumns&&(r=!1),n.colspan&&(n.colspan=void 0),n.rowspan&&(n.rowspan=void 0),l?a[n.index]=l:o=-1,t[o]=t[o]||[],t[o].push(n)}),this._bandColumnsCache={isPlain:r,columnChildrenByIndex:t,columnParentByIndex:a}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return(0,_.$K)(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(t=>{var a=this._isColumnVisible(t),r=this._isColumnInGroupPanel(t);return a&&!r&&!t.command})}_compileVisibleColumnsCore(){var e=this.getBandColumnsCache(),t=fu(this,this._columns,this._commandColumns,!0);!function(i,e,t){for(var a,r=0;r<e.length;r++){var n=e[r];(n.visible||n.command)&&(n.isBand&&(n.colspan=n.colspan||u0(i,n.index)),(!n.isBand||!n.colspan)&&(a=i.getRowCount(),!n.command&&(!(0,_.$K)(n.groupIndex)||n.showWhenGrouped)&&(a-=Ht(n.index,t.columnParentByIndex).length),a>1&&(n.rowspan=a)))}}(this,t,e);var a=this._getIndexedColumns(t),r=this._getVisibleColumnsFromIndexed(a);return!this.hasVisibleDataColumns()&&this._columns.length&&r[r.length-1].push({command:"empty"}),r}_getIndexedColumns(e){for(var t=this.option("rtlEnabled"),a=this.getRowCount(),r=function(i){var e;for(e=0;i>1;e++)i/=10;return e}(e.length),n=this.getBandColumnsCache(),s=[],o=[],l=0;l<a;l+=1)o[l]=[{}],s[l]=[{},{},{}];return e.forEach(d=>{var u,h,p,v,m,{visibleIndex:g}=d,w=Ht(d.index,n.columnParentByIndex),I=this._isColumnVisible(d),A=this._isColumnInGroupPanel(d);if(I&&!A){var F=w.length;if(g<0)g=-g,m=o[F];else if(d.fixed=null!==(h=null===(u=w[0])||void 0===u?void 0:u.fixed)&&void 0!==h?h:d.fixed,d.fixedPosition=null!==(v=null===(p=w[0])||void 0===p?void 0:p.fixedPosition)&&void 0!==v?v:d.fixedPosition,d.fixed){var G=!!d.command&&!ts(this,d),M="right"===d.fixedPosition;t&&!G&&(M=!M),m=M?s[F][2]:s[F][0]}else m=s[F][1];if(w.length){g=mu(g,r);for(var k=w.length-1;k>=0;k-=1)g=mu(w[k].visibleIndex,r)+g}m[g]=m[g]||[],m[g].push(d)}}),{positiveIndexedColumns:s,negativeIndexedColumns:o}}_getVisibleColumnsFromIndexed(e){for(var t=this,{positiveIndexedColumns:a,negativeIndexedColumns:r}=e,n=[],s=this.getRowCount(),o=fu(this,this.getExpandColumns(),this._columns),l=0,d=0,u=function(p){n.push([]),(0,Xe.jS)(r[p],(m,w)=>{n[p].unshift.apply(n[p],w)});var v=n[p].length;a[p].forEach(m=>{(0,Xe.jS)(m,(w,I)=>{n[p].push.apply(n[p],I)})}),d<=p&&(d+=gu.call(t,n[p],o,"detailExpand",v)),l<=p&&(l+=gu.call(t,n[p],o,Et,v))},h=0;h<s;h+=1)u(h);return n.push(S0(n)),n}getInvisibleColumns(e,t){var n,a=this,r=[];return(0,S.S6)(e=e||a._columns,(s,o)=>{if(o.ownerBand===t){if(o.isBand)return void((n=o.visible?a.getInvisibleColumns(a.getChildrenByBandColumn(o.index),o.index):a.getChildrenByBandColumn(o.index)).length&&(r.push(o),r=r.concat(n)));o.visible||r.push(o)}}),r}getChooserColumns(e){return((i,e)=>{if("asc"!==e&&"desc"!==e)return i;var t="asc"===e?1:-1;return i.sort((a,r)=>t*(a.caption||"").localeCompare(r.caption||"")),i})((e?this.getColumns():this.getInvisibleColumns()).filter(n=>n.showInColumnChooser),this.option("columnChooser.sortOrder"))}allowMoveColumn(e,t,a,r){var n=Qn(this,e,a),s=this._columns[n];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(a===r?a!==_i&&(e=(0,_.Kn)(e)?e.columnIndex:e)!==(t=(0,_.Kn)(t)?t.columnIndex:t)&&e+1!==t:a===pi&&r!==_i||r===pi?s&&s.allowGrouping:a!==_i&&r!==_i||s&&s.allowHiding)}moveColumn(e,t,a,r){var s,d,n={},o=Qn(this,e,a),l=Qn(this,t,r);if(o>=0){var u=this._columns[o];if(t=(0,_.Kn)(t)?t.columnIndex:t,d=l>=0?this._columns[l].groupIndex:-1,(0,_.$K)(u.groupIndex)&&a===pi&&(d>u.groupIndex&&d--,r!==pi?n.groupIndex=void 0:(s=u.groupIndex,delete u.groupIndex,pu(this))),r===pi)n.groupIndex=function(i,e,t){var r,a=i.getGroupColumns();if(t>=0)for(r=0;r<a.length;r++)a[r].groupIndex>=t&&a[r].groupIndex++;else for(t=0,r=0;r<a.length;r++)t=Math.max(t,a[r].groupIndex+1);return t}(this,0,d),u.groupIndex=s;else if(t>=0){var h=this._columns[l];n.visibleIndex=!h||u.ownerBand!==h.ownerBand||Cu(this,u)^Cu(this,h)?eu:h.visibleIndex}var p=r!==_i;u.visible!==p&&(n.visible=p),this.columnOption(u.index,n)}}changeSortOrder(e,t){var a={},r=this.option("sorting"),n=r&&r.mode,l=this._columns[e];("single"===n||"multiple"===n)&&l&&l.allowSorting&&(("single"===n||!t)&&!(0,_.$K)(l.groupIndex)&&(0,S.S6)(this._columns,function(d){d!==e&&this.sortOrder&&((0,_.$K)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),tr(t)?l.sortOrder!==t&&(a.sortOrder=t):"none"===t?l.sortOrder&&(a.sortIndex=void 0,a.sortOrder=void 0):function(d){if("ctrl"===t){if(!("sortOrder"in d)||!("sortIndex"in d))return!1;a.sortOrder=void 0,a.sortIndex=void 0}else a.sortOrder=(0,_.$K)(d.groupIndex)||(0,_.$K)(d.sortIndex)?"desc"===d.sortOrder?"asc":"desc":"asc"}(l)),this.columnOption(l.index,a)}getSortDataSourceParameters(e){var t=[],a=[];return(0,S.S6)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,_.$K)(this.sortIndex)&&!(0,_.$K)(this.groupIndex)&&(t[this.sortIndex]=this)}),(0,S.S6)(t,function(){if(tr(this&&this.sortOrder)){var n={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),a.push(n)}}),a.length>0?a:null}getGroupDataSourceParameters(e){var t=[];return(0,S.S6)(this.getGroupColumns(),function(){var a=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(a){var r={selector:a,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(r.compare=this.sortingMethod.bind(this)),t.push(r)}}),t.length>0?t:null}refresh(e){var t=[];return(0,S.S6)(this._columns,function(){var{lookup:a}=this;if(a&&!this.calculateDisplayValue){if(e&&a.valueMap)return;a.update&&t.push(a.update())}}),x.gx.apply(c.Z,t).done(er.bind(null,this))}_updateColumnOptions(e,t){var a,r,n,s,o=this._reinitAfterLookupChanges&&(null===(a=this._previousColumns)||void 0===a?void 0:a[t]);e.selector=null!==(r=e.selector)&&void 0!==r?r:u=>e.calculateCellValue(u),e.selector.columnIndex=t,e.selector.originalCallback=o&&null!==(s=null===(n=this._previousColumns[t].selector)||void 0===n?void 0:n.originalCallback)&&void 0!==s?s:e.selector,(0,S.S6)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(u,h)=>{var p=e[h];if((0,_.mf)(p))if(p.originalCallback)e[h].context.column=e;else{var v={column:e};e[h]=function(g){return p.call(v.column,g)},e[h].originalCallback=p,e[h].columnIndex=t,e[h].context=v}}),(0,_.HD)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=(0,q.vb)(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),uu(e,e.dataType);var{lookup:l}=e;l&&uu(l,l.dataType);var d=l?l.dataType:e.dataType;d&&(e.alignment=e.alignment||function(i,e){switch(i){case"number":return"right";case"boolean":return"center";default:return(0,ne.q)(e)}}(d,this.option("rtlEnabled")),e.format=e.format||O.getFormatByDataType(d),e.customizeText=e.customizeText||hu(d),e.defaultFilterOperations=e.defaultFilterOperations||!l&&qw[d]||[],(0,_.$K)(e.filterOperations)||lu(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,_.$K)(e.showEditorAlways)?e.showEditorAlways:"boolean"===d&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){var t=this,a=t.option("dateSerializationFormat"),r=t._getFirstItems(e),n=!1;return(0,S.S6)(t._columns,(s,o)=>{var l,d,u,h,p,{lookup:v}=o;if(O.isDateType(o.dataType)&&void 0===o.serializationFormat&&(o.serializationFormat=a),v&&O.isDateType(v.dataType)&&void 0===o.serializationFormat&&(v.serializationFormat=a),o.calculateCellValue&&r.length){if(!o.dataType||v&&!v.dataType){for(l=0;l<r.length;l++)d=o.calculateCellValue(r[l]),o.dataType||(p=Xn(d),(u=u||p)&&p&&u!==p&&(u="string")),v&&!v.dataType&&(p=Xn(O.getDisplayValue(o,d,r[l])),(h=h||p)&&p&&h!==p&&(h="string"));(u||h)&&(u&&(o.dataType=u),v&&h&&(v.dataType=h),n=!0)}if(void 0===o.serializationFormat||v&&void 0===v.serializationFormat)for(l=0;l<r.length;l++)d=o.calculateCellValue(r[l],!0),void 0===o.serializationFormat&&(o.serializationFormat=du(o.dataType,d)),v&&void 0===v.serializationFormat&&(v.serializationFormat=du(v.dataType,v.calculateCellValue(d,!0)))}t._updateColumnOptions(o,s)}),n}_customizeColumns(e){var t=this.option("customizeColumns");t&&(e.some(r=>(0,_.Kn)(r.ownerBand))&&Zt(this),t(e),gi(this,vi(this,e)))}updateColumns(e,t,a){if(t||this.updateSortingGrouping(e),!e||e.isLoaded()){var r=e?e.sort()||[]:this.getSortDataSourceParameters(),n=e?e.group()||[]:this.getGroupDataSourceParameters(),s=e?.lastLoadOptions().filter;a||this._customizeColumns(this._columns),Zt(this);var o=this._columns;return(0,x.gx)(this.refresh(!0)).always(()=>{this._columns===o&&(this._updateChanges(e,{sorting:r,grouping:n,filtering:s}),Yi(this))})}}_updateChanges(e,t){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),O.equalSortParameters(t.sorting,this.getSortDataSourceParameters())||Qe(this,"sorting"),O.equalSortParameters(t.grouping,this.getGroupDataSourceParameters())||Qe(this,"grouping"),this._dataController&&!O.equalFilterParameters(t.filtering,this._dataController.getCombinedFilter())&&Qe(this,"filtering"),Qe(this,"columns")}updateSortingGrouping(e,t){var r,n,a=this,s=function(p,v,g){(0,S.S6)(p,(m,w)=>{if(delete w[g],v)for(var I=0;I<v.length;I++){var{selector:A}=v[I],{isExpanded:F}=v[I];if(A===w.dataField||A===w.name||A===w.displayField||A===w.selector||A===w.calculateCellValue||A===w.calculateGroupValue||A===w.calculateDisplayValue){w.sortOrder=t?"sortOrder"in w?w.sortOrder:v[I].desc?"desc":"asc":w.sortOrder||(v[I].desc?"desc":"asc"),void 0!==F&&(w.autoExpandGroup=F),w[g]=I;break}}})};if(e){r=O.normalizeSortingInfo(e.sort());var o=O.normalizeSortingInfo(e.group()),l=a.getGroupDataSourceParameters(),d=a.getSortDataSourceParameters(),u=!O.equalSortParameters(o,l,!0),h=!u&&!O.equalSortParameters(o,l);a._columns.length||((0,S.S6)(o,(p,v)=>{a._columns.push(v.selector)}),(0,S.S6)(r,(p,v)=>{(0,_.mf)(v.selector)||a._columns.push(v.selector)}),gi(a,vi(a,a._columns))),(t||!l&&!a._hasUserState)&&(u||h)&&(s(a._columns,o,"groupIndex"),t&&(u&&Qe(a,"grouping"),h&&Qe(a,"groupExpanding"),n=!0)),(t||!d&&!a._hasUserState)&&!O.equalSortParameters(r,d)&&(s(a._columns,r,"sortIndex"),t&&(Qe(a,"sorting"),n=!0)),n&&Yi(a)}}updateFilter(e,t,a,r){if(!Array.isArray(e))return e;if(a=void 0!==(e=(0,f.l)([],e)).columnIndex?e.columnIndex:a,r=void 0!==e.filterValue?e.filterValue:r,(0,_.HD)(e[0])&&"!"!==e[0]){var n=this.columnOption(e[0]);t?(0,ci.Z)().forceIsoDateParsing&&n&&n.serializeValue&&e.length>1&&(e[e.length-1]=n.serializeValue(e[e.length-1],"filter")):n&&n.selector&&(e[0]=n.selector,e[0].columnIndex=n.index)}else(0,_.mf)(e[0])&&(e[0].columnIndex=a,e[0].filterValue=r,e[0].selectedFilterOperation=e.selectedFilterOperation);for(var s=0;s<e.length;s++)e[s]=this.updateFilter(e[s],t,a,r);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,t,a,r){var n=this,s=n._columns.concat(n._commandColumns),o=xu(s,e);if(o){if(1===arguments.length)return(0,f.l)({},o);if((0,_.HD)(t)){if(2===arguments.length)return es(n,o,t);es(n,o,t,a,r)}else(0,_.Kn)(t)&&(0,S.S6)(t,(l,d)=>{es(n,o,l,d,r)});Yi(n)}}clearSorting(){var e=this.columnCount();this.beginUpdate();for(var t=0;t<e;t++)this.columnOption(t,"sortOrder",void 0),delete xu(this._columns,t).sortOrder;this.endUpdate()}clearGrouping(){var e=this.columnCount();this.beginUpdate();for(var t=0;t<e;t++)this.columnOption(t,"groupIndex",void 0);this.endUpdate()}getVisibleIndex(e,t){for(var a=this.getVisibleColumns(t),r=a.length-1;r>=0;r--)if(a[r].index===e)return r;return-1}getVisibleIndexByColumn(e,t){var a=this.getVisibleColumns(t),r=a.filter(n=>n.index===e.index&&n.command===e.command)[0];return a.indexOf(r)}getVisibleColumnIndex(e,t){var a=this.columnOption(e,"index");return this.getVisibleIndex(a,t)}addColumn(e){var t=Ja(this,e),a=this._columns.length;this._columns.push(t),t.isBand&&(this._columns=vi(this,this._columns),t=this._columns[a]),t.added=e,Zt(this,t),this.updateColumns(this._dataSource),this._checkColumns()}deleteColumn(e){var t=this.columnOption(e);if(t&&t.index>=0){if((i=>{i.forEach(e=>{(0,_.$K)(e.ownerBand)&&(e.ownerBand=i[e.ownerBand])})})(this._columns),this._columns.splice(t.index,1),t.isBand){var a=this.getChildrenByBandColumn(t.index).map(r=>r.index);this._columns=this._columns.filter(r=>a.indexOf(r.index)<0)}Zt(this),this.updateColumns(this._dataSource)}}addCommandColumn(e){var t=this._commandColumns.filter(a=>a.command===e.command)[0];t||this._commandColumns.push(t=e)}getUserState(){var a,e=this._columns,t=[];function r(n,s){void 0!==e[a][s]&&(t[a][s]=e[a][s])}for(a=0;a<e.length;a++)t[a]={},(0,S.S6)(Qa,r);return t}setName(e){e.name=e.name||e.dataField||e.type}setUserState(e){var t=this._dataSource,a=this.option("stateStoring.ignoreColumnOptionNames");if(e?.forEach(this.setName),!a){a=[];var r=this.getCommonSettings();this.option("columnChooser.enabled")||a.push("visible"),"none"===this.option("sorting.mode")&&a.push("sortIndex","sortOrder"),r.allowGrouping||a.push("groupIndex"),r.allowFixing||a.push("fixed","fixedPosition"),r.allowResizing||a.push("width","visibleWidth");var n=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&n&&a.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&n&&a.push("filterValues","filterType")}this._columnsUserState=e,this._ignoreColumnOptionNames=a,this._hasUserState=!!e,Qe(this,"filtering"),this.init(!0),t&&(t.sort(this.getSortDataSourceParameters()),t.group(this.getGroupDataSourceParameters()))}_checkColumns(){var e={},t=!1,a=[];this._columns.forEach(r=>{var n,{name:s}=r,o=null===(n=r.columns)||void 0===n?void 0:n.length,l=r.allowEditing&&(r.dataField||r.setCellValue)&&!o;s?(e[s]&&a.push('"'.concat(s,'"')),e[s]=!0):l&&(t=!0)}),a.length&&Q.Z.log("E1059",a.join(", ")),t&&Q.Z.log("E1060")}_createCalculatedColumnOptions(e,t){var a={},{dataField:r}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(a.isBand=!0,r=null),r){if((0,_.HD)(r)){var n=(0,q.vb)(r);a={caption:(0,Me.GK)(r),calculateCellValue(s,o){var l=n(s);return this.deserializeValue&&!o?this.deserializeValue(l):l},setCellValue:x0,parseValue(s){var o,l;return"number"===this.dataType?(0,_.HD)(s)&&this.format?o=function(i,e){var t=te.Z.parse(i);if((0,_.kE)(t)){var a=te.Z.format(t,e),r=te.Z.format(t,"decimal");if(a===i||r===i)return t}}(s.trim(),this.format):(0,_.$K)(s)&&(0,_.kE)(s)&&(o=Number(s)):"boolean"===this.dataType?s===this.trueText?o=!0:s===this.falseText&&(o=!1):O.isDateType(this.dataType)?(l=H.parse(s,this.format))&&(o=l):o=s,o}}}a.allowFiltering=!0}else a.allowFiltering=!!e.calculateFilterExpression;return a.calculateFilterExpression=function(){return Nt.defaultCalculateFilterExpression.apply(this,arguments)},a.defaultFilterOperation="=",a.createFilterExpression=function(s,o){var l;return this.calculateFilterExpression&&(l=this.calculateFilterExpression.apply(this,arguments)),(0,_.mf)(l)&&(l=[l,"=",!0]),l&&(l.columnIndex=this.index,l.filterValue=s,l.selectedFilterOperation=o),l},(!r||!(0,_.HD)(r))&&(0,f.l)(!0,a,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),t&&(a.allowFixing=!1),e.dataType&&(a.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in a)&&(a.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(a.lookup={calculateCellValue(s,o){return this.valueExpr&&(s=this.valueMap&&this.valueMap[s]),this.deserializeValue&&!o?this.deserializeValue(s):s},updateValueMap(){if(this.valueMap={},this.items)for(var s=(0,q.vb)(this.valueExpr),o=(0,q.vb)(this.displayExpr),l=0;l<this.items.length;l++){var d=this.items[l],u=o(d);this.valueMap[s(d)]=u,this.dataType=this.dataType||Xn(u)}},update(){var s=this,{dataSource:o}=s;if(o)if((0,_.mf)(o)&&!We.Z.isWrapped(o)&&(o=o({})),(0,_.PO)(o)||o instanceof Kw.Z||Array.isArray(o)){if(s.valueExpr){var l=(0,ki.aN)(o);return l.paginate=!1,(o=new St.o(l)).load().done(d=>{s.items=d,s.updateValueMap&&s.updateValueMap()})}}else Q.Z.log("E1016");else s.updateValueMap&&s.updateValueMap()}}),a.resizedCallbacks=(0,le.Z)(),e.resized&&a.resizedCallbacks.add(e.resized.bind(e)),(0,S.S6)(a,s=>{if((0,_.mf)(a[s])&&0!==s.indexOf("default")){var o="default".concat(s.charAt(0).toUpperCase()).concat(s.substr(1));a[o]=a[s]}}),a}getRowCount(){return this._rowCount=this._rowCount||function(i){var e=1,t=i.getBandColumnsCache(),{columnParentByIndex:a}=t;return i._columns.forEach(r=>{var n=Ht(r.index,a),s=n.filter(o=>!o.visible);r.visible&&!s.length&&(e=Math.max(e,n.length+1))}),e}(this),this._rowCount}getRowIndex(e,t){var a=this._columns[e],r=this.getBandColumnsCache();return a&&(t||a.visible&&!a.command&&!(0,_.$K)(a.groupIndex))?Ht(e,r.columnParentByIndex).length:0}getChildrenByBandColumn(e,t){var a=this.getBandColumnsCache(),r=o0(e,a.columnChildrenByIndex,!t);return t?r.filter(n=>n.visible&&!n.command).sort((n,s)=>n.visibleIndex-s.visibleIndex):r}isParentBandColumn(e,t){var a=!1,r=this._columns[e],n=this.getBandColumnsCache(),s=r&&Ht(e,n.columnParentByIndex);return s&&(0,S.S6)(s,(o,l)=>{if(l.index===t)return a=!0,!1}),a}isParentColumnVisible(e){var t=!0,a=this.getBandColumnsCache(),r=e>=0&&Ht(e,a.columnParentByIndex);return r&&(0,S.S6)(r,(n,s)=>t=t&&s.visible),t}getColumnId(e){return e.command&&e.type===Et?ts(this,e)?"type:".concat(e.type):"command:".concat(e.command):e.index}getCustomizeTextByDataType(e){return hu(e)}getHeaderContentAlignment(e){return this.option("rtlEnabled")?"left"===e?"right":"left":e}}}};P.registerModule("columns",{defaultOptions:()=>(0,f.l)(!0,{},Su.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:Su.controllers});var A0=T(5193),ir=T(6714),R0=T(2451),O0=T(4875),yu="_dataSourceOptions",bu="_dataSourceChangedHandler",Eu="_dataSourceLoadErrorHandler",Iu="_dataSourceLoadingChangedHandler",Tu="_dataSourceFromUrlLoadMode",Du="_getSpecificDataSourceOption",Au="_normalizeDataSource",V0=i=>class extends i{postCtor(){this.on("disposing",()=>{this._disposeDataSource()})}_refreshDataSource(){this._initDataSource(),this._loadDataSource()}_initDataSource(){var t,a,e=Du in this?this[Du]():this.option("dataSource");this._disposeDataSource(),e&&(e instanceof St.o?(this._isSharedDataSource=!0,this._dataSource=e):(t=yu in this?this[yu]():{},a=this._dataSourceType?this._dataSourceType():St.o,e=(0,ki.aN)(e,{fromUrlLoadMode:Tu in this&&this[Tu]()}),this._dataSource=new a((0,f.l)(!0,{},t,e))),Au in this&&(this._dataSource=this[Au](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())}_initDataController(){var e,t=null===(e=this.option)||void 0===e?void 0:e.call(this,"_dataController");this._dataController=t||new O0.Z(this._dataSource)}_addDataSourceHandlers(){bu in this&&this._addDataSourceChangeHandler(),Eu in this&&this._addDataSourceLoadErrorHandler(),Iu in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()}_addReadyWatcher(){this.readyWatcher=function(e){this._ready&&this._ready(!e)}.bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)}_addDataSourceChangeHandler(){var e=this._dataSource;this._proxiedDataSourceChangedHandler=function(t){this[bu](e.items(),t)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)}_addDataSourceLoadErrorHandler(){this._proxiedDataSourceLoadErrorHandler=this[Eu].bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)}_addDataSourceLoadingChangedHandler(){this._proxiedDataSourceLoadingChangedHandler=this[Iu].bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)}_loadDataSource(){var e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())}_loadSingle(e,t){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)}_isLastPage(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize}_isDataSourceLoading(){return this._dataSource&&this._dataSource.isLoading()}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)}getDataSource(){return this._dataSource||null}},Ru=function(i,e,t){var a=i._dataSource;if(a){if(void 0!==t){if(i._getPagingOptionValue(e)!==t){"pageSize"===e&&a.pageIndex(0),a[e](t),i._skipProcessingPagingChange=!0,i.option("paging.".concat(e),t),i._skipProcessingPagingChange=!1;var n=a.pageIndex();return i._isPaging="pageIndex"===e,a["pageIndex"===e?"load":"reload"]().done(()=>{i._isPaging=!1,i.pageChanged.fire(n)})}return(0,x.BH)().resolve().promise()}return a[e]()}return 0};class Ou extends(V0(J.Controller)){init(){this._items=[],this._cachedProcessedItems=null,this._columnsController=this.getController("columns"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._errorHandlingController=this.getController("errorHandling"),this._filterSyncController=this.getController("filterSync"),this._applyFilterController=this.getController("applyFilter"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._focusController=this.getController("focus"),this._headerFilterController=this.getController("headerFilter"),this._selectionController=this.getController("selection"),this._stateStoringController=this.getController("stateStoring"),this._validatingController=this.getController("validating"),this._adaptiveExpandedKey=void 0,this._isPaging=!1,this._currentOperationTypes=null,this._dataChangedHandler=e=>{this._currentOperationTypes=this._dataSource.operationTypes(),this._handleDataChanged(e),this._currentOperationTypes=null},this._columnsChangedHandler=this._handleColumnsChanged.bind(this),this._loadingChangedHandler=this._handleLoadingChanged.bind(this),this._loadErrorHandler=this._handleLoadError.bind(this),this._customizeStoreLoadOptionsHandler=this._handleCustomizeStoreLoadOptions.bind(this),this._changingHandler=this._handleChanging.bind(this),this._dataPushedHandler=this._handleDataPushed.bind(this),this._columnsController.columnsChanged.add(this._columnsChangedHandler),this._isLoading=!1,this._isCustomLoading=!1,this._repaintChangesOnly=void 0,this._changes=[],this.createAction("onDataErrorOccurred"),this.dataErrorOccurred.add(e=>this.executeAction("onDataErrorOccurred",{error:e})),this._refreshDataSource(),this.postCtor()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if("dataErrorOccurred"===e)return{stopOnFalse:!0}}publicMethods(){return["_disposeDataSource","beginCustomLoading","byKey","clearFilter","endCustomLoading","filter","getCombinedFilter","getDataByKeys","getDataSource","getKeyByRowIndex","getRowIndexByKey","getVisibleRows","keyOf","pageCount","pageIndex","pageSize","refresh","repaintRows","totalCount"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){if(e.value!==e.previousValue){var a=this.store();a&&(a._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){var a,r,t=this;function n(){e.handled=!0}if("dataSource"===e.name&&e.name===e.fullName&&this._handleDataSourceChange(e))n();else switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":n();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":n(),t.reset();break;case"paging":if((a=t.dataSource())&&(r=t._setPagingOptions(a))){var s=a.pageIndex();this._isPaging=r.isPageIndexChanged,a.load().done(()=>{this._isPaging=!1,t.pageChanged.fire(s)})}n();break;case"rtlEnabled":t.reset();break;case"columns":(a=t.dataSource())&&a.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,a.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,t){if(!this._dataSource)return e;var a=e??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){var n=this._calculateAdditionalFilter();a=n?O.combineFilters([n,a]):a}var s=this._dataSource.remoteOperations().filtering||t;return this._columnsController.updateFilter(a,s)}waitReady(){return this._updateLockCount?(this._readyDeferred=new x.BH,this._readyDeferred):(0,x.gx)()}_endUpdateCore(){var e=this._changes;if(e.length){this._changes=[];var t=e.every(a=>a.repaintChangesOnly);this.updateItems(1===e.length?e[0]:{repaintChangesOnly:t})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var t,a=this._columnsController,r=this._dataSource,{storeLoadOptions:n}=e;e.isCustomLoading&&!n.isLoadingAll||(n.filter=this.combinedFilter(n.filter),1===(null===(t=n.filter)||void 0===t?void 0:t.length)&&"!"===n.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),a.isDataSourceApplied()||a.updateColumnDataTypes(r),this._columnsUpdating=!0,a.updateSortingGrouping(r,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,n.sort=a.getSortDataSourceParameters(),n.group=a.getGroupDataSourceParameters(),r.sort(n.sort),r.group(n.group),n.sort=a.getSortDataSourceParameters(!r.remoteOperations().sorting),e.group=a.getGroupDataSourceParameters(!r.remoteOperations().grouping))}_handleColumnsChanged(e){var n,s,o,t=this,{changeTypes:a}=e,{optionNames:r}=e;if(a.sorting||a.grouping)t._dataSource&&!t._columnsUpdating&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload());else if(a.columns&&(s=t._columnsController.columnOption(e.columnIndex,"filterValues"),(r.filterValues||r.filterType&&Array.isArray(s)||r.filterValue||r.selectedFilterOperation||r.allowFiltering)&&(n=t._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(s)||void 0===e.columnIndex||(0,_.$K)(n)||!r.selectedFilterOperation||r.filterValue)&&(t._applyFilter(),o=!0)),!t._needApplyFilter&&!O.checkChanges(r,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&t._columnsController.columnsChanged.add(function d(u){var h;t._columnsController.columnsChanged.remove(d),t.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null===(h=u?.changeTypes)||void 0===h?void 0:h.virtualColumnsScrolling})}),(0,_.$K)(r.visible))){var l=t._columnsController.columnOption(e.columnIndex);l&&((0,_.$K)(l.filterValue)||(0,_.$K)(l.filterValues))&&(t._applyFilter(),o=!0)}!o&&a.filtering&&!this._needApplyFilter&&t.reload()}_handleDataChanged(e){var t=this,a=t._dataSource,r=t._columnsController,n=!1;this._useSortingGroupingFromColumns=!1,a&&!t._isDataSourceApplying&&(t._isDataSourceApplying=!0,(0,x.gx)(t._columnsController.applyDataSource(a)).done(()=>{t._isLoading&&t._handleLoadingChanged(!1),n&&e&&e.isDelayed&&(e.isDelayed=!1),t._isDataSourceApplying=!1;var o,s=t._needApplyFilter;t._needApplyFilter=!1,s&&!t._isAllDataTypesDefined&&(o=t._calculateAdditionalFilter())&&o.length?(Q.Z.log("W1005",t.component.NAME),t._applyFilter()):t.updateItems(e,!0)}).fail(()=>{t._isDataSourceApplying=!1}),t._isDataSourceApplying&&(n=!0,t._handleLoadingChanged(!0)),t._needApplyFilter=!t._columnsController.isDataSourceApplied(),t._isAllDataTypesDefined=r.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.dataErrorOccurred.fire(Q.Z.Error.apply(Q.Z,t))}_setPagingOptions(e){var t=this.option("paging.pageIndex"),a=this.option("paging.pageSize"),r=this.option("paging.enabled"),n=this.option("scrolling.mode"),s="infinite"===n,l=r||"virtual"===n||s,d=!1,u=!1,h=!1;return e.requireTotalCount(!s),void 0!==r&&e.paginate()!==l&&(e.paginate(l),d=!0),void 0!==a&&e.pageSize()!==a&&(e.pageSize(a),u=!0),void 0!==t&&e.pageIndex()!==t&&(e.pageIndex(t),h=!0),!!(d||u||h)&&{isPaginateChanged:d,isPageSizeChanged:u,isPageIndexChanged:h}}_getSpecificDataSourceOption(){var e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){var e=this._dataSource;super._initDataSource();var t=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,t){var a=this._setPagingOptions(t);this._isPaging=a?.isPageIndexChanged,this.setDataSource(t)}else e&&this.updateItems()}_loadDataSource(){var e=this,t=e._dataSource,a=new x.BH;return(0,x.gx)(this._columnsController.refresh(!0)).always(()=>{t?t.load().done(function(){e._isPaging=!1,a.resolve.apply(a,arguments)}).fail(a.reject):a.resolve()}),a.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){var t=this._items,a="append"===e.changeType&&t.length>0?t[t.length-1]:null;return(0,_.$K)(a?.dataIndex)?a.dataIndex+1:0}_processItems(e,t){var a=this,r=a.getRowIndexDelta(),{changeType:n}=t,l={visibleColumns:a._columnsController.getVisibleColumns(null,"loadingAll"===n),dataIndex:this.getDataIndex(t)},d=[];return(0,S.S6)(e,(u,h)=>{(0,_.$K)(h)&&(l.rowIndex=u-r,h=a._processItem(h,l),d.push(h))}),d}_processItem(e,t){return e=this._generateDataItem(e,t),(e=this._processDataItem(e,t)).dataIndex=t.dataIndex++,e}_generateDataItem(e,t){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,t){return e.values=this.generateDataValues(e.data,t.visibleColumns),e}generateDataValues(e,t,a){for(var n,r=[],s=0;s<t.length;s++){var o=t[s];n=a?void 0:null,o.command||(o.calculateCellValue?n=o.calculateCellValue(e):o.dataField&&(n=e[o.dataField])),r.push(n)}return r}_applyChange(e){"update"===e.changeType?this._applyChangeUpdate(e):this.items().length&&e.repaintChangesOnly&&"refresh"===e.changeType?this._applyChangesOnly(e):"refresh"===e.changeType&&this._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){var t=e.rowIndices.slice(0),a=this.getRowIndexDelta();t.sort((s,o)=>s-o);for(var r=0;r<t.length;r++){var n=t[r];e.allowInvisibleRowIndices&&(n+=a),n<0&&(t.splice(r,1),r--)}return t}_applyChangeUpdate(e){var d,t=this,{items:a}=e,r=t._getRowIndices(e),n=t.getRowIndexDelta(),s=t.option("repaintChangesOnly"),o=-1,l=0;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];var u=function(h,p,v){var g=h&&p&&(0,E.bY)(h.key,p.key);return g&&v&&(g=h.rowType===p.rowType&&("detail"!==p.rowType||h.isEditing===p.isEditing)),g};(0,S.S6)(r,(h,p)=>{var v;if(o!==(p+=l+n)){o=p;var g=t._items[p],m=t._items[p+1],w=a[p],I=a[p+1],A=u(g,m)||u(w,I);if(w&&(w.rowIndex=p,e.items.push(w)),g&&w&&u(g,w,A))d="update",t._items[p]=w,g.visible!==w.visible?e.items.splice(-1,1,{visible:w.visible}):s&&!e.isFullUpdate&&(v=t._partialUpdateRow(g,w,p-n));else if(w&&!g||I&&u(g,I,A))d="insert",t._items.splice(p,0,w),l++;else if(g&&!w||m&&u(w,m,A))d="remove",t._items.splice(p,1),l--,o=-1;else{if(!w)return;d="update",t._items[p]=w}e.rowIndices.push(p-n),e.changeTypes.push(d),e.columnIndices.push(v)}})}_isCellChanged(e,t,a,r,n){if(JSON.stringify(e.values[r])!==JSON.stringify(t.values[r]))return!0;function s(o,l){return!!o.modifiedValues&&void 0!==o.modifiedValues[l]}return s(e,r)!==s(t,r)}_getChangedColumnIndices(e,t,a,r){var n;if(e.rowType===t.rowType){if("group"!==t.rowType&&"groupFooter"!==t.rowType&&(n=[],"detail"!==t.rowType))for(var s=0;s<e.values.length;s++)this._isCellChanged(e,t,a,s,r)&&n.push(s);"group"===t.rowType&&e.cells&&t.isExpanded===e.isExpanded&&t.data.isContinuation===e.data.isContinuation&&t.data.isContinuationOnNextPage===e.data.isContinuationOnNextPage&&(n=e.cells.map((l,d)=>{var u;return"groupExpand"!==(null===(u=l.column)||void 0===u?void 0:u.type)?d:-1}).filter(l=>l>=0))}return n}_partialUpdateRow(e,t,a,r){var n=this._getChangedColumnIndices(e,t,a,r);return n?.length&&this.option("dataRowTemplate")&&(n=void 0),n&&(e.cells&&e.cells.forEach((s,o)=>{!(n.indexOf(o)>=0)&&s&&s.update&&s.update(t)}),t.update=e.update,t.watch=e.watch,t.cells=e.cells,r&&(t.oldValues=e.values),e.update&&e.update(t)),n}_isItemEquals(e,t){var a,r,n,s;if(JSON.stringify(e.values)!==JSON.stringify(t.values)||["modified","isNewRow","removed","isEditing"].some(u=>e[u]!==t[u]))return!1;if("group"===e.rowType||"groupFooter"===e.rowType){var o=e.isExpanded===t.isExpanded,l=JSON.stringify(e.summaryCells)===JSON.stringify(t.summaryCells),d=(null===(a=e.data)||void 0===a?void 0:a.isContinuation)===(null===(r=t.data)||void 0===r?void 0:r.isContinuation)&&(null===(n=e.data)||void 0===n?void 0:n.isContinuationOnNextPage)===(null===(s=t.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!o||!l||!d)return!1}return!0}_applyChangesOnly(e){var t,a=[],r=[],n=[],s=[],o={},l=null===(t=e?.isLiveUpdate)||void 0===t||t;function d(v){if(v)return"".concat(v.rowType,",").concat(JSON.stringify(v.key))}var u=this._items,h=u.slice();e.items.forEach((v,g)=>{var m=d(v);o[m]=g,v.rowIndex=g});var p=(0,A0.h)(h,e.items,d,(v,g)=>!!this._isItemEquals(v,g)&&(v.cells&&(v.update&&v.update(g),v.cells.forEach(m=>{m&&m.update&&m.update(g,!0)})),!0));p?(p.forEach(v=>{switch(v.type){case"update":var{index:g}=v,m=v.data,{oldItem:w}=v,I=this._partialUpdateRow(w,m,g,l);a.push(g),n.push("update"),s.push(m),u[g]=m,r.push(I);break;case"insert":a.push(v.index),n.push("insert"),s.push(v.data),r.push(void 0),u.splice(v.index,0,v.data);break;case"remove":a.push(v.index),n.push("remove"),u.splice(v.index,1),s.push(v.oldItem),r.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=a,e.columnIndices=r,e.changeTypes=n,e.items=s,h.length&&(e.isLiveUpdate=!0),this._correctRowIndices(v=>{var g=this._rowIndexOffset||0,m=this.getRowIndexOffset(),I=d(h[v-g]),A=o[I];return A>=0?A+m-v:0})):this._applyChangeFull(e)}_correctRowIndices(e){}_afterProcessItems(e,t){return e}_updateItemsCore(e){var t,a=this._dataSource;if(e.changeType=e.changeType||"refresh",a){var n=this._cachedProcessedItems;e.useProcessedItemsCache&&n?t=n:(t=e.items||a.items(),t=this._beforeProcessItems(t),t=this._processItems(t,e),this._cachedProcessedItems=t),t=this._afterProcessItems(t,e),e.items=t;var s=this._items.length===t.length&&this._items;this._applyChange(e);var o=this.getRowIndexDelta();(0,S.S6)(this._items,(l,d)=>{var u;d.rowIndex=l-o,s&&(d.cells=null!==(u=s[l].cells)&&void 0!==u?u:[]);var h=t[l];h&&(d.loadIndex=h.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){var t=this.getVisibleRows();this.dataSource()&&e.changes.forEach(r=>{if("insert"===r.type&&r.index>=0){for(var n=0,s=0;s<r.index;s++){var o=t[s];o&&("data"===o.rowType||"group"===o.rowType)&&n++}r.index=n}})}updateItems(e,t){var a;if(e=e||{},void 0!==this._repaintChangesOnly)e.repaintChangesOnly=null!==(a=e.repaintChangesOnly)&&void 0!==a?a:this._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||this._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=this.option("repaintChangesOnly");else if(t){var r=this.dataSource().operationTypes();e.repaintChangesOnly=r&&!r.grouping&&!r.filtering&&this.option("repaintChangesOnly"),e.isDataChanged=!0,r&&(r.reload||r.paging||r.groupExpanding)&&(e.needUpdateDimensions=!0)}!this._updateLockCount||e.cancel?(this._updateItemsCore(e),!e.cancel&&this._fireChanged(e)):this._changes.push(e)}loadingOperationTypes(){var e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,E.g0)(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){var e=this._dataSource;return e?(e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})):(new x.BH).resolve()}resetFilterApplying(){this._isFilterApplying=!1}filter(e){var t=this._dataSource,a=t&&t.filter();if(0===arguments.length)return a;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,!O.equalFilterParameters(a,e)&&(t&&t.filter(e),this._applyFilter())}clearFilter(e){var t=this._columnsController,a=function(r){for(var n=t.columnCount(),s=0;s<n;s++)t.columnOption(s,r,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":a("filterValues");break;case"row":a("filterValue")}else this.filter(null),this.searchByText(""),a("filterValue"),a("bufferedFilterValue"),a("filterValues");this.component.endUpdate()}_fireDataSourceChanged(){var e=this;e.changed.add(function t(){e.changed.remove(t),e.dataSourceChanged.fire()})}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,t){var r=this._getDataSourceAdapter().create(this.component);return r.init(e,t),r}isLocalStore(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store())instanceof ir.Z}isCustomStore(e){return(e=e||this.store())instanceof R0.Z}_createDataSourceAdapter(e){var t=this.option("remoteOperations"),a=e.store(),r={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,_.Kn)(t)&&t.groupPaging&&(t=(0,f.l)({},r,t)),"auto"===t&&(t=this.isLocalStore(a)||this.isCustomStore(a)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===t&&(t=r),this._createDataSourceAdapterCore(e,t)}setDataSource(e){var t=this._dataSource;!e&&t&&(t.cancelAll(),t.changed.remove(this._dataChangedHandler),t.loadingChanged.remove(this._loadingChangedHandler),t.loadError.remove(this._loadErrorHandler),t.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),t.changing.remove(this._changingHandler),t.pushed.remove(this._dataPushedHandler),t.dispose(this._isSharedDataSource)),e&&(e=this._createDataSourceAdapter(e)),this._dataSource=e,e&&(this._fireDataSourceChanged(),this._isLoading=!e.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),e.changed.add(this._dataChangedHandler),e.loadingChanged.add(this._loadingChangedHandler),e.loadError.add(this._loadErrorHandler),e.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),e.changing.add(this._changingHandler),e.pushed.add(this._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){var e=this._dataSource;return e&&e.store()}loadAll(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,r=new x.BH,n=a._dataSource;if(n)if(e){var s={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:t?null:a.getCombinedFilter(),group:n.group(),sort:n.sort()}};n._handleDataLoaded(s),(0,x.gx)(s.data).done(l=>{var d;l=a._beforeProcessItems(l),r.resolve(a._processItems(l,{changeType:"loadingAll"}),null===(d=s.extra)||void 0===d?void 0:d.summary)}).fail(r.reject)}else if(n.isLoading())r.reject();else{var o=(0,f.l)({},n.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});n.load(o).done((l,d)=>{l=a._beforeProcessItems(l),l=a._processItems(l,{changeType:"loadingAll"}),r.resolve(l,d&&d.summary)}).fail(r.reject)}else r.resolve([]);return r}getKeyByRowIndex(e,t){var a=this.items(t)[e];if(a)return a.key}getRowIndexByKey(e,t){return O.getIndexByKey(e,this.items(t))}keyOf(e){var t=this.store();if(t)return t.keyOf(e)}byKey(e){var r,t=this.store(),a=this.getRowIndexByKey(e);if(t)return a>=0&&(r=(new x.BH).resolve(this.items()[a].data)),r||t.byKey(e)}key(){var e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){var t=this,a=new x.BH,r=[],n=[];return(0,S.S6)(e,(s,o)=>{r.push(t.byKey(o).done(l=>{n[s]=l}))}),x.gx.apply(c.Z,r).always(()=>{a.resolve(n)}),a}pageIndex(e){return Ru(this,"pageIndex",e)}pageSize(e){return Ru(this,"pageSize",e)}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){!0===e?e={reload:!0,changesOnly:!0}:e||(e={lookup:!0,selection:!0,reload:!0});var t=this,a=t.getDataSource(),{changesOnly:r}=e,n=new x.BH,s=function(){t._repaintChangesOnly=!!r};return(0,x.gx)(!e.lookup||t._columnsController.refresh()).always(()=>{e.load||e.reload?(a&&a.on("customizeLoadResult",s),(0,x.gx)(t.reload(e.reload,r)).always(()=>{a&&a.off("customizeLoadResult",s),t._repaintChangesOnly=void 0}).done(n.resolve).fail(n.reject)):(t.updateItems({repaintChangesOnly:e.changesOnly}),n.resolve())}),n.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this._dataSource&&this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher),this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,t){((e=Array.isArray(e)?e:[e]).length>1||(0,_.$K)(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!t})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&("paging.pageIndex"===e||"paging.pageSize"===e)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){return this.pageIndex()===this.pageCount()-1}load(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.load()}reload(e,t){var a;return null===(a=this._dataSource)||void 0===a?void 0:a.reload(e,t)}push(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.push(...arguments)}itemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.hasKnownLastPage())}isLoaded(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded())}totalCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalCount():0}hasLoadOperation(){var e,t,a=null!==(t=null===(e=this._dataSource)||void 0===e?void 0:e.operationTypes())&&void 0!==t?t:{};return Object.keys(a).some(r=>a[r])}}var L0={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:Ou}},Ke=T(3706),is=function i(e,t){if(e&&(e=e.slice(0),t))for(var a=0;a<e.length;a++)e[a]=(0,f.l)({key:e[a].key},e[a]),e[a].items=i(e[a].items,t-1);return e},Vu=function(i,e,t){var a={reload:!0,fullReload:!0};return e&&((a={sorting:!O.equalSortParameters(i.sort,e.sort),grouping:!O.equalSortParameters(i.group,e.group,!0),groupExpanding:!O.equalSortParameters(i.group,e.group)||e.groupExpand,filtering:!O.equalFilterParameters(i.filter,e.filter),pageIndex:i.pageIndex!==e.pageIndex,skip:i.skip!==e.skip,take:i.take!==e.take,pageSize:i.pageSize!==e.pageSize,fullReload:t,reload:!1,paging:!1}).reload=t||a.sorting||a.grouping||a.filtering,a.paging=a.pageIndex||a.pageSize||a.take),a},Lu=function(i,e){var t=O.normalizeSortingInfo(i.group||i.storeLoadOptions.group||i.loadOptions.group).length,a=[];if(Pu(a,i,t))return a;e&&M0(a,i,t)},Pu=function(i,e,t,a){var r,n,s,o,l,{storeLoadOptions:d}=e,u=null!==(n=null!==(r=e.take)&&void 0!==r?r:d.take)&&void 0!==n?n:0,h=null===(s=e.cachedData)||void 0===s?void 0:s.items;if(u&&h){for(var p=null!==(l=null!==(o=e.skip)&&void 0!==o?o:d.skip)&&void 0!==l?l:0,v=0;v<u;v+=1){var g=a?u-1-v:v,m=g+p,w=h[m];if(void 0===w&&m in h)return!0;var I=B0(e,w,t,g,u);if(!I)return!1;i.push(I)}return!0}return!1},B0=function(i,e,t,a,r){return t&&e?F0(e,t,0===a&&i.skips||[],a===r-1&&i.takes||[]):e},F0=function i(e,t,a,r){if(t&&e){var n=(0,V.Z)({},e),s=a[0]||0,o=r[0],{items:l}=e;if(l){if(void 0===o&&!l[s])return;n.items=[],a.length&&(n.isContinuation=!0),o&&(n.isContinuationOnNextPage=e.count>o);for(var d=0;void 0===o?l[d+s]:d<o;d+=1){var h=d+1===o,p=i(l[d+s],t-1,0===d?a.slice(1):[],h?r.slice(1):[]);if(void 0===p)return;n.items.push(p)}}return n}return e},M0=function(i,e,t){var a,r,n=i.length,{storeLoadOptions:s}=e;if(void 0!==s.skip&&s.take&&!t){var o=[];Pu(o,e,t,!0);var l=o.length;(n||l)&&(e.skip=null!==(a=e.skip)&&void 0!==a?a:s.skip,e.take=null!==(r=e.take)&&void 0!==r?r:s.take),n&&(s.skip+=n,s.take-=n,e.cachedDataPartBegin=i),l&&(s.take-=l,e.cachedDataPartEnd=o.reverse())}},N0=function i(e,t,a,r){if(a&&t){var n=(0,V.Z)({},t);delete n.isContinuation,delete n.isContinuationOnNextPage;var s=r[0]||0;return t.items&&(n.items=e?.items||{},t.items.forEach((o,l)=>{var d=l+s,u=0===l?r.slice(1):[];n.items[d]=i(n.items[d],o,a-1,u)})),n}return t},as=class H0 extends J.Controller{init(e,t){var a=this;a._dataSource=e,a._remoteOperations=t||{},a._isLastPage=!e.isLastPage(),a._hasLastPage=!1,a._currentTotalCount=0,a._cachedData={items:{}},a._lastOperationTypes={},a._eventsStrategy=e._eventsStrategy,a._totalCountCorrection=0,a._isLoadingAll=!1,a.changed=(0,le.Z)(),a.loadingChanged=(0,le.Z)(),a.loadError=(0,le.Z)(),a.customizeStoreLoadOptions=(0,le.Z)(),a.changing=(0,le.Z)(),a.pushed=(0,le.Z)(),a._dataChangedHandler=a._handleDataChanged.bind(a),a._customizeStoreLoadOptionsHandler=a._handleCustomizeStoreLoadOptions.bind(a),a._dataLoadedHandler=a._handleDataLoaded.bind(a),a._loadingChangedHandler=a._handleLoadingChanged.bind(a),a._loadErrorHandler=a._handleLoadError.bind(a),a._pushHandler=a._handlePush.bind(a),a._changingHandler=a._handleChanging.bind(a),e.on("changed",a._dataChangedHandler),e.on("customizeStoreLoadOptions",a._customizeStoreLoadOptionsHandler),e.on("customizeLoadResult",a._dataLoadedHandler),e.on("loadingChanged",a._loadingChangedHandler),e.on("loadError",a._loadErrorHandler),e.on("changing",a._changingHandler),e.store().on("beforePush",a._pushHandler),(0,S.S6)(e,(r,n)=>{!a[r]&&(0,_.mf)(n)&&(a[r]=function(){return this._dataSource[r].apply(this._dataSource,arguments)})})}dispose(e){var t=this._dataSource,a=t.store();t.off("changed",this._dataChangedHandler),t.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),t.off("customizeLoadResult",this._dataLoadedHandler),t.off("loadingChanged",this._loadingChangedHandler),t.off("loadError",this._loadErrorHandler),t.off("changing",this._changingHandler),a&&a.off("beforePush",this._pushHandler),e||t.dispose()}remoteOperations(){return this._remoteOperations}refresh(e,t){var a=this._dataSource;t.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!a.paginate(),this._hasLastPage=this._isLastPage)}resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0}resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0}resetPagesCache(e){this._cachedData={items:{}}}_needClearStoreDataCache(){var e=this.remoteOperations(),t=Vu(this._lastLoadOptions||{},{});return!Object.keys(e).every(r=>!t[r]||!e[r])}push(e,t){var a=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,Ke.ii)({keyInfo:a,data:this._cachedStoreData,changes:e}),t||this._applyBatch(e),this.pushed.fire(e)}getDataIndexGetter(){if(!this._dataIndexGetter){var e,t,a=this.store();this._dataIndexGetter=r=>{if(!e||t&&t!==this._cachedStoreData){t=this._cachedStoreData||[],e={};for(var s=0;s<t.length;s++)e[(0,E.k3)(a.keyOf(t[s]))]=s}return e[(0,E.k3)(a.keyOf(r))]}}return this._dataIndexGetter}_getKeyInfo(){return this.store()}_needToCopyDataObject(){return!0}_applyBatch(e,t){var a=this._getKeyInfo(),r=this._dataSource,n=O.normalizeSortingInfo(this.group()).length,s="reshape"===this.option("editing.refreshMode"),o="virtual"===this.option("scrolling.mode");e=e.filter(h=>!r.paginate()||"insert"!==h.type||void 0!==h.index);var l=()=>n?this.itemsCount():this.items().length,d=l();(0,Ke.ii)({keyInfo:a,data:this._items,changes:e,groupCount:n,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,Ke.ii)({keyInfo:a,data:r.items(),changes:e,groupCount:n,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(t||!s)&&o)&&(this._totalCountCorrection+=l()-d),e.splice(0,e.length)}_handlePush(e){var{changes:t}=e;this.push(t,!0)}_handleChanging(e){this.changing.fire(e),this._applyBatch(e.changes,!0)}_needCleanCacheByOperation(e,t){var a=["filtering","sorting","paging"],r=a.indexOf(e);return(r>=0?a.slice(r):[e]).some(s=>t[s])}_customizeRemoteOperations(e,t){var a=this._cachedStoreData,r=this._cachedPagingData,n=this._cachedData;(e.storeLoadOptions.filter&&!e.remoteOperations.filtering||e.storeLoadOptions.sort&&!e.remoteOperations.sorting)&&(e.remoteOperations={filtering:e.remoteOperations.filtering,summary:e.remoteOperations.summary}),t.fullReload?(a=void 0,r=void 0,n={items:{}}):(t.reload?(r=void 0,n={items:{}}):t.groupExpanding&&(n={items:{}}),(0,S.S6)(t,(s,o)=>{o&&this._needCleanCacheByOperation(s,e.remoteOperations)&&(a=void 0,r=void 0)})),r&&(e.remoteOperations.paging=!1),e.cachedStoreData=a,e.cachedPagingData=r,e.cachedData=n,e.isCustomLoading||(this._cachedStoreData=a,this._cachedPagingData=r,this._cachedData=n)}_handleCustomizeStoreLoadOptions(e){var t;this._handleDataLoading(e),0!==(null===(t=e.data)||void 0===t?void 0:t.length)&&(e.data=Lu(e,!0)||e.cachedStoreData)}_handleDataLoading(e){var t=this._dataSource,a=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(e),e.delay=this.option("loadingTimeout"),e.originalStoreLoadOptions=e.storeLoadOptions,e.remoteOperations=(0,f.l)({},this.remoteOperations());var r=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(e.delay=void 0);var n=(0,f.l)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},e.storeLoadOptions),s=Vu(n,a,r);if(this._customizeRemoteOperations(e,s),!e.isCustomLoading){var o=this._isRefreshing;e.pageIndex=t.pageIndex(),e.lastLoadOptions=n,e.operationTypes=s,this._loadingOperationTypes=s,this._isRefreshing=!0,(0,x.gx)(o||this._isRefreshed||this.refresh(e,s)).done(()=>{this._lastOperationId===e.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{t.cancel(e.operationId)}).always(()=>{this._isRefreshing=!1}),t.cancel(this._lastOperationId),this._lastOperationId=e.operationId,this._isRefreshing&&t.cancel(this._lastOperationId)}this._handleDataLoadingCore(e)}_handleDataLoadingCore(e){var{remoteOperations:t}=e;e.loadOptions={};var a=e.cachedData.extra,r={filter:!t.filtering,sort:!t.sorting,group:!t.grouping,summary:!t.summary,skip:!t.paging,take:!t.paging,requireTotalCount:a&&"totalCount"in a||!t.paging,langParams:!t.filtering||!t.sorting};(0,S.S6)(e.storeLoadOptions,(n,s)=>{r[n]&&(e.loadOptions[n]=s,delete e.storeLoadOptions[n])}),a&&(e.extra=a)}_handleDataLoaded(e){var t,a,{loadOptions:r}=e,n=e.remoteOperations&&!e.remoteOperations.paging,{cachedData:s}=e,{storeLoadOptions:o}=e,l=!1!==this.option("cacheEnabled")&&o,d=l&&!e.isCustomLoading&&s&&(!n||o.group),u=l&&n,h=u&&!e.isCustomLoading;if(r){n&&(e.skip=r.skip,e.take=r.take,delete r.skip,delete r.take),r.group&&(r.group=e.group||r.group);var p=O.normalizeSortingInfo(e.group||o.group||r.group).length;e.cachedDataPartBegin&&(e.data=e.cachedDataPartBegin.concat(e.data)),e.cachedDataPartEnd&&(e.data=e.data.concat(e.cachedDataPartEnd)),(!d||!Lu(e))&&(u&&e.cachedPagingData?e.data=is(e.cachedPagingData,p):(h&&(this._cachedStoreData?e.mergeStoreLoadData&&(e.data=this._cachedStoreData=this._cachedStoreData.concat(e.data)):this._cachedStoreData=is(e.data,O.normalizeSortingInfo(o.group).length)),new ir.Z(e.data).load(r).done(v=>{e.data=v,h&&(this._cachedPagingData=is(e.data,p))}).fail(v=>{e.data=(new x.BH).reject(v)})),r.requireTotalCount&&n&&(e.extra=(0,_.PO)(e.extra)?e.extra:{},e.extra.totalCount=e.data.length),e.extra&&e.extra.totalCount>=0&&(!1===o.requireTotalCount||!1===r.requireTotalCount)&&(e.extra.totalCount=-1),!r.data&&(o.requireTotalCount||(null!==(a=null===(t=e.extra)||void 0===t?void 0:t.totalCount)&&void 0!==a?a:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(e),d&&(s.extra=s.extra||(0,f.l)({},e.extra),(0,x.gx)(e.data).done(v=>{!function(i,e,t){for(var a,r,n,s,{storeLoadOptions:o}=i,l=null!==(r=null!==(a=i.skip)&&void 0!==a?a:o.skip)&&void 0!==r?r:0,d=null!==(s=null!==(n=i.take)&&void 0!==n?n:o.take)&&void 0!==s?s:0,u=0;u<d;u+=1){var h=u+l,p=i.cachedData.items;p[h]=N0(p[h],e[u],t,0===u&&i.skips||[])}}(e,v,p)}))),(0,x.gx)(e.data).done(()=>{e.lastLoadOptions&&(this._lastLoadOptions=e.lastLoadOptions,Object.keys(e.operationTypes).forEach(v=>{this._lastOperationTypes[v]=this._lastOperationTypes[v]||e.operationTypes[v]}))}),e.storeLoadOptions=e.originalStoreLoadOptions}else this._dataSource.cancel(e.operationId)}_handleDataLoadedCore(e){e.remoteOperations&&!e.remoteOperations.paging&&Array.isArray(e.data)&&(void 0!==e.skip&&(e.data=e.data.slice(e.skip)),void 0!==e.take&&(e.data=e.data.slice(0,e.take)))}_handleLoadingChanged(e){this.loadingChanged.fire(e)}_handleLoadError(e){this.loadError.fire(e),this.changed.fire({changeType:"loadError",error:e})}_loadPageSize(){return this.pageSize()}_handleDataChanged(e){var t,a=this._dataSource,r=!1,n=!e||(0,_.$K)(e.changeType),s=this.itemsCount();n&&(this._isLastPage=!s||!this._loadPageSize()||s<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),a.totalCount()>=0?a.pageIndex()>=this.pageCount()&&(a.pageIndex(this.pageCount()-1),this.pageIndex(a.pageIndex()),this.resetPagesCache(),a.load(),r=!0):n&&((t=a.pageIndex()*this.pageSize()+s)>this._currentTotalCount&&(this._currentTotalCount=t,(0===a.pageIndex()||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),0===s&&a.pageIndex()>=this.pageCount()&&(a.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(a.load(),r=!0))),r||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(e),this.component._optionCache=void 0)}_scheduleCustomLoadCallbacks(e){var t=this;t._isCustomLoading=!0,e.always(()=>{t._isCustomLoading=!1})}loadingOperationTypes(){return this._loadingOperationTypes}operationTypes(){return this._operationTypes}lastLoadOptions(){return this._lastLoadOptions||{}}isLastPage(){return this._isLastPage}_dataSourceTotalCount(){return this._dataSource.totalCount()}_changeRowExpandCore(e){}changeRowExpand(e){}totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)}totalCountCorrection(){return this._totalCountCorrection}items(){}itemsCount(){return this._dataSource.items().length}totalItemsCount(){return this.totalCount()}pageSize(){var e=this._dataSource;return arguments.length||e.paginate()?e.pageSize.apply(e,arguments):0}pageCount(){var e=this.totalItemsCount()-this._totalCountCorrection,t=this.pageSize();return t&&e>0?Math.max(1,Math.ceil(e/t)):1}hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0}loadFromStore(e,t){var a=this._dataSource,r=new x.BH;if(a)return(t=t||a.store()).load(e).done((n,s)=>{n&&!Array.isArray(n)&&Array.isArray(n.data)&&(s=n,n=n.data),r.resolve(n,s)}).fail(r.reject),r}isCustomLoading(){return!!this._isCustomLoading}load(e){var t=this,a=t._dataSource,r=new x.BH;if(e){var n=a.store(),s=a.loadOptions(),o={storeLoadOptions:(0,f.l)({},e,{langParams:s?.langParams}),isCustomLoading:!0};return(0,S.S6)(n._customLoadOptions()||[],(l,d)=>{d in o.storeLoadOptions||(o.storeLoadOptions[d]=s[d])}),this._isLoadingAll=e.isLoadingAll,t._scheduleCustomLoadCallbacks(r),a._scheduleLoadCallbacks(r),t._handleCustomizeStoreLoadOptions(o),function(i,e){(0,_.$K)(e)?(0,E.Wi)(i,e):i()}(()=>{if(!a.store())return r.reject("canceled");(0,x.gx)(o.data||t.loadFromStore(o.storeLoadOptions)).done((l,d)=>{o.data=l,o.extra=d||{},t._handleDataLoaded(o),e.requireTotalCount&&void 0===o.extra.totalCount&&(o.extra.totalCount=n.totalCount(o.storeLoadOptions)),(0,x.gx)(o.data,o.extra.totalCount).done((u,h)=>{o.extra.totalCount=h,r.resolve(u,o.extra)}).fail(r.reject)}).fail(r.reject)},t.option("loadingTimeout")),r.fail(function(){t._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return a.load()}reload(e){return e?this._dataSource.reload():this._dataSource.load()}getCachedStoreData(){return this._cachedStoreData}isLoaded(){}pageIndex(e){}};const ar={extend(i){as=i(as)},create:i=>new as(i)};P.registerModule("data",{defaultOptions:L0.defaultOptions,controllers:{data:class Z0 extends Ou{_getDataSourceAdapter(){return ar}_getSpecificDataSourceOption(){var e=this.option("dataSource");return e&&!Array.isArray(e)&&this.option("keyExpr")&&Q.Z.log("W1011"),super._getSpecificDataSourceOption()}}}});var Bu="dx-sort",Fu="dx-sort-none",Mu="dx-sort-index-icon";const ku=i=>class extends i{_applyColumnState(e){var t,a,r=this.option("sorting.mode"),{rootElement:n}=e,{column:s}=e,o=this._getIndicatorContainer(n);if("sort"===e.name){n.find(".".concat(Bu)).remove(),!o.children().length&&o.remove();var l="none"!==r&&s.allowSorting,d=this.getController&&!!this.getController("columns").columnOption("sortIndex:1");return!(0,_.$K)(s.groupIndex)&&(l||(0,_.$K)(s.sortOrder))&&(t="asc"===s.sortOrder?"ascending":"descending",a=super._applyColumnState(e).toggleClass("dx-sort-up","asc"===s.sortOrder).toggleClass("dx-sort-down","desc"===s.sortOrder),d&&this.option("sorting.showSortIndexes")&&s.sortIndex>=0&&((0,c.Z)("<span>").addClass(Mu).text(s.sortIndex+1).appendTo(a),a.addClass("dx-sort-index")),l&&e.rootElement.addClass(this.addWidgetPrefix("action"))),this._setAriaSortAttribute(s,t,n,d),a}return super._applyColumnState(e)}_setAriaSortAttribute(e,t,a,r){if(a.removeAttr("aria-roledescription"),e.isGrouped){var n=this.localize("dxDataGrid-ariaNotSortedColumn");(0,_.$K)(e.sortOrder)&&(n=this.localize("asc"===e.sortOrder?"dxDataGrid-ariaSortedAscendingColumn":"dxDataGrid-ariaSortedDescendingColumn")),this.setAria("roledescription",n,a)}else if((0,_.$K)(e.sortOrder)){if(this.setAria("sort",t,a),r&&e.sortIndex>=0){var s=y.Z.format("dxDataGrid-ariaColumnHeader"),o=y.Z.format("dxDataGrid-ariaSortIndex",e.sortIndex+1),l="".concat(s,", ").concat(o);this.setAria("roledescription",l,a)}}else this.setAria("sort","none",a)}_getIndicatorClassName(e){return"sort"===e?Bu:"sortIndex"===e?Mu:super._getIndicatorClassName(e)}_renderIndicator(e){var{column:t}=e,a=e.container,r=e.indicator;if("sort"===e.name){var n=this.option("rtlEnabled");if((0,_.$K)(t.sortOrder)||r&&r.addClass(Fu),a.children().length&&(!n&&"left"===e.columnAlignment||n&&"right"===e.columnAlignment))return void a.prepend(r)}super._renderIndicator(e)}_updateIndicator(e,t,a){if("sort"!==a||!(0,_.$K)(t.groupIndex))return super._updateIndicator.apply(this,arguments)}_getIndicatorElements(e,t){var a=super._getIndicatorElements(e);return t?a:a&&a.not(".".concat(Fu))}};var q0={defaultOptions:()=>({sorting:{mode:"single",ascendingText:y.Z.format("dxDataGrid-sortingAscendingText"),descendingText:y.Z.format("dxDataGrid-sortingDescendingText"),clearText:y.Z.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:i=>class extends(ku(i)){optionChanged(e){"sorting"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_createRow(e){var t=super._createRow(e);return"header"===e.rowType&&C.Z.on(t,(0,D.V4)(se.u,"dxDataGridColumnHeadersView"),"td",this.createAction(a=>{this._processHeaderAction(a.event,t)})),t}_processHeaderAction(e,t){if((0,c.Z)(e.currentTarget).parent().get(0)===t.get(0)){var a=this,r=null,n=(0,c.Z)(e.currentTarget),s=n.parent().index(),o=-1;[].slice.call(a.getCellElements(s)).some((v,g)=>{if(v===n.get(0))return o=g,!0});var d=a._columnsController.getVisibleColumns(s)[o],u=a.getController("editing"),h=a.option("editing.mode");u&&u.isEditing()&&("batch"===h||"cell"===h)||!a._isSortableElement((0,c.Z)(e.target))||d&&!(0,_.$K)(d.groupIndex)&&!d.command&&(e.shiftKey?r="shift":(0,D.j1)(e)&&(r="ctrl"),setTimeout(()=>{a._columnsController.changeSortOrder(d.index,r)}))}}_renderCellContent(e,t){var{column:a}=t;!a.command&&"header"===t.rowType&&this._applyColumnState({name:"sort",rootElement:e,column:a,showColumnLines:this.option("showColumnLines")}),super._renderCellContent.apply(this,arguments)}_columnOptionChanged(e){var{changeTypes:t}=e;1===t.length&&t.sorting?this._updateIndicators("sort"):super._columnOptionChanged(e)}},headerPanel:i=>class extends(ku(i)){optionChanged(e){"sorting"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_createGroupPanelItem(e,t){var a=this,r=super._createGroupPanelItem(...arguments);return C.Z.on(r,(0,D.V4)(se.u,"dxDataGridHeaderPanel"),a.createAction(()=>{a._processGroupItemAction(t.index)})),a._applyColumnState({name:"sort",rootElement:r,column:{alignment:a.option("rtlEnabled")?"right":"left",allowSorting:t.allowSorting,sortOrder:"desc"===t.sortOrder?"desc":"asc",isGrouped:!0},showColumnLines:!0}),r}_processGroupItemAction(e){setTimeout(()=>this.getController("columns").changeSortOrder(e))}}}}};P.registerModule("sorting",q0);var It=T(2070),Nu="rowsview",rs="dx-group-row",Hu="dx-group-cell",rr="dx-freespace-row",Zu="dx-column-lines",zu="dx-row-alt",$u="dx-last-row-border";function Wu(i){return i?Math.round(i.scrollWidth()-i.clientWidth()):0}function Ku(i){var{rowType:e,column:t}=i;return"group"===e&&(0,_.$K)(t.groupIndex)&&!t.showWhenGrouped&&!t.command}function Gu(i){var{element:e,watch:t,getter:a,callBack:r}=i;if(t){var n=t(a,r);C.Z.on(e,Ft.x,n)}}var nx=function(i,e){var t=(0,qe.xb)(e.text)&&"data"===e.rowType,{text:a}=e,r=i.get(0);t?O.setEmptyText(i):e.column.encodeHtml?r.textContent=a:r.innerHTML=a},Uu={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:y.Z.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:y.Z.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:class ox extends Gi{init(){super.init(),this._editingController=this.getController("editing"),this._resizingController=this.getController("resizing"),this._columnsResizerController=this.getController("columnsResizer"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._validatingController=this.getController("validating"),this._errorHandlingController=this.getController("errorHandling"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowHeight=0,this._scrollTop=0,this._scrollLeft=-1,this._scrollRight=0,this._hasHeight=void 0,this._contentChanges=[],this._dataController.loadingChanged.add((e,t)=>{this.setLoading(e,t)}),this._dataController.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_getDefaultTemplate(e){return"empty"===e.command?function(t){t.html("&nbsp;")}:nx}renderFocusState(e){}_getDefaultGroupTemplate(e){var t=this.option("summary.texts");return function(a,r){var{data:n}=r,s="".concat(r.column.caption,": ").concat(r.text),o=a.get(0);r.summaryItems&&r.summaryItems.length&&(s+=" ".concat(O.getGroupRowSummaryText(r.summaryItems,t))),n&&(r.groupContinuedMessage&&r.groupContinuesMessage?s+=" (".concat(r.groupContinuedMessage,". ").concat(r.groupContinuesMessage,")"):r.groupContinuesMessage?s+=" (".concat(r.groupContinuesMessage,")"):r.groupContinuedMessage&&(s+=" (".concat(r.groupContinuedMessage,")"))),e.encodeHtml?o.textContent=s:o.innerHTML=s}}_update(e){}_updateCell(e,t){Ku(t)&&e.addClass(Hu),super._updateCell.apply(this,arguments)}_getCellTemplate(e){var{column:t}=e;return Ku(e)?t.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(t)}:("data"===e.rowType||t.command)&&t.cellTemplate?t.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(t)}}_createRow(e,t){var a=super._createRow.apply(this,arguments);if(e){var r="group"===e.rowType,n="data"===e.rowType;n&&a.addClass("dx-data-row"),n&&this.option("showRowLines")&&a.addClass("dx-row-lines"),this.option("showColumnLines")&&a.addClass(Zu),!1===e.visible&&a.hide(),r&&(a.addClass(rs),this.setAriaExpandedAttribute(a,e))}return a}_rowPrepared(e,t,a){"data"===t.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(a)&&e.addClass(zu),Gu({element:e.get(0),watch:t.watch,getter:()=>this._isAltRow(a),callBack:r=>{e.toggleClass(zu,r)}})),this._setAriaRowIndex(t,e),Gu({element:e.get(0),watch:t.watch,getter:()=>t.rowIndex,callBack:()=>this._setAriaRowIndex(t,e)})),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,t){if(t.is("tr")){var{component:a}=this,r="standard"===a.option("scrolling.mode")&&!O.isVirtualRowRendering(a),n=e.rowIndex+1;r?n=a.pageIndex()*a.pageSize()+n:n+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",n,t)}}setAriaExpandedAttribute(e,t){var a=this.localize(t.isExpanded?"dxDataGrid-ariaExpandedRow":"dxDataGrid-ariaCollapsedRow");this.setAria("roledescription",a,e)}_afterRowPrepared(e){var t=e.args[0],a=this._dataController,r=a.getVisibleRows()[t.rowIndex],n=this.option("integrationOptions.watchMethod");if(t.data&&"data"===t.rowType&&!t.isNewRow&&this.option("twoWayBindingEnabled")&&n&&r){var s=n(()=>a.generateDataValues(t.data,t.columns),()=>{a.repaintRows([r.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});C.Z.on(t.rowElement,Ft.x,s)}}_renderScrollable(e){var t=this.element();if(t.children().length||t.append("<div>"),(e||!this._loadPanel)&&this._renderLoadPanel(t,t.parent(),this._dataController.isLocalStore()),(e||!this.getScrollable())&&this._dataController.isLoaded()){for(var a=this.getColumns(),r=!0,n=0;n<a.length;n++)if(!a[n].width&&!a[n].minWidth){r=!1;break}(this.option("columnAutoWidth")||this._hasHeight||r||this._columnsController._isColumnFixing())&&this._renderScrollableCore(t)}}_handleScroll(e){var t=this.option("rtlEnabled"),a=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;var r=e.scrollOffset.left;t&&(this._scrollRight=Wu(e.component)-this._scrollLeft,a&&(r=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,V.Z)((0,V.Z)({},e.scrollOffset),{left:r}),this.name)}_renderScrollableCore(e){var t=this._createScrollableOptions(),a=this._handleScroll.bind(this);t.onScroll=a,this._scrollable=this._createComponent(e,It.Z,t),this._scrollableContainer=this._scrollable&&(0,c.Z)(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return O.renderLoadPanel.apply(this,arguments)}_renderContent(e,t,a){return e.empty().append(t),this._findContentElement()}_updateContent(e,t,a){return this._contentChanges.push({newTableElement:e,change:t,isFixedTableRendering:a}),this.waitAsyncTemplates().done(()=>{var r=this._contentChanges;this._contentChanges=[],r.forEach(n=>{var{newTableElement:s,change:o,isFixedTableRendering:l}=n,d=this.getTableElement(l),u=this._findContentElement(l),h=o?.changeType,p=[],v=this.option("highlightChanges"),g=this.addWidgetPrefix("row-inserted-animation");"update"===h?((0,S.S6)(o.rowIndices,(m,w)=>{var I,A=this._getRowElements(s).eq(m),F=null===(I=o.changeTypes)||void 0===I?void 0:I[m],G=o.items&&o.items[m];p.push(()=>{var M,k=this._getRowElements(d),U=k.eq(w);switch(F){case"update":if(G){var ee=null===(M=o.columnIndices)||void 0===M?void 0:M[m];(0,_.$K)(G.visible)&&G.visible!==U.is(":visible")?U.toggle(G.visible):ee?this._updateCells(U,A,ee):U.replaceWith(A)}break;case"insert":if(k.length)U.length?A.insertBefore(U):A.insertAfter(k.last());else if(d){var $=A.is("tbody")?d:d.children("tbody");A.prependTo($)}v&&o.isLiveUpdate&&A.addClass(g);break;case"remove":U.remove()}})}),(0,S.S6)(p,function(){this()}),s.remove()):(this.setTableElement(s,l),u.addClass(this.addWidgetPrefix("content")),this._setGridRole(u),this._renderContent(u,s,l))})}).fail(()=>{this._contentChanges=[]})}_getGridRoleName(){return"grid"}_setGridRole(e){var t,a=!(null!==(t=this._dataController)&&void 0!==t&&t.isEmpty()),r=this._getGridRoleName();e?.length&&a&&this.setAria("role",r,e)}_createEmptyRow(e,t,a){var r,n=this._createRow(),s=t?this.getFixedColumns():this.getColumns();n.addClass(e).toggleClass(Zu,this.option("showColumnLines"));for(var o=0;o<s.length;o++)r=this._createCell({column:s[o],rowType:"freeSpace",columnIndex:o,columns:s}),(0,_.kE)(a)&&r.css("height",a),n.append(r);return this.setAria("role","presentation",n),n}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,t,a){var r=this._getBodies(e),n=!r.length||t.is("tbody"),s=n?e:r;if("top"===a){if(s.first().prepend(t),n){var o=s.children("colgroup");s.prepend(o)}}else s.last().append(t)}_renderFreeSpaceRow(e,t){var a=this._createEmptyRow(rr);a=this._wrapRowIfNeed(e,a,"refresh"===t?.changeType),this._appendEmptyRow(e,a)}_checkRowKeys(e){var t=this,a=t._getRows(e),r=t._dataController.store()&&t._dataController.store().key();r&&a.some(n=>{if("data"===n.rowType&&void 0===n.key)return t._dataController.fireError("E1046",r),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){return(e=e||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".".concat(rr)).toArray().reduce((a,r)=>a+(0,ne.l)(r).height,0)}_updateRowHeight(){var e=this.getTableElement(),t=this._dataController.items().length;if(e&&this._needUpdateRowHeight(t)){var a=this._getRowsHeight(e);this._rowHeight=a/t}}_findContentElement(e){var t=this.element(),a=this.getScrollable();if(t)return a&&(t=(0,c.Z)(a.content())),t.children().first()}_getRowElements(e){var t=super._getRowElements(e);return t&&t.not(".".concat(rr))}_getFreeSpaceRowElements(e){var t=e||this.getTableElements();return t&&t.children("tbody").children(".".concat(rr))}_getNoDataText(){return this.option("noDataText")}_rowClick(e){var t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,f.l)({evaluate:a=>(0,q.vb)(a)(t.data)},e,t))}_rowDblClick(e){var t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,f.l)({},e,t))}_getColumnsCountBeforeGroups(e){for(var t=0;t<e.length;t++)if("groupExpand"===e[t].type)return t;return 0}_getGroupCellOptions(e){var t=this._getColumnsCountBeforeGroups(e.columns),a=(e.row.groupIndex||0)+t;return{columnIndex:a,colspan:e.columns.length-a-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,t){"group"===t.row.rowType?this._renderGroupedCells(e,t):t.row.values&&super._renderCells(e,t)}_renderGroupedCells(e,t){for(var r,o,{row:a}=t,{columns:n}=t,{rowIndex:s}=a,l=this._getGroupCellOptions(t),d=0;d<=l.columnIndex;d++)d===l.columnIndex&&n[d].allowCollapsing&&"infinite"!==t.scrollingMode?(o=!!a.isExpanded,r=n[d]):(o=null,r={command:"expand",cssClass:n[d].cssClass}),this._needRenderCell(d,t.columnIndices)&&this._renderCell(e,{value:o,row:a,rowIndex:s,column:r,columnIndex:d,columnIndices:t.columnIndices,change:t.change});var u=(0,ne.q)(this.option("rtlEnabled")),h=(0,f.l)({},n[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:u});l.colspan>1&&(h.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,t.columnIndices)&&this._renderCell(e,{value:a.values[a.groupIndex],row:a,rowIndex:s,column:h,columnIndex:l.columnIndex+1,columnIndices:t.columnIndices,change:t.change})}_renderRows(e,t){var a=this.option("scrolling.mode");super._renderRows(e,(0,f.l)({scrollingMode:a},t)),this._checkRowKeys(t.change),this._renderFreeSpaceRow(e,t.change),this._hasHeight||this.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,t,a){var{row:r}=t,n=(0,f.l)({columns:t.columns},r),s=this._createRow(r,"tbody");s.appendTo(e),this.renderTemplate(s,a,n,!0,t.change),this._rowPrepared(s,n,t.row)}_renderRow(e,t){var{row:a}=t,{rowTemplate:r}=this.option(),n=this.option("dataRowTemplate");"data"===a.rowType&&n?this._renderDataRowByTemplate(e,t,n):"data"!==a.rowType&&"group"!==a.rowType||(0,_.$K)(a.groupIndex)||!r?super._renderRow(e,t):this.renderTemplate(e,r,(0,f.l)({columns:t.columns},a),!0)}_renderTable(e){var t=this,a=super._renderTable(e);return(0,_.$K)(t.getTableElement())?t._renderScrollable():(t.setTableElement(a),t._renderScrollable(!0),t.resizeCompleted.add(function r(){var n=t.getScrollable();n&&t.element().closest((0,B.Jj)().document).length&&(t.resizeCompleted.remove(r),n._visibilityChanged(!0))})),a}_createTable(){var e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){var t=this.element();t.addClass(this.addWidgetPrefix(Nu)).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),t.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",t);var a=this._renderTable({change:e}),r=this._updateContent(a,e);return super._renderCore(e),this._lastColumnWidths=null,r}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){var{column:t}=e,{row:a}=e,{data:r}=a,n=a&&a.summaryCells,{value:s}=e,o=O.getDisplayValue(t,s,r,a.rowType),l=super._getCellOptions(e);if(l.value=s,l.oldValue=e.oldValue,l.displayValue=o,l.row=a,l.key=a.key,l.data=r,l.rowType=a.rowType,l.values=a.values,l.text=t.command?"":O.formatValue(o,t),l.rowIndex=a.rowIndex,l.summaryItems=n&&n[e.columnIndex],l.resized=t.resizedCallbacks,(0,_.$K)(t.groupIndex)&&!t.command){var d=this.option("grouping.texts"),u=this.option("scrolling.mode");"virtual"!==u&&"infinite"!==u&&(l.groupContinuesMessage=r&&r.isContinuationOnNextPage&&d&&d.groupContinuesMessage,l.groupContinuedMessage=r&&r.isContinuation&&d&&d.groupContinuedMessage)}return l}_setRowsOpacityCore(e,t,a,r){var n=this._columnsController,s=n.getColumns(),o=s&&s[a],l=o&&o.isBand&&o.index;(0,S.S6)(e,(d,u)=>{if(!(0,c.Z)(u).hasClass(rs))for(var h=0;h<t.length&&(!((0,_.kE)(l)&&n.isParentBandColumn(t[h].index,l)||t[h].index===a)||(e.eq(d).children().eq(h).css({opacity:r}),(0,_.kE)(l)));h++);})}_getDevicePixelRatio(){return(0,B.Jj)().devicePixelRatio}renderNoDataText(){return O.renderNoDataText.apply(this,arguments)}getCellOptions(e,t){var r,n,a=this._dataController.items()[e];return a&&(n=(0,_.HD)(t)?this._columnsController.columnOption(t):this._columnsController.getVisibleColumns()[t])&&(r=this._getCellOptions({value:n.calculateCellValue(a.data),rowIndex:a.rowIndex,row:a,column:n})),r}getRow(e){if(e>=0){var t=this._getRowElements();if(t.length>e)return(0,c.Z)(t[e])}}updateFreeSpaceRowHeight(e){var t=this._dataController,a=t.items(!0).length,r=this._findContentElement(),n=this._getFreeSpaceRowElements(e);if(n&&r&&t.totalCount()>=0){var s=!1;if(a>0)if(this._hasHeight)n.hide(),(0,E.Su)(()=>{var d=this.getScrollbarWidth(!0),u=(0,b.Cr)(this.element())-d,p=u-(0,b.zp)(r)>0,v=this._getRowsHeight(r.children().first()),g=e||this.getTableElements(),I=u-v-Math.ceil(parseFloat(g.css("borderTopWidth")))-this._getHeightCorrection();p&&(0,E.g0)(()=>{n.css("height",I),s=!0,n.show()}),(0,E.g0)(()=>this._updateLastRowBorder(s))});else{var o=t.pageSize()-a,l=this.option("scrolling.mode");o>0&&t.pageCount()>1&&"virtual"!==l&&"infinite"!==l&&((0,Fe.QQ)(n,o*this._rowHeight),s=!0),!s&&e?(0,Fe.QQ)(n,0):n.toggle(s),this._updateLastRowBorder(s)}else n.css("height",0),n.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){var e=oe.Z.webkit&&this._getDevicePixelRatio()>=2,t=oe.Z.chrome&&oe.Z.version>=91,a=oe.Z.mozilla&&oe.Z.version>=70&&!this.option("showRowLines");return e||a||t?1:0}_columnOptionChanged(e){var{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}_handleDataChanged(e){switch(e.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,e);break;default:this._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,b.dz)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){var t=this._scrollableContainer&&this._scrollableContainer.get(0),a=0;return t&&(e?(a=t.clientHeight?t.offsetHeight-t.clientHeight:0,a+=function(i){var e=i.getScrollable();return e?Math.ceil(parseFloat((0,c.Z)(e.content()).css("paddingBottom"))):0}(this)):a=t.clientWidth?t.offsetWidth-t.clientWidth:0),a>0?a:0}_fireColumnResizedCallbacks(){for(var e=this._lastColumnWidths||[],t=[],a=this.getColumns(),r=0;r<a.length;r++)t[r]=a[r].visibleWidth,a[r].resizedCallbacks&&!(0,_.$K)(a[r].groupIndex)&&e[r]!==t[r]&&a[r].resizedCallbacks.fire(t[r]);this._lastColumnWidths=t}_updateLastRowBorder(e){this.option("showBorders")&&!e?this.element().addClass($u):this.element().removeClass($u)}_updateScrollable(){var e=It.Z.getInstance(this.element());e&&(e.update(),(e.option("useNative")||!e?.isRenovated())&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){var e=this.getScrollable(),t=e&&e.scrollOffset().left;if(this.option("rtlEnabled")){var r=Wu(e);r-t!==this._scrollRight&&(this._scrollLeft=r-this._scrollRight)}this._scrollLeft>=0&&t!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){var e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),(0,E.g0)(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),(0,E.Su)(()=>{e._updateScrollable()})})}scrollTo(e){var t=this.element(),a=t&&It.Z.getInstance(t);a&&a.scrollTo(e)}height(e){var t=this.element();if(0===arguments.length)return t?(0,b.zp)(t,!0):0;(0,_.$K)(e)&&t&&(this.hasHeight("auto"!==e),(0,Fe.QQ)(t,e))}hasHeight(e){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=e}setLoading(e,t){var a=this._loadPanel,r=this._dataController,n=this.option("loadPanel")||{},s=r.isLoaded()?n.animation:null,o=this.element();if((0,B.Ym)()&&(!a&&void 0!==t&&r.isLocalStore()&&"auto"===n.enabled&&o&&(this._renderLoadPanel(o,o.parent()),a=this._loadPanel),a)){var l={message:t||n.text,animation:s,visible:e};e&&(l.position=O.calculateLoadPanelPosition(o)),clearTimeout(this._hideLoadingTimeoutID),a.option("visible")&&!e?this._hideLoadingTimeoutID=setTimeout(()=>{a.option(l)},200):a.option(l)}}setRowsOpacity(e,t){var a=this._getRowElements().not(".".concat(rs))||[];this._setRowsOpacityCore(a,this.getColumns(),e,t)}_getCellElementsCore(e){var t=super._getCellElementsCore.apply(this,arguments);if(t){var a=t.filter(".".concat(Hu)).index();if(a>=0&&t.length>a+1)return t.slice(0,a+1)}return t}_getBoundaryVisibleItemIndex(e,t){var a=0,r=0,n=0,s=this._scrollTop,o=this._findContentElement(),l=o&&o.offset().top,d=this._dataController.items(),u=this.getTableElement();if(d.length&&u){var h=this._getRowElements(u).filter(":visible");for(e||(s+=(0,b.zp)(this._hasHeight?this.element():(0,B.Jj)())),a=0;a<d.length;a++){r=n;var v=(0,c.Z)(h).eq(a);if(v.length&&(n=v.offset(),(n=(e?n.top:n.top+(0,b.zp)(v))-l)>s)){a&&(t||2*s<Math.round(n+r))&&a--;break}}a&&a===d.length&&a--}return a}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){var e=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[e])return t[e].data}_scrollToElement(e,t){var a=this.getScrollable();a&&a.scrollToElement(e,t)}optionChanged(e){switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),e.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,e.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==e.fullName),e.handled=!0;break;case"noDataText":this.renderNoDataText(),e.handled=!0}}setAriaOwns(e,t,a){var r,n=this._findContentElement(),s=this.getTableElement();s?.length&&this.setAria("owns","".concat(e??""," ").concat(null!==(r=s.attr("id"))&&void 0!==r?r:""," ").concat(t??"").trim(),n)}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(e,t){}getFixedContentElement(){var e,t=this.addWidgetPrefix("content-fixed");return null===(e=this.element())||void 0===e?void 0:e.children(".".concat(t))}_restoreErrorRow(e){}isElementInside(e){return e.closest(".".concat(this.addWidgetPrefix(Nu))).is(this.element())}}}};P.registerModule("rows",Uu);var lx=T(8755),ux={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},hx=["columnHeadersView","rowsView","footerView","headerPanel"];P.registerModule("contextMenu",{defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:class cx extends J.ViewController{init(){this.createAction("onContextMenuPreparing")}getContextMenuItems(e){if(!e)return!1;var r,n,s,o,t=this,a=(0,c.Z)(e.target);return(0,S.S6)(hx,function(){var l,d,u=t.getView(this);if((r=u&&u.element())&&(r.is(a)||r.find(a).length)){s=a.closest(".dx-row > td, .dx-row > tr"),n=s.parent();var h=u.getRowIndex(n),p=s[0]&&s[0].cellIndex,v=n.data("options"),g={event:e,targetElement:(0,j.uD)(a),target:ux[this],rowIndex:h,row:u._getRows()[h],columnIndex:p,column:null===(d=null===(l=v?.cells)||void 0===l?void 0:l[p])||void 0===d?void 0:d.column};if(g.items=u.getContextMenuItems&&u.getContextMenuItems(g),t.executeAction("onContextMenuPreparing",g),t._contextMenuPrepared(g),o=g.items)return!1}}),o}_contextMenuPrepared(e){}}},views:{contextMenuView:class px extends J.View{init(){super.init(),this._contextMenuController=this.getController("contextMenu")}_renderCore(){var e=this.element().addClass("dx-context-menu");this.setAria("role","presentation",e),this._createComponent(e,lx.Z,{onPositioning:t=>{var{event:a}=t,r=t.component,n=this._contextMenuController.getContextMenuItems(a);n?(r.option("items",n),a.stopPropagation()):t.cancel=!0},onItemClick(t){var a,r;null===(r=null===(a=t.itemData)||void 0===a?void 0:a.onItemClick)||void 0===r||r.call(a,t)},cssClass:this.getWidgetContainerClass(),target:this.component.$element()})}}}});var qi="dx-error-row",Yu="dx-error-message",Cx={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:class mx extends J.ViewController{init(){this._resizingController=this.getController("resizing"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")}_createErrorRow(e,t){var a,r,n=this._renderErrorMessage(e);return t?(a=(0,c.Z)("<tr>").attr("role","row").addClass(qi),r=(0,c.Z)("<div>").addClass("dx-closebutton").addClass(this.addWidgetPrefix("action")),C.Z.on(r,se.u,this.createAction(s=>{var o,l,u,d=s.event,h=(0,c.Z)(d.currentTarget).closest(".".concat(qi)).index();d.stopPropagation(),(0,S.S6)(t,(p,v)=>{u=(0,c.Z)(v).children("tbody").children("tr").eq(h),this.removeErrorRow(u)}),null===(l=null===(o=this._resizingController)||void 0===o?void 0:o.fireContentReadyAction)||void 0===l||l.call(o)})),(0,c.Z)("<td>").attr({colSpan:this._columnsController.getVisibleColumns().length,role:"gridcell"}).prepend(r).append(n).appendTo(a),a):n}_renderErrorMessage(e){var t=e.url?e.message.replace(e.url,""):e.message||e,a=(0,c.Z)("<div>").attr("role","alert").attr("aria-roledescription",y.Z.format("dxDataGrid-ariaError")).addClass(Yu).text(t);return e.url&&(0,c.Z)("<a>").attr("href",e.url).text(e.url).appendTo(a),a}renderErrorRow(e,t,a){var r,n,o,l,s=this;if(a)return a.find(".".concat(Yu)).remove(),o=s._createErrorRow(e),a.prepend(o),o;var d=t>=0||!s._columnHeadersView.isVisible()?s._rowsView:s._columnHeadersView,u=d.getTableElements();return(0,S.S6)(u,(h,p)=>{if(o=s._createErrorRow(e,u),l=l||o,t>=0){var v=d._getRowElements((0,c.Z)(p)).eq(t);s.removeErrorRow(v.next()),o.insertAfter(v)}else{var g=(0,c.Z)(p).children("tbody"),m=g.children("tr");s._columnHeadersView.isVisible()?(s.removeErrorRow(m.last()),(0,c.Z)(p).append(o)):(s.removeErrorRow(m.first()),g.first().prepend(o))}}),null===(n=null===(r=this._resizingController)||void 0===r?void 0:r.fireContentReadyAction)||void 0===n||n.call(r),l}removeErrorRow(e){if(!e){var t=this._columnHeadersView&&this._columnHeadersView.element();if(!(e=t&&t.find(".".concat(qi)))||!e.length){var a=this._rowsView.element();e=a&&a.find(".".concat(qi))}}e&&e.hasClass(qi)&&e.remove()}optionChanged(e){"errorRowEnabled"===e.name?e.handled=!0:super.optionChanged(e)}}},extenders:{controllers:{data:i=>class extends i{init(){super.init(),this.dataErrorOccurred.add((e,t)=>{this.option("errorRowEnabled")&&this._errorHandlingController.renderErrorRow(e,void 0,t)}),this.changed.add(e=>{var t,a;e&&"loadError"===e.changeType||this._editingController&&!this._editingController.hasChanges()&&(null===(a=null===(t=this._errorHandlingController)||void 0===t?void 0:t.removeErrorRow)||void 0===a||a.call(t))})}}}}};P.registerModule("errorHandling",Cx);var ju="borders",qu="dx-gridbase-container",nr="adaptiveHidden",ns=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],Xi=function(i){return(0,_.HD)(i)&&i.endsWith("%")},Xu=function(i,e){var t=i._rowsView.contentWidth();return t-i._getTotalWidth(e,t)},Ax={defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:class Ix extends J.ViewController{init(){this._prevContentMinHeight=null,this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editorFactoryController=this.getController("editorFactory"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}_initPostRenderHandlers(){this._refreshSizesHandler||(this._refreshSizesHandler=e=>{var t=(new x.BH).resolve(null),a=e?.changeType,r=e?.isDelayed,n=a&&"updateSelection"!==a&&"updateFocusedRow"!==a&&"pageIndex"!==a&&!r;this._dataController.changed.remove(this._refreshSizesHandler),this._checkSize()&&(t=this._refreshSizes(e)),n&&(0,x.gx)(t).done(()=>{this._setAriaLabel(),this.fireContentReadyAction()})},this._dataController.changed.add(()=>{this._dataController.changed.add(this._refreshSizesHandler)}))}_refreshSizes(e){var t,a=(new x.BH).resolve(null),r=e?.changeType,n=e?.isDelayed,s=this._dataController.items();if(e&&"refresh"!==r&&"prepend"!==r&&"append"!==r){if("update"===r){if(0===(null===(t=e.changeTypes)||void 0===t?void 0:t.length))return a;!(s.length>1||"insert"!==e.changeTypes[0])||0===s.length&&"remove"===e.changeTypes[0]||e.needUpdateDimensions?a=this.resize():(a=new x.BH,this._waitAsyncTemplates().done(()=>{(0,E.Su)(()=>(0,E.g0)(()=>(0,E.Su)(()=>{this._setScrollerSpacing(),this._rowsView.resize(),a.resolve()})))}).fail(a.reject))}}else n||(a=this.resize());return a}fireContentReadyAction(){this.component._fireContentReadyAction()}_getWidgetAriaLabel(){return"dxDataGrid-ariaDataGrid"}_setAriaLabel(){var e=Math.max(0,this._dataController.totalItemsCount());this.component.setAria("label",y.Z.format(this._getWidgetAriaLabel(),e,this.component.columnCount()),this.component.$element().children(".".concat(qu)))}_getBestFitWidths(){var e,t=this._rowsView,a=this._columnHeadersView,r=t.getColumnWidths();if(!r?.length){var n=a.getTableElement();a.setTableElement(null===(e=t.getTableElement())||void 0===e?void 0:e.children(".dx-header")),r=a.getColumnWidths(),a.setTableElement(n)}return r}_setVisibleWidths(e,t){var a=this._columnsController;a.beginUpdate(),(0,S.S6)(e,(r,n)=>{var s=a.getColumnId(n);a.columnOption(s,"visibleWidth",t[r])}),a.endUpdate()}_toggleBestFitModeForView(e,t,a){if(e&&e.isVisible()){var r=this._rowsView.getTableElements(),n=e.getTableElements();(0,S.S6)(r,(s,o)=>{var l,d=(0,c.Z)(o),u=n.eq(s);u&&u.length&&((l=a?u.children("tbody").appendTo(d):d.children(".".concat(t)).appendTo(u)).toggleClass(t,a),l.toggleClass(this.addWidgetPrefix("best-fit"),a))})}}_toggleBestFitMode(e){var t=this._rowsView.getTableElement(),a=this._rowsView.getTableElements().eq(1);t&&(t.css("tableLayout",e?"auto":"fixed"),t.children("colgroup").css("display",e?"none":""),(0,S.S6)(a.find("tr.dx-group-row"),(r,n)=>{(0,c.Z)(n).css("display",e?"none":"")}),a.toggleClass(this.addWidgetPrefix("table-fixed"),!e),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",e),this._toggleBestFitModeForView(this._footerView,"dx-footer",e),this._needStretch()&&(t.get(0).style.width=e?"auto":""))}_toggleContentMinHeight(e){var t=this._rowsView.getScrollable(),a=this._rowsView._findContentElement();!1===t?.option("useNative")&&(!0===e&&(this._prevContentMinHeight=a.get(0).style.minHeight),(0,_.$K)(this._prevContentMinHeight)&&a.css({minHeight:e?O.getContentHeightLimit(oe.Z):this._prevContentMinHeight}))}_synchronizeColumns(){var l,h,p,e=this._columnsController,t=e.getVisibleColumns(),a=this.option("columnAutoWidth"),r=this.option("wordWrapEnabled"),n=t.some(g=>!(0,_.$K)(g.width)),s=this._needBestFit(),o=!1,d=!1,u=[];!s&&(0,S.S6)(t,(g,m)=>{if("auto"===m.width)return s=!0,!1}),(0,S.S6)(t,(g,m)=>{if(m.minWidth)return o=!0,!1}),this._setVisibleWidths(t,[]);var v=this.component.$element();s&&(h=Z.Z.getActiveElement(v.get(0)),p=O.getSelectionRange(h),this._toggleBestFitMode(!0),l=!0),this._toggleContentMinHeight(r),v&&v.get(0)&&this._maxWidth&&(delete this._maxWidth,v[0].style.maxWidth=""),(0,E.Su)(()=>{var m;s?(u=this._getBestFitWidths(),(0,S.S6)(t,(m,w)=>{var I=e.getColumnId(w);e.columnOption(I,"bestFitWidth",u[m],!0)})):o&&(u=this._getBestFitWidths()),(0,S.S6)(t,function(m){var{width:w}=this;"auto"!==w&&((0,_.$K)(w)?u[m]=(0,_.kE)(w)||function(i){return(0,_.HD)(i)&&i.endsWith("px")}(w)?parseFloat(w):w:a||(u[m]=void 0))}),l&&(this._toggleBestFitMode(!1),l=!1,h&&h!==Z.Z.getActiveElement())&&((0,ne.l)(h).bottom<0||function(i,e){(function ff(i,e){$a=!0,i.focus({preventScroll:e}),$a=!1})(i,!0),O.setSelectionRange(i,e)}(h,p)),d=this._correctColumnWidths(u,t),a&&((0,S.S6)(t,(w,I)=>{"groupExpand"===I.type&&(m=u[w])}),(0,S.S6)(t,(w,I)=>{"groupExpand"===I.type&&m&&(u[w]=m)}),this._needStretch()&&this._processStretch(u,t)),(0,E.g0)(()=>{(s||d||n)&&this._setVisibleWidths(t,u),r&&this._toggleContentMinHeight(!1)})})}_needBestFit(){return this.option("columnAutoWidth")}_needStretch(){return this._columnsController.getVisibleColumns().some(e=>"auto"===e.width&&!e.command)}_getAverageColumnsWidth(e){return Xu(this,e)/e.filter(r=>void 0===r).length}_correctColumnWidths(e,t){var r,a=this,n=!1,s=!1,o=!1,l=a.component.$element(),d=a._hasWidth,u=function(){var I=r,A=t[I],F=e[I]===nr,G=e[I],{minWidth:M}=A;if(M)if(void 0===G){var k=a._getAverageColumnsWidth(e);G=k}else if(Xi(G)){var U=function(i,e,t,a){return Xu(i,a.map((r,n)=>n===e?t:r))}(a,I,M,e);U<0&&(G=-1)}var ee=a._getRealColumnWidth(I,e.map(($,ce)=>I===ce?G:$));M&&!F&&ee<M&&(e[I]=M,o=!0,r=-1),(0,_.$K)(A.width)||(s=!0),Xi(A.width)&&(n=!0)};for(r=0;r<t.length;r++)u();if(!s&&e.length){var h=a._rowsView.element(),p=a._rowsView.contentWidth(),v=a._rowsView.getScrollbarWidth(),g=a._getTotalWidth(e,p);if(g<p){var m=O.getLastResizableColumnIndex(t,e);if(m>=0&&(e[m]="auto",o=!0,!1===d&&!n)){var w=a.option("showBorders")?Math.ceil((0,b.Y_)(h)-(0,b.Xt)(h)):0;a._maxWidth=g+v+w,l.css("maxWidth",a._maxWidth)}}}return o}_processStretch(e,t){var a=this._rowsView.contentWidth(),r=this._getTotalWidth(e,a),n={length:0};if(e.length){(0,S.S6)(t,function(u){(this.width||e[u]===nr)&&(n[u]=!0,n.length++)});var s=a-r,o=Math.floor(s/(e.length-n.length)),l=s-o*(e.length-n.length);if(s>=0)for(var d=0;d<e.length;d++)n[d]||(e[d]+=o,l>0&&(l<1?(e[d]+=l,l=0):(e[d]++,l--)))}}_getRealColumnWidth(e,t,a){var r=1,n=t[e];if(!Xi(n))return parseFloat(n);var s=t.reduce((u,h,p)=>Xi(h)?u+parseFloat(h):u,0),o=t.reduce((u,h)=>!h||h===nr||Xi(h)?u:u+parseFloat(h),0),l=(a=a||this._rowsView.contentWidth())-o,d=s*a/100;return o>0&&d+o>=a&&(r=d>l?l/d:1),parseFloat(n)*a*r/100}_getTotalWidth(e,t){for(var a=0,r=0;r<e.length;r++){var n=e[r];n&&n!==nr&&(a+=this._getRealColumnWidth(r,e,t))}return Math.ceil(a)}_getGroupElement(){return this.component.$element().children().get(0)}updateSize(e){var t=(0,c.Z)(e),a=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&t&&t.is(":visible")&&(0,b.dz)(t)){var r=t.children(".".concat(this.getWidgetContainerClass()));r.length&&r.detach(),this._hasHeight=!!(0,b.Cr)(t);var n=(0,b.dz)(t);t.addClass(a),this._hasWidth=(0,b.dz)(t)===n,t.removeClass(a),r.length&&r.appendTo(t)}}publicMethods(){return["resize","updateDimensions"]}_waitAsyncTemplates(){var e,t,a;return(0,x.gx)(null===(e=this._columnHeadersView)||void 0===e?void 0:e.waitAsyncTemplates(!0),null===(t=this._rowsView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(a=this._footerView)||void 0===a?void 0:a.waitAsyncTemplates(!0))}resize(){if(this.component._requireResize)return(new x.BH).resolve();var e=new x.BH;return this._waitAsyncTemplates().done(()=>{(0,x.gx)(this.updateDimensions()).done(e.resolve).fail(e.reject)}).fail(e.reject),e.promise()}updateDimensions(e){var t=this;if(t._initPostRenderHandlers(),t._checkSize(e)){var a=t._resizeDeferred,r=t._resizeDeferred=new x.BH;return(0,x.gx)(a).always(()=>{(0,E.g0)(()=>{t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),(0,E.Su)(()=>{(0,E.g0)(()=>{(0,E.Su)(()=>{t._updateDimensionsCore()})})})}).done(r.resolve).fail(r.reject)}),r.promise()}}_resetGroupElementHeight(){var e=this._getGroupElement(),t=this._rowsView.getScrollable();e&&e.style.height&&(!t||!t.scrollTop())&&(e.style.height="")}_checkSize(e){var t=this.component.$element(),a=t.is(":visible"),r=this._lastWidth!==(0,b.dz)(t)||this._lastHeight!==(0,b.Cr)(t)||this._devicePixelRatio!==(0,B.Jj)().devicePixelRatio;return a&&(!e||r)}_setScrollerSpacingCore(){var e=this,t=e._rowsView.getScrollbarWidth(),a=e._rowsView.getScrollbarWidth(!0);(0,E.g0)(()=>{e._columnHeadersView&&e._columnHeadersView.setScrollerSpacing(t),e._footerView&&e._footerView.setScrollerSpacing(t),e._rowsView.setScrollerSpacing(t,a)})}_setScrollerSpacing(){var e=this._rowsView.getScrollable(),t=!0===this.option("scrolling.useNative");!e||t?(0,E.g0)(()=>{(0,E.Su)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()}_setAriaOwns(){var e,t,a,r=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getTableElement();null===(a=this._rowsView)||void 0===a||a.setAriaOwns(r?.attr("id"),n?.attr("id"))}_updateDimensionsCore(){var e,t=this,a=t._dataController,r=t._rowsView,n=t.component.$element(),s=this._getGroupElement(),o=(0,b.Cr)(n),l=null!==(e=t.option("height"))&&void 0!==e?e:n.get(0).style.height,d=!!l&&"auto"!==l,u=parseInt(n.css("maxHeight")),h=u&&o>=u,p=s&&s.scrollHeight===s.offsetHeight;t.updateSize(n),(0,E.g0)(()=>{r.hasHeight(t._hasHeight||!!u||d),this._setAriaOwns(),h&&!p&&(0,c.Z)(s).css("height",u),a.isLoaded()?(0,E.Su)(()=>{t._updateLastSizes(n),t._setScrollerSpacing(),(0,S.S6)(ns,(g,m)=>{var w=t.getView(m);w&&w.resize()}),this._editorFactoryController&&this._editorFactoryController.resize()}):r.setLoading(a.isLoading())})}_updateLastSizes(e){this._lastWidth=(0,b.dz)(e),this._lastHeight=(0,b.Cr)(e),this._devicePixelRatio=(0,B.Jj)().devicePixelRatio}optionChanged(e){switch(e.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(e.handled=!0);default:super.optionChanged(e)}}},synchronizeScrolling:class Tx extends J.ViewController{_scrollChangedHandler(e,t,a){for(var r=0;r<e.length;r++)e[r]&&e[r].name!==a&&e[r].scrollTo({left:t.left,top:t.top})}init(){for(var e=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],t=0;t<e.length;t++){var a=e[t];a&&a.scrollChanged.add(this._scrollChangedHandler.bind(this,e))}}}},views:{gridView:class Dx extends J.View{_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())}init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")}getView(e){return this.component._views[e]}element(){return this._groupElement}optionChanged(e){(0,_.$K)(this._groupElement)&&"showBorders"===e.name?(this._groupElement.toggleClass(this.addWidgetPrefix(ju),!!e.value),e.handled=!0):super.optionChanged(e)}_renderViews(e){var t=this;(0,S.S6)(ns,(a,r)=>{var n=t.getView(r);n&&n.render(e)})}_getTableRoleName(){return"group"}render(e){var t=!this._groupElement,a=this._groupElement||(0,c.Z)("<div>").addClass(this.getWidgetContainerClass());a.addClass(qu),a.toggleClass(this.addWidgetPrefix(ju),!!this.option("showBorders")),this.setAria("role","presentation",e),this.component.setAria("role",this._getTableRoleName(),a),this._rootElement=e||this._rootElement,t&&(this._groupElement=a,(0,B.Ym)()&&this._resizingController.updateSize(e),a.appendTo(e)),this._renderViews(a)}update(){this._rootElement&&this._groupElement&&(this._resizingController.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}}},VIEW_NAMES:ns};P.registerModule("gridView",Ax);var ge=T(5922),Qi=T(8595),Ox=T(8537).Z.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(i){var e=(0,x.BH)(),t=(0,x.BH)();this._deferredItems[i.index]=t;var a=this.callBase.call(this,i);return t.done(()=>{e.resolve(a)}),e.promise()},_onItemTemplateRendered(i,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:E.ZT,_renderItemsAsync(){var i=(0,x.BH)();return x.gx.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),i.resolve()}),i.promise()},_clean(){this.callBase(),this._deferredItems=[]}});const Vx=Ox;T(3108);const Px=Vx;var Qu="dx-toolbar",ss="dx-toolbar-before",Ju="dx-toolbar-after",Ji="dx-toolbar-label",eh="dx-toolbar-compact";class ih extends Px{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>"disabled"!==e)}_initTemplates(){super._initTemplates();var e=new Qi.c((t,a,r)=>{var n,s,o,l,d;if((0,_.PO)(a)){var{text:u,html:h,widget:p}=a;u&&t.text(u).wrapInner("<div>"),h&&t.html(h),"dxDropDownButton"===p&&(a.options=null!==(n=a.options)&&void 0!==n?n:{},(0,_.$K)(a.options.stylingMode)||(a.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),"dxButton"===p&&(this.option("useFlatButtons")&&(a.options=null!==(s=a.options)&&void 0!==s?s:{},a.options.stylingMode=null!==(o=a.options.stylingMode)&&void 0!==o?o:"text"),this.option("useDefaultButtons")&&(a.options=null!==(l=a.options)&&void 0!==l?l:{},a.options.type=null!==(d=a.options.type)&&void 0!==d?d:"default"))}else t.text(String(a));this._getTemplate("dx-polymorph-widget").render({container:t,model:r,parent:this})},["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return(0,V.Z)((0,V.Z)({},super._getDefaultOptions()),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,z.yj)(),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".".concat(ss),".".concat("dx-toolbar-center"),".".concat(Ju)].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return"dxToolbarItemDataKey"}_dimensionChanged(e){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(Qu),this._$toolbarItemsContainer=(0,c.Z)("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){var e=this._$toolbarItemsContainer;(0,S.S6)(["before","center","after"],(t,a)=>{var r="dx-toolbar-".concat(a);e.find(".".concat(r)).length||(this["_$".concat(a,"Section")]=(0,c.Z)("<div>").addClass(r).attr("role","presentation").appendTo(e))})}_arrangeItems(e){var t,a,r=e??(0,b.dz)(this.$element());this._$centerSection.css({margin:"0 auto",float:"none"});var n=(0,ne.l)(null===(t=this._$beforeSection)||void 0===t?void 0:t.get(0)),s=(0,ne.l)(null===(a=this._$afterSection)||void 0===a?void 0:a.get(0));this._alignCenterSection(n,s,r);var o=this._$toolbarItemsContainer.find(".".concat(Ji)).eq(0),l=o.parent();if(o.length){var d=n.width?n.width:o.position().left,u=l.hasClass(ss)?0:d,h=l.hasClass(Ju)?0:s.width,p=0;l.children().not(".".concat(Ji)).each((w,I)=>{p+=(0,b.Y_)(I)});var g=Math.max(r-p-u-h,0);if(l.hasClass(ss))this._alignSection(this._$beforeSection,g);else{var m=(0,b.Y_)(o)-(0,b.dz)(o);o.css("maxWidth",g-m)}}}_alignCenterSection(e,t,a){var r;this._alignSection(this._$centerSection,a-e.width-t.width);var n=this.option("rtlEnabled"),s=n?t:e,o=n?e:t,l=(0,ne.l)(null===(r=this._$centerSection)||void 0===r?void 0:r.get(0));(s.right>l.left||l.right>o.left)&&this._$centerSection.css({marginLeft:s.width,marginRight:o.width,float:s.width>o.width?"none":"right"})}_alignSection(e,t){var r=e.find(".".concat(Ji)).toArray();t-=this._getCurrentLabelsPaddings(r);var n=this._getCurrentLabelsWidth(r),s=Math.abs(n-t);t<n?(r=r.reverse(),this._alignSectionLabels(r,s,!1)):this._alignSectionLabels(r,s,!0)}_alignSectionLabels(e,t,a){for(var r=function(u){return(0,ne.l)(u).width},n=0;n<e.length;n++){var s=(0,c.Z)(e[n]),o=Math.ceil(r(e[n]));a&&s.css("maxWidth","inherit");var d=Math.ceil(a?r(e[n]):o);if(!(d<t)){s.css("maxWidth",a?o+t:o-t);break}t-=d,s.css("maxWidth",a?d:0)}}_applyCompactMode(){var e=(0,c.Z)(this.element());e.removeClass(eh),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>(0,b.dz)(e)&&e.addClass(eh)}_getCurrentLabelsWidth(e){var t=0;return e.forEach(a=>{t+=(0,b.Y_)(a)}),t}_getCurrentLabelsPaddings(e){var t=0;return e.forEach(a=>{t+=(0,b.Y_)(a)-(0,b.dz)(a)}),t}_renderItem(e,t,a,r){var n,s,o=null!==(n=t.location)&&void 0!==n?n:"center",l=a??this["_$".concat(o,"Section")],d=!!(null!==(s=t.text)&&void 0!==s?s:t.html),u=super._renderItem(e,t,l,r);return u.toggleClass("dx-toolbar-button",!d).toggleClass(Ji,d).addClass(t.cssClass),u}_renderGroupedItems(){(0,S.S6)(this.option("items"),(e,t)=>{var a,r=t.items,n=(0,c.Z)("<div>").addClass("dx-toolbar-group"),s=null!==(a=t.location)&&void 0!==a?a:"center";!r||!r.length||((0,S.S6)(r,(o,l)=>{this._renderItem(o,l,n,null)}),this._$toolbarItemsContainer.find(".dx-toolbar-".concat(s)).append(n))})}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){var e;return null!==(e=this.option("items"))&&void 0!==e?e:[]}_renderContentImpl(){var e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===e.length),this._renderItems(this._renderedItemsCount?e.slice(this._renderedItemsCount):e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return(0,b.dz)(this.$element())>0&&(0,b.Cr)(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,t,a,r){super._itemOptionChanged(e,t,a,r),this._arrangeItems()}_optionChanged(e){var{name:t}=e;switch(t){case"width":super._optionChanged(e),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(e)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){(0,z.x2)()&&Promise.all([(()=>new Promise(e=>{var t=()=>{var r=!0;return this.$element().parents().each((n,s)=>{if(ge.Z.isAnimating((0,c.Z)(s)))return r=!1,!1}),r&&e(),r},a=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>t()||a(),15)};a()}))(),(()=>{var e=this.$element().find(".".concat(Ji)),t=[];return e.each((a,r)=>{var n=(0,c.Z)(r).text(),s=(0,c.Z)(r).css("fontWeight");t.push((0,z.Ih)(n,s))}),Promise.all(t)})()]).then(()=>{this._dimensionChanged()})}}(0,X.Z)("dxToolbarBase",ih);const Kx=ih;var Gx="dx-buttongroup",Ux=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"],Yx=function(i){var e=i.data&&i.data(),t=e&&e.dxComponents,a=t&&t[0];return a&&e[a]};function sr(i,e){var t,a,r;if(i){var n=i._findItemElementByItem(e);if(n.length){var s=i._getItemData(n),o=!!(null!==(t=s.options)&&void 0!==t&&t.disabled||s.disabled||i.option("disabled")),{widget:l}=s;if(l&&Ux.includes(l)){var d=n.find(l.toLowerCase().replace("dx",".dx-"));if(d.length){var u=Yx(d);if(!u)return;var h=null===(a=u._focusTarget)||void 0===a?void 0:a.call(u);h="dxDropDownButton"===l?h&&h.find(".".concat(Gx)):h??(0,c.Z)(u.element());var p=null===(r=s.options)||void 0===r?void 0:r.tabIndex;h.attr("tabIndex",o?-1:p??0)}}}}}class qx{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){var e;return null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar._itemElements(),!0)}_arrangeItems(){var e=this._toolbar._$toolbarItemsContainer.find(".".concat("dx-toolbar-label")).eq(0);if(e.length){var t=(0,b.dz)(this._toolbar.$element()),a=(0,b.Y_)(e)-(0,b.dz)(e);e.css("maxWidth",t-a)}}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var N=T(7923),ea=T(6896),or=T(8817),Xx=T(1764),ht=T(1128),ye=T(3946),de=T(6885),ta=T(5170),fe=T(3429),lr="dxResizable",dr="dx-resizable-handle",ur="dx-resizable-handle-corner",rS=(0,D.V4)(fe.BL,lr),nS=(0,D.V4)(fe.pB,lr),sS=(0,D.V4)(fe.ut,lr),oS={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},ah=ta.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup(){this.callBase(),this._renderHandles()},_render(){this.callBase(),this._renderActions()},_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles(){this._handles=[];var i=this.option("handles");if("none"!==i&&i){var e="all"===i?["top","bottom","left","right"]:i.split(" "),t={};(0,S.S6)(e,(a,r)=>{t[r]=!0,this._renderHandle(r)}),t.bottom&&t.right&&this._renderHandle("corner-bottom-right"),t.bottom&&t.left&&this._renderHandle("corner-bottom-left"),t.top&&t.right&&this._renderHandle("corner-top-right"),t.top&&t.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}},_renderHandle(i){var e=(0,c.Z)("<div>").addClass(dr).addClass("".concat(dr,"-").concat(i)).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers(){if(!this.option("disabled")){var i={};i[rS]=this._dragStartHandler.bind(this),i[nS]=this._dragHandler.bind(this),i[sS]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{C.Z.on(e,i,{direction:"both",immediate:!0})})}},_detachEventHandlers(){this._handles.forEach(i=>{C.Z.off(i)})},_toggleEventHandlers(i){i?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize(){var i=this.$element();return"border-box"===i.css("boxSizing")?{width:(0,b.Y_)(i),height:(0,b.zp)(i)}:{width:(0,b.dz)(i),height:(0,b.Cr)(i)}},_dragStartHandler(i){var e=this.$element();e.is(".dx-state-disabled, .dx-state-disabled *")?i.cancel=!0:(this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(i),this._elementLocation=(0,de.jt)(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(i),this._resizeStartAction({event:i,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),i.targetElements=null)},_toggleResizingClass(i){this.$element().toggleClass("dx-resizable-resizing",i)},_renderDragOffsets(i){var e=this._getArea();if(e){var t=(0,c.Z)(i.target).closest(".".concat(dr)),a=(0,b.Y_)(t),r=(0,b.zp)(t),n=t.offset(),s=e.offset,o=this._getAreaScrollOffset();i.maxLeftOffset=this._leftMaxOffset=n.left-s.left-o.scrollX,i.maxRightOffset=this._rightMaxOffset=s.left+e.width-n.left-a+o.scrollX,i.maxTopOffset=this._topMaxOffset=n.top-s.top-o.scrollY,i.maxBottomOffset=this._bottomMaxOffset=s.top+e.height-n.top-r+o.scrollY}},_getBorderWidth(i,e){if((0,_.FJ)(i.get(0)))return 0;var t=i.css(oS[e]);return parseInt(t)||0},_proportionate(i,e){var t=this._elementSize;return e*("x"===i?t.width/t.height:t.height/t.width)},_getProportionalDelta(i){var{x:e,y:t}=i,a=this._proportionate("y",e);if(a>=t)return{x:e,y:a};var r=this._proportionate("x",t);return r>=e?{x:r,y:t}:{x:0,y:0}},_getDirectionName(i){var e=this._movingSides;return"x"===i?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea(i,e){var t,a=this._getDirectionName(i);return Math.min(e,null!==(t=this["_".concat(a,"MaxOffset")])&&void 0!==t?t:1/0)},_fitDeltaProportionally(i){var e=(0,V.Z)({},i),t=this._elementSize,{minWidth:a,minHeight:r,maxWidth:n,maxHeight:s}=this.option(),o=()=>t.width+e.x,l=()=>t.height+e.y,d=g=>e[g]===this._fitIntoArea(g,e[g]),u=()=>(0,ie.Z2)(o(),a,n)&&d("x"),h=()=>(0,ie.Z2)(l(),r,s)&&d("y");if(!u()){var p=this._fitIntoArea("x",(0,ie.n$)(o(),a,n)-t.width);e={x:p,y:this._proportionate("y",p)}}if(!h()){var v=this._fitIntoArea("y",(0,ie.n$)(l(),r,s)-t.height);e={x:this._proportionate("x",v),y:v}}return u()&&h()?e:{x:0,y:0}},_fitDelta(i){var{x:e,y:t}=i,a=this._elementSize,{minWidth:r,minHeight:n,maxWidth:s,maxHeight:o}=this.option();return{x:(0,ie.n$)(a.width+e,r,s)-a.width,y:(0,ie.n$)(a.height+t,n,o)-a.height}},_getDeltaByOffset(i){var e=this._movingSides,t=this._isCornerHandler(e)&&this.option("keepAspectRatio"),a={x:i.x*(e.left?-1:1),y:i.y*(e.top?-1:1)};if(t){var r=this._getProportionalDelta(a);a=this._fitDeltaProportionally(r)}else{var s=this._fitDelta(a);a=this._roundByStep(s)}return a},_updatePosition(i,e){var{width:t,height:a}=e,r=this._elementLocation,n=this._movingSides,s=this.$element(),o=this._getElementSize();(0,de.pB)(s,{top:r.top+(n.top?i.y*(n.top?-1:1)-((o.height||a)-a):0),left:r.left+(n.left?i.x*(n.left?-1:1)-((o.width||t)-t):0)})},_dragHandler(i){var e=this._getOffset(i),t=this._getDeltaByOffset(e),a=this._updateDimensions(t);this._updatePosition(t,a),this._triggerResizeAction(i,a)},_updateDimensions(i){var e=d=>"px"===d.substring(d.length-2),t="strict"===this.option("stepPrecision"),a=this._elementSize,r=a.width+i.x,n=a.height+i.y,s=this.$element().get(0).style,o=i.x||t||e(s.width),l=i.y||t||e(s.height);return o&&this.option({width:r}),l&&this.option({height:n}),{width:o?r:a.width,height:l?n:a.height}},_triggerResizeAction(i,e){var{width:t,height:a}=e;this._resizeAction({event:i,width:this.option("width")||t,height:this.option("height")||a,handles:this._movingSides}),(0,ht.U_)(this.$element())},_isCornerHandler:i=>0===Object.values(i).reduce((e,t)=>e^t,0),_getOffset(i){var{offset:e}=i,t=this._movingSides;return!t.left&&!t.right&&(e.x=0),!t.top&&!t.bottom&&(e.y=0),e},_roundByStep(i){return"strict"===this.option("stepPrecision")?this._roundStrict(i):this._roundNotStrict(i)},_getSteps(){return(0,E.TG)(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict(i){var e=this._getSteps();return{x:i.x-i.x%e.h,y:i.y-i.y%e.v}},_roundStrict(i){var e=this._movingSides,t={x:i.x*(e.left?-1:1),y:i.y*(e.top?-1:1)},a=this._getSteps(),r=this._elementLocation,n=this._elementSize,l=((e.left?r.left:r.left+n.width)+t.x)%a.h,d=((e.top?r.top:r.top+n.height)+t.y)%a.v,u=Math.sign||(I=>0==(I=+I)||isNaN(I)?I:I>0?1:-1),h=(I,A)=>(1+.2*u(A))%1*I,p=(I,A)=>Math.abs(I)<.2*A,v=t.x-l,g=t.y-d;l>h(a.h,t.x)&&(v+=a.h),d>h(a.v,t.y)&&(g+=a.v);var m=!e.left&&!e.right||p(t.x,a.h)?0:v,w=!e.top&&!e.bottom||p(t.y,a.v)?0:g;return{x:m*(e.left?-1:1),y:w*(e.top?-1:1)}},_getMovingSides(i){var e=(0,c.Z)(i.target),t=e.hasClass("".concat(ur,"-top-left")),a=e.hasClass("".concat(ur,"-top-right")),r=e.hasClass("".concat(ur,"-bottom-left")),n=e.hasClass("".concat(ur,"-bottom-right"));return{top:e.hasClass("dx-resizable-handle-top")||t||a,left:e.hasClass("dx-resizable-handle-left")||t||r,bottom:e.hasClass("dx-resizable-handle-bottom")||r||n,right:e.hasClass("dx-resizable-handle-right")||a||n}},_getArea(){var i=this.option("area");return(0,_.mf)(i)&&(i=i.call(this)),(0,_.PO)(i)?this._getAreaFromObject(i):this._getAreaFromElement(i)},_getAreaScrollOffset(){var i=this.option("area"),t={scrollY:0,scrollX:0};if(!(0,_.mf)(i)&&!(0,_.PO)(i)){var a=(0,c.Z)(i)[0];(0,_.FJ)(a)&&(t.scrollX=a.pageXOffset,t.scrollY=a.pageYOffset)}return t},_getAreaFromObject(i){var e={width:i.right-i.left,height:i.bottom-i.top,offset:{left:i.left,top:i.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement(i){var t,e=(0,c.Z)(i);return e.length&&(t={width:(0,b.Xt)(e),height:(0,b.fA)(e),offset:(0,f.l)({top:0,left:0},(0,_.FJ)(e[0])?{}:e.offset())},this._correctAreaGeometry(t,e)),t},_correctAreaGeometry(i,e){var t=e?this._getBorderWidth(e,"left"):0,a=e?this._getBorderWidth(e,"top"):0;i.offset.left+=t+this._getBorderWidth(this.$element(),"left"),i.offset.top+=a+this._getBorderWidth(this.$element(),"top"),i.width-=(0,b.Y_)(this.$element())-(0,b.Xt)(this.$element()),i.height-=(0,b.zp)(this.$element())-(0,b.fA)(this.$element())},_dragEndHandler(i){var e=this.$element();this._resizeEndAction({event:i,width:(0,b.Y_)(e),height:(0,b.zp)(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth(i){this.option("width",(0,ie.n$)(i,this.option("minWidth"),this.option("maxWidth")))},_renderHeight(i){this.option("height",(0,ie.n$)(i,this.option("minHeight"),this.option("maxHeight")))},_optionChanged(i){switch(i.name){case"disabled":this._toggleEventHandlers(!i.value),this.callBase(i);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":(0,B.Ym)()&&this._renderWidth((0,b.Y_)(this.$element()));break;case"minHeight":case"maxHeight":(0,B.Ym)()&&this._renderHeight((0,b.zp)(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(i)}},_clean(){this.$element().find(".".concat(dr)).remove()},_useTemplates:()=>!1});(0,X.Z)(lr,ah);const lS=ah;var os=T(570);var hS={setOverflow:E.ZT,restoreOverflow:E.ZT},ls=T(663),pS=T(3970),ds=(0,B.Jj)();class vS extends pS.H{constructor(e){var{fullScreen:t,forceApplyBindings:a,dragOutsideBoundary:r,dragAndResizeArea:n,outsideDragFactor:s}=e,o=function(i,e){var t={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(i);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(i,a[r])&&(t[a[r]]=i[a[r]])}return t}(e,["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"]);super(o),this._props=(0,V.Z)((0,V.Z)({},this._props),{fullScreen:t,forceApplyBindings:a,dragOutsideBoundary:r,dragAndResizeArea:n,outsideDragFactor:s}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer()}set outsideDragFactor(e){this._props.outsideDragFactor=e}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){var e,t;this._props.fullScreen?((0,de.pB)(this._$content,{top:0,left:0}),this.detectVisualPositionChange()):(null===(t=(e=this._props).forceApplyBindings)||void 0===t||t.call(e),super.positionContent())}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?(0,c.Z)(ds):this._props.dragAndResizeArea?(0,c.Z)(this._props.dragAndResizeArea):(0,ls.In)().get(0)||this._props.container?this._$markupContainer:(0,c.Z)(ds)}_getVisualContainer(){return this._props.fullScreen?(0,c.Z)(ds):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}var gS=(0,B.Jj)(),us="dx-popup",rh="dx-popup-wrapper",nh="dx-popup-title",sh="dx-popup-bottom",oh=["cancel","clear","done"],lh="contained",PS=oe.Z.safari&&(0,Xx.q)(oe.Z.version,[11])<0,Tt={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},dh=Wi.Z.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{upArrow:i=>{var e;null===(e=this._drag)||void 0===e||e.moveUp(i)},downArrow:i=>{var e;null===(e=this._drag)||void 0===e||e.moveDown(i)},leftArrow:i=>{var e;null===(e=this._drag)||void 0===e||e.moveLeft(i)},rightArrow:i=>{var e;null===(e=this._drag)||void 0===e||e.moveRight(i)}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:i=>"desktop"===N.Z.real().deviceType&&"generic"===i.platform,options:{dragEnabled:!0}},{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,z.yj)(),options:{useFlatToolbarButtons:!0}},{device:()=>(0,z.x2)(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init(){var i=this.option("_wrapperClassExternal"),e=i?"".concat(rh," ").concat(i):rh;this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass(us),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner((0,c.Z)("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render(){var i=this.option("fullScreen");this._toggleFullScreenClass(i),this.callBase()},_createBodyOverflowManager(){this._bodyOverflowManager=(()=>{if(!(0,B.Ym)())return hS;var i=(0,B.Jj)(),{documentElement:e}=Z.Z.getDocument(),t=Z.Z.getBody(),a="ios"===N.Z.real().platform,r={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:a?()=>{if(!(0,_.$K)(r.position)&&"fixed"!==t.style.position){var{scrollY:n,scrollX:s}=i;r.position=t.style.position,r.top=t.style.top,r.left=t.style.left,t.style.setProperty("position","fixed"),t.style.setProperty("top","".concat(-n,"px")),t.style.setProperty("left","".concat(-s,"px"))}}:()=>{(()=>{var n=i.innerWidth-e.clientWidth;if(!(r.paddingRight||n<=0)){var s=i.getComputedStyle(t).getPropertyValue("padding-right"),o=parseInt(s,10);r.paddingRight=o,t.style.setProperty("padding-right","".concat(o+n,"px"))}})(),!r.overflow&&"hidden"!==t.style.overflow&&(r.overflow=t.style.overflow,r.overflowX=t.style.overflowX,r.overflowY=t.style.overflowY,t.style.setProperty("overflow","hidden"))},restoreOverflow:a?()=>{if((0,_.$K)(r.position)){var n=-parseInt(t.style.top,10),s=-parseInt(t.style.left,10);["position","top","left"].forEach(o=>{r[o]?t.style.setProperty(o,r[o]):t.style.removeProperty(o)}),i.scrollTo(s,n),r.position=null}}:()=>{(0,_.$K)(r.paddingRight)&&(r.paddingRight?t.style.setProperty("padding-right","".concat(r.paddingRight,"px")):t.style.removeProperty("padding-right"),r.paddingRight=null),["overflow","overflowX","overflowY"].forEach(n=>{if((0,_.$K)(r[n])){var s=n.replace(/(X)|(Y)/,o=>"-".concat(o.toLowerCase()));r[n]?t.style.setProperty(s,r[n]):t.style.removeProperty(s),r[n]=null}})}}})()},_toggleFullScreenClass(i){this.$overlayContent().toggleClass("dx-popup-fullscreen",i).toggleClass("dx-popup-normal",!i)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new or.s,bottom:new or.s})},_getActionsList(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler(i){this._shouldSkipContentResize(i)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions(){var i=this.option("animation");return["to","from"].some(e=>{var t,a=null===(t=i?.show)||void 0===t?void 0:t[e];return(0,_.Kn)(a)&&("width"in a||"height"in a)})},_updateResizeCallbackSkipCondition(){var i=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>i&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize(i){if(this.option("useResizeObserver")){var e=this._$content.get(0);i?ea.Z.observe(e,t=>{this._contentResizeHandler(t)}):ea.Z.unobserve(e)}},_areContentDimensionsRendered(i){var e,t,a,r,n,s=null===(e=i.contentBoxSize)||void 0===e?void 0:e[0];if(s)return parseInt(s.inlineSize,10)===(null===(t=this._renderedDimensions)||void 0===t?void 0:t.width)&&parseInt(s.blockSize,10)===(null===(a=this._renderedDimensions)||void 0===a?void 0:a.height);var{contentRect:o}=i;return parseInt(o.width,10)===(null===(r=this._renderedDimensions)||void 0===r?void 0:r.width)&&parseInt(o.height,10)===(null===(n=this._renderedDimensions)||void 0===n?void 0:n.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle(){var i=this._getToolbarItems("top"),{title:e,showTitle:t}=this.option();if(t&&e&&i.unshift({location:N.Z.current().ios?"center":"before",text:e}),t||i.length>0){this._$title&&this._$title.remove();var a=(0,c.Z)("<div>").addClass(nh).insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",i,a).addClass(nh),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var i,{title:e,showTitle:t}=this.option(),r=t&&e?new ve.Z:null;null===(i=this._$title)||void 0===i||i.find(".".concat("dx-toolbar-label")).eq(0).attr("id",r),this.$overlayContent().attr("aria-labelledby",r)},_renderTemplateByType(i,e,t,a){var{rtlEnabled:r,useDefaultToolbarButtons:n,useFlatToolbarButtons:s,disabled:o}=this.option(),l=this._getTemplateByOption(i);if(l instanceof or.s){var u=(0,f.l)({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),h=(0,f.l)(a,{items:e,rtlEnabled:r,useDefaultButtons:n,useFlatButtons:s,disabled:o,integrationOptions:u});this._getTemplate("dx-polymorph-widget").render({container:t,model:{widget:this._getToolbarName(),options:h}});var p=t.children("div");return t.replaceWith(p),p}var v=(0,c.Z)(l.render({container:(0,j.uD)(t)}));return v.hasClass("dx-template-wrapper")&&(t.replaceWith(v),t=v),t},_getToolbarName:()=>"dxToolbarBase",_renderVisibilityAnimate(i){return this.callBase(i)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction(i){this._getTitleRenderAction()({titleElement:(0,j.uD)(i)})},_getTitleRenderAction(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer(){return(i,e,t)=>{var a=(0,c.Z)("<div>").addClass("dx-closebutton");this._createComponent(a,ye.Z,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),(0,c.Z)(t).append(a)}},_getToolbarItems(i){var e=this.option("toolbarItems"),t=[];this._toolbarItemClasses=[];var a=N.Z.current().platform,r=0;return(0,S.S6)(e,(n,s)=>{var o=(0,_.$K)(s.shortcut),l=o?(i=>{var e=N.Z.current(),{platform:t}=e,a="bottom",r="before";if("ios"===t)switch(i){case"cancel":a="top";break;case"clear":a="top",r="after";break;case"done":r="after"}else if("android"===t)switch(i){case"cancel":case"done":r="after"}return{toolbar:a,location:r}})(s.shortcut):s;if(o&&"ios"===a&&r<2&&(l.toolbar="top",r++),l.toolbar=s.toolbar||l.toolbar||"top",l&&l.toolbar===i){o&&(0,f.l)(l,{location:s.location},this._getToolbarItemByAlias(s));var d="generic"===a;"done"===s.shortcut&&d||"cancel"===s.shortcut&&!d?t.unshift(l):t.push(l)}}),"top"===i&&this._hasCloseButton()&&t.push(this._getCloseButton()),t},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:i=>"done"===i.toLowerCase()?"OK":(0,Me._A)(i,!0),_getToolbarButtonStylingMode(i){return(0,z.dC)()?"done"===i?lh:"outlined":this.option("useFlatToolbarButtons")?"text":lh},_getToolbarButtonType(i){return(0,z.dC)()&&"done"===i||this.option("useDefaultToolbarButtons")?"default":"normal"},_getToolbarItemByAlias(i){var e=this,t=i.shortcut;if(!oh.includes(t))return!1;var a=(0,f.l)({text:y.Z.format(this._getLocalizationKey(t)),onClick:this._createToolbarItemAction(i.onClick),integrationOptions:{},type:this._getToolbarButtonType(t),stylingMode:this._getToolbarButtonStylingMode(t)},i.options||{}),r="".concat(us,"-").concat(t);return this._toolbarItemClasses.push(r),{template(n,s,o){var l=(0,c.Z)("<div>").addClass(r).appendTo(o);e._createComponent(l,ye.Z,a)}}},_createToolbarItemAction(i){return this._createAction(i,{afterExecute(e){e.component.hide()}})},_renderBottom(){var i=this._getToolbarItems("bottom");if(i.length){this._$bottom&&this._$bottom.remove();var e=(0,c.Z)("<div>").addClass(sh).insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",i,e,{compactMode:!0}).addClass(sh),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState(i){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",Boolean(i))},_toggleClasses(){(0,S.S6)(oh,(e,t)=>{var a="".concat(us,"-").concat(t);this._toolbarItemClasses.includes(a)?(this.$wrapper().addClass("".concat(a,"-visible")),this._$bottom.addClass(a)):(this.$wrapper().removeClass("".concat(a,"-visible")),this._$bottom.removeClass(a))})},_toggleFocusClass(i,e){if(this.callBase(i,e),i&&!os.Ao(this._zIndex)){var t=os.Ue(this._zIndexInitValue());os.Od(this._zIndex),this._zIndex=t,this._$wrapper.css("zIndex",t),this._$content.css("zIndex",t)}},_toggleContentScrollClass(){var i=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",i)},_getPositionControllerConfig(){var{fullScreen:i,forceApplyBindings:e,dragOutsideBoundary:t,dragAndResizeArea:a,outsideDragFactor:r}=this.option();return(0,f.l)({},this.callBase(),{fullScreen:i,forceApplyBindings:e,dragOutsideBoundary:t,dragAndResizeArea:a,outsideDragFactor:r})},_initPositionController(){this._positionController=new vS(this._getPositionControllerConfig())},_getDragTarget(){return this.topToolbar()},_renderGeometry(i){var{visible:e,useResizeObserver:t}=this.option();if(e&&(0,B.Ym)()){var r=this._showAnimationProcessing&&!i?.forceStopAnimation&&t;this._isAnimationPaused=r||void 0,this._stopAnimation(),i?.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(i?.isDimensionChange),r&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt((0,b.dz)(this._$content),10),height:parseInt((0,b.Cr)(this._$content),10)})},_renderGeometryImpl(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight(){"auto"===this._getOptionValue("height")&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag(){var i=this._getDragTarget(),e=this.option("dragEnabled");if(i){var t={dragEnabled:e,handle:i.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(t):this._drag=new class dS{constructor(e){this.init(e)}init(e){var{dragEnabled:t,handle:a,draggableElement:r,positionController:n}=e;this._positionController=n,this._draggableElement=r,this._handle=a,this._dragEnabled=t,this.unsubscribe(),t&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){var e=this._getEventNames();C.Z.on(this._handle,e.startEventName,t=>{this._dragStartHandler(t)}),C.Z.on(this._handle,e.updateEventName,t=>{this._dragUpdateHandler(t)}),C.Z.on(this._handle,e.endEventName,t=>{this._dragEndHandler(t)})}unsubscribe(){var e=this._getEventNames();C.Z.off(this._handle,e.startEventName),C.Z.off(this._handle,e.updateEventName),C.Z.off(this._handle,e.endEventName)}_getEventNames(){return{startEventName:(0,D.V4)(fe.BL,"overlayDrag"),updateEventName:(0,D.V4)(fe.pB,"overlayDrag"),endEventName:(0,D.V4)(fe.ut,"overlayDrag")}}_dragStartHandler(e){var t=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=t.top,e.maxBottomOffset=t.bottom,e.maxLeftOffset=t.left,e.maxRightOffset=t.right}_dragUpdateHandler(e){this._moveByOffset({top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x}),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,t,a){if(this._dragEnabled){a.preventDefault(),a.stopPropagation();var r=this._fitOffsetIntoAllowedRange(e,t);this._moveByOffset(r),this._dragEndHandler(a)}}_fitOffsetIntoAllowedRange(e,t){var a=this._getAllowedOffsets();return{top:(0,ie.n$)(e,-a.top,a.bottom),left:(0,ie.n$)(t,-a.left,a.right)}}_getContainerDimensions(){var e=Z.Z.getDocument(),t=this._positionController.$dragResizeContainer.get(0),a=(0,b.Y_)(t),r=(0,b.zp)(t);return(0,_.FJ)(t)&&(r=Math.max(e.body.clientHeight,r),a=Math.max(e.body.clientWidth,a)),{width:a,height:r}}_getContainerPosition(){var e=this._positionController.$dragResizeContainer.get(0);return(0,_.FJ)(e)?{top:0,left:0}:(0,b.os)(e)}_getElementPosition(){return(0,b.os)(this._draggableElement)}_getInnerDelta(){var e=this._getContainerDimensions(),t=this._getElementDimensions();return{x:e.width-t.width,y:e.height-t.height}}_getOuterDelta(){var{width:e,height:t}=this._getElementDimensions(),{outsideDragFactor:a}=this._positionController;return{x:e*a,y:t*a}}_getFullDelta(){var e=this._getInnerDelta(),t=this._getOuterDelta();return{x:e.x+t.x,y:e.y+t.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){var e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};var a=this._getElementPosition(),r=this._getContainerPosition(),n=this._getOuterDelta();return{top:a.top-r.top+n.y,bottom:-a.top+r.top+e.y,left:a.left-r.left+n.x,right:-a.left+r.left+e.x}}_moveByOffset(e){var t=(0,de.jt)(this._draggableElement);(0,de.pB)(this._draggableElement,{left:t.left+e.left,top:t.top+e.top})}}(t),this.$overlayContent().toggleClass("dx-popup-draggable",e)}},_renderResize(){this._resizable=this._createComponent(this._$content,lS,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:i=>{this._resizeEndHandler(i),this._observeContentResize(!0)},onResize:i=>{this._setContentHeight(),this._actions.onResize(i)},onResizeStart:i=>{this._observeContentResize(!1),this._actions.onResizeStart(i)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler(i){var e=this._resizable.option("width"),t=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),t&&this._setOptionWithoutOptionChange("height",t),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(i.event),this._actions.onResizeEnd(i)},_setContentHeight(){(this.option("forceApplyBindings")||E.ZT)();var i=this.$overlayContent().get(0),e=this._chooseHeightStrategy(i);this.$content().css(this._getHeightCssStyles(e,i)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:(i,e)=>i===Tt.flex?-e:0,_chooseHeightStrategy(i){var e="auto"===i.style.width||""===i.style.width,t=Tt.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(t=e||PS?Tt.inherit:Tt.flex),t},_getHeightCssStyles(i,e){var t={},a=this._getOptionValue("maxHeight",e),r=this._getOptionValue("minHeight",e),n=this._splitPopupHeight(),s=n.header+n.footer+n.contentVerticalOffsets+n.popupVerticalOffsets+this._heightStrategyChangeOffset(i,n.popupVerticalPaddings);if(i===Tt.static){if(!this._isAutoHeight()||a||r){var o=this.option("fullScreen")?Math.min((0,ne.l)(e).height,(0,B.Jj)().innerHeight):(0,ne.l)(e).height;t={height:Math.max(0,o-s),minHeight:"auto",maxHeight:"auto"}}}else{var d=(0,c.Z)(this._positionController.$visualContainer).get(0),u=(0,b.n2)(a,-s,d);t={height:"auto",minHeight:(0,b.eK)(r,-s,d),maxHeight:u}}return t},_setHeightClasses(i,e){var t="";for(var a in Tt)Tt[a]!==e&&(t+=" ".concat(Tt[a]));i.removeClass(t).addClass(e)},_isAutoHeight(){return"auto"===this.$overlayContent().get(0).style.height},_splitPopupHeight(){var i=this.topToolbar(),e=this.bottomToolbar();return{header:(0,b.$D)(i&&i.get(0)),footer:(0,b.$D)(e&&e.get(0)),contentVerticalOffsets:(0,b.sQ)(this.$overlayContent().get(0),!0),popupVerticalOffsets:(0,b.sQ)(this.$content().get(0),!0),popupVerticalPaddings:(0,b.sQ)(this.$content().get(0),!1)}},_isAllWindowCovered(){return this.callBase()||this.option("fullScreen")},_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),(0,B.Ym)()&&this._renderFullscreenWidthClass()},_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})},_clean(){this.callBase(),this._observeContentResize(!1)},_dispose(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",(0,b.Y_)(this.$overlayContent())===(0,b.dz)(gS))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll(i){if(this._bodyOverflowManager){var{setOverflow:e,restoreOverflow:t}=this._bodyOverflowManager;i?t():e()}},refreshPosition(){this._renderPosition()},_optionChanged(i){var e,t,{value:a,name:r}=i;switch(r){case"disabled":this.callBase(i),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(a);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),(0,ht.U_)(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),(0,ht.U_)(this.$overlayContent());break;case"container":this.callBase(i),this.option("resizeEnabled")&&(null===(e=this._resizable)||void 0===e||e.option("area",this._positionController.$dragResizeContainer));break;case"width":case"height":this.callBase(i),null===(t=this._resizable)||void 0===t||t.option(r,a);break;case"onTitleRendered":this._createTitleRenderAction(a);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":var n=!i.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),n&&(this._renderGeometry(),(0,ht.U_)(this.$overlayContent()));break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=a,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=a,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=a;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),(0,ht.U_)(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=a,this._toggleFullScreenClass(a),this._toggleSafariScrolling(),this._renderGeometry(),(0,ht.U_)(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(i),this._toggleContentScrollClass();break;default:this.callBase(i)}},bottomToolbar(){return this._$bottom},topToolbar(){return this._$title},$content(){return this._$popupContent},content(){return(0,j.uD)(this.$content())},$overlayContent(){return this._$content},getFocusableElements(){return this.$wrapper().find("[tabindex]").filter((i,e)=>e.getAttribute("tabindex")>=0)}});(0,X.Z)("dxPopup",dh);const Dt=dh;var uh=T(8437),hh=T(6287),zt=T(4667),FS=T(707),MS=T(297),cr="dxswipestart",pr="dxswipe",ia="dxswipeend",kS={defaultItemSizeFunc:function(){return(0,b.dz)(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(i){return((0,D.a0)(i).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,i)},isFastSwipe:function(i){var e=(0,D.a0)(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},NS={defaultItemSizeFunc:function(){return(0,b.Cr)(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(i){return((0,D.a0)(i).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,i)},isFastSwipe:function(i){var e=(0,D.a0)(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},HS={horizontal:kS,vertical:NS},ZS=FS.Z.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(i){this.callBase(i),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return HS[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(i){this._tickData=(0,D.a0)(i)},_start:function(i){this._savedEventData=(0,D.a0)(i),(i=this._fireEvent(cr,i)).cancel||(this._maxLeftOffset=i.maxLeftOffset,this._maxRightOffset=i.maxRightOffset,this._maxTopOffset=i.maxTopOffset,this._maxBottomOffset=i.maxBottomOffset)},_move:function(i){var e=this._getStrategy(),t=(0,D.a0)(i),a=e.calcOffsetRatio.call(this,i);a=this._fitOffset(a,this.elastic),t.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=t),this._fireEvent(pr,i,{offset:a}),!1!==i.cancelable&&i.preventDefault()},_end:function(i){var e=this._getStrategy(),t=e.calcOffsetRatio.call(this,i),a=e.isFastSwipe.call(this,i),r=t,n=this._calcTargetOffset(t,a);r=this._fitOffset(r,this.elastic),n=this._fitOffset(n,!1),this._fireEvent(ia,i,{offset:r,targetOffset:n})},_fitOffset:function(i,e){var a=this._getStrategy().getBounds.call(this);return i<-a[0]?e?(-2*a[0]+i)/3:-a[0]:i>a[1]?e?(2*a[1]+i)/3:a[1]:i},_calcTargetOffset:function(i,e){var t;return e?(t=Math.ceil(Math.abs(i)),i<0&&(t=-t)):t=Math.round(i),t}});function ch(i){return i?Number(i.replace("px","")):0}function zS(i,e){var t=function aa(i){var e,t;return i&&(0,B.Ym)()?null===(e=(t=(0,B.Jj)()).getComputedStyle)||void 0===e?void 0:e.call(t,i):null}(i);return t?ch(t["margin".concat((0,Me.MI)(e))]):0}(0,MS.Z)({emitter:ZS,events:[cr,pr,ia]});var hs=T(9351),ph=T(5794),_h="dx-scrollview-pull-down-loading",cs="dx-scrollview-pull-down-ready",YS=ph.Z.inherit({_init(i){this.callBase(i),this._$topPocket=i._$topPocket,this._$pullDown=i._$pullDown,this._$refreshingText=i._$refreshingText,this._$scrollViewContent=(0,c.Z)(i.content()),this._$container=(0,c.Z)(i.container()),this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=(0,le.Z)(),this.releaseCallbacks=(0,le.Z)(),this.reachBottomCallbacks=(0,le.Z)()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){var i=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new bt.Z((0,c.Z)("<div>")).$element(),a=this._$pullDownText=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,c.Z)("<div>").text(this.option("pullingDownText")).appendTo(a),this._$pulledDownText=(0,c.Z)("<div>").text(this.option("pulledDownText")).appendTo(a),this._$refreshingText=(0,c.Z)("<div>").text(this.option("refreshingText")).appendTo(a),this._$pullDown.empty().append(i).append(e.append(t)).append(a)},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){var i=this;(0,S.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],(t,a)=>{a.element[i._state===a.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},update(){this.callBase(),this._setTopPocketOffset()},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var i=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(i.clientHeight-e.clientHeight,0)},_allowedDirections(){var i=this.callBase();return i.vertical=i.vertical||this._pullDownEnabled,i},_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd(){this.callBase(),this._complete()},handleStop(){this.callBase(),this._complete()},_complete(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(()=>{this._pullDownRefreshing()},400))},_setPullDownOffset(i){(0,de.pB)(this._$topPocket,{top:i}),(0,de.pB)(this._$scrollViewContent,{top:i})},handleScroll(i){if(this.callBase(i),2!==this._state){var e=this.location().top,t=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady(){1!==this._state&&(this._state=1,this._$pullDown.addClass(cs),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass(_h).removeClass(cs),this._releaseState())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass(_h).removeClass(cs),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable(i){i&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=i},reachBottomEnable(i){this._reachBottomEnabled=i},pendingRelease(){this._state=1},release(){var i=(0,x.BH)();return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout(()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),i.resolve()},400),i.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const jS=YS;var vh="dx-scrollview-pull-down-loading",ey=ph.Z.inherit({_init(i){this.callBase(i),this._$topPocket=i._$topPocket,this._$pullDown=i._$pullDown,this._$scrollViewContent=(0,c.Z)(i.content()),this._$container=(0,c.Z)(i.container()),this._initCallbacks(),this._location=0},_initCallbacks(){this.pullDownCallbacks=(0,le.Z)(),this.releaseCallbacks=(0,le.Z)(),this.reachBottomCallbacks=(0,le.Z)()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){var i=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new bt.Z((0,c.Z)("<div>")).$element();this._$icon=(0,c.Z)("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(i.append(e))},_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown(){this._$pullDown.css({opacity:0})},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var i=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(i.clientHeight-e.clientHeight,0)},_allowedDirections(){var i=this.callBase();return i.vertical=i.vertical||this._pullDownEnabled,i},handleInit(i){this.callBase(i),0===this._state&&0===this._location&&(this._startClientY=(0,D.a0)(i.originalEvent).y,this._state=4)},handleMove(i){this.callBase(i),this._deltaY=(0,D.a0)(i.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(i.preventDefault(),this._movePullDown())},_movePullDown(){var i=this._getPullDownHeight(),e=Math.min(3*i,this._deltaY+this._getPullDownStartPosition()),t=180*e/i/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<i),(0,de.pB)(this._$pullDown,{top:e}),this._$icon.css({transform:"rotate(".concat(t,"deg)")})},_isPullDown(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight(){return Math.round(.05*(0,b.zp)(this._$element))},_getPullDownStartPosition(){return-Math.round(1.5*(0,b.zp)(this._$pullDown))},handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop(){this._complete()},_complete(){(4===this._state||5===this._state)&&this._releaseState()},handleScroll(i){if(this.callBase(i),2!==this._state){var e=this.location().top,t=this._location-e;this._location=e,t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this.reachBottomCallbacks.fire()},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass(vh),this._releaseState())},_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown(){this._$pullDown.addClass(vh),(0,de.pB)(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable(i){this._$topPocket.toggle(i),this._pullDownEnabled=i},reachBottomEnable(i){this._reachBottomEnabled=i},pendingRelease(){this._state=1},release(){var i=(0,x.BH)();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),i.resolve()},800),i.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const ty=ey;var mh=T(9514),iy=Math,fh="dx-scrollview-pull-down-loading",gs="dx-scrollview-pull-down-ready",oy=mh.T.inherit({ctor(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){var i=this;(0,S.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],(t,a)=>{a.element[i._state===a.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},_initCallbacks(){this.pullDownCallbacks=(0,le.Z)(),this.releaseCallbacks=(0,le.Z)(),this.reachBottomCallbacks=(0,le.Z)()},_updateBounds(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;var e=this._$container.get(0),t=this._$content.get(0);this._bottomBoundary=Math.max(t.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown(){return this._pullDownEnabled&&this._location>=0},_isReachBottom(){var i=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(i.scrollTop))<=1},_scrollComplete(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset(){return-this._topPocketSize},_getMinOffset(){return iy.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading(){this.reachBottomCallbacks.fire()},_pullDownReady(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass(gs),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass(fh).removeClass(gs),this.releaseCallbacks.fire())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass(fh).removeClass(gs),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=(0,E.Wi)(this._release.bind(this)),this._releaseTask.promise},_release(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler(i){this._reachBottomEnabled!==i&&(this._reachBottomEnabled=i,this._updateBounds())},_pullDownEnablingHandler(i){this._pullDownEnabled!==i&&(this._pullDownEnabled=i,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange(){this._location-=(0,b.Cr)(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler(){this._state=1},dispose(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),ly=mh.L.inherit({_init(i){this.callBase(i),this._$pullDown=i._$pullDown,this._$topPocket=i._$topPocket,this._$bottomPocket=i._$bottomPocket,this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=(0,le.Z)(),this.releaseCallbacks=(0,le.Z)(),this.reachBottomCallbacks=(0,le.Z)()},render(){this._renderPullDown(),this.callBase()},_renderPullDown(){var i=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new bt.Z((0,c.Z)("<div>")).$element(),a=this._$pullDownText=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,c.Z)("<div>").text(this.option("pullingDownText")).appendTo(a),this._$pulledDownText=(0,c.Z)("<div>").text(this.option("pulledDownText")).appendTo(a),this._$refreshingText=(0,c.Z)("<div>").text(this.option("refreshingText")).appendTo(a),this._$pullDown.empty().append(i).append(e.append(t)).append(a)},pullDownEnable(i){this._eventHandler("pullDownEnabling",i)},reachBottomEnable(i){this._eventHandler("reachBottomEnabling",i)},_createScroller(i){var e=this,t=e._scrollers[i]=new oy(e._scrollerOptions(i));t.pullDownCallbacks.add(()=>{e.pullDownCallbacks.fire()}),t.releaseCallbacks.add(()=>{e.releaseCallbacks.fire()}),t.reachBottomCallbacks.add(()=>{e.reachBottomCallbacks.fire()})},_scrollerOptions(i){return(0,f.l)(this.callBase(i),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease(){this._eventHandler("pendingRelease")},release(){return this._eventHandler("release").done(this._updateAction)},location(){var i=this.callBase();return i.top+=(0,b.Cr)(this._$topPocket),i},dispose(){(0,S.S6)(this._scrollers,function(){this.dispose()}),this.callBase()}});const dy=ly;var Ch=T(4381),$t="dx-scrollview",uy="".concat($t,"-content"),hy="".concat($t,"-top-pocket"),cy="".concat($t,"-bottom-pocket"),py="".concat($t,"-pull-down"),Cs="".concat($t,"-scrollbottom"),_y="".concat(Cs,"-indicator"),vy="".concat(Cs,"-text"),gy="".concat($t,"-loadpanel"),my={pullDown:jS,swipeDown:ty,simulated:dy},fy=!(0,B.Ym)(),Cy={finishLoading:E.ZT,release:E.ZT,refresh:E.ZT,scrollOffset:()=>({top:0,left:0}),_optionChanged(i){if("onUpdated"!==i.name)return this.callBase.apply(this,arguments)}},wh=Ch.Z.inherit(fy?Cy:{_getDefaultOptions(){return(0,f.l)(this.callBase(),{pullingDownText:y.Z.format("dxScrollView-pullingDownText"),pulledDownText:y.Z.format("dxScrollView-pulledDownText"),refreshingText:y.Z.format("dxScrollView-refreshingText"),reachBottomText:y.Z.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"android"===N.Z.real().platform,options:{refreshStrategy:"swipeDown"}},{device:()=>(0,z.yj)(),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup(){this.callBase(),this.$element().addClass($t),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent(){var i=(0,c.Z)("<div>").addClass(uy);this._$content.wrapInner(i)},_initTopPocket(){var i=this._$topPocket=(0,c.Z)("<div>").addClass(hy),e=this._$pullDown=(0,c.Z)("<div>").addClass(py);i.append(e),this._$content.prepend(i)},_initBottomPocket(){var i=this._$bottomPocket=(0,c.Z)("<div>").addClass(cy),e=this._$reachBottom=(0,c.Z)("<div>").addClass(Cs),t=(0,c.Z)("<div>").addClass(_y),a=new bt.Z((0,c.Z)("<div>")).$element(),r=this._$reachBottomText=(0,c.Z)("<div>").addClass(vy);this._updateReachBottomText(),e.append(t.append(a)).append(r),i.append(e),this._$content.append(i)},_initLoadPanel(){var i=(0,c.Z)("<div>").addClass(gy).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(i,Md,e)},_updateReachBottomText(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy(){var i=this.option("useNative")?this.option("refreshStrategy"):"simulated";this._strategy=new(0,my[i])(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on(i){var e=this.callBase.apply(this,arguments);return("pullDown"===i||"reachBottom"===i)&&this._tryRefreshPocketState(),e},_pullDownEnable(i){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(i),this._strategy.pullDownEnable(i),this._pullDownEnabled=i)},_reachBottomEnable(i){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(i),this._strategy.reachBottomEnable(i),this._reachBottomEnabled=i)},_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator(i){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=i},_pullDownLoading(){this.startLoading(),this._pullDownAction()},_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading(){this.startLoading(),this._reachBottomAction()},_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged(i){switch(i.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(i)}},content(){return(0,j.uD)(this._$content.children().eq(1))},release(i){return void 0!==i&&this.toggleLoading(!i),this._strategy.release()},toggleLoading(i){this._reachBottomEnable(i)},refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading(){this._loadPanel.hide(),this._unlock()},_dispose(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});(0,X.Z)("dxScrollView",wh);const xh=wh;var Sh=T(2528),wy=T(9840);const yh={_getSpecificDataSourceOption(){var i=this.option("dataSource"),e=!1,t={};return this._getGroupedOption()&&(i=>Array.isArray(i)&&i.every(e=>2===Object.keys(e).length&&"key"in e&&"items"in e&&Array.isArray(e.items)))(i)&&(t=i.reduce((a,r)=>{var n=r.items.map(s=>((0,_.Kn)(s)||(s={text:s},e=!0),"key"in s||(s.key=r.key),s));return a.concat(n)},[]),i={store:{type:"array",data:t},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(i.searchExpr="text")),i}};var mr=T(6789),bh="dx-list-item-badge-container",ws="dx-list-item-chevron-container",Ey=mr.Z.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge(i){if(this._$element.children(".".concat(bh)).remove(),i){var e=(0,c.Z)("<div>").addClass(bh).append((0,c.Z)("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(i)),t=this._$element.children(".".concat(ws)).first();t.length>0?e.insertBefore(t):e.appendTo(this._$element)}},_renderShowChevron(i){if(this._$element.children(".".concat(ws)).remove(),i){var e=(0,c.Z)("<div>").addClass(ws),t=(0,c.Z)("<div>").addClass("dx-list-item-chevron");e.append(t).appendTo(this._$element)}}});const Iy=Ey;var fr="dx-list-item",Ay=".".concat(fr),mi="dx-list-group",xs="dx-list-group-header",Cr="dx-list-group-body",Eh="dx-list-group-collapsed",Ny=(0,q.vb)("items"),Ss=hs.Z.inherit({_activeStateUnit:[Ay,".dx-list-select-all"].join(","),_supportedKeys(){var i=this,e=function(a){var s,o,l,r=t(a);r.is(i.option("focusedElement"))&&(o=a,l=(s=r).position().top,"prev"===o&&(l=s.position().top-(0,b.Cr)(i.$element())+(0,b.zp)(s)),i.scrollTo(l),r=t(a)),i.option("focusedElement",(0,j.uD)(r)),i.scrollToItem(r)};function t(a){var r=i.scrollTop(),n=(0,b.Cr)(i.$element()),s=(0,c.Z)(i.option("focusedElement")),o=!0;if(!s.length)return(0,c.Z)();for(;o;){var l=s[a]();if(!l.length)break;var d=l.position().top+(0,b.zp)(l)/2;(o=d<n+r&&d>r)&&(s=l)}return s}return(0,f.l)(this.callBase(),{leftArrow:E.ZT,rightArrow:E.ZT,pageUp:()=>(e("prev"),!1),pageDown:()=>(e("next"),!1)})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:y.Z.format("dxList-pullingDownText"),pulledDownText:y.Z.format("dxList-pulledDownText"),refreshingText:y.Z.format("dxList-refreshingText"),pageLoadingText:y.Z.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:y.Z.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:i=>i?i.showChevron:void 0,badgeExpr:i=>i?i.badge:void 0})},_defaultOptionsRules(){var i=(0,z.Vk)();return this.callBase().concat((0,wy.i)(),[{device:()=>!wt.nativeScrolling,options:{useNativeScrolling:!1}},{device:e=>!wt.nativeScrolling&&!N.Z.isSimulator()&&"desktop"===N.Z.real().deviceType&&"generic"===e.platform,options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,z.x2)(i),options:{useInkRipple:!0}},{device:()=>(0,z.yj)(i),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged(i){i&&this._updateLoadingState(!0)},_itemClass:()=>fr,_itemDataKey:()=>"dxListItemData",_itemContainer(){return this._$container},_getItemsContainer(){return this._$listContainer},_cleanItemContainer(){this.callBase();var i=this._getItemsContainer();(0,c.Z)(i).empty(),i.appendTo(this._$container)},_saveSelectionChangeEvent(i){this._selectionChangeEventInstance=i},_getSelectionChangeEvent(){return this._selectionChangeEventInstance},_refreshItemElements(){this._itemElementsCache=this.option("grouped")?this._getItemsContainer().children(".".concat(mi)).children(".".concat(Cr)).children(this._itemSelector()):this._getItemsContainer().children(this._itemSelector())},_modifyByChanges(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem(i,e){return this.callBase(i,e).done(function(){this._refreshItemElements()})},deleteItem(i){return this.callBase(i).done(function(){this._refreshItemElements()})},_itemElements(){return this._itemElementsCache},_itemSelectHandler(i){if("single"!==this.option("selectionMode")||!this.isItemSelected(i.currentTarget))return this.callBase(i)},_allowDynamicItemsAppend:()=>!0,_init(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=(0,c.Z)("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions(){var i=this._scrollBottomMode(),e=this._nextButtonMode();return(0,f.l)(this.callBase(),{paginate:(0,E.IS)(i||e,!0)})},_getGroupedOption(){return this.option("grouped")},_getGroupContainerByIndex(i){return this._getItemsContainer().find(".".concat(mi)).eq(i).find(".".concat(Cr))},_dataSourceFromUrlLoadMode:()=>"raw",_initScrollView(){var i=this.option("scrollingEnabled"),e=i&&this.option("pullRefreshEnabled"),t=i&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),function Hy(){return xh}(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!i,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:t?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=(0,c.Z)(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText(i){this._$listContainer.toggleClass("dx-wrap-item-text",i)},_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler(i){this._scrollAction&&this._scrollAction(i)},_initTemplates(){this._templateManager.addDefaultTemplates({group:new Qi.c((i,e)=>{(0,_.PO)(e)?e.key&&i.text(e.key):i.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate(i,e){if(this.callBase(i,e),i.icon){var t=(0,zt.H)(i.icon).addClass("dx-list-item-icon"),a=(0,c.Z)("<div>").addClass("dx-list-item-icon-container");a.append(t),e.prepend(a)}},_getBindableFields:()=>["text","html","icon"],_updateLoadingState(i){var e=this._dataController,t=this._scrollBottomMode()&&i&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(t)?this._infiniteDataLoading():(this._scrollView.release(!t&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted(i){return(0,_.$K)(i)&&(this._isFirstLoadCompleted=i),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler(i){this._loadIndicationSuppressed()||(i&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(()=>{var e;(this._itemElements().length||this._isDataSourceFirstLoadCompleted())&&(null===(e=this._scrollView)||void 0===e||e.startLoading())}):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),i||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler(){!this._shouldAppendItems()&&(0,B.Ym)()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed(i){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=i},_scrollViewIsFull(){var i=this._scrollView;return!i||(0,b.Cr)(i.content())>(0,b.Cr)(i.container())},_pullDownHandler(i){this._pullRefreshAction(i);var e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading(i){var e,t,a=(0,b.Cr)(this._scrollView.content())-(0,b.Cr)(this._scrollView.container())<(null!==(t=null===(e=this._scrollView.scrollOffset())||void 0===e?void 0:e.top)&&void 0!==t?t:0);return i&&(!this._scrollViewIsFull()||a)},_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler(i){this._pageLoadingAction(i),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems(i){this.option("grouped")?((0,S.S6)(i,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),(0,z.x2)()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent(){var i=(0,D.V4)(se.u,this.NAME),e=".".concat(xs),t=this.$element(),a=this.option("collapsibleGroups");t.toggleClass("dx-list-collapsible-groups",a),C.Z.off(t,i,e),a&&C.Z.on(t,i,e,r=>{this._createAction(n=>{var s=(0,c.Z)(n.event.currentTarget).parent();this._collapseGroupHandler(s),this.option("focusStateEnabled")&&this.option("focusedElement",(0,j.uD)(s.find(".".concat(fr)).eq(0)))},{validatingTargetName:"element"})({event:r})})},_collapseGroupHandler(i,e){var t=(0,x.BH)();if(i.hasClass(Eh)===e)return t.resolve();var a=i.children(".".concat(Cr)),r=(0,b.zp)(a),n=0;return 0===r&&((0,b.QQ)(a,"auto"),n=(0,b.zp)(a)),i.toggleClass(Eh,e),ge.Z.animate(a,{type:"custom",from:{height:r},to:{height:n},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),t.resolve()}.bind(this)}),t.promise()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup(){this._itemElementsCache=(0,c.Z)(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"group"},this._focusTarget()),this._setListAria()},_setListAria(){var{items:i}=this.option();this.setAria(i?.length?{role:"listbox",label:"Items"}:{role:void 0,label:void 0},this._$listContainer)},_focusTarget(){return this._itemContainer()},_renderInkRipple(){this._inkRipple=(0,Sh.sY)()},_toggleActiveState(i,e,t){this.callBase.apply(this,arguments);var a=this;if(this._inkRipple){var r={element:i,event:t};e?(0,z.x2)()?this._inkRippleTimer=setTimeout(()=>{a._inkRipple.showWave(r)},35):a._inkRipple.showWave(r):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(r))}},_postprocessRenderItem(i){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent((0,c.Z)(i.itemElement))},_attachSwipeEvent(i){var e=(0,D.V4)(ia,this.NAME);C.Z.on(i,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler(i){this._itemDXEventHandler(i,"onItemSwipe",{direction:i.offset<0?"left":"right"})},_nextButtonHandler(i){this._pageLoadingAction(i);var e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup(i,e){var t=(0,c.Z)("<div>").addClass(mi).appendTo(this._getItemsContainer()),a="dx-".concat((new ve.Z).toString());this.setAria({role:"group",labelledby:a},t);var n=(0,c.Z)("<div>").addClass(xs).attr("id",a).appendTo(t),s=this.option("groupTemplate"),o=this._getTemplate(e.template||s,e,i,n),l={index:i,itemData:e,container:(0,j.uD)(n)};this._createItemByTemplate(o,l),(0,c.Z)("<div>").addClass("dx-list-group-header-indicator").prependTo(n),this._renderingGroupIndex=i;var d=(0,c.Z)("<div>").addClass(Cr).appendTo(t);(0,S.S6)(Ny(e)||[],(u,h)=>{this._renderItem({group:i,item:u},h,d)}),this._groupRenderAction({groupElement:(0,j.uD)(t),groupIndex:i,groupData:e})},downInkRippleHandler(i){this._toggleActiveState((0,c.Z)(i.currentTarget),!0,i)},upInkRippleHandler(i){this._toggleActiveState((0,c.Z)(i.currentTarget),!1)},attachGroupHeaderInkRippleEvents(){var i=".".concat(xs),e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var t=[e,"dxpointerdown",i,this._downInkRippleHandler],a=[e,"dxpointerup dxpointerout",i,this._upInkRippleHandler];C.Z.off(...t),C.Z.on(...t),C.Z.off(...a),C.Z.on(...a)},_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState(i){this.callBase(i),this._scrollView.option("disabled",i||!this.option("scrollingEnabled"))},_toggleNextButton(i){var e=this._dataController,t=this._getNextButton();this.$element().toggleClass("dx-has-next",i),i&&e.isLoaded()&&t.appendTo(this._itemContainer()),i||t.detach()},_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton(){var i=(0,c.Z)("<div>").addClass("dx-list-next-button"),e=(0,c.Z)("<div>").appendTo(i);return this._createComponent(e,ye.Z,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:(0,z.yj)()?"default":void 0,integrationOptions:{}}),i},_moveFocus(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh(){if((0,B.Ym)()){var i=this._scrollView.scrollTop();this.callBase(),i&&this._scrollView.scrollTo(i)}else this.callBase()},_optionChanged(i){switch(i.name){case"pageLoadMode":this._toggleNextButton(i.value),this._initScrollView();break;case"dataSource":this.callBase(i),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(i),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(i.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(i),this._scrollView.option(i.name,i.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(i),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(i);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(i)}},_extendActionArgs(i){if(!this.option("grouped"))return this.callBase(i);var e=i.closest(".".concat(mi)),t=e.find(".".concat(fr));return(0,f.l)(this.callBase(i),{itemIndex:{group:e.index(),item:t.index(i)}})},expandGroup(i){var e=(0,x.BH)(),t=this._getItemsContainer().find(".".concat(mi)).eq(i);return this._collapseGroupHandler(t,!1).done(()=>{e.resolveWith(this)}),e.promise()},collapseGroup(i){var e=(0,x.BH)(),t=this._getItemsContainer().find(".".concat(mi)).eq(i);return this._collapseGroupHandler(t,!0).done(()=>{e.resolveWith(this)}),e},updateDimensions(){var i=this,e=(0,x.BH)();return i._scrollView?i._scrollView.update().done(()=>{!i._scrollViewIsFull()&&i._updateLoadingState(!0),e.resolveWith(i)}):e.resolveWith(i),e.promise()},reload(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint(){this.scrollTo(0),this.callBase()},scrollTop(){return this._scrollView.scrollOffset().top},clientHeight(){return this._scrollView.clientHeight()},scrollHeight(){return this._scrollView.scrollHeight()},scrollBy(i){this._scrollView.scrollBy(i)},scrollTo(i){this._scrollView.scrollTo(i)},scrollToItem(i){var t=this._editStrategy.getItemElement(i)?.get(0);this._scrollView.scrollToElement(t,{bottom:zS(t,"bottom")})},_dimensionChanged(){this.updateDimensions()}}).include(yh);Ss.ItemClass=Iy;var ys="dx-toolbar-menu-action",Dh="dx-toolbar-hidden-button-group",Ah="dx-toolbar-menu-section",Rh="dx-toolbar-menu-last-section";class Wy extends Ss{_init(){super._init(),this._activeStateUnit=".".concat(ys,":not(.").concat(Dh,")")}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){var e=this._itemContainer();(0,S.S6)(["before","center","after","menu"],(t,a)=>{var r="_$".concat(a,"Section");this[r]||(this[r]=(0,c.Z)("<div>").addClass(Ah)),this[r].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".".concat("dx-scrollview-content")).attr("role","menu")}_updateSections(){var e=this.$element().find(".".concat(Ah));e.removeClass(Rh),e.not(":empty").eq(-1).addClass(Rh)}_renderItem(e,t,a,r){var n,s=null!==(n=t.location)&&void 0!==n?n:"menu",o=this["_$".concat(s,"Section")],l=super._renderItem(e,t,o,r);return this._getItemTemplateName({itemData:t})&&l.addClass("dx-toolbar-menu-custom"),("menu"===s||"dxButton"===t.widget||"dxButtonGroup"===t.widget||t.isAction)&&l.addClass(ys),"dxButton"===t.widget&&l.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===t.widget&&l.addClass(Dh),l.addClass(t.cssClass),l}_getItemTemplateName(e){var t=super._getItemTemplateName(e),a=e.itemData;return a&&a.menuItemTemplate||t}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,t,a){(0,c.Z)(e.target).closest(".".concat(ys)).length&&super._itemClickHandler(e,t,a)}_clean(){this._getSections().empty(),super._clean()}}class Xy extends hh.Z{_supportedKeys(){var e,t={};return(!this.option("opened")||!(null!==(e=this._list)&&void 0!==e&&e.option("focusedElement")))&&(t=this._button._supportedKeys()),(0,f.l)(super._supportedKeys(),t,{tab(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,V.Z)((0,V.Z)({},super._getDefaultOptions()),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,z.yj)(),options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new uh.s("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){var e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,ye.Z,{icon:"overflow",template:"content",stylingMode:(0,z.dC)()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:t=>{this.option("opened",!this.option("opened")),this._buttonClickAction(t)}})}_toggleActiveState(e,t,a){this._button._toggleActiveState(e,t,a)}_toggleMenuVisibility(e){var t,a,r=e??!(null!==(t=this._popup)&&void 0!==t&&t.option("visible"));e&&this._renderPopup(),null===(a=this._popup)||void 0===a||a.toggle(r),this.setAria("expanded",r)}_renderPopup(){if(!this._$popup){this._$popup=(0,c.Z)("<div>").appendTo(this.$element());var{rtlEnabled:e,container:t,animation:a}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(r){var{component:n}=r;n.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,preventScrollEvents:!1,contentTemplate:r=>this._renderList(r),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top ".concat(e?"left":"right"),at:"bottom ".concat(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:a,onOptionChanged:r=>{var{name:n,value:s}=r;"visible"===n&&this.option("opened",s)},container:t,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:r=>this._closeOutsideDropDownHandler(r),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}}_getMaxHeight(){var e=this.$element(),t=e.offset().top,a=(0,b.zp)((0,B.Jj)()),r=Math.max(t,a-t-(0,b.zp)(e));return Math.min(a,r-3-10)}_closeOutsideDropDownHandler(e){return!(0,c.Z)(e.target).closest(this.$element()).length}_renderList(e){var t=(0,c.Z)(e);t.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(t,Wy,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:a=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(a)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,t,a){var r;null===(r=this._list)||void 0===r||r._itemOptionChanged(e,t,a),sr(this._list,e)}_getListDataSource(){var e;return null!==(e=this.option("dataSource"))&&void 0!==e?e:this.option("items")}_setListDataSource(){var e;null===(e=this._list)||void 0===e||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){var t;super._toggleVisibility(e),null===(t=this._button)||void 0===t||t.option("visible",e)}_optionChanged(e){var t,a,r,{name:n,value:s}=e;switch(n){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(t=this._list)||void 0===t||t.option(n,this._getTemplate(s));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(a=this._list)||void 0===a||a.option(n,s),super._optionChanged(e);break;case"onItemRendered":null===(r=this._list)||void 0===r||r.option(n,s);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(s),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(n,s);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>sr(this._list,e))}}var Vh="dx-state-invisible",wr="dx-toolbar-item-auto-hide",bs="dx-toolbar-item-invisible";class eb{constructor(e){this._toolbar=e}_initMarkup(){(0,E.g0)(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(this._hasVisibleMenuItems()){this._renderMenuButtonContainer();var e=(0,c.Z)("<div>").appendTo(this._overflowMenuContainer()),t=this._toolbar._createActionByOption("onItemClick"),a=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,Xy,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>a,onItemClick:r=>{t(r)},container:this._toolbar.option("menuContainer"),onOptionChanged:r=>{var{name:n,value:s}=r;"opened"===n&&this._toolbar.option("overflowMenuVisible",s),"items"===n&&this._updateMenuVisibility(s)}})}}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,c.Z)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){var t=e??this._getMenuItems(),a=t.length&&this._hasVisibleMenuItems(t);this._toggleMenuVisibility(a)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass(Vh,!e)}_renderMenuItems(){(0,E.g0)(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){var e;return(0,E.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],t=>!this._toolbar._isMenuItem(t))}_getHiddenItems(){return this._toolbar._itemContainer().children(".".concat(wr,".").concat(bs)).not(".".concat(Vh))}_getMenuItems(){var e,t,a=(0,E.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],s=>this._toolbar._isMenuItem(s)),r=this._getHiddenItems();return this._restoreItems=null!==(t=this._restoreItems)&&void 0!==t?t:[],[...[].slice.call(r).map(s=>{var o=this._toolbar._getItemData(s),l=(0,c.Z)(s),d=l.children();return(0,f.l)({menuItemTemplate:()=>(this._restoreItems.push({container:l,item:d}),(0,c.Z)("<div>").addClass(wr).append(d))},o)}),...a]}_hasVisibleMenuItems(e){var t=e??this._toolbar.option("items"),a=!1,r=(0,q.vb)("visible"),n=(0,q.vb)("locateInMenu");return(0,S.S6)(t,(s,o)=>{var l=r(o,{functionsAsIs:!0}),d=n(o,{functionsAsIs:!0});(!1!==l&&("auto"===d||"always"===d)||"menu"===o.location)&&(a=!0)}),a}_arrangeItems(){var e;this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,S.S6)(null!==(e=this._restoreItems)&&void 0!==e?e:[],(a,r)=>{(0,c.Z)(r.container).append(r.item)}),this._restoreItems=[];var t=(0,b.dz)(this._toolbar.$element());return this._hideOverflowItems(t),t}_hideOverflowItems(e){var t=this._toolbar.$element().find(".".concat(wr));if(t.length){var a=e??(0,b.dz)(this._toolbar.$element());(0,c.Z)(t).removeClass(bs);for(var r=this._getItemsWidth();t.length&&a<r;)t.eq(-1).addClass(bs),r=this._getItemsWidth(),t.splice(-1,1)}}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,t,a){var r;"disabled"!==t&&"options.disabled"!==t||!this._toolbar._isMenuItem(e)?this.renderMenuItems():null===(r=this._menu)||void 0===r||r._itemOptionChanged(e,t,a)}_renderItem(e,t){"auto"===e.locateInMenu&&t.addClass(wr)}_optionChanged(e,t){var a,r,n,s,o;switch(e){case"disabled":null===(a=this._menu)||void 0===a||a.option(e,t);break;case"overflowMenuVisible":null===(r=this._menu)||void 0===r||r.option("opened",t);break;case"onItemClick":null===(n=this._menu)||void 0===n||n.option(e,t);break;case"menuContainer":null===(s=this._menu)||void 0===s||s.option("container",t);break;case"menuItemTemplate":null===(o=this._menu)||void 0===o||o.option("itemTemplate",t)}}}class Lh extends Kx{_getDefaultOptions(){return(0,V.Z)((0,V.Z)({},super._getDefaultOptions()),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){"height"!==e&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new qx(this):new eb(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,t,a,r){var n=super._renderItem(e,t,a,r);this._layoutStrategy._renderItem(t,n);var{widget:s,showText:o}=t;return"dxButton"===s&&"inMenu"===o&&n.toggleClass("dx-toolbar-text-auto-hide"),n}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(!this.$element().is(":hidden")){var e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}}_itemOptionChanged(e,t,a,r){this._isMenuItem(e)||super._itemOptionChanged(e,t,a,r),this._layoutStrategy._itemOptionChanged(e,t,a),("disabled"===t||"options.disabled"===t)&&sr(this,e),"location"===t&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>sr(this,e))}_isMenuItem(e){return"menu"===e.location||"always"===e.locateInMenu}_isToolbarItem(e){return void 0===e.location||"never"===e.locateInMenu}_optionChanged(e){var{name:t,value:a}=e;switch(this._layoutStrategy._optionChanged(t,a),t){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged(e),this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}updateDimensions(){this._dimensionChanged()}}(0,X.Z)("dxToolbar",Lh);const ab=Lh;var Ph="toolbar-button",Bh=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],Fh={defaultOptions:()=>({}),views:{headerPanel:class sb extends Gi{init(){super.init(),this._editingController=this.getController("editing"),this._headerFilterController=this.getController("headerFilter"),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})}_getToolbarItems(){return[]}_getButtonContainer(){return(0,c.Z)("<div>").addClass(this.addWidgetPrefix(Ph))}_getToolbarButtonClass(e){var t=e?" ".concat(e):"";return this.addWidgetPrefix(Ph)+t}_getToolbarOptions(){var e=this.option("toolbar"),t={toolbarOptions:{items:this._getToolbarItems(),visible:e?.visible,disabled:e?.disabled,onItemRendered(n){var s=n.itemData.onItemRendered;s&&s(n)}}},a=e?.items;return t.toolbarOptions.items=this._normalizeToolbarItems(t.toolbarOptions.items,a),this.executeAction("onToolbarPreparing",t),t.toolbarOptions&&!(0,_.$K)(t.toolbarOptions.visible)&&(t.toolbarOptions.visible=!!t.toolbarOptions.items?.length),t.toolbarOptions}_normalizeToolbarItems(e,t){e.forEach(o=>{if(!Bh.includes(o.name))throw new Error("Default toolbar item '".concat(o.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))});var a={location:"after"},r=Array.isArray(t);if(!(0,_.$K)(t))return e;r||(t=[t]);var n={};e.forEach(o=>{n[o.name]=o});var s=t.map(o=>((0,_.HD)(o)&&(o={name:o}),(0,_.$K)(o.name)&&((0,_.$K)(n[o.name])?o=(0,f.l)(!0,{},n[o.name],o):Bh.includes(o.name)&&(o=(0,V.Z)((0,V.Z)({},o),{visible:!1}))),(0,f.l)(!0,{},a,o)));return r?s:s[0]}_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var e=this.element();e.addClass(this.addWidgetPrefix("header-panel"));var t=y.Z.format(this.component.NAME+"-ariaToolbar"),a=(0,c.Z)("<div>").attr("aria-label",t).appendTo(e);this._toolbar=this._createComponent(a,ab,this._toolbarOptions)}}_columnOptionChanged(){}_handleDataChanged(){this._requireReady&&this.render()}_isDisabledDefinedByUser(e){var t,r=(null===(t=this.option("toolbar"))||void 0===t?void 0:t.items)?.find(n=>n?.name===e);return(0,_.$K)(r?.disabled)}render(){this._toolbarOptions=this._getToolbarOptions(),super.render.apply(this,arguments)}setToolbarItemDisabled(e,t){var a,r=this._toolbar,n=this._isDisabledDefinedByUser(e);if(r&&!n){var o=(null!==(a=r.option("items"))&&void 0!==a?a:[]).findIndex(d=>d.name===e);if(!(o<0)){var l=r.option("items[".concat(o,"]"));r.option("items[".concat(o,"].disabled"),t),l.options&&r.option("items[".concat(o,"].options.disabled"),t)}}}updateToolbarDimensions(){var e;null===(e=this._toolbar)||void 0===e||e.updateDimensions()}getHeaderPanel(){return this.element()}getHeight(){return this.getElementHeight()}optionChanged(e){var t,a,r,n;if("onToolbarPreparing"===e.name&&(this._invalidate(),e.handled=!0),"toolbar"===e.name){var s=(0,q.Zw)(e.fullName),o=e.fullName.replace(/^toolbar\./,"");if(1===s.length||"visible"===s[1])this._invalidate();else if("items"===s[1])if(2===s.length){var l=this._getToolbarOptions();null===(t=this._toolbar)||void 0===t||t.option("items",l.items)}else if(3===s.length){var d=this._normalizeToolbarItems(this._getToolbarItems(),e.value);null===(a=this._toolbar)||void 0===a||a.option(o,d)}else s.length>=4&&(null===(r=this._toolbar)||void 0===r||r.option(o,e.value));else null===(n=this._toolbar)||void 0===n||n.option(o,e.value);e.handled=!0}super.optionChanged(e)}isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)}allowDragging(){}hasGroupedColumns(){}}},extenders:{controllers:{resizing:i=>class extends i{_updateDimensionsCore(){super._updateDimensionsCore.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};P.registerModule("headerPanel",Fh);var Ge=T(6068);P.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var Es=Ge.Z.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var i=this.callBase();return(0,S.S6)(P.modules,function(){(0,_.mf)(this.defaultOptions)&&(0,f.l)(!0,i,this.defaultOptions())}),i},_setDeprecatedOptions(){this.callBase(),(0,f.l)(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'},"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>(0,z.yj)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>oe.Z.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:i=>"desktop"!==i.deviceType,options:{grouping:{expandMode:"rowClick"}}}])},_init(){this.callBase(),O.logHeaderFilterDeprecatedWarningIfNeed(this),P.processModules(this,P),P.callModuleItemsMethod(this,"init")},_clean:E.ZT,_optionChanged(i){P.callModuleItemsMethod(this,"optionChanged",[i]),i.handled||this.callBase(i)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(i){i&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var i=this;(0,E.g0)(()=>{i._renderContentImpl()})},_getTemplate(i){var e=i;return(0,_.HD)(e)&&e.startsWith("#")&&(e=(0,c.Z)(i),Ed.k.warn("Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.")),this.callBase(e)},_dispose(){this.callBase(),P.callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),P.callModuleItemsMethod(this,"beginUpdate")},endUpdate(){P.callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(i){return this._controllers[i]},getView(i){return this._views[i]},focus(i){this.getController("keyboardNavigation").focus(i)}});Es.registerModule=P.registerModule.bind(P),(0,X.Z)("dxDataGrid",Es);const ub=Es;var hb=T(4018),cb=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,pb=function i(e){e&&(0,S.S6)(e,(t,a)=>{if((0,_.PO)(a)||Array.isArray(a))i(a);else if("string"==typeof a){var r=cb.exec(a);r&&(e[t]=new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6])))}})},Mh=function(i){var e="sessionStorage"===i.type?(0,hb.y)():(0,B.Jj)().localStorage;if(!e)throw new Error("E1007");return e},kh=function(i){return(0,_.$K)(i.storageKey)?i.storageKey:"storage"};var yb={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:class Nh extends J.ViewController{getDataController(){return this.getController("data")}getExportController(){return this.getController("export")}getColumnsController(){return this.getController("columns")}init(){return this._state={},this._isLoaded=!1,this._isLoading=!1,this._windowUnloadHandler=()=>{void 0!==this._savingTimeoutID&&this._saveState(this.state())},C.Z.on((0,B.Jj)(),"visibilitychange",this._windowUnloadHandler),this}optionChanged(e){"stateStoring"===e.name?(this.isEnabled()&&!this.isLoading()&&this.load(),e.handled=!0):super.optionChanged(e)}dispose(){clearTimeout(this._savingTimeoutID),C.Z.off((0,B.Jj)(),"visibilitychange",this._windowUnloadHandler)}_loadState(){var e=this.option("stateStoring");if("custom"===e.type)return e.customLoad&&e.customLoad();try{return JSON.parse(Mh(e).getItem(kh(e)))}catch(t){Q.Z.log("W1022","State storing",t.message)}}_saveState(e){var t=this.option("stateStoring");if("custom"!==t.type)try{Mh(t).setItem(kh(t),JSON.stringify(e))}catch(a){Q.Z.log(a.message)}else t.customSave&&t.customSave(e)}publicMethods(){return["state"]}isEnabled(){return this.option("stateStoring.enabled")}isLoaded(){return this._isLoaded}isLoading(){return this._isLoading}load(){this._isLoading=!0;var e=(0,x.p4)(this._loadState());return e.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(t=>{null!==t&&!(0,_.Qr)(t)&&this.state(t)}),e}state(e){if(!arguments.length)return(0,f.l)(!0,{},this._state);this._state=(0,f.l)({},e),pb(this._state)}save(){var e=this;clearTimeout(e._savingTimeoutID),e._savingTimeoutID=setTimeout(()=>{e._saveState(e.state()),e._savingTimeoutID=void 0},e.option("stateStoring.savingTimeout"))}}},extenders:{views:{rowsView:i=>class extends i{init(){super.init(),this._dataController.stateLoaded.add(()=>{if(this._dataController.isLoaded()&&!this._dataController.getDataSource()){this.setLoading(!1),this.renderNoDataText();var e=this.component.getView("columnHeadersView");e&&e.render(),this.component._fireContentReadyAction()}})}}},controllers:{stateStoring:i=>class extends i{init(){return super.init.apply(this,arguments),(i=>{var e=i.getController("columns"),t=i.getController("selection"),a=i.getController("export"),r=i.getController("data");e&&e.columnsChanged.add(()=>{i.updateState({columns:e.getUserState()})}),t&&t.selectionChanged.add(n=>{i.updateState({selectedRowKeys:n.selectedRowKeys,selectionFilter:n.selectionFilter})}),r&&(i._initialPageSize=i.option("paging.pageSize"),i._initialFilterValue=i.option("filterValue"),r.changed.add(()=>{var n=(i=>{var e=i.getView("pagerView"),t=i.getController("data"),a={allowedPageSizes:e?e.getPageSizes():void 0,filterPanel:{filterEnabled:i.option("filterPanel.filterEnabled")},filterValue:i.option("filterValue"),focusedRowKey:i.option("focusedRowEnabled")?i.option("focusedRowKey"):void 0};return(0,f.l)(a,t.getUserState())})(i);i.updateState(n)})),a&&a.selectionOnlyChanged.add(()=>{i.updateState({exportSelectionOnly:a.selectionOnly()})})})(this),this}isLoading(){return super.isLoading()||this.getDataController().isStateLoading()}state(e){var t=super.state.apply(this,arguments);return void 0!==e&&this.applyState((0,f.l)(!0,{},e)),t}updateState(e){if(this.isEnabled()){var t=this.state(),a=(0,f.l)({},t,e),r=(0,E.k3)(t),n=(0,E.k3)(a);(0,E.bY)(r,n)||(e=(0,f.l)(!0,{},e),(0,f.l)(this._state,e),this.save())}else(0,f.l)(this._state,e)}applyState(e){var t,a,{allowedPageSizes:r}=e,{searchText:n}=e,{selectedRowKeys:s}=e,{selectionFilter:o}=e,l=this.option("scrolling.mode"),d="virtual"===l||"infinite"===l,u=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),h=null===(t=this.getView("rowsView"))||void 0===t?void 0:t.hasHeight();this.component.beginUpdate(),this.getColumnsController()&&this.getColumnsController().setUserState(e.columns),this.getExportController()&&this.getExportController().selectionOnly(e.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",s||[]),this.option("selectionFilter",o),r&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=r),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",null!==(a=e.focusedRowKey)&&void 0!==a?a:null)),this.component.endUpdate(),this.option("searchPanel.text",n||""),this.option("filterValue",((i,e)=>{var t=i.getController("filterSync"),a=i.getController("columns");return t?e.columns||void 0!==e.filterValue?e.filterValue||t.getFilterValueFromColumns(e.columns):i._initialFilterValue||t.getFilterValueFromColumns(a.getColumns()):null})(this,e)),this.option("filterPanel.filterEnabled",!e.filterPanel||e.filterPanel.filterEnabled),this.option("paging.pageIndex",(!d||h)&&e.pageIndex||0),this.option("paging.pageSize",d&&!u||!(0,_.$K)(e.pageSize)?this._initialPageSize:e.pageSize),this.getDataController()&&this.getDataController().reset()}},columns:i=>class extends i{_shouldReturnVisibleColumns(){return super._shouldReturnVisibleColumns.apply(this,arguments)&&(!this._stateStoringController.isEnabled()||this._stateStoringController.isLoaded())}},data:i=>class extends i{dispose(){clearTimeout(this._restoreStateTimeoutID),super.dispose()}callbackNames(){return super.callbackNames().concat(["stateLoaded"])}_refreshDataSource(){if(this._stateStoringController.isEnabled()&&!this._stateStoringController.isLoaded()){clearTimeout(this._restoreStateTimeoutID);var e=new x.BH;return this._restoreStateTimeoutID=setTimeout(()=>{this._stateStoringController.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{super._refreshDataSource(),this.stateLoaded.fire(),e.resolve()}).fail(t=>{this.stateLoaded.fire(),this._handleLoadError(t||"Unknown error"),e.reject()})}),e.promise()}this.isStateLoading()||super._refreshDataSource()}isLoading(){return super.isLoading()||this._stateStoringController.isLoading()}isStateLoading(){return(0,_.$K)(this._restoreStateTimeoutID)}isLoaded(){return super.isLoaded()&&!this.isStateLoading()}},selection:i=>class extends i{_fireSelectionChanged(e){var t=this.option("selection.deferred");this._stateStoringController.isLoading()&&t||super._fireSelectionChanged.apply(this,arguments)}}}}};P.registerModule("stateStoring",yb);var oa=T(1446),bb=T(9312),Hh="dx-editor-cell",Zh="dx-selection",Wt="dx-select-checkbox",zh="dx-command-select",$h="dx-data-row",Je="selection.showCheckBoxesMode",la="selection.mode",Wh=function(i,e){var t=i.getView("rowsView"),a=i.getController("selection"),r=(0,c.Z)(e.target).closest(".".concat($h)),n=t.getRowIndex(r);n<0||("onLongTap"===i.option(Je)?a.isSelectionWithCheckboxes()?a.stopSelectionWithCheckboxes():a.startSelectionWithCheckboxes():("onClick"===i.option(Je)&&a.startSelectionWithCheckboxes(),"always"!==i.option(Je)&&a.changeItemSelection(n,{control:!0})))},Ab=(i,e)=>{var{component:t}=e,a=t.getView("rowsView");t.option("renderAsync")&&!t.option("selection.deferred")&&(e.value=t.isRowSelected(e.row.key)),a.renderSelectCheckBoxContainer((0,c.Z)(i),e)},Rb=(i,e)=>{var{column:t}=e,a=(0,c.Z)(i),r=e.component.getView("columnHeadersView");a.addClass(Hh),r._renderSelectAllCheckBox(a,t),r._attachSelectAllCheckBoxClickEvent(a)},Fb={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",deferred:!1,maxFilterLengthInRequest:1500,alwaysSelectByShift:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:class Ob extends J.Controller{init(){var e,{deferred:t,selectAllMode:a,mode:r}=null!==(e=this.option("selection"))&&void 0!==e?e:{};"infinite"===this.option("scrolling.mode")&&!t&&"multiple"===r&&"allPages"===a&&Q.Z.log("W1018"),this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._stateStoringController=this.getController("stateStoring"),this._selectionMode=r,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){var t=this.option("selection.deferred"),a=e.filter(n=>"remove"===n.type).map(n=>n.key);if(t){var r=this._dataController.items().filter(n=>n.isSelected).map(n=>n.key);a=a.filter(n=>r.find(s=>(0,E.bY)(s,n)))}a.length&&this.deselectRows(a)}_updateSelectedOnPush(e){if(!this.option("selection.deferred")){var a=e.filter(n=>"update"===n.type),r=this.getSelectedRowsData();(0,Ke.ii)({keyInfo:this._selection.options,data:r,changes:a})}}_getSelectionConfig(){var e,t=this._dataController,a=this._columnsController,r=null!==(e=this.option("selection"))&&void 0!==e?e:{},{deferred:n}=r,s=this.option("scrolling.mode"),o="virtual"===s||"infinite"===s,l=this.option("selection.allowSelectAll"),d=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:n,alwaysSelectByShift:r.alwaysSelectByShift,maxFilterLengthInRequest:r.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,isVirtualPaging:o,allowLoadByRange(){var u=a.getGroupColumns().length>0;return o&&!d&&!u&&l&&!n},key:()=>t?.key(),keyOf:u=>t?.keyOf(u),dataFields(){var u;return null===(u=t.dataSource())||void 0===u?void 0:u.select()},load(u){var h;return(null===(h=t.dataSource())||void 0===h?void 0:h.load(u))||(new x.BH).resolve([])},plainItems:u=>t.items(!0),isItemSelected:u=>u.selected,isSelectableItem:u=>"data"===u?.rowType&&!u.isNewRow,getItemData:u=>(0,_.$K)(u?.rowType)?u?.oldData||u?.data:u,filter:()=>t.getCombinedFilter(n),totalCount:()=>t.totalCount(),getLoadOptions(u,h,p){var v,g,{sort:m,filter:w}=null!==(g=null===(v=t.dataSource())||void 0===v?void 0:v.lastLoadOptions())&&void 0!==g?g:{},I=Math.min(u,h),A=Math.max(u,h);return(0,_.$K)(p)&&(I=Math.min(p,I),A=Math.max(p,A)),{skip:I,take:A-I+1,filter:w,sort:m}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){var e=this._columnsController,t=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:t,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:zh,width:"auto",cellTemplate:Ab,headerCellTemplate:Rb}),e.columnOption("command:select","visible",t)}_createSelection(){var e=this._getSelectionConfig();return new bb.Z(e)}_fireSelectionChanged(e){var t=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(t),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){var{isDeferredMode:t}=e,{selectionFilter:a}=e,{selectedItemKeys:r}=e,{removedItemKeys:n}=e;"onClick"===this.option(Je)&&((t?a&&function(i,e){var t=0,a=i._dataController.store(),r=a&&a.key(),n=Array.isArray(r);if(!e.length)return!1;if(n&&Array.isArray(e[0])&&"and"===e[1]){for(var s=0;s<e.length;s++)if(Array.isArray(e[s])){if(e[s][0]!==r[t]||"="!==e[s][1])return!0;t++}return!1}return r!==e[0]}(this,a):r.length>1)?this.startSelectionWithCheckboxes():(t?a&&!a.length:0===r.length&&n.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){var t,a=this.option("selection.deferred"),r=this._selection.selectionFilter(),n=this._dataController,s=n.items(!0),o=n.items();if(s){var l=this.isSelectionWithCheckboxes(),d=this.getChangedItemIndexes(s),u=this.getChangedItemIndexes(o);this._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:r,isDeferredMode:a}),(d.length||l!==this.isSelectionWithCheckboxes())&&n.updateItems({changeType:"updateSelection",itemIndexes:u}),a?(this.option("selectionFilter",r),t={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(this._selectedItemsInternalChange=!0,this.option("selectedRowKeys",e.selectedItemKeys.slice(0)),this._selectedItemsInternalChange=!1,t={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),this._fireSelectionChanged(t)}}getChangedItemIndexes(e){for(var t=[],a=this.option("selection.deferred"),r=0,{length:n}=e;r<n;r++){var s=e[r],o=this.isRowSelected(a?s.data:s.key);this._selection.isDataItem(s)&&s.isSelected!==o&&t.push(r)}return t}callbackNames(){return["selectionChanged"]}optionChanged(e){switch(super.optionChanged(e),e.name){case"selection":var t=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==e.fullName){var a=this._selectionMode,r=this.option("selectedRowKeys");t!==a&&("single"===a?r.length>1&&(r=[r[0]]):"multiple"!==a&&(r=[])),this.selectRows(r).always(()=>{this._fireSelectionChanged()})}this._columnsController.updateColumns(),e.handled=!0;break;case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":var n=e.value||[];Array.isArray(n)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!n.length)&&this.selectRows(n),e.handled=!0}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return"multiple"===this.option(la)&&("always"===this.option(Je)||"onClick"===this.option(Je)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(Je)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){var e,t=null!==(e=this.option("selectedRowKeys"))&&void 0!==e?e:[];return!this.option("selection.deferred")&&t.length?this.selectedItemKeys(t):(new x.BH).resolve().promise()}selectedItemKeys(e,t,a,r){return this._selection.selectedItemKeys(e,t,a,r)}getSelectedRowKeys(e){return this._selection.getSelectedItemKeys()}selectRows(e,t){return this.selectedItemKeys(e,t)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){var t=this._dataController.items(),a=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),(0,S.S6)(e,function(){var r=t[this];r&&"data"===r.rowType&&a.push(r.key)}),this.selectRows(a)}getSelectedRowsData(e){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,t,a){t=t||{},this.isSelectionWithCheckboxes()&&(t.control=!0);var r=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(r,t,a)}focusedItemIndex(e){if(!(0,_.$K)(e))return this._selection._focusedItemIndex;this._selection._focusedItemIndex=e}isSelectionWithCheckboxes(){return"multiple"===this.option(la)&&("always"===this.option(Je)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){return"multiple"===this.option(la)&&!this.isSelectionWithCheckboxes()&&(this._isSelectionWithCheckboxes=!0,this._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){return!!this._isSelectionWithCheckboxes&&(this._isSelectionWithCheckboxes=!1,this._updateSelectColumn(),!0)}}},extenders:{controllers:{data:i=>class extends i{init(){var e=this.option("selection.deferred");super.init.apply(this,arguments),e&&this._selectionController._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})}_loadDataSource(){var e=this;return super._loadDataSource().always(()=>{e._selectionController.refresh()})}_processDataItem(e,t){var a=this._selectionController.isSelectColumnVisible(),r=t.isDeferredSelection=void 0===t.isDeferredSelection?this.option("selection.deferred"):t.isDeferredSelection,n=super._processDataItem.apply(this,arguments);if(n.isSelected=this._selectionController.isRowSelected(r?n.data:n.key),a&&n.values)for(var s=0;s<t.visibleColumns.length;s++)if("select"===t.visibleColumns[s].command){n.values[s]=n.isSelected;break}return n}refresh(e){var t=this,a=new x.BH;return super.refresh.apply(this,arguments).done(()=>{!e||e.selection?t._selectionController.refresh().done(a.resolve).fail(a.reject):a.resolve()}).fail(a.reject),a.promise()}_handleDataChanged(e){var t=this.hasLoadOperation();super._handleDataChanged.apply(this,arguments),t&&!this._repaintChangesOnly&&this._selectionController.focusedItemIndex(-1)}_applyChange(e){if(!e||"updateSelection"!==e.changeType)return super._applyChange.apply(this,arguments);e.items.forEach((t,a)=>{var r=this._items[a];r&&(r.isSelected=t.isSelected,r.values=t.values)})}_endUpdateCore(){var e=this._changes;if(e.length>1&&e.every(r=>"updateSelection"===r.changeType)){var a=e.map(r=>r.itemIndexes||[]).reduce((r,n)=>r.concat(n));this._changes=[{changeType:"updateSelection",itemIndexes:a}]}super._endUpdateCore.apply(this,arguments)}},contextMenu:i=>class extends i{_contextMenuPrepared(e){var t=e.event;t.originalEvent&&"dxhold"!==t.originalEvent.type||e.items&&e.items.length>0||Wh(this,t)}}},views:{columnHeadersView:i=>class extends i{init(){super.init(),this._selectionController.selectionChanged.add(this._updateSelectAllValue.bind(this))}_updateSelectAllValue(){var e=this.element(),t=e&&e.find(".".concat(Wt));if(e&&t.length&&"multiple"===this.option("selection.mode")){var a=this._selectionController.isSelectAll(),r=!1!==a,n=this.option("selection.allowSelectAll")?!this._dataController.isEmpty():r;t.dxCheckBox("instance").option({visible:n,value:a})}}_handleDataChanged(e){super._handleDataChanged(e),(!e||"refresh"===e.changeType||e.repaintChangesOnly&&"update"===e.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})}_renderSelectAllCheckBox(e,t){var a=this,r=a._dataController.isEmpty(),n=(0,c.Z)("<div>").appendTo(e).addClass(Wt);return a.setAria("label",y.Z.format("dxDataGrid-ariaSelectAll"),n),a._editorFactoryController.createEditor(n,(0,f.l)({},t,{parentType:"headerRow",dataType:"boolean",value:this._selectionController.isSelectAll(),editorOptions:{visible:!r&&(a.option("selection.allowSelectAll")||!1!==this._selectionController.isSelectAll())},tabIndex:a.option("useLegacyKeyboardNavigation")?-1:a.option("tabIndex")||0,setValue:(s,o)=>{var l=a.option("selection.allowSelectAll");o.component.option("visible",l||!1!==o.component.option("value")),o.event&&this._selectionController.isSelectAll()!==s&&(o.value&&!l?o.component.option("value",!1):o.value?this._selectionController.selectAll():this._selectionController.deselectAll(),o.event.preventDefault())}})),n}_attachSelectAllCheckBoxClickEvent(e){C.Z.on(e,se.u,this.createAction(t=>{var{event:a}=t;(0,c.Z)(a.target).closest(".".concat(Wt)).length||C.Z.trigger((0,c.Z)(a.currentTarget).children(".".concat(Wt)),se.u),a.preventDefault()}))}},rowsView:i=>class extends i{renderSelectCheckBoxContainer(e,t){"data"!==t.rowType||t.row.isNewRow?O.setEmptyText(e):(e.addClass(Hh),this._attachCheckBoxClickEvent(e),this._renderSelectCheckBox(e,t))}_renderSelectCheckBox(e,t){var a=(0,c.Z)("<div>").addClass(Wt).appendTo(e);return this.setAria("label",y.Z.format("dxDataGrid-ariaSelectRow"),a),this._editorFactoryController.createEditor(a,(0,f.l)({},t.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:t.value,setValue(r,n){var s;"keydown"===(null===(s=n?.event)||void 0===s?void 0:s.type)&&C.Z.trigger(n.element,se.u,n)},row:t.row})),a}_attachCheckBoxClickEvent(e){C.Z.on(e,se.u,this.createAction(function(t){var{event:a}=t,r=this.getRowIndex((0,c.Z)(a.currentTarget).closest(".".concat("dx-row")));r>=0&&(this._selectionController.startSelectionWithCheckboxes(),this._selectionController.changeItemSelection(r,{shift:a.shiftKey}),(0,c.Z)(a.target).closest(".".concat(Wt)).length&&this._dataController.updateItems({changeType:"updateSelection",itemIndexes:[r]}))}))}_update(e){var t=this,a=t.getTableElements();"updateSelection"===e.changeType?a.length>0&&((0,S.S6)(a,(r,n)=>{(0,S.S6)(e.itemIndexes||[],(s,o)=>{var l;if(e.items[o]&&(l=t._getRowElements((0,c.Z)(n)).eq(o)).length){var{isSelected:d}=e.items[o];l.toggleClass(Zh,void 0!==d&&d).find(".".concat(Wt)).dxCheckBox("option","value",d),t.setAria("selected",d,l)}})}),t._updateCheckboxesClass()):super._update(e)}_createTable(){var e=this,t=e.option("selection.mode"),a=super._createTable.apply(e,arguments);return"none"!==t&&(("onLongTap"===e.option(Je)||!wt.touch)&&C.Z.on(a,(0,D.V4)(oa.Z.name,"dxDataGridRowsView"),".".concat($h),e.createAction(r=>{Wh(e.component,r.event),r.event.stopPropagation()})),C.Z.on(a,"mousedown selectstart",e.createAction(r=>{var{event:n}=r;n.shiftKey&&n.preventDefault()}))),a}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var{isSelected:a}=e;a&&t.addClass(Zh),"none"!==this.option(la)&&this.setAria("selected",a,t)}return t}_rowClickForTreeList(e){super._rowClick(e)}_rowClick(e){var t=e.event,a=(0,c.Z)(t.target).closest(".".concat("dx-selection-disabled")).length;this.isClickableElement((0,c.Z)(t.target))||(!a&&("multiple"!==this.option(la)||"always"!==this.option(Je))&&this._selectionController.changeItemSelection(e.rowIndex,{control:(0,D.j1)(t),shift:t.shiftKey})&&(t.preventDefault(),e.handled=!0),super._rowClick(e))}isClickableElement(e){return!!e.closest(".".concat(zh)).length}_renderCore(e){var t=super._renderCore(e);return this._updateCheckboxesClass(),t}_updateCheckboxesClass(){var e=this.getTableElements(),t=this._selectionController.isSelectColumnVisible()&&!this._selectionController.isSelectionWithCheckboxes();(0,S.S6)(e,(a,r)=>{(0,c.Z)(r).toggleClass("dx-select-checkboxes-hidden",t)})}}}}};P.registerModule("selection",Fb);var Is=T(3519),Kh="column-chooser-button",Gh="notouch-action",Uh="column-chooser",Yh="dx-column-chooser-item",zb=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],Ts={defaultOptions:()=>({columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,mode:"dragAndDrop",width:250,height:260,title:y.Z.format("dxDataGrid-columnChooserTitle"),emptyPanelText:y.Z.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:class Wb extends J.ViewController{init(){super.init(),this._rowsView=this.getView("rowsView")}renderShowColumnChooserButton(e){var s,t=this,a=t.addWidgetPrefix(Kh),r=t.option("columnChooser.enabled"),n=e.find(".".concat(a));r?n.length?n.show():(s=(0,c.Z)("<div>").addClass(a).appendTo(e),t._createComponent(s,ye.Z,{icon:Uh,onClick(){t.getView("columnChooserView").showColumnChooser()},hint:t.option("columnChooser.title"),integrationOptions:{}})):n.hide()}getPosition(){var e=this.option("columnChooser.position");return(0,_.$K)(e)?e:{my:"right bottom",at:"right bottom",of:this._rowsView&&this._rowsView.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}}},views:{columnChooserView:class Kb extends Gi{optionChanged(e){"columnChooser"===e.name?(this._initializePopupContainer(),this.render(null,"full")):super.optionChanged(e)}publicMethods(){return["showColumnChooser","hideColumnChooser"]}_resizeCore(){}_isWinDevice(){return!!N.Z.real().win}_initializePopupContainer(){var e=this,t=e.addWidgetPrefix("column-chooser"),a=e.element().addClass(t),r=e.option("columnChooser"),n=this._columnChooserController.getPosition(),s=(0,z.Vk)(),o=(0,z.OD)(s),l=(0,z.x2)(s),d={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:t},toolbarItems:[{text:r.title,toolbar:"top",location:o||l?"before":"center"}],position:n,width:r.width,height:r.height,rtlEnabled:e.option("rtlEnabled"),onHidden(){e._isWinDevice()&&(0,c.Z)("body").removeClass(e.addWidgetPrefix(Gh))},container:r.container};o||l?(0,f.l)(d,{showCloseButton:!0}):d.toolbarItems[d.toolbarItems.length]={shortcut:"cancel"},(0,_.$K)(this._popupContainer)?this._popupContainer.option(d):(e._popupContainer=e._createComponent(a,Dt,d),e._popupContainer.on("optionChanged",u=>{"visible"===u.name&&e.renderCompleted.fire()})),this.setPopupAttributes()}setPopupAttributes(){var e=this.isSelectMode(),t=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:y.Z.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!e).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),e),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),e&&!t&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))}_renderCore(e){if(this._popupContainer){var t=!this.isSelectMode();this._columnChooserList&&"full"!==e?t&&this._updateItems():this._renderTreeView()}}_renderTreeView(){var e,t,a,r=this,n=this._popupContainer.$content(),s=this.option("columnChooser"),o=this.isSelectMode(),u={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:(0,_.$K)(s.allowSearch)?s.allowSearch:null===(e=s.search)||void 0===e?void 0:e.enabled,searchTimeout:(0,_.$K)(s.searchTimeout)?s.searchTimeout:null===(t=s.search)||void 0===t?void 0:t.timeout,searchEditorOptions:null===(a=s.search)||void 0===a?void 0:a.editorOptions};if(this._isWinDevice()&&(u.useNativeScrolling=!1),(0,f.l)(u,o?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)u.searchEnabled||(u.searchValue=""),this._columnChooserList.option(u),this._updateItems();else{this._columnChooserList=this._createComponent(n,Is.Z,u),this._updateItems();var h=0;this._columnChooserList.on("optionChanged",p=>{var v=p.component.getScrollable();h=v.scrollTop()}),this._columnChooserList.on("contentReady",p=>{(0,E.Su)(()=>{p.component.getScrollable().scrollTo({y:h}),r.renderCompleted.fire()})})}}_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(t,a,r){(0,c.Z)(r).text(t.text).parent().addClass(t.cssClass).addClass(Yh)}}}_prepareSelectModeConfig(){var e,t=this,a=null!==(e=this.option("columnChooser.selection"))&&void 0!==e?e:{},r=!1;return{selectByClick:a.selectByClick,selectNodesRecursive:a.recursive,showCheckBoxesMode:a.allowSelectAll?"selectAll":"normal",onSelectionChanged:n=>{if(!r){var s=(o=n.component.getNodes(),(l=(d,u)=>d.reduce((h,p)=>(h.push(p),p.children.length&&l(p.children,h),h),u))(o,[]));n.component.beginUpdate(),r=!0,((o,l)=>{l.filter(d=>!1===d.itemData.allowHiding).forEach(d=>o.component.selectItem(d.key))})(n,s),n.component.endUpdate(),r=!1,t.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(o=>{o.forEach(l=>{t._columnsController.columnOption(l.itemData.id,"visible",!1!==l.selected)})})(s),t.component.endUpdate(),this._isUpdatingColumnVisibility=!1}var o,l}}}_updateItems(){var e=this.isSelectMode(),a=function(i,e){var t=[],a=i.isSelectMode(),r=i.option("columnChooser.selection.recursive");return e.length&&(0,S.S6)(e,(n,s)=>{var o={text:s.caption,cssClass:s.cssClass,allowHiding:s.allowHiding,expanded:!0,id:s.index,disabled:!1===s.allowHiding,parentId:(0,_.$K)(s.ownerBand)?s.ownerBand:null};a&&!(r&&s.hasColumns)&&(o.selected=s.visible),t.push(o)}),t}(this,this._columnsController.getChooserColumns(e));this._columnChooserList.option("items",a)}_updateItemsSelection(e){var t=e?.map(a=>this._columnsController.columnOption(a));this._columnChooserList.beginUpdate(),t?.forEach(a=>{var{visible:r,index:n}=a;r?this._columnChooserList.selectItem(n):this._columnChooserList.unselectItem(n)}),this._columnChooserList.endUpdate()}_columnOptionChanged(e){if(super._columnOptionChanged(e),this.isSelectMode()&&this._columnChooserList&&!this._isUpdatingColumnVisibility){var{optionNames:a}=e,r=a.visible&&1===a.length,n=(0,_.$K)(e.columnIndex)?[e.columnIndex]:e.columnIndices;(zb.some(o=>a[o])||e.changeTypes.columns&&a.all)&&(this._updateItemsSelection(n),r||this._updateItems())}}getColumnElements(){var e=[],t=this.isSelectMode(),a=this._columnsController.getChooserColumns(t),r=this._popupContainer&&this._popupContainer.$content(),n=r&&r.find(".dx-treeview-node");return n&&a.forEach(s=>{var o=n.filter("[data-item-id = '".concat(s.index,"']")),l=o.length?o.children(".".concat(Yh)).get(0):null;e.push(l)}),(0,c.Z)(e)}getName(){return"columnChooser"}getColumns(){return this._columnsController.getChooserColumns()}allowDragging(e){var t=this._columnsController.isParentColumnVisible(e.index),a=!e.visible&&e.allowHiding;return this.isColumnChooserVisible()&&t&&a}allowColumnHeaderDragging(e){return!this.isSelectMode()&&this.isColumnChooserVisible()&&e.allowHiding}getBoundingRect(){var e=this._popupContainer&&this._popupContainer.$overlayContent();if(e&&e.is(":visible")){var t=e.offset();return{left:t.left,top:t.top,right:t.left+(0,b.Y_)(e),bottom:t.top+(0,b.zp)(e)}}return null}showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&(0,c.Z)("body").addClass(this.addWidgetPrefix(Gh))}hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()}isColumnChooserVisible(){var e=this._popupContainer;return e&&e.option("visible")}isSelectMode(){return"select"===this.option("columnChooser.mode")}hasHiddenColumns(){var e=this.option("columnChooser.enabled"),t=this.getColumns().filter(a=>!a.visible);return e&&t.length}}},extenders:{views:{headerPanel:i=>class extends i{_getToolbarItems(){var e=super._getToolbarItems();return this._appendColumnChooserItem(e)}_appendColumnChooserItem(e){var t=this;if(t.option("columnChooser.enabled")){var r=t.option("columnChooser.title");e.push({widget:"dxButton",options:{icon:Uh,onClick:function(){t.component.getView("columnChooserView").showColumnChooser()},hint:r,text:r,onInitialized:function(s){(0,c.Z)(s.element).addClass(t._getToolbarButtonClass(t.addWidgetPrefix(Kh)))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40})}return e}optionChanged(e){"columnChooser"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}isVisible(){var e=this.option("columnChooser.enabled");return super.isVisible()||e}},columnHeadersView:i=>class extends i{allowDragging(e){var t=!this._columnChooserView.isSelectMode(),a=this._columnChooserView.isColumnChooserVisible();return t&&a&&e.allowHiding||super.allowDragging(e)}}},controllers:{columns:i=>class extends i{allowMoveColumn(e,t,a,r){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===r)&&super.allowMoveColumn(e,t,a,r)}}}}};P.registerModule("columnChooser",Ts);var xr=T(389);function Kt(i,e){for(var t=(0,lt.G5)(e.group),a=[],r=0;r<i.length;r++)a.push([t[r].selector,"=",i[r]]);return e.filter&&a.push(e.filter),O.combineFilters(a)}function jh(i,e,t){for(var a=(0,lt.G5)(e.group),r=[],n=t?i.length-1:0;n<i.length;n++){for(var s=[],o=0;o<=n;o++){var{selector:l}=a[o];if(n!==o||null!==i[o]&&!1!==i[o]&&!0!==i[o]){var d=[l,n===o?a[o].desc?">":"<":"=",i[o]];s.push("<"===d[1]?[d,"or",[l,"=",null]]:d)}else!1===i[o]?s.push([l,"=",!!a[o].desc||null]):(i[o]?!a[o].desc:a[o].desc)?s.push([l,"<>",i[o]]):(s.push([l,"<>",null]),s.push([l,"=",null]))}r.push(P.combineFilters(s))}return r=P.combineFilters(r,"or"),P.combineFilters([r,e.filter])}var qh=function(i,e){var{hash:t}=i;return t&&t[JSON.stringify(e)]},jb=function(i,e){var n,t=0,a=i.length-1;if(!i.length)return 0;do{var r=a+t>>1;i[r].offset>e?a=r:t=r}while(a-t>1);for(n=t;n<=a&&!(i[n].offset>e);n++);return n},qb=function i(e,t,a){for(var r=0;r<e.length;r++)t+1>=a?e[r].children=[]:i(e[r].children,t+1,a)},Xb=function i(e,t,a){var r=0;if(t)if(a)for(var n=0;n<t.length;n++)e.isGroupItemCountable(t[n])&&r++,r+=i(e,t[n].items,a-1);else r=t.length;return r};class Xh{constructor(e){this._dataSource=e,this.reset()}reset(){this._groupsInfo=[],this._totalCountCorrection=0}totalCountCorrection(){return this._totalCountCorrection}updateTotalItemsCount(e){this._totalCountCorrection=e||0}isGroupItemCountable(e){return!this._isVirtualPaging()||!e.isContinuation}_isVirtualPaging(){var e=this._dataSource.option("scrolling.mode");return"virtual"===e||"infinite"===e}itemsCount(){var t=this._dataSource._dataSource,a=P.normalizeSortingInfo(t.group()||[]).length;return Xb(this,t.items(),a)}foreachGroups(e,t,a,r,n){var s=this;return function o(l,d,u,h){var p=[];function v(A,F,G,M){var k=F&&A(F,G);return k&&M.push(k),k}for(var g=0;g<l.length;g++){if(h.push(l[g].data),!u&&!1===v(d,l[g].data,h,p))return!1;if(!l[g].data||l[g].data.isExpanded||a){var{children:m}=l[g],w=m.length&&o(m,d,u,h);if(w&&p.push(w),!1===w)return!1}if(u&&!1===v(d,l[g].data,h,p))return!1;(!l[g].data||l[g].data.offset!==l[g].offset)&&(r=!0),h.pop()}var I=n&&h.slice(0);return r&&x.gx.apply(c.Z,p).always(()=>{s._updateGroupInfoOffsets(l,I)})}(s._groupsInfo,e,t,[])}_updateGroupInfoOffsets(e,t){t=t||[];for(var a=0;a<e.length;a++){var r=e[a];if(r.data&&r.data.offset!==r.offset){r.offset=r.data.offset;for(var n=0;n<t.length;n++)t[n].offset=r.offset}}e.sort((s,o)=>s.offset-o.offset)}findGroupInfo(e){for(var t,a=this._groupsInfo,r=0;a&&r<e.length;r++)a=(t=qh(a,e[r]))&&t.children;return t&&t.data}addGroupInfo(e){for(var t,{path:a}=e,r=this._groupsInfo,n=0;n<a.length;n++){if(!(t=qh(r,a[n]))){t={key:a[n],offset:e.offset,data:{offset:e.offset,isExpanded:!0,path:a.slice(0,n+1)},children:[]};var s=jb(r,e.offset);r.splice(s,0,t),r.hash=r.hash||{},r.hash[JSON.stringify(t.key)]=t}n===a.length-1&&(t.data=e,t.offset!==e.offset&&this._updateGroupInfoOffsets(r)),r=t.children}}allowCollapseAll(){return!0}refresh(e){var{storeLoadOptions:t}=e,a=(0,lt.G5)(t.group||[]),r="_group"in this?(0,lt.G5)(this._group||[]):a,n=Math.min(r.length,a.length);this._group=t.group;for(var s=0;s<n;s++)if(r[s].selector!==a[s].selector){n=s;break}n?qb(this._groupsInfo,0,n):this.reset()}handleDataLoading(){}handleDataLoaded(e,t){t(e)}handleDataLoadedCore(e,t){t(e)}}function Ds(i,e,t,a){if(a=a||0,e>1&&t>0){var r=i-Math.floor(i/e)*e||e;return(r+=t-a-2)<0&&(r+=e),Math.floor(r/(e-a-1))}return 0}var da=function(i,e,t){return i.foreachGroups((a,r)=>{if(a.isExpanded)return e(a,r)},!0,!1,t,t)},Qh=function i(e,t,a,r,n,s,o){var l;if(r.items=r.items||[],r.paths=r.paths||[],r.count=r.count||0,r.lastCount=r.lastCount||0,a)for(var d=0;d<t.length;d++){var u=t[d];if(void 0!==u.items){if(n.push(u.key),s)l=!0;else{var h=e.findGroupInfo(n);l=h&&h.isExpanded}l?u.items?i(e,u.items,a-1,r,n,s,o):1===a&&u.count&&(!s||o)&&(r.items.push(u),r.paths.push(n.slice(0)),r.count+=r.lastCount,r.lastCount=u.count):(u.collapsedItems=u.items,u.items=null),n.pop()}}},Qb=function(i,e,t,a,r){var s,n=i.findGroupInfo(a);n?(t?n.count=e.count>0?e.count:e.items&&e.items.length||0:e.count=n.count||e.count,n.offset=r):(t&&(s=e.count>0?e.count:e.items.length),i.addGroupInfo({isExpanded:i._isGroupExpanded(a.length-1),path:a.slice(0),offset:r,count:s||0}))},Jh=function i(e,t,a,r,n,s,o){var v,d=(t.group?t.group.length:0)===r,h=0,p=0;if(n=n||0,s=s||[],t.remoteOperations.paging&&!o&&(h=0===n?t.skip||0:t.skips[n-1]||0),n>=r)return a.length;for(var g=0;g<a.length;g++){var m=a[g];if(m){if(s.push(m.key),!m.count&&!m.items||void 0===m.items||(Qb(e,m,d,s,h+g),(v=m.items?i(e,t,m.items,r,n+1,s,g):m.count||-1)<0))return-1;p+=v,s.pop()}}return p},As=function(i,e){return i&&i.length&&i[e]&&!!i[e].isExpanded},ec=function(i,e,t){for(var a,r=t,n=0;n<i.length;n++)a=i[n].offset+1,n>0&&(a+=i[n-1].childrenTotalCount,e&&(a+=Ds(r,e,a,n-1)*n)),r+=a;return r};function tc(i,e,t,a){var r=e.items[a],n=i.skips&&i.skips[t],s=i.takes&&i.takes[t],o=a===e.items.length-1,l=0===a,u=r.count>s+(l&&n||0);l&&void 0!==n&&(r.isContinuation=!0),o&&void 0!==s&&u&&(r.isContinuationOnNextPage=!0)}function ic(i){return!Array.isArray(i)}function ac(i){ic(i.data)||(i.data=new x.BH)}function rc(i,e,t,a,r,n){e.isCustomLoading||(Qh(i,n,t,a={},[]),function Jb(i,e,t){var a=t-1,r=i.group?i.group.length:0;e.skip=i.skips&&i.skips[a],i.takes&&void 0!==i.takes[a]&&(e.take=r===t&&e.count?e.count-(e.skip||0):0,e.take+=i.takes[a])}(e,a,t)),a.paths.length&&(e.group?e.group.length:0)-t>0?(ac(e),function eE(i,e,t,a,r,n){var s=e.group||[],o=s[r+1],l=[];(0,S.S6)(t.paths,d=>{var u,h={requireTotalCount:!1,requireGroupCount:!0,group:[o],groupSummary:e.storeLoadOptions.groupSummary,filter:Kt(t.paths[d],{filter:e.storeLoadOptions.filter,group:s}),select:e.storeLoadOptions.select,langParams:null===(u=e.storeLoadOptions)||void 0===u?void 0:u.langParams};0===d&&(h.skip=t.skip||0),d===t.paths.length-1&&(h.take=t.take);var p=0===h.take?[]:i._dataSource.loadFromStore(h);(0,x.gx)(p).done(v=>{var g=t.items[d];tc(e,t,r,d),g.items=v}),l.push(p)}),x.gx.apply(null,l).done(()=>{Jh(i,e,n,a+1),rc(i,e,a+1,t,r+1,n)})}(i,e,a,t,r,n)):a.paths.length&&e.storeLoadOptions.group?(ac(e),function tE(i,e,t,a){var r=[],n=e.group||[];(0,S.S6)(t.paths,(d,u)=>{r.push(Kt(u,{group:e.isCustomLoading?e.storeLoadOptions.group:n}))});var{filter:s}=e.storeLoadOptions;e.storeLoadOptions.isLoadingAll||(s=P.combineFilters([s,P.combineFilters(r,"or")]));var o=(0,f.l)({},e.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:n.concat(P.normalizeSortingInfo(e.storeLoadOptions.sort||[])),filter:s}),l=i._dataSource.isLastLevelGroupItemsPagingLocal();l||(o.skip=t.skip,o.take=t.take),(0,x.gx)(0===t.take?[]:i._dataSource.loadFromStore(o)).done(d=>{l&&(d=i._dataSource.sortLastLevelGroupItems(d,n,t.paths),d=t.skip?d.slice(t.skip):d,d=t.take?d.slice(0,t.take):d),(0,S.S6)(t.items,(u,h)=>{var v=d.splice(0,h.count-(0===u&&t.skip||0));tc(e,t,n.length-1,u),h.items=v}),e.data.resolve(a)}).fail(e.data.reject)}(i,e,a,n)):ic(e.data)&&e.data.resolve(n)}var Rs=function(i,e){var t=new x.BH,a=!(!e.group||!e.group.length),r=(0,f.l)({skip:0,take:1,requireGroupCount:a,requireTotalCount:!a},e,{group:a?e.group:null});return i.load(r).done((n,s)=>{var o=s&&(a?s.groupCount:s.totalCount);isFinite(o)?t.resolve(o):t.reject(xr.R0.Error(a?"E4022":"E4021"))}).fail(t.reject.bind(t)),t};class nc extends Xh{updateTotalItemsCount(e){var t=0,a=e.extra&&e.extra.totalCount||0,r=e.extra&&e.extra.groupCount||0,n=this._dataSource.pageSize(),s=this._isVirtualPaging();da(this,o=>{o.childrenTotalCount=0}),da(this,(o,l)=>{var d=ec(l,s?0:n,t),u=o.count+o.childrenTotalCount;s||(u+=Ds(d,n,u,l.length-1)),l[l.length-2]?l[l.length-2].childrenTotalCount+=u:t+=u}),super.updateTotalItemsCount(t-a+r)}_isGroupExpanded(e){var t=this._dataSource.group();return As(t,e)}_updatePagingOptions(e,t){var a=this._isVirtualPaging(),r=this._dataSource.pageSize(),n=[],s=[],o=0,l=0;e.take&&(da(this,d=>{d.childrenTotalCount=0,d.skipChildrenTotalCount=0}),da(this,(d,u)=>{var h,p=0,v=0,g=ec(u,a?0:r,l),m=0,w=0,I=d.count+d.childrenTotalCount,A=I;t&&t(d,g);var F=e.skip-g;g<=e.skip+e.take&&I&&(h=e.take,a||(I+=(m=Ds(g,r,I,u.length-1))*u.length,A+=m,r&&F>=0&&(p=u.length,v=u.length-1,w=Math.floor(F/r))),F>=0?(g+I>e.skip&&n.unshift(F-w*p-d.skipChildrenTotalCount),g+I>=e.skip+h&&s.unshift(h-p-d.childrenTotalCount+d.skipChildrenTotalCount)):g+I>=e.skip+h&&s.unshift(h+F-d.childrenTotalCount)),g<=e.skip&&(u[u.length-2]?u[u.length-2].skipChildrenTotalCount+=Math.min(A,F+1-w*v):o+=Math.min(A,F+1)),g<=e.skip+h&&(I=Math.min(A,F+h-(w+1)*v),u[u.length-2]?u[u.length-2].childrenTotalCount+=I:l+=I)}),e.skip-=o,e.take-=l-o),e.skips=n,e.takes=s}changeRowExpand(e){var t=this.findGroupInfo(e),a=this._dataSource,r=a.remoteOperations().groupPaging,n=P.normalizeSortingInfo(a.group());return t?(t.isExpanded=!t.isExpanded,r&&t.isExpanded&&e.length<n.length?Rs(a,{filter:Kt(e,{filter:a.lastLoadOptions().filter,group:a.group()}),group:[n[e.length]],select:a.select()}).done(s=>{t.count=s}):(new x.BH).resolve()):(new x.BH).reject()}handleDataLoading(e){var{storeLoadOptions:t}=e,a=P.normalizeSortingInfo(t.group||e.loadOptions.group);if(!e.isCustomLoading&&a.length){if(e.remoteOperations.grouping){var r=this._dataSource.remoteOperations().paging;t.group=P.normalizeSortingInfo(t.group),t.group.forEach((n,s)=>{n.isExpanded=!(r&&s===t.group.length-1)})}e.group=e.group||a,e.remoteOperations.paging?(e.skip=t.skip,e.take=t.take,t.requireGroupCount=!0,t.group=a.slice(0,1),this._updatePagingOptions(e),t.skip=e.skip,t.take=e.take):(e.skip=e.loadOptions.skip,e.take=e.loadOptions.take,this._updatePagingOptions(e))}}handleDataLoadedCore(e,t){var n,a=P.normalizeSortingInfo(e.storeLoadOptions.group||e.loadOptions.group).length,r=e.group?e.group.length:0,s={};if(e.isCustomLoading)t(e),Qh(this,e.data,a,s,[],e.isCustomLoading,e.storeLoadOptions.isLoadingAll);else{if(e.remoteOperations.paging||this.foreachGroups(o=>{o.count=0}),(n=Jh(this,e,e.data,a))<0)return void(e.data=(new x.BH).reject(Q.Z.Error("E1037")));if(e.remoteOperations.paging||a&&e.extra&&e.loadOptions.requireTotalCount&&(e.extra.totalCount=n,e.extra.groupCount=e.data.length),r&&e.storeLoadOptions.requireGroupCount&&!isFinite(e.extra.groupCount))return void(e.data=(new x.BH).reject(xr.R0.Error("E4022")));this.updateTotalItemsCount(e),e.remoteOperations.paging||(this._updatePagingOptions(e),e.lastLoadOptions.skips=e.skips,e.lastLoadOptions.takes=e.takes),t(e),e.remoteOperations.paging||this._processPaging(e,a)}rc(this,e,a,s,0,e.data)}_processSkips(e,t,a){if(a){var r=e[0],n=t[0],s=r&&r.items;void 0!==n&&(r.isContinuation=!0,s&&(r.items=s.slice(n),this._processSkips(r.items,t.slice(1),a-1)))}}_processTakes(e,t,a,r,n){if(r&&e){n=n||[];var s=e[e.length-1],o=s&&s.items,l=a[0];s&&(void 0!==l&&(s.count-(s.isContinuation&&t[0]||0)||o.length)>l&&(s.isContinuationOnNextPage=!0,n.forEach(h=>{h.isContinuationOnNextPage=!0}),o&&(o=o.slice(0,l),s.items=o)),n.push(s),this._processTakes(o,t.slice(1),a.slice(1),r-1,n))}}_processPaging(e,t){this._processSkips(e.data,e.skips,t),this._processTakes(e.data,e.skips,e.takes,t)}isLastLevelGroupItemsPagingLocal(){return!1}sortLastLevelGroupItems(e){return e}refresh(e,t){var l,d,a=this,r=a._dataSource,{storeLoadOptions:n}=e,s=e.group||e.storeLoadOptions.group,o=P.normalizeSortingInfo(a._group);function u(h,p){p.length===d+1&&(h.isExpanded=l)}for(d=0;d<o.length;d++)l=As(s,d),As(a._group,d)!==l&&a.foreachGroups(u);if(super.refresh.apply(this,arguments),s&&e.remoteOperations.paging&&t.reload)return da(a,h=>{var p=Rs(r,{filter:Kt(h.path,{filter:n.filter,group:s}),group:s.slice(h.path.length),select:n.select}),v=Rs(r,{filter:jh(h.path,{filter:n.filter,group:s},!0),group:s.slice(h.path.length-1,h.path.length),select:n.select});return(0,x.gx)(v,p).done((g,m)=>{g=parseInt(g.length?g[0]:g),m=parseInt(m.length?m[0]:m),h.offset=g,h.count!==m&&(h.count=m,a.updateTotalItemsCount(e))})},!0)}}var Gt=T(2510),ua=T(2030),Os=function(i,e){var t=new x.BH,a=(0,f.l)({skip:0,take:1,requireTotalCount:!0},e);return i.load(a).done((r,n)=>{t.resolve(n&&n.totalCount)}).fail(t.reject.bind(t)),t},Sr=function(i,e,t){return i.foreachGroups(a=>{if(!a.isExpanded)return e(a)},!1,!1,t,!0)},sc=function(i,e){var t=0,a=e||0;return e&&(Sr(i,r=>{if(r.offset-t>=e)return!1;t+=r.count-1}),a+=t),a},iE=function i(e,t,a,r,n,s){for(var o=0,l=!1,d=0;d<t.length;d++){var u=t[d];if(void 0!==u.items){a.push(u.key);var h=e.findGroupInfo(a);if(h&&!h.isExpanded)u.collapsedItems=u.items,u.items=null,r+=h.count,--s<0&&o++,n&&(l=!0);else if(u.items){var p=i(e,u.items,a,r,n,s);n&&(p.offset-r>1?u.isContinuation=!0:l=!0),r=p.offset,(s=p.take)<0&&(u.items.length?u.isContinuationOnNextPage=!0:o++)}a.pop()}else n&&(l=!0),r++,--s<0&&o++;n=!1}return l&&t.splice(0,1),o&&t.splice(-o,o),{offset:r,take:s}},aE=function(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!(0,lt.OI)(null,i[t],e[t]))return!1;return!0},oc=function i(e,t,a,r,n){if(t){for(var s=0;s<t.length;s++){var o=t[s];if("key"in o&&void 0!==o.items){a.push(o.key),n&&aE(n.path,a)&&!o.isContinuation&&(n.offset=r);var l=e.findGroupInfo(a);l&&!o.isContinuation&&(l.offset=r),l&&!l.isExpanded?r+=l.count:r=i(e,o.items,a,r,n),a.pop()}else r++}return r}},sE=function i(e,t){var a=e.count||e.items.length;if(!e.count&&t>1){a=0;for(var r=0;r<e.items.length;r++)a+=i(e.items[r],t-1)}return a};class lc extends Xh{handleDataLoading(e){var s,{storeLoadOptions:t}=e,a=[],r=0,n=!1,{group:o}=e.loadOptions,l=0;if(function(i,e){if(e.group){var t=P.normalizeSortingInfo(e.group),a=P.normalizeSortingInfo(i.sort);i.sort=ua.Z.arrangeSortingInfo(t,a),delete e.group}}(t,e.loadOptions),e.group=e.group||o,!e.isCustomLoading){var d=(0,f.l)({},t);d.skip=sc(this,t.skip),d.skip&&d.take&&o&&(d.skip--,d.take++,n=!0),d.take&&o&&(s=d.take,d.take++),Sr(this,u=>{if(u.offset>=d.skip+d.take+l)return!1;u.offset>=d.skip+l&&u.count&&(l+=u.count-1,a.push(u),r+=u.count)}),(0,S.S6)(a,function(){d.filter=function(i,e,t){for(var a=P.normalizeSortingInfo(t||e.group),r=[],n=0;n<i.length;n++){for(var s=[],o=0;o<=n;o++)s.push([a[o].selector,n===o?"<>":"=",i[o]]);r.push(P.combineFilters(s))}return r=P.combineFilters(r,"or"),P.combineFilters([r,e.filter])}(this.path,d,o)}),e.storeLoadOptions=d,e.collapsedGroups=a,e.collapsedItemsCount=r,e.skip=d.skip||0,e.skipFirstItem=n,e.take=s}}handleDataLoaded(e,t){var{collapsedGroups:a}=e,r=P.normalizeSortingInfo(e.group),n=r.length;function s(u,h,p,v,g){if(u&&h.length&&p.length){var m,w,I=(0,q.Ex)(h[0],!0);for(w=0;w<u.length&&(m=(0,q.Ex)(u[w].key,!0),!(g>=v.offset||I===m));w++)g+=sE(u[w],p.length);(!u.length||I!==m)&&u.splice(w,0,{key:h[0],items:[],count:1===h.length?v.count:void 0}),s(u[w].items,h.slice(1),p.slice(1),v,g)}}if(e.collapsedItemsCount&&e.extra&&e.extra.totalCount>=0&&(e.extra._totalCountWasIncreasedByCollapsedItems||(e.extra.totalCount+=e.collapsedItemsCount,e.extra._totalCountWasIncreasedByCollapsedItems=!0)),t(e),n){var{data:o}=e,l=(0,Gt.Z)(o);if(ua.Z.multiLevelGroup(l,r).enumerate().done(u=>{o=u}),a)for(var d=0;d<a.length;d++)s(o,a[d].path,r,a[d],e.skip);e.isCustomLoading||iE(this,o,[],e.skip,e.skipFirstItem,e.take),e.data=o}}isGroupItemCountable(e){return null===e.items}updateTotalItemsCount(){var e=0;Sr(this,t=>{t.count&&(e-=t.count-1)}),super.updateTotalItemsCount(e)}changeRowExpand(e){var l,t=this,a=t._dataSource,r=a.beginPageIndex?a.beginPageIndex():a.pageIndex(),n=a.items(),s=sc(t,r*a.pageSize()),o=t.findGroupInfo(e);return l=o&&!o.isExpanded?(new x.BH).resolve(o.count):Os(a,{filter:Kt(e,{filter:a.filter(),group:a.group()})}),(0,x.gx)(l).done(d=>{d=parseInt(d.length?d[0]:d),o?(oc(t,n,[],s),o.isExpanded=!o.isExpanded,o.count=d):(oc(t,n,[],s,o={offset:-1,count:d,path:e,isExpanded:!1}),o.offset>=0&&t.addGroupInfo(o)),t.updateTotalItemsCount()}).fail(function(){a._eventsStrategy.fireEvent("loadError",arguments)})}allowCollapseAll(){return!1}refresh(e,t){var a=this,{storeLoadOptions:r}=e,n=a._dataSource;if(super.refresh.apply(this,arguments),t.reload)return Sr(a,s=>{var o=Os(n,{filter:Kt(s.path,r)}),l=Os(n,{filter:jh(s.path,r)});return(0,x.gx)(l,o).done((d,u)=>{d=parseInt(d.length?d[0]:d),u=parseInt(u.length?u[0]:u),s.offset=d,s.count!==u&&(s.count=u,a.updateTotalItemsCount())})},!0)}}var Vs="dx-datagrid-group-panel",yr="dx-group-panel-item",dc="dx-toolbar-label";ar.extend(i=>class extends i{init(){super.init.apply(this,arguments),this._initGroupingHelper()}_initGroupingHelper(e){var t=this._grouping,a=this.option("grouping.autoExpandAll"),r=this.option("focusedRowEnabled"),n=e?e.remoteOperations:this.remoteOperations();!(n.filtering&&n.sorting&&n.paging)||n.grouping||!a&&r?(!t||t instanceof lc)&&(this._grouping=new nc(this)):(!t||t instanceof nc)&&(this._grouping=new lc(this))}totalItemsCount(){var e=super.totalItemsCount();return e>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?e+this._grouping.totalCountCorrection():e}itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:super.itemsCount.apply(this,arguments)}allowCollapseAll(){return this._grouping.allowCollapseAll()}isGroupItemCountable(e){return this._grouping.isGroupItemCountable(e)}isRowExpanded(e){var t=this._grouping.findGroupInfo(e);return t?t.isExpanded:!this._grouping.allowCollapseAll()}collapseAll(e){return this._collapseExpandAll(e,!1)}expandAll(e){return this._collapseExpandAll(e,!0)}_collapseExpandAll(e,t){var a=this._dataSource,r=a.group(),n=P.normalizeSortingInfo(r||[]);if(n.length){for(var s=0;s<n.length;s++)void 0===e||e===s?n[s].isExpanded=t:r&&r[s]&&(n[s].isExpanded=r[s].isExpanded);a.group(n),this._grouping.foreachGroups((o,l)=>{(void 0===e||e===l.length-1)&&(o.isExpanded=t)},!1,!0),this.resetPagesCache()}return!0}refresh(){return super.refresh.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)}changeRowExpand(e){var t=this._dataSource;if(t.group())return t.beginLoading(),this._lastLoadOptions&&(this._lastLoadOptions.groupExpand=!0),this._changeRowExpandCore(e).always(()=>{t.endLoading()})}_changeRowExpandCore(e){return this._grouping.changeRowExpand(e)}_hasGroupLevelsExpandState(e,t){if(e&&Array.isArray(e))for(var a=0;a<e.length;a++)if(e[a].isExpanded===t)return!0}_customizeRemoteOperations(e,t){var{remoteOperations:a}=e;e.storeLoadOptions.group?(a.grouping&&!e.isCustomLoading&&(!a.groupPaging||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!0))&&(a.paging=!1),!a.grouping&&(!a.sorting||!a.filtering||e.isCustomLoading||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!1))&&(a.paging=!1)):!e.isCustomLoading&&a.paging&&t.grouping&&this.resetCache(),super._customizeRemoteOperations.apply(this,arguments)}_handleDataLoading(e){return super._handleDataLoading(e),this._initGroupingHelper(e),this._grouping.handleDataLoading(e)}_handleDataLoaded(e){return this._grouping.handleDataLoaded(e,super._handleDataLoaded.bind(this))}_handleDataLoadedCore(e){return this._grouping.handleDataLoadedCore(e,super._handleDataLoadedCore.bind(this))}});var Ls=function(i,e){var t=this._columnsController;switch(e.itemData.value){case"group":var a=t._dataSource.group()||[];t.columnOption(i.dataField,"groupIndex",a.length);break;case"ungroup":t.columnOption(i.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},uc=i=>{var e=i?.visible;return"auto"===e?"desktop"===N.Z.current().deviceType:!!e},hc=(i,e)=>uc(i)&&!(!i?.allowColumnDragging||!e.allowGrouping);P.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:y.Z.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:y.Z.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:y.Z.format("dxDataGrid-groupHeaderText"),ungroup:y.Z.format("dxDataGrid-ungroupHeaderText"),ungroupAll:y.Z.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:y.Z.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:i=>class extends i{init(){super.init(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")}_beforeProcessItems(e){var t=this._columnsController.getGroupColumns();return(e=super._beforeProcessItems(e)).length&&t.length&&(e=this._processGroupItems(e,t.length)),e}_processItem(e,t){return(0,_.$K)(e.groupIndex)&&(0,_.HD)(e.rowType)&&0===e.rowType.indexOf("group")?(e=this._processGroupItem(e,t),t.dataIndex=0):e=super._processItem.apply(this,arguments),e}_processGroupItem(e,t){return e}_processGroupItems(e,t,a){var r=this._columnsController.getGroupColumns(),n=r[r.length-t];if(!a){var s=this.option("scrolling.mode");a={collectContinuationItems:"virtual"!==s&&"infinite"!==s,resultItems:[],path:[],values:[]}}var{resultItems:o}=a;if(a.data&&(a.collectContinuationItems||!a.data.isContinuation)&&o.push({rowType:"group",data:a.data,groupIndex:a.path.length-1,isExpanded:!!a.data.items,key:a.path.slice(0),values:a.values.slice(0)}),e)if(0===t)o.push.apply(o,e);else for(var l=0;l<e.length;l++){var d=e[l];d&&"items"in d?(a.data=d,a.path.push(d.key),a.values.push(n&&n.deserializeValue&&!n.calculateDisplayValue?n.deserializeValue(d.key):d.key),this._processGroupItems(d.items,t-1,a),a.data=void 0,a.path.pop(),a.values.pop()):o.push(d)}return o}publicMethods(){return super.publicMethods().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])}collapseAll(e){var t=this._dataSource;t&&t.collapseAll(e)&&(t.pageIndex(0),t.reload())}expandAll(e){var t=this._dataSource;t&&t.expandAll(e)&&(t.pageIndex(0),t.reload())}changeRowExpand(e){var t=this,a=t.isRowExpanded(e),r={key:e,expanded:a};return t.executeAction(a?"onRowCollapsing":"onRowExpanding",r),r.cancel?(new x.BH).resolve():(0,x.gx)(t._changeRowExpandCore(e)).done(()=>{r.expanded=!a,t.executeAction(a?"onRowCollapsed":"onRowExpanded",r)})}_changeRowExpandCore(e){var t=this,a=this._dataSource,r=new x.BH;return a?(0,x.gx)(a.changeRowExpand(e)).done(()=>{t.load().done(r.resolve).fail(r.reject)}).fail(r.reject):r.resolve(),r}isRowExpanded(e){var t=this._dataSource;return t&&t.isRowExpanded(e)}expandRow(e){return this.isRowExpanded(e)?(new x.BH).resolve():this.changeRowExpand(e)}collapseRow(e){return this.isRowExpanded(e)?this.changeRowExpand(e):(new x.BH).resolve()}optionChanged(e){"grouping"===e.name&&(e.name="dataSource"),super.optionChanged(e)}},columns:i=>class extends i{_getExpandColumnOptions(){var e=super._getExpandColumnOptions.apply(this,arguments);return e.cellTemplate=P.getExpandCellTemplate(),e}},editing:i=>class extends i{_isProcessedItem(e){return(0,_.$K)(e.groupIndex)&&(0,_.HD)(e.rowType)&&0===e.rowType.indexOf("group")}}},views:{headerPanel:i=>class extends i{_getToolbarItems(){var e=super._getToolbarItems();return this._appendGroupingItem(e)}_appendGroupingItem(e){if(this._isGroupPanelVisible()){var t=!1;e.push({template:()=>{var r=(0,c.Z)("<div>").addClass(Vs);return this._updateGroupPanelContent(r),Mi("groupPanel",this,r,void 0,this._handleActionKeyDown.bind(this)),r},name:"groupPanel",onItemRendered:()=>{t&&this.renderCompleted.fire(),t=!0},location:"before",locateInMenu:"never",sortIndex:1}),this.updateToolbarDimensions()}return e}_handleActionKeyDown(e){var{event:t}=e,a=(0,c.Z)(t.target),r=a.closest(".".concat(yr)).index(),n=this._columnsController.getGroupColumns()[r],s=n&&n.index;a.is(".dx-header-filter")?this._headerFilterController.showHeaderFilterMenu(s,!0):this._processGroupItemAction(s),t.preventDefault()}_isGroupPanelVisible(){return uc(this.option("groupPanel"))}_renderGroupPanelItems(e,t){var a=this;e.empty(),(0,S.S6)(t,(r,n)=>{a._createGroupPanelItem(e,n)}),bn(this)}_createGroupPanelItem(e,t){var a=(0,c.Z)("<div>").addClass(t.cssClass).addClass(yr).data("columnData",t).appendTo(e).text(t.caption);return function Cf(i,e){i.option("useLegacyKeyboardnavigation")||e.attr("tabindex",i.option("tabindex")||0)}(this,a),a}_columnOptionChanged(e){if(!this._requireReady&&!P.checkChanges(e.optionNames,["width","visibleWidth"])){var t=this.element(),a=t&&t.find(".".concat(Vs));a&&a.length&&(this._updateGroupPanelContent(a),this.updateToolbarDimensions(),this.renderCompleted.fire())}super._columnOptionChanged()}_updateGroupPanelContent(e){var t=this.getColumns(),a=this.option("groupPanel");this._renderGroupPanelItems(e,t),a.allowColumnDragging&&!t.length&&((0,c.Z)("<div>").addClass("dx-group-panel-message").text(a.emptyPanelText).appendTo(e),e.closest(".".concat("dx-toolbar-item")).addClass(dc),e.closest(".".concat(dc)).css("maxWidth","none"))}allowDragging(e){var t=this.option("groupPanel");return hc(t,e)}getColumnElements(){var e=this.element();return e&&e.find(".".concat(yr))}getColumns(){return this._columnsController.getGroupColumns()}getBoundingRect(){var e=this.element();if(e&&e.find(".".concat(Vs)).length){var t=e.offset();return{top:t.top,bottom:t.top+(0,b.Cr)(e)}}return null}getName(){return"group"}getContextMenuItems(e){var r,t=this.option("grouping.contextMenuEnabled"),a=(0,c.Z)(e.targetElement).closest(".".concat(yr));if(a.length&&(e.column=a.data("columnData")),t&&e.column){var{column:n}=e;if(!(0,_.$K)(n.allowGrouping)||n.allowGrouping){var o=(0,_.$K)(n.groupIndex)&&n.groupIndex>-1,l=this.option("grouping.texts"),d=Ls.bind(this,n);r=[{text:l.ungroup,value:"ungroup",disabled:!o,onItemClick:d},{text:l.ungroupAll,value:"ungroupAll",onItemClick:d}]}}return r}isVisible(){return super.isVisible()||this._isGroupPanelVisible()}hasGroupedColumns(){return this._isGroupPanelVisible()&&!!this.getColumns().length}optionChanged(e){"groupPanel"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}},rowsView:i=>class extends i{getContextMenuItems(e){var a;if(this.option("grouping.contextMenuEnabled")&&e.row&&"group"===e.row.rowType){var n=this._columnsController.columnOption("groupIndex:".concat(e.row.groupIndex));if(n&&n.allowGrouping){var s=this.option("grouping.texts"),o=Ls.bind(this,n);(a=[]).push({text:s.ungroup,value:"ungroup",onItemClick:o},{text:s.ungroupAll,value:"ungroupAll",onItemClick:o})}}return a}_rowClick(e){var t=this.option("grouping.expandMode"),r="infinite"!==this.option("scrolling.mode")&&"rowClick"===t&&(0,c.Z)(e.event.target).closest(".".concat("dx-group-row")).length,n=(0,c.Z)(e.event.target).closest(".".concat("dx-datagrid-expand")).length;(r||n)&&this._changeGroupRowState(e),super._rowClick(e)}_changeGroupRowState(e){var t=this._dataController.items()[e.rowIndex],a=this._columnsController.columnOption("groupIndex:".concat(t.groupIndex),"allowCollapsing");("data"===t.rowType||"group"===t.rowType&&!1!==a)&&(this._dataController.changeRowExpand(t.key,!0),e.event.preventDefault(),e.handled=!0)}},columnHeadersView:i=>class extends i{getContextMenuItems(e){var t=this.option("grouping.contextMenuEnabled"),a=super.getContextMenuItems(e);if(t&&e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){var{column:r}=e;if(!r.command&&(!(0,_.$K)(r.allowGrouping)||r.allowGrouping)){var n=this.option("grouping.texts"),s=(0,_.$K)(r.groupIndex)&&r.groupIndex>-1,o=Ls.bind(this,r);(a=a||[]).push({text:n.groupByThisColumn,value:"group",beginGroup:!0,disabled:s,onItemClick:o}),r.showWhenGrouped&&a.push({text:n.ungroup,value:"ungroup",disabled:!s,onItemClick:o}),a.push({text:n.ungroupAll,value:"ungroupAll",onItemClick:o})}}return a}allowDragging(e){var t=this.option("groupPanel");return hc(t,e)||super.allowDragging(e)}}}}});var cc="dx-master-detail-row",Ps=function(i){i._expandedItems=[],i._isExpandAll=i.option("masterDetail.autoExpandAll")},bE={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:i=>class extends i{_getExpandColumnsCore(){var e=super._getExpandColumnsCore();return this.option("masterDetail.enabled")&&e.push({type:"detailExpand",cellTemplate:O.getExpandCellTemplate()}),e}},data:i=>class extends i{init(){Ps(this),super.init()}expandAll(e){e<0?(this._isExpandAll=!0,this._expandedItems=[],this.updateItems()):super.expandAll.apply(this,arguments)}collapseAll(e){e<0?(this._isExpandAll=!1,this._expandedItems=[],this.updateItems()):super.collapseAll.apply(this,arguments)}isRowExpandedHack(){return super.isRowExpanded.apply(this,arguments)}isRowExpanded(e){var t=O.getIndexByKey(e,this._expandedItems);return Array.isArray(e)?super.isRowExpanded.apply(this,arguments):!!(this._isExpandAll^(t>=0&&this._expandedItems[t].visible))}_getRowIndicesForExpand(e){var t=this.getRowIndexByKey(e);return[t,t+1]}_changeRowExpandCore(e){var t;if(Array.isArray(e))t=super._changeRowExpandCore.apply(this,arguments);else{var a=O.getIndexByKey(e,this._expandedItems);if(a>=0){var{visible:r}=this._expandedItems[a];this._expandedItems[a].visible=!r}else this._expandedItems.push({key:e,visible:!0});this.updateItems({changeType:"update",rowIndices:this._getRowIndicesForExpand(e)}),t=(new x.BH).resolve()}return t}_processDataItemHack(){return super._processDataItem.apply(this,arguments)}_processDataItem(e,t){var a=super._processDataItem.apply(this,arguments);return a.isExpanded=this.isRowExpanded(a.key),void 0===t.detailColumnIndex&&(t.detailColumnIndex=-1,(0,S.S6)(t.visibleColumns,(r,n)=>{if("expand"===n.command&&!(0,_.$K)(n.groupIndex))return t.detailColumnIndex=r,!1})),t.detailColumnIndex>=0&&(a.values[t.detailColumnIndex]=a.isExpanded),a}_processItemsHack(){return super._processItems.apply(this,arguments)}_processItems(e,t){var a=this,{changeType:r}=t,n=[];return e=super._processItems.apply(a,arguments),"loadingAll"===r?e:("refresh"===r&&(a._expandedItems=(0,E.h3)(a._expandedItems,s=>s.visible)),(0,S.S6)(e,(s,o)=>{n.push(o);var l=O.getIndexByKey(o.key,a._expandedItems);"data"===o.rowType&&(o.isExpanded||l>=0)&&!o.isNewRow&&n.push({visible:o.isExpanded,rowType:"detail",key:o.key,data:o.data,values:[]})}),n)}optionChanged(e){var t,a;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":var r=e.value||{},n=e.previousValue||{};t=r.enabled!==n.enabled,a=r.autoExpandAll!==n.autoExpandAll;break;case"masterDetail.template":Ps(this);break;case"masterDetail.enabled":t=!0;break;case"masterDetail.autoExpandAll":a=!0}(t||a)&&Ps(this)}super.optionChanged(e)}},resizing:i=>class extends i{fireContentReadyAction(){super.fireContentReadyAction.apply(this,arguments),this._updateParentDataGrids(this.component.$element())}_updateParentDataGrids(e){var t=e.closest(".".concat(cc));t.length&&(0,x.gx)(this._updateMasterDataGrid(t,e)).done(()=>{this._updateParentDataGrids(t.parent())})}_updateMasterDataGrid(e,t){var a=(0,c.Z)(e).data("options"),r=(0,c.Z)(e).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");if(a&&r)return this._updateMasterDataGridCore(r,a)}_updateMasterDataGridCore(e,t){var a=(0,x.BH)();if(e.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(e,t.rowIndex,(0,c.Z)(t.rowElement)).done(a.resolve);else{if(!0===e.option("scrolling.useNative"))return void e.updateDimensions().done(()=>a.resolve(!0));var r=e.getScrollable();r?r?.update().done(()=>a.resolve()):a.resolve()}return a.promise()}_updateFixedMasterDetailGrids(e,t,a){var r=(0,x.BH)(),n=(0,c.Z)(e.getRowElement(t)),s=(0,c.Z)(e.getView("rowsView").getTableElements()),o=2===n?.length&&(0,b.Cr)(n.eq(0))!==(0,b.Cr)(n.eq(1)),l=2===s?.length&&(0,b.Cr)(s.eq(0))!==(0,b.Cr)(s.eq(1));if(o||l){var d=(0,b.dz)(a);return e.updateDimensions().done(()=>{var u=this.option("columnAutoWidth")&&!0===e.option("scrolling.useNative"),h=u&&d!==(0,b.dz)(a);u&&h?this.updateDimensions().done(()=>r.resolve(!0)):r.resolve(!0)}),r.promise()}return(0,x.BH)().resolve()}_toggleBestFitMode(e){if(super._toggleBestFitMode.apply(this,arguments),this.option("masterDetail.template")){var t=this._rowsView.getTableElement();t&&t.find(".dx-master-detail-cell").css("maxWidth",e?0:"")}}}},views:{rowsView:i=>class extends i{_getCellTemplate(e){var{column:t}=e,a=this._editingController,r=a&&a.isEditRow(e.rowIndex);return"detail"!==t.command||r?super._getCellTemplate.apply(this,arguments):this.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:this._getDefaultTemplate(t)}}_isDetailRow(e){return e&&e.rowType&&0===e.rowType.indexOf("detail")}_createRow(e){var t=super._createRow.apply(this,arguments);return e&&this._isDetailRow(e)&&(this.option("showRowLines")&&t.addClass("dx-row-lines"),t.addClass(cc),(0,_.$K)(e.visible)&&t.toggle(e.visible)),t}_renderCells(e,t){var{row:a}=t,n=this._columnsController.getVisibleColumns();a.rowType&&this._isDetailRow(a)?this._needRenderCell(0,t.columnIndices)&&this._renderCell(e,{value:null,row:a,rowIndex:a.rowIndex,column:{command:"detail"},columnIndex:0,change:t.change}).addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",n.length):super._renderCells.apply(this,arguments)}}}}};P.registerModule("masterDetail",bE);var fi=T(1924),pc=T(6369),EE=T(7242);const TE=T(2290).Z;var _c=T(679),DE=T(6463),vc="dxNumberBox",gc=(0,D.V4)(ae.Z.up,vc),mc=(0,D.V4)(ae.Z.cancel,vc),VE=Ge.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup(){this.callBase();var i="".concat("dx-numberbox-spin","-").concat(this.option("direction"));this.$element().addClass("dx-numberbox-spin-button").addClass(i),this._spinIcon=(0,c.Z)("<div>").addClass("".concat(i,"-icon")).appendTo(this.$element())},_render(){this.callBase();var i=(0,D.V4)(ae.Z.down,this.NAME),e=this.$element();C.Z.off(e,i),C.Z.on(e,i,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler(i){i.preventDefault(),this._clearTimer(),C.Z.on(this.$element(),oa.Z.name,()=>{this._feedBackDeferred=(0,x.BH)(),(0,DE.dR)(this._feedBackDeferred),this._spinChangeHandler({event:i}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:i})});var e=Z.Z.getDocument();C.Z.on(e,gc,this._clearTimer.bind(this)),C.Z.on(e,mc,this._clearTimer.bind(this)),this._spinChangeHandler({event:i})},_dispose(){this._clearTimer(),this.callBase()},_clearTimer(){C.Z.off(this.$element(),oa.Z.name);var i=Z.Z.getDocument();C.Z.off(i,gc),C.Z.off(i,mc),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged(i){switch(i.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(i)}}});const Ci=VE;class FE extends _c.Z{_attachEvents(e,t){var{editor:a}=this,r=(0,D.V4)(ae.Z.down,a.NAME),n=t.children(),s=a._createAction(o=>a._spinButtonsPointerDownHandler(o));C.Z.off(t,r),C.Z.on(t,r,o=>s({event:o})),Ci.getInstance(n.eq(0)).option("onChange",o=>a._spinUpChangeHandler(o)),Ci.getInstance(n.eq(1)).option("onChange",o=>a._spinDownChangeHandler(o))}_create(){var{editor:e}=this,t=(0,c.Z)("<div>").addClass("dx-numberbox-spin-container"),a=(0,c.Z)("<div>").appendTo(t),r=(0,c.Z)("<div>").appendTo(t),n=this._getOptions();return this._addToContainer(t),e._createComponent(a,Ci,(0,f.l)({direction:"up"},n)),e._createComponent(r,Ci,(0,f.l)({direction:"down"},n)),this._legacyRender(e.$element(),this._isTouchFriendly(),n.visible),{instance:t,$element:t}}_getOptions(){var{editor:e}=this;return{visible:this._isVisible(),disabled:e.option("disabled")}}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){var{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,t,a){e.toggleClass("dx-numberbox-spin-touch-friendly",t),e.toggleClass("dx-numberbox-spin",a)}update(){if(super.update()){var{editor:t,instance:a}=this,r=t.$element(),n=this._isVisible(),s=this._isTouchFriendly(),o=a.children(),l=Ci.getInstance(o.eq(0)),d=Ci.getInstance(o.eq(1)),u=this._getOptions();l.option(u),d.option(u),this._legacyRender(r,s,n)}}}var ME=Math,NE=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],ZE=TE.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{upArrow(i){(0,D.j1)(i)||(i.preventDefault(),i.stopPropagation(),this._spinUpChangeHandler(i))},downArrow(i){(0,D.j1)(i)||(i.preventDefault(),i.stopPropagation(),this._spinDownChangeHandler(i))},enter(){}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:y.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:()=>!1,_getDefaultButtons(){return this.callBase().concat([{name:"spins",Ctor:FE}])},_isSupportInputMode(){var i=parseFloat(oe.Z.version);return oe.Z.chrome&&i>=66||oe.Z.safari&&i>=12},_defaultOptionsRules(){return this.callBase().concat([{device:()=>N.Z.real().generic&&!N.Z.isSimulator(),options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==N.Z.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes(){var i=this.callBase();return i.inputmode="decimal",i},_renderContentImpl(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement(){this._$submitElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(i){this._getSubmitElement().val((0,E.FH)(i))},_getSubmitElement(){return this._$submitElement},_keyPressHandler(i){this.callBase(i);var e=(0,D.qK)(i);if(!/[\d.,eE\-+]/.test(e)){var a=(0,D.EV)(i);return(0,D.j1)(i)||a&&NE.includes(a)?void 0:(i.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel(i){this._spinValueChange(i.delta>0?1:-1,i)},_renderValue(){var i=this._input().val(),e=this.option("value");(!i.length||Number(i)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());var t=(0,_.$K)(e)?null:y.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,E.IS)(e,""),valuetext:t}),this.option("text",this._input().val()),this._updateButtons(),(0,x.BH)().resolve()},_forceValueRender(){var i=this.option("value"),e=Number(i),t=isNaN(e)?"":this._applyDisplayValueFormatter(i);this._renderDisplayText(t)},_applyDisplayValueFormatter(i){return this.option("displayValueFormatter")(i)},_renderProps(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,E.IS)(this.option("min"),""),valuemax:(0,E.IS)(this.option("max"),"")})},_spinButtonsPointerDownHandler(){var i=this._input();!this.option("useLargeSpinButtons")&&Z.Z.getActiveElement()!==i[0]&&C.Z.trigger(i,"focus")},_spinUpChangeHandler(i){this.option("readOnly")||this._spinValueChange(1,i.event||i)},_spinDownChangeHandler(i){this.option("readOnly")||this._spinValueChange(-1,i.event||i)},_spinValueChange(i,e){var t=parseFloat(this.option("step"));if(0!==t){var a=parseFloat(this._normalizeInputValue())||0;a=this._correctRounding(a,t*i);var r=this.option("min"),n=this.option("max");(0,_.$K)(r)&&(a=Math.max(r,a)),(0,_.$K)(n)&&(a=Math.min(n,a)),this._saveValueChangeEvent(e),this.option("value",a)}},_correctRounding(i,e){var t=/[,.](.*)/,a=t.test(i),r=t.test(e);if(a||r){var n=a?t.exec(i)[0].length:0,s=r?t.exec(e)[0].length:0,o=ME.max(n,s);return this._round(i+e,o)}return i+e},_round(i,e){var t=10**(e=e||0);return i*=t,Math.round(i)/t},_renderValueChangeEvent(){this.callBase();var i=(0,D.V4)("focusout","NumberBoxForceValueChange");C.Z.off(this.element(),i),C.Z.on(this.element(),i,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue(){if("number"!==this.option("mode")){var i=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));i.val(null),i.val(e)}},_valueChangeEventHandler(i){var e=this._input(),t=this._normalizeText(),a=this._parseValue(t),r="."!==t&&"-"!==t;!this._isValueValid()||this._validateValue(a)?(r&&this.callBase(i,isNaN(a)?null:a),this._applyValueBoundaries(t,a),this.validationRequest.fire({value:a,editor:this})):e.val(this._applyDisplayValueFormatter(a))},_applyValueBoundaries(i,e){var t=this._isValueIncomplete(i),a=this._isValueInRange(i);!t&&!a&&null!==e&&Number(i)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:i=>i.replace(",","."),_inputIsInvalid(){var i="number"===this.option("mode"),e=this._input().get(0).validity;return i&&e&&e.badInput},_renderDisplayText(i){this._inputIsInvalid()||this.callBase(i)},_isValueIncomplete:i=>/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(i),_isValueInRange(i){return(0,ie.Z2)(i,this.option("min"),this.option("max"))},_isNumber(i){return null!==this._parseValue(i)},_validateValue(i){var e=this._normalizeText(),t=this._isValueValid(),a=!0,r=this._isNumber(e);return isNaN(Number(i))&&(a=!1),!i&&t?a=!0:!r&&!t&&(a=!1),this.option({isValid:a,validationError:a?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),a},_normalizeInputValue(){return this._parseValue(this._normalizeText())},_normalizeText(){var i=this._input().val().trim();return this._replaceCommaWithPoint(i)},_parseValue(i){var e=parseFloat(i);return isNaN(e)?null:(0,ie.n$)(e,this.option("min"),this.option("max"))},_clearValue(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged(i){switch(i.name){case"value":this._validateValue(i.value),this._setSubmitValue(i.value),this.callBase(i),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(i)}}}),br=function(i){for(var e=0,t=0,a=0;a<i.length;++a)if("'"===i[a]&&e++,"."===i[a]&&(++t,e%2==0))return{occurrence:t,index:a};return{occurrence:1,index:-1}},Bs=function(i,e,t){for(var a=-1;t--&&a++<i.length;)a=i.indexOf(e,a);return a},Fs=function(i,e){return-1===e?[i]:[i.slice(0,e),i.slice(e+1)]},Er=function(i,e){if("string"==typeof e){var t=e.split(";"),a=te.Z.getSign(i,e);t[1]=t[1]||"-".concat(t[0]),e=(e=t[a<0?1:0]).replace(/'([^']*)'/g,o=>o.split("").map(()=>" ").join("").substr(2));var r=/^[^#0.,]*/.exec(e)[0].length,n=/[^#0.,]*$/.exec(e)[0].length;return{start:r,end:i.length-n}}return{start:0,end:i.length}},fc=function(i,e){var t=te.Z.getDecimalSeparator(),a=new RegExp("[^0-9".concat((0,E.hr)(t),"]"),"g");return e.slice(0,i).replace(a,"").length},Cc=function(i){return i.split("").reverse().join("")},wc=function(i,e){if(!i)return-1;for(var t=/[0-9]/g,a=1,r=null,n=t.exec(e);n;){if(r=n.index,a>=i)return r;a++,n=t.exec(e)}return null===r?e.length:r},Ut=function(i,e){return void 0===i.start&&(i={start:i,end:i}),{start:i.start+e,end:i.end+e}};function At(i,e,t){i=Ut(i,0);var a=Er(e,t);return{start:(0,ie.n$)(i.start,a.start,a.end),end:(0,ie.n$)(i.end,a.start,a.end)}}var Ms="dxNumberFormatter",ha="minus",XE=ZE.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:i=>"del"===i,_supportedKeys(){return this._useMaskBehavior()?(0,f.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex(i){var e=te.Z.getDecimalSeparator(),t=br(this.option("format")).occurrence;return Bs(i,e,t)},_focusInHandler(i){this._preventNestedFocusEvent(i)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0;var e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){var t=this._getInputVal(),a=this._getTextSeparatorIndex(t);a>=0?this._caret({start:a,end:a}):this._moveCaretToBoundaryEventHandler(-1,i)}},0)),this.callBase(i)},_focusOutHandler(i){var e=!this._preventNestedFocusEvent(i);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(i),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(i){var e=this._getFormatPattern(),t=this.option("value");return(this._format(t,e)||"")!==i},_updateFormattedValue(){var i=this._getInputVal();this._hasValueBeenChanged(i)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&C.Z.trigger(this._input(),"change"))},_arrowHandler(i,e){if(this._useMaskBehavior()){var t=this._getInputVal(),a=this._getFormatPattern(),r=Ut(this._caret(),i);(function(i,e,t){var a=At(i=Ut(i,0),e,t);return i.start>=a.start&&i.end<=a.end})(r,t,a)||(r=1===i?r.end:r.start,e.preventDefault(),this._caret(At(r,t,a)))}},_moveCaretToBoundary(i){var e=Er(this._getInputVal(),this._getFormatPattern()),t=Ut(1===i?e.start:e.end,0);this._caret(t)},_moveCaretToBoundaryEventHandler(i,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(i),e&&e.preventDefault())},_shouldMoveCaret(i,e){var t=te.Z.getDecimalSeparator(),a=i.charAt(e.end)===t;return(this._lastKey===t||"."===this._lastKey||","===this._lastKey)&&a},_getInputVal(){return te.Z.convertDigits(this._input().val(),!0)},_keyboardHandler(i){if(this.clearCaretTimeout(),this._lastKey=te.Z.convertDigits((0,D.qK)(i),!0),this._lastKeyName=(0,D.EV)(i),!this._shouldHandleKey(i.originalEvent))return this.callBase(i);var a,e=this._getInputVal(),t=this._caret();a=this._lastKeyName===ha?"":110===i.which?te.Z.getDecimalSeparator():this._lastKey;var r=this._tryParse(e,t,a);return this._shouldMoveCaret(e,t)&&(this._moveCaret(1),i.originalEvent.preventDefault()),void 0===r?this._lastKeyName!==ha&&i.originalEvent.preventDefault():this._parsedValue=r,this.callBase(i)},_keyPressHandler(i){this._useMaskBehavior()||this.callBase(i)},_removeHandler(i){var e=this._caret(),t=this._getInputVal(),{start:a}=e,{end:r}=e;this._lastKey=(0,D.qK)(i),this._lastKeyName=(0,D.EV)(i);var n=this._isDeleteKey(this._lastKeyName),s=!n;if(a===r){if(!(s&&a>0||n&&a<t.length))return void i.preventDefault();n&&r++,s&&a--}var d=t.slice(a,r);if(this._isStub(d))this._moveCaret(n?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(i),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&C.Z.trigger(this._input(),"input")),i.preventDefault();else{var h=te.Z.getDecimalSeparator();if(d!==h){if(r-a<t.length&&this._replaceSelectedText(t,{start:a,end:r},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);var m=this._tryParse(t,{start:a,end:r},"");void 0===m?i.preventDefault():this._parsedValue=m}else{var p=t.indexOf(h);this._isNonStubAfter(p+1)&&(this._moveCaret(n?1:-1),i.preventDefault())}}},_isPercentFormat(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse(i,e){var t=this.option("format"),a=(0,_.mf)(t.parser),r=a?t.parser:te.Z.parse,n=0;if(!a){var s=br(e).index,o=this._getTextSeparatorIndex(i),l=-1!==s?s:e.length,d=-1!==o?o:i.length;d>l&&-1===e.indexOf("#")&&(n=d-l)}return r(i=i.substr(n),e)},_format(i,e){var t=this.option("format"),a=t?.formatter||t,r=(0,_.mf)(a)?a:te.Z.format;return null===i?"":r(i,e)},_getFormatPattern(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat(){var i=this.option("format"),e=(0,_.mf)(i?.parser),t=(0,_.HD)(i)&&(i.includes("0")||i.includes("#"));this._currentFormat=e||t||"exponential"===i||"exponential"===i?.type?i:(0,EE.y)(n=>{var s=this._format(n,i);return te.Z.convertDigits(s,!0)})},_getFormatForSign(i){var e=this._getFormatPattern();if((0,_.HD)(e)){var t=e.split(";"),a=te.Z.getSign(i,e);return t[1]=t[1]||"-".concat(t[0]),a<0?t[1]:t[0]}return te.Z.getSign(i)<0?"-":""},_removeStubs(i,e){var t=this._getFormatForSign(i),a=te.Z.getThousandsSeparator(),r=this._getStubs(t),n=i;if(r.length){var s=r[0],o=new RegExp("(".concat((0,E.hr)(r[1]||""),")$"),"g"),l=new RegExp("[-".concat((0,E.hr)(e?"":a),"]"),"g");n=n.replace(s,"").replace(o,"").replace(l,"")}return n},_getStubs(i){var e=/[^']([#0.,]+)/g.exec(i),t=e&&e[0].trim();return i.split(t).map(a=>a.replace(/'/g,""))},_truncateToPrecision(i,e){if((0,_.$K)(i)){var t=i.toString(),a=t.indexOf(".");if(t&&a>-1){var r=parseFloat(t.substr(0,a+e+1));return isNaN(r)?i:r}}return i},_tryParse(i,e,t){var a=e.start!==e.end,r=a&&0===e.start&&e.end===i.length,n=te.Z.getDecimalSeparator();if(r&&t===n)return 0;var s=this._replaceSelectedText(i,e,t),o=this._getFormatPattern(),l=this._getParsedValue(s,o),d=!o.parser&&this._getPrecisionLimits(s).max,h=t===n&&0===d,p=!a&&!(l!==this._parsedValue)&&"-"!==t&&this._isStub(t);return h||p||(""===this._removeStubs(s)&&(l=Math.abs(0*this._parsedValue)),isNaN(l))?void 0:(l=d?this._truncateToPrecision(null===l?this._parsedValue:l,d):l,!o.parser&&this._isPercentFormat()?function(i,e){return i&&(0,ie.zB)(i/100,e)}(l,d):l)},_getParsedValue(i,e){var t=te.Z.getSign(i,e?.formatter||e),a=this._removeStubs(i,!0),r=this._parse(a,e),n=r<0?-1:1;return(0,_.kE)(r)&&t!==n?t*r:r},_isValueIncomplete(i){if(!this._useMaskBehavior())return this.callBase(i);var e=this._caret(),t=te.Z.getDecimalSeparator(),a=this._getTextSeparatorIndex(i),r=a>=0&&a<e.start,n=this._removeStubs(i,!0).split(t);if(!r||2!==n.length)return!1;var s=n[1].length,l=!!this._getFormatPattern().parser,d=!l&&this._getPrecisionLimits(this._getFormatPattern(),i),u=!!l||(0,ie.Z2)(s,d.min,d.max),h="0"===n[1].charAt(s-1);return u&&(h||!s)},_isValueInRange(i){var e=(0,E.IS)(this.option("min"),-1/0),t=(0,E.IS)(this.option("max"),1/0);return(0,ie.Z2)(i,e,t)},_setInputText(i){var e=te.Z.convertDigits(i,!0),t=function(i,e,t,a){t=Ut(t,0);var r=te.Z.getDecimalSeparator(),n=function GE(i){return 1===i.length&&!!i.match(/^[,.][0-9]*$/g)}(i),s=br(a).occurrence,o=n?0:Bs(i,r,s),l=Bs(e,r,s),d=Fs(i,o),u=Fs(e,l);if(-1!==o&&t.start>o){var v=fc(t.start-o-1,d[1]);return At(u[1]?l+1+wc(v,u[1])+1:e.length,e,a)}var m=function(i){return i.replace(/[^0-9e]+$/,"")}(u[0]),I=fc(d[0].length-t.start,Cc(d[0])),A=wc(I,Cc(m));return At(m.length-(A+1),e,a)}(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(i),this._toggleEmptinessEventHandler(),this._formattedValue=i,this._focusOutOccurs||this._caret(t)},_useMaskBehavior(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType(){var i="number"===this.option("mode"),e="desktop"===N.Z.real().deviceType;this._useMaskBehavior()&&i?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:i=>(0,_.HD)(i)&&1===i.length,_moveCaret(i){if(i){var t=At(Ut(this._caret(),i),this._getInputVal(),this._getFormatPattern());this._caret(t)}},_shouldHandleKey(i){var e=(0,D.EV)(i),t=(0,D.j1)(i)||i.altKey||i.shiftKey||!this._isChar(e),a=e===ha;return this._useMaskBehavior()&&!t&&!a},_renderInput(){this.callBase(),this._renderFormatter()},_renderFormatter(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents(){C.Z.off(this._input(),".".concat(Ms))},_isInputFromPaste(i){var e=i.originalEvent&&i.originalEvent.inputType;return(0,_.$K)(e)?"insertFromPaste"===e:this._isValuePasted},_attachFormatterEvents(){var i=this._input();C.Z.on(i,(0,D.V4)("input",Ms),e=>{this._formatValue(e),this._isValuePasted=!1}),C.Z.on(i,(0,D.V4)("dxclick",Ms),()=>{this._caretTimeout||(this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0,this._caret(At(this._caret(),this._getInputVal(),this._getFormatPattern()))},0))}),C.Z.on(i,In.u,()=>{this.clearCaretTimeout()})},clearCaretTimeout(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter(i){var e=this._getInputVal().slice(i);return e&&!this._isStub(e,!0)},_isStub(i,e){var t=(0,E.hr)(te.Z.getDecimalSeparator()),a="^[^0-9".concat(t,"]+$");return new RegExp(a,"g").test(i)&&(e||this._isChar(i))},_parseValue(i){return this._useMaskBehavior()?this._parsedValue:this.callBase(i)},_getPrecisionLimits(i){var e=this._getFormatForSign(i),t=br(e).index,a=(Fs(e,t)[1]||"").replace(/[^#0]/g,"");return{min:a.replace(/^(0*)#*/,"$1").length,max:a.length}},_revertSign(i){if(this._useMaskBehavior()){var e=this._caret();if(e.start!==e.end){if((0,D.EV)(i)===ha)return void this._applyRevertedSign(i,e,!0);this._caret(At(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(i,e)}},_applyRevertedSign(i,e,t){var a=-1*(0,E.IS)(this._parsedValue,null);if((this._isValueInRange(a)||0===a)&&(this._parsedValue=a,t)){var r=this._getFormatPattern(),n=this._getInputVal();this._setTextByParsedValue(),i.preventDefault();var s=this._getInputVal(),o=function(i,e,t){var a=Er(i,t);return Er(e,t).start-a.start}(n,s,r),l=At(e=Ut(e,o),s,r);this._caret(l)}},_removeMinusFromText(i,e){return this._lastKeyName===ha&&"-"===i.charAt(e.start-1)?this._replaceSelectedText(i,{start:e.start-1,end:e.start},""):i},_setTextByParsedValue(){var i=this._getFormatPattern(),e=this._parseValue(),t=this._format(e,i)||"";this._setInputText(t)},_formatValue(i){var e=this._getInputVal(),t=this._caret(),a=this._removeMinusFromText(e,t),r=a!==e;if(e=a,!this._isInputFromPaste(i)&&this._isValueIncomplete(a))return this._formattedValue=e,void(r&&this._setTextByParsedValue());if(te.Z.convertDigits(this._formattedValue,!0)!==e){var s=this._tryParse(e,t,"");(0,_.$K)(s)&&(this._parsedValue=s)}this._setTextByParsedValue()},_renderDisplayText(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue(){var i=this._getInputVal();this._parsedValue=this._tryParse(i,this._caret())},_adjustParsedValue(){if(this._useMaskBehavior()){var e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!(0,_.kE)(e))return void(this._parsedValue=e);this._parsedValue=(0,ie.n$)(e,this.option("min"),this.option("max"))}},_valueChangeEventHandler(i){if(!this._useMaskBehavior())return this.callBase(i);var e=this._caret();this._saveValueChangeEvent(i),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged(i){switch(i.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(i);break;default:this.callBase(i)}},_clearCache(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean(){this._clearCache(),this.callBase()}});const yc=XE;(0,X.Z)("dxNumberBox",yc);const Ns=yc;var Hs=T(3900),wi=T(8488),bc="dx-radiobutton-icon",Ec=wi.Z.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{space:function(i){i.preventDefault(),this._clickAction({event:i})}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:()=>!0,_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon(){this._$icon=(0,c.Z)("<div>").addClass(bc),(0,c.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState(i){this.$element().toggleClass("dx-radiobutton-checked",i).find(".".concat(bc)).toggleClass("dx-radiobutton-icon-checked",i),this.setAria("checked",i)},_renderClick(){var i=(0,D.V4)(se.u,this.NAME);this._clickAction=this._createAction(e=>{this._clickHandler(e.event)}),C.Z.off(this.$element(),i),C.Z.on(this.$element(),i,e=>{this._clickAction({event:e})})},_clickHandler(i){this._saveValueChangeEvent(i),this.option("value",!0)},_optionChanged(i){"value"===i.name?(this._renderCheckedState(i.value),this.callBase(i)):this.callBase(i)}});(0,X.Z)("dxRadioButton",Ec);const iI=Ec;var xi=T(4245),Zs="dxListEditDecorator",aI=(0,D.V4)(cr,Zs),rI=(0,D.V4)(pr,Zs),nI=(0,D.V4)(ia,Zs),sI=xi.Z.inherit({ctor(i){this._list=i,this._init()},_init:E.ZT,_shouldHandleSwipe:!1,_attachSwipeEvent(i){var e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,b.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};C.Z.on(i.$itemElement,aI,e,this._itemSwipeStartHandler.bind(this)),C.Z.on(i.$itemElement,rI,this._itemSwipeUpdateHandler.bind(this)),C.Z.on(i.$itemElement,nI,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler(i){var e=(0,c.Z)(i.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")?i.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,i))},_itemSwipeUpdateHandler(i){var e=(0,c.Z)(i.currentTarget);this._swipeUpdateHandler(e,i)},_itemSwipeEndHandler(i){var e=(0,c.Z)(i.currentTarget);this._swipeEndHandler(e,i),this._clearSwipeCache=!0},beforeBag:E.ZT,afterBag:E.ZT,_commonOptions(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement(i){this._shouldHandleSwipe&&(this._attachSwipeEvent(i),this._clearSwipeCache=!0)},afterRender:E.ZT,handleClick:E.ZT,handleKeyboardEvents:E.ZT,handleEnterPressing:E.ZT,handleContextMenu:E.ZT,_swipeStartHandler:E.ZT,_swipeUpdateHandler:E.ZT,_swipeEndHandler:E.ZT,visibilityChange:E.ZT,getExcludedSelectors:E.ZT,dispose:E.ZT});const oI=sI;var Ic={},Tc="dx-list-select-decorator-enabled",Dc=(0,D.V4)(se.u,"dxListEditDecorator");!function lI(i,e,t){var a=Ic,r={};r[i]=a[i]?a[i]:{},r[i][e]=t,(0,f.l)(a,r)}("selection","default",oI.inherit({_init(){this.callBase.apply(this,arguments);var i=this._list.option("selectionMode");this._singleStrategy="single"===i,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?iI:Hs.Z,this._list.$element().addClass(Tc)},beforeBag(i){var{$itemElement:e}=i,t=i.$container.addClass(this._containerClass),a=(0,c.Z)("<div>").addClass(this._controlClass).appendTo(t);new this._controlWidget(a,(0,f.l)(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":y.Z.format("CheckState")},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(r){r.event&&this._list._saveSelectionChangeEvent(r.event),this._processCheckedState(e,r.value),r.event&&r.event.stopPropagation()}.bind(this)}))},modifyElement(i){this.callBase.apply(this,arguments);var{$itemElement:e}=i,t=this._controlWidget.getInstance(e.find(".".concat(this._controlClass)));C.Z.on(e,"stateChanged",(a,r)=>{t.option("value",r)})},_updateSelectAllState(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents(i,e){var t=!e,a=this._list,r=this._$selectAll,n=a._getLastItemIndex();return!(!r||!(e&&0===i||t&&i===n)||(a.option("focusedElement",r),a.scrollToItem(a.option("focusedElement")),0))},handleEnterPressing(i){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return i.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(i),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll(){var i=this._$selectAll=(0,c.Z)("<div>").addClass("dx-list-select-all"),e=this._list,t=e._supportedKeys().downArrow.bind(e);this._selectAllCheckBox=e._createComponent((0,c.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(i),Hs.Z,{elementAttr:{"aria-label":"Select All"},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",t),(0,c.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(i),this._list.itemsContainer().prepend(i),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),C.Z.off(this._$selectAll,Dc),C.Z.on(this._$selectAll,Dc,this._selectAllClickHandler.bind(this))},_selectAllHandler(i){i.event&&i.event.stopPropagation();var e=this._selectAllCheckBox.option("value");i.event&&this._list._saveSelectionChangeEvent(i.event),!0===e?this._selectAllItems():!1===e&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability(){var i=this._list,e=i._dataController;return!("allPages"===i.option("selectAllMode")&&i.option("grouped")&&!e.group()&&(Q.Z.log("W1010"),1))},_selectAllItems(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler(i){this._list._saveSelectionChangeEvent(i),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected(i){return this._list.isItemSelected(i)},_processCheckedState(i,e){e?this._list.selectItem(i):this._list.unselectItem(i)},dispose(){this._disposeSelectAll(),this._list.$element().removeClass(Tc),this.callBase.apply(this,arguments)},_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var Ac=T(2353),mI=(0,f.l)({},Ac.Z,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new St.o({store:new ir.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=(0,q.vb)(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=(0,q.vb)(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(i){var e=(0,x.BH)();return i=this._unwrappedValue(i),(0,_.$K)(i)?(this._loadSingle(this._valueGetterExpr(),i).done(t=>{this._isValueEquals(this._valueGetter(t),i)?e.resolve(t):e.reject()}).fail(()=>{e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading(){var i;null===(i=this._loadValueDeferred)||void 0===i||i.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(i){return(i=i??this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(i=this._getItemKey(i)),We.Z.unwrap(i)},_getItemKey(i){var e=this._dataSource.key();if(Array.isArray(e)){for(var t={},a=0,r=e.length;a<r;a++)t[e[a]]=i[e[a]];return t}return e&&"object"==typeof i&&(i=i[e]),i},_isValueEquals(i,e){var t=this._dataSource&&this._dataSource.key(),a=this._compareValues(i,e);return!a&&t&&(0,_.$K)(i)&&(0,_.$K)(e)&&(a=Array.isArray(t)?this._compareByCompositeKey(i,e,t):this._compareByKey(i,e,t)),a},_compareByCompositeKey(i,e,t){var a=_.Kn;if(!a(i)||!a(e))return!1;for(var r=0,n=t.length;r<n;r++)if(i[t[r]]!==e[t[r]])return!1;return!0},_compareByKey(i,e,t){var a=We.Z.unwrap,r=(0,E.IS)(a(i[t]),i),n=(0,E.IS)(a(e[t]),e);return this._compareValues(r,n)},_compareValues:(i,e)=>(0,q.Ex)(i,!0)===(0,q.Ex)(e,!0),_initDynamicTemplates:E.ZT,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){var i=this.option("valueExpr");return(0,_.HD)(i)&&"this"!==i||(0,_.mf)(i)?i:null},_dataExpressionOptionChanged(i){switch(i.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});const Rc=mI;var zs=T(5477),Oc=[],Tr=function(i,e,t){Oc.push({enabled:i,decoratorType:e,decoratorSubType:t})};Tr(function(){return this.option("menuItems").length},()=>"menu",function(){return this.option("menuMode")}),Tr(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var i=this.option("itemDeleteMode");return"toggle"===i||"slideButton"===i||"swipe"===i||"static"===i?"delete":"menu"},function(){var i=this.option("itemDeleteMode");return"slideItem"===i&&(i="slide"),i}),Tr(function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")},()=>"selection",()=>"default"),Tr(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},()=>"reorder",()=>"default");var EI=xi.Z.inherit({ctor(i){this._list=i,this._fetchRequiredDecorators()},dispose(){this._decorators&&this._decorators.length&&(0,S.S6)(this._decorators,(i,e)=>{e.dispose()})},_fetchRequiredDecorators(){this._decorators=[],(0,S.S6)(Oc,(i,e)=>{if(e.enabled.call(this._list)){var a=e.decoratorType.call(this._list),r=e.decoratorSubType.call(this._list),n=this._createDecorator(a,r);this._decorators.push(n)}})},_createDecorator(i,e){return new(this._findDecorator(i,e))(this._list)},_findDecorator(i,e){var t,a=null===(t=Ic[i])||void 0===t?void 0:t[e];if(!a)throw Q.Z.Error("E1012",i,e);return a},modifyItemElement(i){var e=(0,c.Z)(i.itemElement),t={$itemElement:e};this._prependBeforeBags(e,t),this._appendAfterBags(e,t),this._applyDecorators("modifyElement",t)},afterItemsRendered(){this._applyDecorators("afterRender")},_prependBeforeBags(i,e){var t=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");i.prepend(t)},_appendAfterBags(i,e){var t=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");i.append(t)},_collectDecoratorsMarkup(i,e,t){var a=(0,c.Z)("<div>");return(0,S.S6)(this._decorators,function(){var r=(0,c.Z)("<div>").addClass(t);this[i]((0,f.l)({$container:r},e)),r.children().length&&a.append(r)}),a.children()},_applyDecorators(i,e){(0,S.S6)(this._decorators,function(){this[i](e)})},_handlerExists(i){if(!this._decorators)return!1;for(var e=this._decorators,{length:t}=e,a=0;a<t;a++)if(e[a][i]!==E.ZT)return!0;return!1},_eventHandler(i,e,t){if(!this._decorators)return!1;for(var a=!1,r=this._decorators,{length:n}=r,s=0;s<n&&!(a=r[s][i](e,t));s++);return a},handleClick(i,e){return this._eventHandler("handleClick",i,e)},handleKeyboardEvents(i,e){return this._eventHandler("handleKeyboardEvents",i,e)},handleEnterPressing(i){return this._eventHandler("handleEnterPressing",i)},contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")},handleContextMenu(i,e){return this._eventHandler("handleContextMenu",i,e)},getExcludedItemSelectors(){var i=[];return this._applyDecorators("getExcludedSelectors",i),i.join(",")}});const II=EI;var TI=T(353),Vc="dx-list-group",Lc=function(i){return(i.group<<20)+i.item},Yt=function(i){return{group:i>>20,item:1048575&i}},RI=TI.Z.inherit({_groupElements(){return this._collectionWidget._itemContainer().find(".".concat(Vc))},_groupItemElements:i=>i.find(".".concat("dx-list-item")),getIndexByItemData(i){var e=this._collectionWidget.option("items"),t=!1;return!!i&&(i.items&&i.items.length&&(i=i.items[0]),(0,S.S6)(e,(a,r)=>{if(!r.items||((0,S.S6)(r.items,(n,s)=>s!==i||(t={group:a,item:n},!1)),t))return!1}),t)},getItemDataByIndex(i){var e=this._collectionWidget.option("items");return(0,_.kE)(i)?this.itemsGetter()[i]:i&&e[i.group]&&e[i.group].items[i.item]||null},itemsGetter(){for(var i=[],e=this._collectionWidget.option("items"),t=0;t<e.length;t++)e[t]&&e[t].items?i=i.concat(e[t].items):i.push(e[t]);return i},deleteItemAtIndex(i){var e=Yt(i);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems(i){var t,e=[];for(t=0;t<i.length;t++)i[t]&&i[t].items?e=e.concat(i[t].items):e.push(i[t]);var a=[];for(t=0;t<e.length;t++)a.push(this._collectionWidget.keyOf(e[t]));return a},getIndexByKey(i,e){var t=e||this._collectionWidget.option("items"),a=-1,r=this;return(0,S.S6)(t,(n,s)=>{if(s.items&&((0,S.S6)(s.items,(o,l)=>{var d=r._collectionWidget.keyOf(l);if(r._equalKeys(d,i))return a={group:n,item:o},!1}),-1!==a))return!1}),a},_getGroups(i){var t=this._collectionWidget._dataController.group();return t?ua.Z.queryByOptions((0,Gt.Z)(i),{group:t}).toArray():this._collectionWidget.option("items")},getItemsByKeys(i,e){var t=[],a=this._getGroups(e),r={},n=s=>{var o=this.getIndexByKey(s,a),l=o&&a[o.group];if(l)return{groupKey:l.key,item:l.items[o.item]}};return(0,S.S6)(i,(s,o)=>{var l=n(o);if(l){var{groupKey:d}=l,{item:u}=l,h=r[d];h||(r[d]=h={key:d,items:[]},t.push(h)),h.items.push(u)}}),t},moveItemAtIndexToIndex(i,e){var t=this._collectionWidget.option("items"),a=Yt(i),r=Yt(e),n=t[a.group].items,s=t[r.group].items,o=n[a.item];n.splice(a.item,1),s.splice(r.item,0,o)},_isItemIndex:i=>i&&(0,_.kE)(i.group)&&(0,_.kE)(i.item),_getNormalizedItemIndex(i){var e=(0,c.Z)(i),t=e.closest(".".concat(Vc));return t.length?Lc({group:this._groupElements().index(t),item:this._groupItemElements(t).index(e)}):-1},_normalizeItemIndex:i=>Lc(i),_denormalizeItemIndex:i=>Yt(i),_getItemByNormalizedIndex(i){var e=Yt(i),t=this._groupElements().eq(e.group);return this._groupItemElements(t).eq(e.item)},_itemsFromSameParent:(i,e)=>Yt(i).group===Yt(e).group});const OI=RI;var PI=Ss.inherit({_supportedKeys(){var i=this,e=this.callBase(),t=(a,r)=>{var n=this._editStrategy,s=this.option("focusedElement"),o=n.getNormalizedIndex(s);if(o!==this._getLastItemIndex()||!this._dataController.isLoading())if(a.shiftKey&&i.option("itemDragging.allowReordering")){var u=n.getItemElement(o+(r?-1:1));this.reorderItem(s,u),this.scrollToItem(s),a.preventDefault()}else this._editProvider.handleKeyboardEvents(o,r)||(r?e.upArrow(a):e.downArrow(a))};return(0,f.l)({},e,{del:a=>{i.option("allowItemDeleting")&&(a.preventDefault(),i.deleteItem(i.option("focusedElement")))},upArrow:a=>t(a,!0),downArrow:a=>t(a),enter:function(a){this._editProvider.handleEnterPressing(a)||e.enter.apply(this,arguments)},space:function(a){this._editProvider.handleEnterPressing(a)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var i=this._editProvider.getExcludedItemSelectors();i.length&&(this._itemElementsCache=this._itemElementsCache.not(i))},_isItemStrictEquals(i,e){var t=i&&i.__dx_key__;return!(t&&!this.key()&&this._selection.isItemSelected(t))&&this.callBase(i,e)},_getDefaultOptions(){return(0,f.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:y.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:i=>"ios"===i.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new II(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new OI(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(i){var e=(0,c.Z)(i.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,i)||(this._saveSelectionChangeEvent(i),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(i){var e=(0,c.Z)(i.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if((0,D.z6)(i)&&this._editProvider.handleContextMenu(e,i))return void(i.handledByEditProvider=!0);this.callBase(...arguments)}},_getItemContainer(i){var e;if(this.option("grouped")){var t=null===(e=this._editStrategy.getIndexByItemData(i))||void 0===e?void 0:e.group;return this._getGroupContainerByIndex(t)}return this.callBase(i)},_itemContextMenuHandler(i){var e=(0,c.Z)(i.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if(!i.handledByEditProvider&&this._editProvider.handleContextMenu(e,i))return void i.preventDefault();this.callBase(...arguments)}},_postprocessRenderItem(i){this.callBase(...arguments),this._editProvider.modifyItemElement(i)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(i){var e=this._editStrategy.getItemElement(i);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(i){switch(i.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(i);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(i)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(i){return this._itemElements().index(i)},getItemElementByFlatIndex(i){var e=this._itemElements();return i<0||i>=e.length?(0,c.Z)():e.eq(i)},getItemByIndex(i){return this._editStrategy.getItemDataByIndex(i)},deleteItem(i){var e=this._editStrategy,t=e.getNormalizedIndex(i),a=this.option("focusedElement"),r=this.option("focusStateEnabled"),n=a?e.getNormalizedIndex(a):t,o=n===this._getLastItemIndex()||t<n?n-1:n;return this.callBase(i).done(function(){r&&this.focusListItem(o)})}}),BI=PI.inherit(zs.Z).inherit({_addWidgetPrefix:i=>"dx-list-".concat(i),_getCombinedFilter(){var i=this._dataController,e={filter:i.filter()};i.addSearchFilter(e);var{filter:t}=e;return t},_initDataSource(){var i=this.option("searchValue"),e=this.option("searchExpr"),t=this.option("searchMode");this.callBase();var a=this._dataController;i&&i.length&&a.searchValue(i),t.length&&a.searchOperation(zs.Z.getOperationBySearchMode(t)),e&&a.searchExpr(e)}});const Pc=BI;(0,X.Z)("dxList",Pc);const ca=Pc;var Ws=T(4609),Dr=T(8360);class NI extends _c.Z{constructor(e,t,a){super(e,t,a),this.currentTemplate=null}_attachEvents(e){var{editor:t}=this;e.option("onClick",a=>{var r;(null!==(r=t._shouldCallOpenHandler)&&void 0!==r&&r.call(t)||!t.option("openOnFieldClick"))&&t._openHandler(a)}),C.Z.on(e.$element(),"mousedown",a=>{t.$element().is(".dx-state-focused")&&a.preventDefault()})}_create(){var{editor:e}=this,t=(0,c.Z)("<div>"),a=this._getOptions();this._addToContainer(t);var r=e._createComponent(t,ye.Z,(0,f.l)({},a,{elementAttr:{"aria-label":y.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(e.$element(),t,a.visible),{$element:t,instance:r}}_getOptions(){var{editor:e}=this,t=this._isVisible(),r={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(r),r}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,a){e.toggleClass("dx-dropdowneditor-button-visible",a),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){var{editor:t,instance:a}=this,r=t.$element(),n=this._getOptions();a?.option(n),this._legacyRender(r,a?.$element(),n.visible)}}}var Ar=function(i){if((0,B.Ym)())return(0,b.Y_)(i)},Ks=function(i){return null===i&&(i=void 0),"function"==typeof i&&(i=i()),i},Bc="dx-dropdowneditor-input-wrapper",Rr="dx-dropdowneditor-overlay",Fc="ios"===N.Z.current().platform,Mc=pc.Z.inherit({_supportedKeys(){return(0,f.l)({},this.callBase(),{tab(i){if(this.option("opened")){if(!this._popup.getFocusableElements().length)return void this.close();var e=i.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(C.Z.trigger(e,"focus"),e.select()),i.preventDefault()}},escape(i){return this.option("opened")&&i.preventDefault(),this.close(),!0},upArrow(i){return!(!(0,D.j1)(i)&&(i.preventDefault(),i.stopPropagation(),i.altKey)&&(this.close(),1))},downArrow(i){return!(!(0,D.j1)(i)&&(i.preventDefault(),i.stopPropagation(),i.altKey)&&(this._validatedOpening(),1))},enter(i){return this.option("opened")&&(i.preventDefault(),this._valueChangeEventHandler(i)),!0}})},_getDefaultButtons(){return this.callBase().concat([{name:"dropDown",Ctor:NI}])},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:y.Z.format("OK"),cancelButtonText:y.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:()=>!0,_getDefaultPopupPosition(i){var e=(0,ne.q)(i);return{offset:{h:0,v:-1},my:"".concat(e," top"),at:"".concat(e," bottom"),collision:"flip flip"}},_defaultOptionsRules(){return this.callBase().concat([{device:i=>"generic"===i.platform,options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper(){return this.$element().find(".".concat(Bc)).first()},_init(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition(i){var{my:e,at:t}=this._getDefaultPopupPosition(i),a=this.option("popupPosition");this.option("popupPosition",(0,f.l)({},a,{my:e,at:t}))},_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())},_render(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl(){this.option("deferRendering")||this._createPopup()},_renderInput(){this.callBase(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()},_wrapInput(){this._$container=this.$element().wrapInner((0,c.Z)("<div>").addClass(Bc)).children().eq(0)},_getAriaHasPopup:()=>"true",_getAriaAutocomplete:()=>"list",_getAriaRole:()=>"combobox",_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})},_readOnlyPropValue(){return!this._isEditable()||this.callBase()},_cleanFocusState(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask(){this.option("fieldTemplate")||this.callBase()},_renderField(){var i=this._getFieldTemplate();i&&this._renderTemplatedField(i,this._fieldRenderData())},_renderPlaceholder(){this._getFieldTemplate()||this.callBase()},_renderValue(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer},_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=(0,c.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").prependTo(this.$element())))},_renderTemplatedField(i,e){var t=(0,Dr.si)(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove(),this._$templateWrapper.empty();var a=this._$templateWrapper,r=Symbol("renderContext");this._activeRenderContext=r,i.render({model:e,container:(0,j.uD)(a),onRendered:()=>{if(this._activeRenderContext===r&&this.$element().find(a).length){var s=this._input();if(!s.length)throw Q.Z.Error("E1010");this._integrateInput(),t&&C.Z.trigger(s,"focus")}}})},_integrateInput(){var i,{isValid:e}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!e),null===(i=this.option("_onMarkupRendered"))||void 0===i||i()},_refreshEmptinessEvent(){C.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData(){return this.option("value")},_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new Ws.k(i=>{var e=(0,c.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,c.Z)(i.container).append(e)})}),this.callBase()},_renderOpenHandler(){var i=this._inputWrapper(),e=(0,D.V4)(se.u,this.NAME),t=this.option("openOnFieldClick");C.Z.off(i,e),C.Z.on(i,e,this._getInputClickHandler(t)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",t),t&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler(){Fc&&(this._detachFocusOutEvents(),C.Z.on(this._inputWrapper(),(0,D.V4)("focusout",this.NAME),i=>{var e=i.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()}))},_isTargetOutOfComponent(i){var e=this.content?(0,c.Z)(this.content()).closest(".".concat(Rr)):this._$popup;return 0===(0,c.Z)(i).closest(".".concat(Rr),e).length},_detachFocusOutEvents(){Fc&&C.Z.off(this._inputWrapper(),(0,D.V4)("focusout",this.NAME))},_getInputClickHandler(i){return i?e=>{this._executeOpenAction(e)}:()=>{this._focusInput()}},_openHandler(){this._toggleOpenState()},_executeOpenAction(i){this._openOnFieldClickAction({event:i})},_keyboardEventBindingTarget(){return this._input()},_focusInput(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,Dr.si)(this._input())&&(this._resetCaretPosition(),C.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._input().get(0);if(e){var{value:t}=e,a=(0,_.$K)(t)&&(i||this._isEditable())?t.length:0;this._caret({start:a,end:a},!0)}},_isEditable(){return this.option("acceptCustomValue")},_toggleOpenState(i){this._focusInput()&&(this.option("readOnly")||(i=arguments.length?i:!this.option("opened"),this.option("opened",i)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState(){var i=this.option("opened");i&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",i),this._setPopupOption("visible",i);var e={expanded:i,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",i?this._popupContentId:void 0,this.$element())},_createPopup(){this._$popup||(this._$popup=(0,c.Z)("<div>").addClass(Rr).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:E.ZT,_renderPopup(){var i=(0,f.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete i.closeOnOutsideClick,i.elementAttr&&!Object.keys(i.elementAttr).length&&delete i.elementAttr,this._popup=this._createComponent(this._$popup,Dt,i),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){C.Z.on(this._popup.$overlayContent(),(0,D.V4)("keydown",this.NAME),i=>this._popupKeyHandler(i))},_popupKeyHandler(i){switch((0,D.EV)(i)){case"tab":this._popupTabHandler(i);break;case"escape":this._popupEscHandler(i)}},_popupTabHandler(i){var e=(0,c.Z)(i.target),t=i.shiftKey&&e.is(this._getFirstPopupElement());(!i.shiftKey&&e.is(this._getLastPopupElement())||t)&&(C.Z.trigger(this.field(),"focus"),i.preventDefault())},_popupEscHandler(){C.Z.trigger(this._input(),"focus"),this.close()},_setPopupContentId(i){this._popupContentId="dx-".concat(new ve.Z),this.setAria("id",this._popupContentId,i)},_contentReadyHandler:E.ZT,_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:(0,f.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Ar(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:i=>this._closeOutsideDropDownHandler(i),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:Rr,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:E.ZT,_getPopupInitializedHandler(){var i=this.option("onPopupInitialized");return e=>{this._popupInitializedHandler(e),i&&this._popupInitializedAction({popup:e.component})}},_dimensionChanged(){!(0,B.Ym)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth(){void 0===Ks(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>Ar(this.$element()))},_popupPositionedHandler(i){var e,t,{labelMode:a,stylingMode:r}=this.option();if(this._popup){var n=this._popup.$overlayContent(),s=null===(t=null===(e=i.position)||void 0===e?void 0:e.v)||void 0===t?void 0:t.flip,o="hidden"!==a&&"outside"!==a&&"outlined"===r;if(i.position&&n.toggleClass("dx-dropdowneditor-overlay-flipped",s),s&&o&&this._label.isVisible()){var l=this._label.$element();(0,de.pB)(n,{top:(0,de.jt)(n).top-parseInt(l.css("fontSize"))})}}},_popupShowingHandler:E.ZT,_popupHidingHandler(){this.option("opened",!1)},_popupShownHandler(){var i;this._openAction(),null===(i=this._validationMessage)||void 0===i||i.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler(){var i;this._closeAction(),null===(i=this._validationMessage)||void 0===i||i.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide(){var i=this.option("validationMessagePosition");if("auto"!==i)return i;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:t}=fi.Z.setup(this.$element()),{top:a}=fi.Z.setup(this._popup.$content());e=t+this.option("popupPosition").offset.v>a?"bottom":"top"}return e},_closeOutsideDropDownHandler(i){var{target:e}=i,t=(0,c.Z)(e),a=this.getButton("dropDown"),r=a&&a.$element(),n=!!t.closest(this.$element()).length,s=!!t.closest(r).length;return!n&&!s},_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption(i,e){this._setWidgetOption("_popup",arguments)},_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement(){return(0,c.Z)(this._popup.getFocusableElements()).first()},_getLastPopupElement(){return(0,c.Z)(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig(){var i=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(i)},_applyButtonsLocation(i){var e=this.option("buttonsLocation"),t=i;if("default"!==e){var a=(0,E.Um)(e);(0,S.S6)(t,(r,n)=>{(0,f.l)(n,{toolbar:a[0],location:a[1]})})}return t},_applyButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged(i){var e=Ge.Z.getOptionsFromContainer(i);this._setPopupOption(e);var t=Object.keys(e);(t.includes("width")||t.includes("height"))&&this._dimensionChanged()},_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose(){this._detachFocusOutEvents(),this.callBase()},_optionChanged(i){var e;switch(i.name){case"width":case"height":this.callBase(i),null===(e=this._popup)||void 0===e||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(i),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,B.Ym)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(i.value),this.callBase(i);break;default:this.callBase(i)}},open(){this.option("opened",!0)},close(){this.option("opened",!1)},field(){return(0,j.uD)(this._input())},content(){return this._popup?this._popup.content():null}});(0,X.Z)("dxDropDownEditor",Mc);const kc=Mc;var Nc=(0,B.Jj)(),qI=["startswith","contains","endwith","notcontains"],Hc="android"!==N.Z.real().platform,Zc=kc.inherit({_supportedKeys(){var i=this.callBase();return(0,f.l)({},i,{tab(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var t=(0,c.Z)(this._list.option("focusedElement"));t.length&&this._setSelectedElement(t)}i.tab.apply(this,arguments)},space:E.ZT,home:E.ZT,end:E.ZT})},_allowSelectItemByTab(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement(i){var e=this._valueGetter(this._list._getItemData(i));this._setValue(e)},_setValue(i){this.option("value",i)},_getDefaultOptions(){return(0,f.l)(this.callBase(),(0,f.l)(Rc._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:y.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:E.ZT,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems(){var{items:i}=this.option();i&&!i.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new uh.s("item")})},_isEditable(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget(){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:(i,e,t)=>i>t?e:i<e?t:i,_items(){var i=this._getPlainItems(!this._list&&this._dataSource.items());return new Gt.Z(i).filter("disabled","<>",!0).toArray()},_calcNextItem(i){var e=this._items();return e[this._fitIntoRange(this._getSelectedIndex()+i,0,e.length-1)]},_getSelectedIndex(){var i=this._items(),e=this.option("selectedItem"),t=-1;return(0,S.S6)(i,(a,r)=>{if(this._isValueEquals(r,e))return t=a,!1}),t},_createPopup(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var i=this._popup.$content();C.Z.off(i,"mouseup"),C.Z.on(i,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer(){var i=this.option("dropDownOptions.container"),e=i&&(0,c.Z)(i);if(e&&e.length&&!(0,_.FJ)(e.get(0))){var t=[].slice.call(e.parents());t.unshift(e.get(0)),(0,S.S6)(t,(a,r)=>r!==(0,c.Z)("body").get(0)&&("hidden"===Nc.getComputedStyle(r).overflowY?(this._$customBoundaryContainer=(0,c.Z)(r),!1):void 0))}},_popupWrapperClass:()=>"dx-dropdownlist-popup-wrapper",_renderInputValue(){var i=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(i,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,i))},_loadInputValue(i,e){return this._loadItem(i).always(e)},_getItemFromPlain(i,e){var t,a;return e&&"object"!=typeof i&&(e.itemByValue||(e.itemByValue={},(t=this._getPlainItems()).forEach(function(r){e.itemByValue[this._valueGetter(r)]=r},this)),a=e.itemByValue[i]),a||(t=this._getPlainItems(),a=(0,E.h3)(t,r=>this._isValueEquals(this._valueGetter(r),i))[0]),a},_loadItem(i,e){var t=this._getItemFromPlain(i,e);return void 0!==t?(0,x.BH)().resolve(t).promise():this._loadValue(i)},_getPlainItems(i){var e=[];i=i||this.option("items")||this._dataSource.items()||[];for(var t=0;t<i.length;t++)i[t]&&i[t].items?e=e.concat(i[t].items):e.push(i[t]);return e},_updateActiveDescendant(i){var e,t=this.option("opened"),a=null===(e=this._list)||void 0===e?void 0:e.getFocusedItemId(),r=(0,c.Z)("#".concat(a)).length>0;this.setAria({activedescendant:t&&r&&a||null},i)},_setSelectedItem(i){var e=this._displayValue(i);this.option("selectedItem",(0,E.IS)(i,null)),this.option("displayValue",e)},_displayValue(i){return this._displayGetter(i)},_refreshSelected(){var i={};this._listItemElements().each((e,t)=>{var a=(0,c.Z)(t),r=this._valueGetter(a.data("dxListItemData"));this._isSelectedValue(r,i)?this._list.selectItem(a):this._list.unselectItem(a)})},_popupShownHandler(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue(i){return this._isValueEquals(i,this.option("value"))},_validateSearchMode(){var i=this.option("searchMode"),e=i.toLowerCase();if(!qI.includes(e))throw Q.Z.Error("E1019",i)},_clearSelectedItem(){this.option("selectedItem",null)},_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(()=>{this._isCustomValueAllowed()||this._clearSelectedItem()})},_isCustomValueAllowed(){return this.option("displayCustomValue")},clear(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):(0,c.Z)()},_popupConfig(){return(0,f.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent(){this.callBase(),this._renderList()},_getKeyboardListeners(){var i=this._canListHaveFocus();return this.callBase().concat([!i&&this._list])},_renderList(){this._listId="dx-".concat((new ve.Z)._value);var i=(0,c.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=i,this._list=this._createComponent(i,ca,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick(){var i=(0,D.V4)("mousedown","dxDropDownList");C.Z.off(this._$list,i),C.Z.on(this._$list,i,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_getAriaHasPopup:()=>"listbox",_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:()=>"desktop"===N.Z.real().deviceType,_listConfig(){var i={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(i.tabIndex=null),i},_canListHaveFocus:()=>!1,_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:()=>({paginate:!1}),_getGroupedOption(){return this.option("grouped")},_dataSourceFromUrlLoadMode:()=>"raw",_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption(i,e){this._setWidgetOption("_list",arguments)},_listItemClickAction(i){this._listItemClickHandler(i),this._itemClickAction(i)},_listItemClickHandler:E.ZT,_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource(){var i=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!i&&!this._isLastMinSearchLengthExceeded},_searchValue(){return this._input().val()||""},_getSearchEvent(){return(0,D.V4)("input","".concat(this.NAME,"Search"))},_getCompositionStartEvent(){return(0,D.V4)("compositionstart","".concat(this.NAME,"CompositionStart"))},_getCompositionEndEvent(){return(0,D.V4)("compositionend","".concat(this.NAME,"CompositionEnd"))},_getSetFocusPolicyEvent(){return(0,D.V4)("input","".concat(this.NAME,"FocusPolicy"))},_renderEvents(){this.callBase(),C.Z.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(C.Z.on(this._input(),this._getSearchEvent(),i=>{this._searchHandler(i)}),Hc&&(C.Z.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),C.Z.on(this._input(),this._getCompositionEndEvent(),i=>{this._isTextCompositionInProgress(void 0),this._searchHandler(i,this._searchValue())})))},_shouldRenderSearchEvent(){return this.option("searchEnabled")},_refreshEvents(){C.Z.off(this._input(),this._getSearchEvent()),C.Z.off(this._input(),this._getSetFocusPolicyEvent()),Hc&&(C.Z.off(this._input(),this._getCompositionStartEvent()),C.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress(i){if(!arguments.length)return this._isTextComposition;this._isTextComposition=i},_searchHandler(i,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();var t=this.option("searchTimeout");t?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},t)):this._searchDataSource(e)}},_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(i)},_filterDataSource(i){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(i),e.load().done(this._dataSourceFiltered.bind(this,i))},_clearFilter(){var i=this._dataController;i.searchValue()&&i.searchValue(null)},_dataSourceFiltered(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup(){return this._hasItemsToShow()},_refreshPopupVisibility(){if(!this.option("readOnly")&&this._searchValue()){var i=this._shouldOpenPopup();i&&!this._isFocused()||(this.option("opened",i),i&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler(i){0===this._dataController.pageIndex()?this.option().items=i:this.option().items=this.option().items.concat(i)},_hasItemsToShow(){var t=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!t)},_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged(){this.callBase(),this._updateListDimensions()},_needPopupRepaint(){var i=this._dataController,e=i.pageIndex(),t=(0,_.$K)(this._pageIndex)&&e<=this._pageIndex||i.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,t},_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight(){var i=this.$element(),e=this._$customBoundaryContainer,t=i.offset().top-(e?e.offset().top:0),a=(0,b.zp)(Nc),r=e?Math.min((0,b.zp)(e),a):a,n=Math.max(t,r-t-(0,b.zp)(i));return Math.min(.5*r,n)},_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)},_setSubmitValue(){var i=this.option("value"),e=this._shouldUseDisplayValue(i)?this._displayGetter(i):i;this._getSubmitElement().val(e)},_shouldUseDisplayValue(i){return"this"===this.option("valueExpr")&&(0,_.Kn)(i)},_optionChanged(i){switch(this._dataExpressionOptionChanged(i),i.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(i.name,i.value),this.callBase(i);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(i.name);break;case"displayValue":this.option("text",i.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":i.previousValue!==i.value&&this._selectionChangedAction({selectedItem:i.value});break;default:this.callBase(i)}}}).include(Rc,yh);(0,X.Z)("dxDropDownList",Zc);var zc="dx-selectbox-popup-wrapper",$c=Zc.inherit({_supportedKeys(){var i=this,e=this.callBase(),t=function(r){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(r.preventDefault(),this.clear()),this._savedTextRemoveEvent=r,this._preventSubstitution=!0},a=function(){i.option("searchEnabled")&&i._valueSubstituted()&&i._searchHandler()};return(0,f.l)({},e,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(r){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(r),!0},downArrow(r){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(r),!0},leftArrow(){var r;a(),null===(r=e.leftArrow)||void 0===r||r.apply(this,arguments)},rightArrow(){a(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home(){a(),e.home&&e.home.apply(this,arguments)},end(){a(),e.end&&e.end.apply(this,arguments)},escape(){var r=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),r??!0},enter(r){var n=this.option("opened"),s=this._input().val().trim(),o=s&&this._list&&!this._list.option("focusedElement");if(!s&&(0,_.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(r),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return r.preventDefault(),o&&(n&&this._toggleOpenState(),this._valueChangeEventHandler(r)),n;if(e.enter&&e.enter.apply(this,arguments))return n}},space(r){var n=this.option("opened"),s=this.option("searchEnabled"),o=this.option("acceptCustomValue");if(n&&!s&&!o)return r.preventDefault(),this._valueChangeEventHandler(r),!0},backspace:t,del:t})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{placeholder:y.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(i){(0,_.$K)(i.customItem)||(i.customItem=i.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return"".concat(this.callBase()," ").concat(zc)},_setDeprecatedOptions(){this.callBase(),(0,f.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){var i;if(this._searchValue()){var{items:t,selectedItem:a}=this.option(),r=this._list._itemElements(),n=null!==(i=t?.indexOf(a))&&void 0!==i?i:-1,s=-1===n||this._isCustomItemSelected()?null:r.eq(n);this._focusListElement(s)}else this._focusListElement(null)},_renderFocusedElement(){if(this._list){if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);var t=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(t)}},_focusListElement(i){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,j.uD)(i)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),(0,x.BH)().resolve()},_renderInputValue(){return this.callBase().always(()=>{this._renderInputValueAsync()})},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})},_renderInputValueImpl(){return this._renderField(),(0,x.BH)().resolve()},_setNextItem(i){var e=this._calcNextItem(i),t=this._valueGetter(e);this._setValue(t)},_setNextValue(i){(this._dataController.isLoaded()?(0,x.BH)().resolve():this._dataController.load()).done(()=>{var t=this._getSelectedIndex(),a=this._dataController.pageSize(),r=this._dataController.isLastPage(),n=t===this._items().length-1;this._saveValueChangeEvent(i);var s="downArrow"===(0,D.EV)(i)?1:-1;a&&!r&&n&&s>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,s))):this._setNextItem(s)})},_setSelectedItem(i){var e=!this._isCustomValueAllowed()&&void 0===i;this.callBase(e?null:i),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(i){return i=!(0,_.$K)(i)&&this._isCustomValueAllowed()?this.option("value"):i,this.callBase(i)},_listConfig(){var i=(0,f.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,f.l)(i,{showSelectionControls:!0,selectByClick:!0}),i},_listFocusedItemChangeHandler(i){if(!this._preventInputValueRender){var e=i.component,t=(0,c.Z)(e.option("focusedElement")),a=e._getItemData(t);this._updateField(a)}},_updateField(i){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){var t=this._displayGetter(i);return this.option("text",t),void this._renderDisplayText(t)}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):E.ZT},_selectionChangeHandler(i){(0,S.S6)(i.addedItems||[],(e,t)=>{this._setValue(this._valueGetter(t))})},_getActualSearchValue(){return this._dataController.searchValue()},_toggleOpenState(i){if(!this.option("disabled")){if(!(i=arguments.length?i:!this.option("opened"))&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&i)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;var t=this._getActualSearchValue();t&&this._wasSearch(!0),this._filterDataSource(t||null)}else this._setListOption("items",[]);i&&this._scrollToSelectedItem(),this.callBase(i)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){var i=this.option("selectedItem");if(null===i)return!1;var e=this._displayGetter(i);return(e?String(e):"")===this._searchValue()},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(i){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(()=>{var{acceptCustomValue:e,text:t,selectedItem:a}=this.option();e?!i&&!this._isValueChanging&&(this._updateField(a??this._createCustomItem(t)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(r=>{var n=(0,E.IS)(r,a);this._setSelectedItem(n),this._updateField(n),this._clearFilter()})})},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(i){return this._preventNestedFocusEvent(i)||this._valueChangeEventIncludesBlur()},_focusOutHandler(i){this._isPreventedFocusOutEvent(i)||(this._isOverlayNestedTarget(i.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(i)),i.target=this._input().get(0),this.callBase(i)},_cancelSearchIfNeed(i){var e,{searchEnabled:t}=this.option(),a=this._isOverlayNestedTarget(i?.relatedTarget);if(this._wasSearch()&&t&&!a){var n=null===(e=this._popup)||void 0===e?void 0:e._hideAnimationProcessing;this._clearSearchTimer(),n?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(i){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=i},_isOverlayNestedTarget:i=>!!(0,c.Z)(i).closest(".".concat(zc)).length,_clearTextValue(){var i=this.option("selectedItem"),e=this._displayGetter(i);i&&""!==e&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){var i=Z.Z.getActiveElement(this.element());return this.callBase()&&(0,c.Z)(i).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){var i=this._list&&this.option("opened")&&(0,c.Z)(this._list.option("focusedElement"));return i&&i.length?this._list._getItemData(i):this.option("selectedItem")},_isSelectedValue(i){return this._isValueEquals(i,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler(i){var e=this._getCurrentValue();this._focusListElement((0,c.Z)(i.itemElement)),this._saveValueChangeEvent(i.event),this._completeSelection(this._valueGetter(i.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(i.itemData)&&this._updateField(i.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(i){this._setValue(i)},_loadItem(i,e){var t=this,a=(0,x.BH)();return this.callBase(i,e).done(r=>{a.resolve(r)}).fail(r=>{if(!r?.shouldSkipCallback){var n=t.option("selectedItem");t.option("acceptCustomValue")&&i===t._valueGetter(n)?a.resolve(n):a.reject()}}),a.promise()},_loadInputValue(i,e){return this._loadItemDeferred=this._loadItem(i).always(e),this._loadItemDeferred},_isCustomItemSelected(){var i=this.option("selectedItem"),e=this._searchValue(),t=this._displayGetter(i);return!t||e!==t.toString()},_valueChangeEventHandler(i){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(i))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(i){var e={text:i},t=this._customItemCreatingAction(e),a=(0,E.IS)(t,e.customItem);return(0,_.$K)(t)&&On.Z.log("W0015","onCustomItemCreating","customItem"),a},_customItemAddedHandler(i){var e=this._searchValue(),t=this._createCustomItem(e);if(this._saveValueChangeEvent(i),void 0===t)throw this._renderValue(),On.Z.Error("E0121");(0,_.tI)(t)?(0,x.p4)(t).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(t)},_setCustomItem(i){this._disposed||(this.option("selectedItem",i=i||null),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(i)),this._renderDisplayText(this._displayGetter(i)),this._isValueChanging=!1)},_clearValueHandler(i){return this._preventFiltering=!0,this.callBase(i),this._searchCanceled(),!1},_wasSearch(i){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=i},_searchHandler(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered(i){this.callBase(),null!==i&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){var i=this._input().get(0),e=this._searchValue().length,t=0===i.selectionStart&&i.selectionEnd===e,a=i.selectionStart!==i.selectionEnd,r=e===i.selectionEnd;return this._wasSearch()&&a&&!t&&r&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_renderInputSubstitution(){if(this._shouldSubstitutionBeRendered()){var i=this._list&&this._getPlainItems(this._list.option("items"))[0];if(i){var e=this._input(),t=e.val().length;if(0!==t){var a=e.get(0),r=this._displayGetter(i).toString();a.value=r,this._caret({start:t,end:r.length})}}}else delete this._preventSubstitution},_dispose(){this._renderInputValueAsync=E.ZT,delete this._loadItemDeferred,this.callBase()},_optionChanged(i){switch(i.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(i)}}});(0,X.Z)("dxSelectBox",$c);const Wc=$c;var Rt=T(3615),iT=T(9055),Kc="dxSwipeable",rT={onStart:cr,onUpdated:pr,onEnd:ia,onCancel:"dxswipecancel"},Gc=ta.Z.inherit({_getDefaultOptions:function(){return(0,f.l)(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),!this.option("disabled")){var i=this.NAME;this._createEventData(),(0,S.S6)(rT,function(e,t){var a=this._createActionByOption(e,{context:this});t=(0,D.V4)(t,i),C.Z.on(this.$element(),t,this._eventData,function(r){return a({event:r})})}.bind(this))}},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){C.Z.off(this.$element(),"."+Kc)},_optionChanged:function(i){switch(i.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(i)}},_useTemplates:function(){return!1}});(0,iT.u2)(Gc,Kc);const Gs=Gc;var Uc=T(920);const Us=class sT{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,t){this.calendar._dateValue(e,t)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,t){this.calendar._updateAriaSelected(e,t),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,t){(0,_.$K)(e)&&!Array.isArray(e)&&(e=[e]),(0,_.$K)(t)&&!Array.isArray(t)&&(t=[t]),e=e?.map(a=>this._convertToDate(a))||[],t=t?.map(a=>this._convertToDate(a))||[],this._updateViewsValue(e),this.updateAriaSelected(e,t),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){var t=this.calendar._dateOption("min"),a=this.calendar._dateOption("max"),r=(0,_.$K)(t)&&e<t&&!L.sameDate(t,e),n=(0,_.$K)(a)&&e>a&&!L.sameDate(a,e);return this.calendar._view.isDateDisabled(e)||r||n}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,t){this.calendar._updateViewsOption(e,t)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){var{selectionMode:e,selectWeekOnClick:t}=this.calendar.option();return t&&"single"!==e}},fT=class mT extends hh.Z{_getDefaultOptions(){return(0,V.Z)((0,V.Z)({},super._getDefaultOptions()),{onClick:void 0,onCaptionClick:void 0,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,z.x2)(),options:{type:"default",stylingMode:"text"}},{device:()=>(0,z.dC)(),options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),(0,c.Z)(this.element()).addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){var{rtlEnabled:e,type:t,stylingMode:a,focusStateEnabled:r}=this.option();this._prevButton=this._createComponent((0,c.Z)("<div>"),ye.Z,{focusStateEnabled:r,icon:e?"chevronright":"chevronleft",onClick:l=>{this._clickAction({direction:-1,event:l})},type:t,stylingMode:a,integrationOptions:{}});var n=(0,c.Z)(this._prevButton.element()).addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,c.Z)("<div>"),ye.Z,{focusStateEnabled:r,icon:e?"chevronleft":"chevronright",onClick:l=>{this._clickAction({direction:1,event:l})},type:t,stylingMode:a,integrationOptions:{}});var s=(0,c.Z)(this._nextButton.element()).addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,c.Z)("<div>").addClass("dx-calendar-caption-button"),ye.Z,{focusStateEnabled:r,onClick:l=>{this._captionClickAction({event:l})},type:t,stylingMode:a,template:(l,d)=>{var{text:u}=this.option();u.split(" - ").forEach(p=>{(0,c.Z)(d).append((0,c.Z)("<span>").addClass("dx-button-text").text(p))})},integrationOptions:{}});var o=this._caption.$element();this.$element().append(n,o,s)}_renderCaption(){var e;null===(e=this._caption)||void 0===e||e.option("text",this.option("text"))}toggleButton(e,t){var r=this["_".concat(e,"Button")];r&&(r.option("disabled",t),r.$element().toggleClass("dx-calendar-disabled-navigator-link",t))}_optionChanged(e){"text"===e.name?this._renderCaption():super._optionChanged(e)}};var{abstract:et}=Ge.Z,Ys="dx-calendar-cell",Yc="dx-calendar-week-number-cell",js="dx-calendar-empty-cell",jc="dx-calendar-selected-date",qc="dx-calendar-cell-in-range",qs="dx-calendar-cell-range-hover",Xs="dx-calendar-cell-range-hover-start",Qs="dx-calendar-cell-range-hover-end",Xc="dx-calendar-range-start-date",Qc="dx-calendar-range-end-date",Js="dx-calendar-contoured-date",Jc="td:not(.".concat(Yc,")"),eo=(0,D.V4)(se.u,"dxCalendar"),ep=(0,D.V4)(Uc.B,"dxCalendar"),pa="dxDateValueKey",OT=Ge.Z.inherit({_getViewName:()=>"base",_getDefaultOptions(){return(0,f.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup(){this.callBase(),this._renderImpl()},_renderImpl(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents()},_createTable(){this._$table=(0,c.Z)("<table>");var i=y.Z.format("dxCalendar-ariaWidgetName");return this.setAria({label:i,role:"grid"},this._$table),this._$table},_renderBody(){this.$body=(0,c.Z)("<tbody>").appendTo(this._$table);for(var i={cellDate:this._getFirstCellData(),prevCellDate:null},e=0,t=this.option("rowCount");e<t;e++){i.row=this._createRow();for(var a=0,r=this.option("colCount");a<r;a++)this._renderCell(i,a);this._renderWeekNumberCell(i)}},_createRow(){var i=Z.Z.createElement("tr");return this.setAria("role","row",(0,c.Z)(i)),this.$body.get(0).appendChild(i),i},_createCell(i,e){var t=Z.Z.createElement("td"),a=(0,c.Z)(t);return t.className=this._getClassNameByDate(i,e),t.setAttribute("data-value",he.serializeDate(i,L.getShortDateFormat())),(0,Wa.aT)(t,pa,i),this.setAria({role:"gridcell",label:this.getCellAriaLabel(i)},a),{cell:t,$cell:a}},_renderCell(i,e){var{cellDate:t,prevCellDate:a,row:r}=i;a&&L.fixTimezoneGap(a,t),i.prevCellDate=t;var{cell:n,$cell:s}=this._createCell(t,e),o=this.option("cellTemplate");(0,c.Z)(r).append(n),o?o.render(this._prepareCellTemplateData(t,e,s)):n.innerHTML=this._getCellText(t),i.cellDate=this._getNextCellData(t)},_getClassNameByDate(i,e){var t=Ys;return this._isTodayCell(i)&&(t+=" ".concat("dx-calendar-today")),(this._isDateOutOfRange(i)||this.isDateDisabled(i))&&(t+=" ".concat(js)),this._isOtherView(i)&&(t+=" ".concat("dx-calendar-other-view")),"range"===this.option("selectionMode")&&(0===e&&(t+=" ".concat("dx-calendar-cell-start-in-row")),e===this.option("colCount")-1&&(t+=" ".concat("dx-calendar-cell-end-in-row")),this._isStartDayOfMonth(i)&&(t+=" ".concat("dx-calendar-cell-start")),this._isEndDayOfMonth(i)&&(t+=" ".concat("dx-calendar-cell-end"))),t},_prepareCellTemplateData(i,e,t){var a=i instanceof Date;return{model:{text:a?this._getCellText(i):i,date:a?i:void 0,view:this._getViewName()},container:(0,j.uD)(t),index:e}},_renderEvents(){this._createCellClickAction(),C.Z.off(this._$table,eo),C.Z.on(this._$table,eo,Jc,e=>{(0,c.Z)(e.currentTarget).hasClass(js)||this._cellClickAction({event:e,value:(0,c.Z)(e.currentTarget).data(pa)})});var{selectionMode:i}=this.option();C.Z.off(this._$table,ep),"range"===i&&(this._createCellHoverAction(),C.Z.on(this._$table,ep,Jc,e=>{(0,c.Z)(e.currentTarget).hasClass(js)||this._cellHoverAction({event:e,value:(0,c.Z)(e.currentTarget).data(pa)})})),"single"!==i&&(this._createWeekNumberCellClickAction(),C.Z.on(this._$table,eo,".".concat(Yc),e=>{var t=(0,c.Z)(e.currentTarget).closest("tr"),a=t.find(".".concat(Ys)).first().data(pa),r=t.find(".".concat(Ys)).last().data(pa),n=[...L.getDatesOfInterval(a,r,864e5),r];this._weekNumberCellClickAction({event:e,rowDates:n})}))},_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler(){var i=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(i)?this._getDefaultDisabledDatesHandler(i):i||E.ZT},_getDefaultDisabledDatesHandler:i=>E.ZT,_isTodayCell:et,_isDateOutOfRange:et,isDateDisabled(i){var e={date:i,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:et,_isStartDayOfMonth:et,_isEndDayOfMonth:et,_getCellText:et,_getFirstCellData:et,_getNextCellData:et,_renderContouredDate(i){if(this.option("focusStateEnabled")){i=i||this.option("contouredDate");var e=this._getContouredCell(),t=this._getCellByDate(i);e.removeClass(Js),i&&t.addClass(Js)}},_getContouredCell(){return this._$table.find(".".concat(Js))},_renderValue(){if(this.option("allowValueSelection")){var i=this.option("value");Array.isArray(i)||(i=[i]),this._updateSelectedClass(i)}},_updateSelectedClass(i){var e;this._isRangeMode()&&!this._isMonthView()||(null===(e=this._$selectedCells)||void 0===e||e.forEach(t=>{t.removeClass(jc)}),this._$selectedCells=i.map(t=>this._getCellByDate(t)),this._$selectedCells.forEach(t=>{t.addClass(jc)}))},_renderRange(){var i,e,t,a,r,n,s,o,{allowValueSelection:l,value:d,range:u}=this.option();!l||!this._isRangeMode()||!this._isMonthView()||(null===(i=this._$rangeCells)||void 0===i||i.forEach(h=>{h.removeClass(qc)}),null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach(h=>{h.removeClass(qs)}),null===(t=this._$rangeStartHoverCell)||void 0===t||t.removeClass(Xs),null===(a=this._$rangeEndHoverCell)||void 0===a||a.removeClass(Qs),null===(r=this._$rangeStartDateCell)||void 0===r||r.removeClass(Xc),null===(n=this._$rangeEndDateCell)||void 0===n||n.removeClass(Qc),this._$rangeCells=u.map(h=>this._getCellByDate(h)),this._$rangeStartDateCell=this._getCellByDate(d[0]),this._$rangeEndDateCell=this._getCellByDate(d[1]),this._$rangeCells.forEach(h=>{h.addClass(qc)}),null===(s=this._$rangeStartDateCell)||void 0===s||s.addClass(Xc),null===(o=this._$rangeEndDateCell)||void 0===o||o.addClass(Qc))},_renderHoveredRange(){var i,e,t,a,r,{allowValueSelection:n,hoveredRange:s}=this.option();!n||!this._isRangeMode()||!this._isMonthView()||(null===(i=this._$hoveredRangeCells)||void 0===i||i.forEach(o=>{o.removeClass(qs)}),null===(e=this._$rangeStartHoverCell)||void 0===e||e.removeClass(Xs),null===(t=this._$rangeEndHoverCell)||void 0===t||t.removeClass(Qs),this._$hoveredRangeCells=s.map(o=>this._getCellByDate(o)),this._$rangeStartHoverCell=this._getCellByDate(s[0]),this._$rangeEndHoverCell=this._getCellByDate(s[s.length-1]),this._$hoveredRangeCells.forEach(o=>{o.addClass(qs)}),null===(a=this._$rangeStartHoverCell)||void 0===a||a.addClass(Xs),null===(r=this._$rangeEndHoverCell)||void 0===r||r.addClass(Qs))},_isMonthView(){return"month"===this.option("zoomLevel")},_isRangeMode(){return"range"===this.option("selectionMode")},getCellAriaLabel(i){return this._getCellText(i)},_getFirstAvailableDate(){var i=this.option("date"),e=this.option("min");return i=L.getViewFirstCellDate(this._getViewName(),i),new Date(e&&i<e?e:i)},_getCellByDate:et,isBoundary:et,_optionChanged(i){var{name:e,value:t}=i;switch(e){case"value":this._renderValue();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(t);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(i)}}});const Or=OT;var FT={month:Or.inherit({_getViewName:()=>"month",_getCurrentDateFormat:()=>"longdate",_getDefaultOptions(){return(0,f.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl(){this.callBase(),this._renderHeader()},_renderBody(){this.callBase(),this._$table.find(".".concat("dx-calendar-other-view")).addClass("dx-calendar-other-month")},_renderFocusTarget:E.ZT,getCellAriaLabel:i=>H.format(i,"longdate"),_renderHeader(){var i=(0,c.Z)("<tr>"),e=(0,c.Z)("<thead>").append(i);this._$table.prepend(e);for(var t=0,a=this.option("colCount");t<a;t++)this._renderHeaderCell(t,i);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(i)},_renderHeaderCell(i,e){var{firstDayOfWeek:t}=this.option(),{full:a,abbreviated:r}=this._getDayCaption(t+i),n=(0,c.Z)("<th>").attr({scope:"col",abbr:a}).text(r);e.append(n)},_renderWeekHeaderCell(i){var e=(0,c.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});i.prepend(e)},_renderWeekNumberCell(i){var{showWeekNumbers:e,cellTemplate:t,selectionMode:a,selectWeekOnClick:r}=this.option();if(e){var n=this._getWeekNumber(i.prevCellDate),s=Z.Z.createElement("td"),o=(0,c.Z)(s);s.className="dx-calendar-week-number-cell","single"!==a&&r&&o.addClass("dx-calendar-week-selection"),t?t.render(this._prepareCellTemplateData(n,-1,o)):s.innerHTML=n,i.row.prepend(s),this.setAria({role:"gridcell",label:"Week ".concat(n)},o)}},_getWeekNumber(i){var{weekNumberRule:e,firstDayOfWeek:t}=this.option();return L.getWeekNumber(i,t,"auto"===e?1===t?"firstFourDays":"firstDay":e)},getNavigatorCaption(){return H.format(this.option("date"),"monthandyear")},_isTodayCell(i){var e=this.option("_todayDate")();return L.sameDate(i,e)},_isDateOutOfRange(i){var e=this.option("min"),t=this.option("max");return!L.dateInRange(i,e,t,"date")},_isOtherView(i){return i.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth(i){return L.sameDate(i,L.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth(i){return L.sameDate(i,L.getLastMonthDate(this.option("date")))},_getCellText:i=>H.format(i,"d"),_getDayCaption(i){var t=i%this.option("colCount");return{full:H.getDayNames()[t],abbreviated:H.getDayNames("abbreviated")[t]}},_getFirstCellData(){var{firstDayOfWeek:i}=this.option(),e=L.getFirstMonthDate(this.option("date")),t=i-e.getDay(),a=this.option("colCount");return t>=0&&(t-=a),e.setDate(e.getDate()+t),e},_getNextCellData:i=>((i=new Date(i)).setDate(i.getDate()+1),i),_getCellByDate(i){return this._$table.find("td[data-value='".concat(he.serializeDate(i,L.getShortDateFormat()),"']"))},isBoundary(i){return L.sameMonthAndYear(i,this.option("min"))||L.sameMonthAndYear(i,this.option("max"))},_getDefaultDisabledDatesHandler:i=>function(e){if(i.some(a=>L.sameDate(a,e.date)))return!0}}),year:Or.inherit({_getViewName:()=>"year",_getCurrentDateFormat:()=>"monthandyear",_isTodayCell(i){var e=this.option("_todayDate")();return L.sameMonthAndYear(i,e)},_isDateOutOfRange(i){return!L.dateInRange(i,L.getFirstMonthDate(this.option("min")),L.getLastMonthDate(this.option("max")))},_isOtherView:()=>!1,_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:i=>H.getMonthNames("abbreviated")[i.getMonth()],_getFirstCellData(){var i=this.option("date"),e=new Date(i);return e.setDate(1),e.setMonth(0),e},_getNextCellData:i=>((i=new Date(i)).setMonth(i.getMonth()+1),i),_getCellByDate(i){var e=new Date(i);return e.setDate(1),this._$table.find("td[data-value='".concat(he.serializeDate(e,L.getShortDateFormat()),"']"))},getCellAriaLabel:i=>H.format(i,"monthandyear"),getNavigatorCaption(){return H.format(this.option("date"),"yyyy")},isBoundary(i){return L.sameYear(i,this.option("min"))||L.sameYear(i,this.option("max"))},_renderWeekNumberCell:E.ZT}),decade:Or.inherit({_getViewName:()=>"decade",_isTodayCell(i){var e=this.option("_todayDate")();return L.sameYear(i,e)},_isDateOutOfRange(i){var e=this.option("min"),t=this.option("max");return!L.dateInRange(i.getFullYear(),e&&e.getFullYear(),t&&t.getFullYear())},_isOtherView(i){var e=new Date(i);return e.setMonth(1),!L.sameDecade(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:i=>H.format(i,"yyyy"),_getFirstCellData(){var i=L.getFirstYearInDecade(this.option("date"))-1;return L.createDateWithFullYear(i,0,1)},_getNextCellData:i=>((i=new Date(i)).setFullYear(i.getFullYear()+1),i),getNavigatorCaption(){var i=this.option("date"),e=L.getFirstYearInDecade(i),t=new Date(i),a=new Date(i);return t.setFullYear(e),a.setFullYear(e+9),"".concat(H.format(t,"yyyy"),"-").concat(H.format(a,"yyyy"))},_isValueOnCurrentView:(i,e)=>L.sameDecade(i,e),_getCellByDate(i){var e=new Date(i);return e.setDate(1),e.setMonth(0),this._$table.find("td[data-value='".concat(he.serializeDate(e,L.getShortDateFormat()),"']"))},isBoundary(i){return L.sameDecade(i,this.option("min"))||L.sameDecade(i,this.option("max"))},_renderWeekNumberCell:E.ZT}),century:Or.inherit({_getViewName:()=>"century",_isTodayCell(i){var e=this.option("_todayDate")();return L.sameDecade(i,e)},_isDateOutOfRange(i){var e=L.getFirstYearInDecade(i),t=L.getFirstYearInDecade(this.option("min")),a=L.getFirstYearInDecade(this.option("max"));return!L.dateInRange(e,t,a)},_isOtherView(i){var e=new Date(i);return e.setMonth(1),!L.sameCentury(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText(i){var e=H.format(i,"yyyy"),t=new Date(i);return t.setFullYear(t.getFullYear()+9),"".concat(e," - ").concat(H.format(t,"yyyy"))},_getFirstCellData(){var i=L.getFirstDecadeInCentury(this.option("date"))-10;return L.createDateWithFullYear(i,0,1)},_getNextCellData:i=>((i=new Date(i)).setFullYear(i.getFullYear()+10),i),_getCellByDate(i){var e=new Date(i);return e.setDate(1),e.setMonth(0),e.setFullYear(L.getFirstYearInDecade(e)),this._$table.find("td[data-value='".concat(he.serializeDate(e,L.getShortDateFormat()),"']"))},getNavigatorCaption(){var i=this.option("date"),e=L.getFirstDecadeInCentury(i),t=new Date(i),a=new Date(i);return t.setFullYear(e),a.setFullYear(e+99),"".concat(H.format(t,"yyyy"),"-").concat(H.format(a,"yyyy"))},isBoundary(i){return L.sameCentury(i,this.option("min"))||L.sameCentury(i,this.option("max"))},_renderWeekNumberCell:E.ZT})};const MT=FT;var to="dx-calendar",tp="dx-calendar-view",rp=(0,D.V4)(Uc.u,"dxCalendar"),Si={month:3,year:2,decade:1,century:0},jT={SingleSelection:class ST extends Us{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,t){this.skipNavigate(),this.dateValue(e,t)}updateAriaSelected(e,t){e??(e=[this.dateOption("value")]),t??(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}},MultipleSelection:class oT extends Us{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multiple",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){var a=[...this.dateOption("value")],r=a.findIndex(n=>n?.toDateString()===e.toDateString());r>-1?a.splice(r,1):a.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(a,t)}updateAriaSelected(e,t){e??(e=this.dateOption("value")),t??(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){var e=this.dateOption("value").filter(t=>t);return this._getLowestDateInArray(e)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){var{rowDates:t,event:a}=e,r=t.filter(n=>!this._isDateDisabled(n));this.dateValue(r,a)}},RangeSelection:class wT extends Us{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){var e=this._getValue();return{value:e,range:this._getDaysInRange(e[0],e[1]),selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){var[a,r]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,!0===this.calendar.option("_allowChangeSelectionOrder")?(this.calendar._valueSelected=!0,"startDate"===this.calendar.option("_currentSelection")?this.calendar._convertToDate(e)>this.calendar._convertToDate(r)?this.dateValue([e,null],t):this.dateValue([e,r],t):this.calendar._convertToDate(e)>=this.calendar._convertToDate(a)?this.dateValue([a,e],t):this.dateValue([e,null],t)):this.dateValue(!a||r?[e,null]:a<e?[a,e]:[e,a],t)}updateAriaSelected(e,t){e??(e=this._getValue()),t??(t=[]),super.updateAriaSelected(e,t)}processValueChanged(e,t){super.processValueChanged(e,t);var a=this._getRange();this._updateViewsOption("range",a)}getDefaultCurrentDate(){var{_allowChangeSelectionOrder:e,_currentSelection:t}=this.calendar.option(),a=this.dateOption("value");if(e){if("startDate"===t&&a[0])return a[0];if("endDate"===t&&a[1])return a[1]}var r=a.filter(n=>n);return this._getLowestDateInArray(r)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){var e=this.dateOption("value");if(!e.length)return e;var[t,a]=e;return t&&a&&t>a&&([t,a]=[a,t]),[t,a]}_getRange(){var[e,t]=this._getValue();return this._getDaysInRange(e,t)}_getDaysInRange(e,t){if(!e||!t)return[];var{currentDate:a,viewsCount:r}=this.calendar.option(),n=this.calendar._isAdditionalViewDate(a),s=L.getFirstMonthDate(L.addDateInterval(a,"month",n?-2:-1)),o=L.getLastMonthDate(L.addDateInterval(a,"month",n?1:r)),l=new Date(Math.max(s,e)),d=new Date(Math.min(o,t));return[...L.getDatesOfInterval(l,d,864e5),d]}_cellHoverHandler(e){var t=this._isMaxZoomLevel(),[a,r]=this._getValue(),{_allowChangeSelectionOrder:n,_currentSelection:s}=this.calendar.option();if(t){if(!a||r||n&&"startDate"===s){if(a||!r||n&&"endDate"===s){if(a&&r){if("startDate"===s&&e.value<a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,a));if("endDate"===s&&e.value>r)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(r,e.value))}}else if(e.value<r)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,r))}else if(e.value>a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(a,e.value));this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){var{rowDates:t,event:a}=e,r=t.filter(s=>!this._isDateDisabled(s));this.dateValue(r.length?[r[0],r[r.length-1]]:[null,null],a)}}},np=wi.Z.inherit({_activeStateUnit:".".concat("dx-calendar-cell"),_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:"month",maxZoomLevel:"month",minZoomLevel:"century",selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}}])},_supportedKeys(){return(0,f.l)(this.callBase(),{rightArrow(i){i.preventDefault(),(0,D.j1)(i)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow(i){i.preventDefault(),(0,D.j1)(i)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow(i){if(i.preventDefault(),(0,D.j1)(i))this._navigateUp();else{if(ge.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow(i){if(i.preventDefault(),(0,D.j1)(i))this._navigateDown();else{if(ge.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home(i){i.preventDefault();var e=this.option("zoomLevel"),t=this.option("currentDate"),a=this._dateOption("min");if(!this._view.isDateDisabled(t)){var r=L.sameView(e,t,a)?a:L.getViewFirstCellDate(e,t);this._moveToClosestAvailableDate(r)}},end(i){i.preventDefault();var e=this.option("zoomLevel"),t=this.option("currentDate"),a=this._dateOption("max");if(!this._view.isDateDisabled(t)){var r=L.sameView(e,t,a)?a:L.getViewLastCellDate(e,t);this._moveToClosestAvailableDate(r)}},pageUp(i){i.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown(i){i.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:E.ZT,enter:this._enterKeyHandler})},_enterKeyHandler(i){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){var e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,i)}}else this._navigateDown()},_getSerializationFormat(i){var e=this.option(i||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,_.kE)(e)?"number":(0,_.HD)(e)?he.getDateSerializationFormat(e):void 0},_convertToDate:i=>he.deserializeDate(i),_dateValue(i,e){if(e){if("keydown"===e.type){var t=this._view._getContouredCell().get(0);e.target=t}this._saveValueChangeEvent(e)}this._dateOption("value",i)},_dateOption(i,e){var t="value"===i&&!this._isSingleMode(),a=this.option("value");if(1===arguments.length)return t?(a??[]).map(s=>this._convertToDate(s)):this._convertToDate(this.option(i));var r=this._getSerializationFormat(i),n=t?e?.map(s=>he.serializeDate(s,r))||[]:he.serializeDate(e,r);this.option(i,n)},_isSingleMode(){return"single"===this.option("selectionMode")},_shiftDate(i,e,t,a){switch(i){case"month":e.setDate(e.getDate()+t*a);break;case"year":e.setMonth(e.getMonth()+t*a);break;case"decade":e.setFullYear(e.getFullYear()+t*a);break;case"century":e.setFullYear(e.getFullYear()+10*t*a)}},_moveCurrentDateByOffset(i){var e=this.option("currentDate"),t=new Date(e),a=this.option("zoomLevel");this._shiftDate(a,t,i,1);for(var r=this._getMaxDate(),n=this._getMinDate(),s=this._areDatesInNeighborView(a,t,e),o=(0,ie.Z2)(t,n,r)&&s,l=new Date(t);o;){if(!this._view.isDateDisabled(l)){t=l;break}this._shiftDate(a,l,i,1),s=this._areDatesInNeighborView(a,l,e),o=(0,ie.Z2)(l,n,r)&&s}if(this._view.isDateDisabled(e)||this._view.isDateDisabled(t)){var d=i>0?1:-1;(1===d?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(t):this._waitRenderView(d)}else this._skipNavigate=!0,this.option("currentDate",t)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(i,e,t){switch(i){case"month":return e.getMonth()===t.getMonth();case"year":return e.getYear()===t.getYear();case"decade":return parseInt(e.getYear()/10)===parseInt(t.getYear()/10);case"century":return parseInt(e.getYear()/100)===parseInt(t.getYear()/100)}},_areDatesInNeighborView(i,e,t){switch(i){case"month":return a=e.getMonth(),r=t.getMonth(),n=Math.abs(a-r),Math.min(n,12-n)<=1;case"year":return Math.abs(e.getYear()-t.getYear())<=1;case"decade":return Math.abs(e.getYear()-t.getYear())<=10;case"century":return Math.abs(e.getYear()-t.getYear())<=100}var a,r,n},_moveToClosestAvailableDate(){var s,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),e=new Date(i),t=this.option("zoomLevel"),a=!this._isDateNotAvailable(e),r=a,n=a,l=new Date(e),d=new Date(e);do{if(r){e=l;break}if(n){e=d;break}this._shiftDate(t,l,1,1),this._shiftDate(t,d,1,-1),s=this._areDatesInSameView(t,l,i),o=this._areDatesInSameView(t,d,i),r=s&&!this._isDateNotAvailable(l),n=o&&!this._isDateNotAvailable(d)}while(s||o);this.option("currentDate",e)},_isDateNotAvailable(i){var e=this._getMaxDate(),t=this._getMinDate();return!(0,ie.Z2)(i,t,e)||this._view.isDateDisabled(i)},_init(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy(){var i=this._getSelectionStrategyName();(!this._selectionStrategy||this._selectionStrategy.NAME!==i)&&(this._selectionStrategy=new(0,jT[i])(this))},_refreshSelectionStrategy(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel(){var i=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),t=this.option("zoomLevel");Si[e]<Si[i]||(Si[t]>Si[e]?this.option("zoomLevel",e):Si[t]<Si[i]&&this.option("zoomLevel",i))},_initCurrentDate(){var i,e=null!==(i=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate()))&&void 0!==i?i:this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",e)},_getNormalizedDate(i){return i=L.normalizeDate(i,this._getMinDate(),this._getMaxDate()),(0,_.$K)(i)?this._getDate(i):i},_initActions(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates(){this._templateManager.addDefaultTemplates({cell:new Ws.k(i=>{var e=i.model;(0,c.Z)(i.container).append((0,c.Z)("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate(i){if(ge.Z.isAnimating(this._$viewsWrapper)&&ge.Z.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())this.option("currentDate",new Date);else{var a=this._getNormalizedDate(i);if(i.getTime()===a.getTime()){var r=this._getViewsOffset(this._view.option("date"),a);0!==r&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(r=0),this._view&&0!==r&&!this._suppressNavigation?this._additionalView?r>2||r<-1?(this._refreshViews(),this._setViewContoured(a),this._updateAriaId(a),this._renderNavigator()):1===r&&this._skipNavigate?(this._setViewContoured(a),this._updateAriaId(a)):this._navigate(r,a):this._navigate(r,a):(this._renderNavigator(),this._setViewContoured(a),this._updateAriaId(a)),this._skipNavigate=!1}else this.option("currentDate",new Date(a))}},_isAdditionalViewDate(i){return!!this._additionalView&&i>=this._additionalView._getFirstAvailableDate()},_getActiveView(i){return this._isAdditionalViewDate(i)?this._additionalView:this._view},_setViewContoured(i){var e;(this.option("skipFocusCheck")||(0,c.Z)(this._$viewsWrapper).is(":focus"))&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null),(this._isAdditionalViewDate(i)?this._additionalView:this._view).option("contouredDate",i))},_getMinDate(){return this.option("_rangeMin")||(this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min)},_getMaxDate(){return this.option("_rangeMax")||(this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max)},_getViewsOffset(i,e){var a,t=this.option("zoomLevel");if("month"===t)return this._getMonthsOffset(i,e);switch(t){case"century":a=100;break;case"decade":a=10;break;default:a=1}return parseInt(e.getFullYear()/a)-parseInt(i.getFullYear()/a)},_getMonthsOffset:(i,e)=>12*(e.getFullYear()-i.getFullYear())+(e.getMonth()-i.getMonth()),_waitRenderView(i){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var e=this._getDateByOffset(i*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection(){return this.option("rtlEnabled")?-1:1},_getDateByOffset(i,e){var t=(e=this._getDate(e??this.option("currentDate"))).getDate(),a=L.getDifferenceInMonth(this.option("zoomLevel"))*i;e.setDate(1),e.setMonth(e.getMonth()+a);var r=L.getLastMonthDate(e).getDate();return e.setDate(t>r?r:t),e},_focusTarget(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup(){this._renderSubmitElement();var i=this.$element();i.addClass(to),i.toggleClass("dx-calendar-range","range"===this.option("selectionMode")),this._renderBody(),i.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),i.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody(){this._$viewsWrapper||(this.$body=(0,c.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,c.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews(){this.$element().addClass("".concat(tp,"-").concat(this.option("zoomLevel")));var{currentDate:i,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(i),(0,B.Ym)()){var t=this._getDateByOffset(-1,i);this._beforeView=this._isViewAvailable(t)?this._renderSpecificView(t):null;var a=this._getDateByOffset(e,i);a.setDate(1),this._afterView=this._isViewAvailable(a)?this._renderSpecificView(a):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,i))),this._translateViews()},_renderSpecificView(i){var{zoomLevel:e}=this.option(),t=MT[e],a=(0,c.Z)("<div>").appendTo(this._$viewsWrapper),r=this._viewConfig(i);return this._createComponent(a,t,r)},_viewConfig(i){var e,t=this.option("disabledDates");return t=(0,_.mf)(t)?this._injectComponent(t.bind(this)):t,(0,V.Z)((0,V.Z)({},this._selectionStrategy.getViewOptions()),{date:i,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:null!==(e=this.option("firstDayOfWeek"))&&void 0!==e?e:H.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:t,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){C.Z.off(this._$viewsWrapper,rp),"range"===this.option("selectionMode")&&C.Z.on(this._$viewsWrapper,rp,null,()=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent(i){var e=this;return function(t){return(0,f.l)(t,{component:e}),i(t)}},_isViewAvailable(i){var e=this.option("zoomLevel"),t=L.getViewMinBoundaryDate(e,this._getMinDate()),a=L.getViewMaxBoundaryDate(e,this._getMaxDate());return L.dateInRange(i,t,a)},_translateViews(){var{viewsCount:i}=this.option();(0,de.pB)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,i),this._moveViewElement(this._additionalView,1)},_moveViewElement(i,e){i&&(0,de.pB)(i.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition(i){var e=this.option("rtlEnabled")?-1:1;return"".concat(100*i*e,"%")},_cellClickHandler(i){var e=this.option("zoomLevel"),t=L.getViewDown(e),a=this._isMaxZoomLevel();if(t&&!a)this._navigateDown(i.event.currentTarget);else{var r=this._updateTimeComponent(i.value);this._selectionStrategy.selectValue(r,i.event),this._cellClickAction(i)}},_updateTimeComponent(i){var e=new Date(i),t=this._dateOption("value");return t&&this._isSingleMode()&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())),e},_isMaxZoomLevel(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown(i){var e=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var t=L.getViewDown(e);if(t){var a=this._view.option("contouredDate")||this._view.option("date");i&&(a=(0,c.Z)(i).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",a),this.option("zoomLevel",t),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator(){this._navigator||(this._navigator=new fT((0,c.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig(){var{focusStateEnabled:i,rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:i,rtlEnabled:e,tabIndex:void 0}},_navigatorClickHandler(i){var{currentDate:e,viewsCount:t}=this.option(),a=i.direction;if(t>1){var r=this._isAdditionalViewDate(e);(r&&a<0||!r&&a>0)&&(a*=2)}var s=this._getDateByOffset(a,e);this._moveToClosestAvailableDate(s)},_navigateUp(){var i=this.option("zoomLevel"),e=L.getViewUp(i);!e||this._isMinZoomLevel(i)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel(i){var e=this._getMinDate(),t=this._getMaxDate();return L.sameView(i,e,t)||this.option("minZoomLevel")===i},_updateButtonsVisibility(){this._navigator.toggleButton("next",!(0,_.$K)(this._afterView)),this._navigator.toggleButton("prev",!(0,_.$K)(this._beforeView))},_renderSwipeable(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),Gs,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler(i){ge.Z.stop(this._$viewsWrapper,!0);var{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),i.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,i.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor(i){(0,c.Z)(".".concat("dx-gesture-cover")).css("cursor",i)},_getRequiredView(i){var e,t=this.option("rtlEnabled");return"next"===i?e=t?this._beforeView:this._afterView:"prev"===i&&(e=t?this._afterView:this._beforeView),e},_swipeUpdateHandler(i){var{offset:e}=i.event;(0,de.pB)(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler(i){this._toggleGestureCoverCursor("auto");var{currentDate:e,rtlEnabled:t}=this.option(),{targetOffset:a}=i.event,r=a?a/Math.abs(a):0,s=this._isAdditionalViewDate(e)&&(t?-1===r:1===r);if(0!==r){var o=-r*this._getRtlCorrection()*(s?2:1),l=this._getDateByOffset(o);this._isDateInInvalidRange(l)&&(l=r>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",l)}else this._animateWrapper(0,250)},_viewWidth(){return this._viewWidthValue||(this._viewWidthValue=(0,b.dz)(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption(i){i*=this._getRtlCorrection();var t,a,e=this.option("viewsCount")>1;i>.5&&this._beforeView?(t=this._beforeView,a=e&&this._view):i<-.5&&this._afterView?(t=e?this._additionalView:this._afterView,a=e?this._afterView:null):(t=this._view,a=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(t,a))},_getViewsCaption(i,e){var t=i.getNavigatorCaption(),{viewsCount:a}=this.option();if(a>1&&e){var r=e.getNavigatorCaption();t="".concat(t," - ").concat(r)}return t},_isDateInInvalidRange(i){if(!this._view.isBoundary(i)){var e=this._getMinDate(),t=this._getMaxDate(),a=L.normalizeDate(i,e,t);return a===e||a===t}},_renderFooter(){var i=this.option("showTodayButton");if(i){var e=this._createComponent((0,c.Z)("<div>"),ye.Z,{focusStateEnabled:this.option("focusStateEnabled"),text:y.Z.format("dxCalendar-todayButtonText"),onClick:t=>{this._toTodayView(t)},type:(0,z.dC)()?"normal":"default",stylingMode:(0,z.dC)()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,c.Z)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",i)},_renderSubmitElement(){this._$submitElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(i){var e=this._convertToDate(i);this._getSubmitElement().val(he.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement(){return this._$submitElement},_animateShowView(){ge.Z.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(ge.Z.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:(i,e,t,a)=>ge.Z.animate(i.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:t,opacity:t},duration:a}),_navigate(i,e){if(0!==i&&1!==Math.abs(i)&&this._isViewAvailable(e)){var t=this._renderSpecificView(e);i>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=t):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=t),this._translateViews()}var n=-this._getRtlCorrection()*(i>0?1:i<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==n&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(i,e):this._animateWrapper(n,250).done(this._wrapperAnimationEndHandler.bind(this,i,e)))},_animateWrapper(i,e){return ge.Z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:i},duration:e})},_getDate:i=>new Date(i),_toTodayView(i){var e=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(e,i.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,i.event),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler(i,e){this._rearrangeViews(i),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews(i){var e;if(0!==i){var a,r,n,s,o,{viewsCount:t}=this.option();if(i<0?(a=1,r="_beforeView",n="_afterView",s="_view",o=1===t?"_view":"_additionalView"):(a=-1,r="_afterView",n="_beforeView",s=1===t?"_view":"_additionalView",o="_view"),this[r]){var l=this[r].option("date");null===(e=this[n])||void 0===e||e.$element().remove(),this[n]=this._renderSpecificView(this._getDateByOffset(a*t,l)),this[o].$element().remove(),1===t?this[o]=this[r]:(this[o]=this[s],this[s]=this[r]);var d=this._getDateByOffset(-a,l);this[r]=this._isViewAvailable(d)?this._renderSpecificView(d):null}}},_resetLocation(){(0,de.pB)(this._$viewsWrapper,{left:0,top:0})},_clean(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache(){delete this._viewWidthValue},_disposeViews(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged(){this._translateViews()},_shouldSkipFocusEvent(i){var{target:e,relatedTarget:t}=i;return(0,c.Z)(e).parents(".".concat(to)).length&&(0,c.Z)(t).parents(".".concat(to)).length},_focusInHandler(i){(0,c.Z)(i.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),!this._shouldSkipFocusEvent(i)&&(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler(i){var e;(0,c.Z)(i.target).is(this._$viewsWrapper)&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null)),!this._shouldSkipFocusEvent(i)&&(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption(i,e){var t,a,r;this._view.option(i,e),null===(t=this._additionalView)||void 0===t||t.option(i,e),null===(a=this._beforeView)||void 0===a||a.option(i,e),null===(r=this._afterView)||void 0===r||r.option(i,e)},_setViewsMinOption(i){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(i)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption(i){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(i)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels(){var i=this.option("zoomLevel");i=i.charAt(0).toUpperCase()+i.slice(1);var e=this._navigator._caption.option("text"),t=y.Z.format("dxCalendar-previous".concat(i,"ButtonLabel")),a=y.Z.format("dxCalendar-caption".concat(i,"Label")),r=y.Z.format("dxCalendar-next".concat(i,"ButtonLabel"));this.setAria("label",t,this._navigator._prevButton.$element()),this.setAria("label","".concat(e,". ").concat(a),this._navigator._caption.$element()),this.setAria("label",r,this._navigator._nextButton.$element())},_updateAriaSelected(i,e){e.forEach(t=>{this.setAria("selected",void 0,this._view._getCellByDate(t))}),i.forEach(t=>{this.setAria("selected",!0,this._view._getCellByDate(t))}),this.option("viewsCount")>1&&(e.forEach(t=>{this.setAria("selected",void 0,this._additionalView._getCellByDate(t))}),i.forEach(t=>{this.setAria("selected",!0,this._additionalView._getCellByDate(t))}))},_updateAriaId(i){i=i??this.option("currentDate");var e="dx-".concat(new ve.Z),a=this._getActiveView(i)._getCellByDate(i);this.setAria("id",e,a),this.setAria("activedescendant",e),this._onContouredChanged(e)},_suppressingNavigation(i,e){this._suppressNavigation=!0,i.apply(this,e),delete this._suppressNavigation},_optionChanged(i){var{value:e,previousValue:t}=i;switch(i.name){case"width":this.callBase(i),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(t)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass("".concat(tp,"-").concat(t)),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(e,t),this._setSubmitValue(e),this.callBase(i);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(i)}},getContouredDate(){return this._view.option("contouredDate")}});(0,X.Z)("dxCalendar",np);const qT=np;var{abstract:Lr}=xi.Z,XT=xi.Z.inherit({ctor(i){this.dateBox=i},widgetOption(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget(i){i=i||(0,c.Z)("<div>"),this._widget=this._createWidget(i),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget(i){var e=this._getWidgetName(),t=this._getWidgetOptions();return this.dateBox._createComponent(i,e,t)},_getWidgetOptions:Lr,_getWidgetName:Lr,getDefaultOptions:()=>({mode:"text"}),getDisplayFormat:Lr,supportedKeys:E.ZT,getKeyboardListener:E.ZT,customizeButtons:E.ZT,getParsedText:(i,e)=>H.parse(i,e)||H.parse(i),renderInputMinMax:E.ZT,renderOpenedState(){this._updateValue()},popupConfig:Lr,_dimensionChanged(){var i;null===(i=this._getPopup())||void 0===i||i.repaint()},renderPopupContent(){var i=this._getPopup();this._renderWidget();var e=i.$content().parent();C.Z.off(e,"mousedown"),C.Z.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup(i){i.preventDefault()},_getWidgetContainer(){return this._getPopup().$content()},_getPopup(){return this.dateBox._popup},popupShowingHandler:E.ZT,popupHiddenHandler:E.ZT,_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:E.ZT,getDefaultDate:()=>new Date,textChangedHandler:E.ZT,renderValue(){this.dateBox.option("opened")&&this._updateValue()},getValue(){return this._widget.option("value")},isAdaptivityChanged:()=>!1,dispose(){var i=this._getPopup();i&&i.$content().empty()},dateBoxValue(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}});const Pr=XT;var JT=Pr.inherit({NAME:"Calendar",getDefaultOptions(){return(0,f.l)(this.callBase(),{todayButtonText:y.Z.format("dxCalendar-todayButtonText")})},supportedKeys(){var i=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow(){if(this.option("opened"))return!0},leftArrow(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var t=this._getContouredValue(),a=this._lastActionElement,r=this._closeDropDownByEnter();return r&&t&&"calendar"===a&&this.dateBoxValue(t,e),r&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!r}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:i,end:i}},getDisplayFormat:i=>i||"shortdate",_closeDropDownByEnter:()=>!0,_getWidgetName:()=>qT,_getContouredValue(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions(){var i=this.dateBox.option("disabledDates");return(0,f.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:(0,_.mf)(i)?this._injectComponent(i.bind(this.dateBox)):i,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent(i){var e=this;return function(t){return(0,f.l)(t,{component:e.dateBox}),i(t)}},_refreshActiveDescendant(i){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",i.actionValue)},_getTodayButtonConfig(){var i=this.dateBox.option("buttonsLocation"),t="default"===i?["bottom","center"]:(0,E.Um)(i),a=(0,z.x2)()?"text":"outlined";return{widget:"dxButton",toolbar:t[0],location:"after"===t[1]?"before":t[1],options:{onClick:r=>{this._widget._toTodayView(r)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:a}}},_isCalendarVisible(){var{calendarOptions:i}=this.dateBox.option();return(0,_.Qr)(i)||!1!==i.visible},_getPopupToolbarItems(i){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...i]:i},popupConfig:i=>(0,f.l)(!0,i,{position:{collision:"flipfit flip"},width:"auto"}),_valueChangedHandler(i){var{value:e}=i,t=i.previousValue;L.sameDate(e,t)&&L.sameHoursAndMinutes(e,t)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),i.event)},_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler(i){var{dateBox:e}=this;"instantly"===e.option("applyValueMode")&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),i.event))}});const sp=JT;var Br=T(7710),op="dxBoxItemData",rD={row:"minWidth",col:"minHeight"},nD={row:"maxWidth",col:"maxHeight"},lp={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},dp={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},sD={row:"row",col:"column"},yi=(i,e,t)=>{if(t=(0,Fe.bh)(e,t),i.style[(0,Fe.Hj)(e)]=t,!(0,B.Ym)()){if(""===t||!(0,_.$K)(t))return;var a=(0,Me.H0)(e),r="".concat(a,": ").concat(t,";");(0,Fe.A_)(i,r,!1)}};class oD extends mr.Z{_renderVisible(e,t){super._renderVisible(e),(0,_.$K)(t)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:t})}}class lD{constructor(e,t){this._$element=e,this._option=t}renderBox(){this._$element.css({display:"".concat((0,Fe.gC)("flexDirection"),"flex")}),yi(this._$element.get(0),"flexDirection",sD[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var e=this._option("align");return e in lp?lp[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var e=this._option("crossAlign");return e in dp?dp[e]:e}renderItems(e){var t=(0,Fe.gC)("flexDirection"),a=this._option("direction");(0,S.S6)(e,function(){var r=(0,c.Z)(this),n=r.data(op);r.css({display:"".concat(t,"flex")}).css(nD[a],n.maxSize||"none").css(rD[a],n.minSize||"0"),yi(r.get(0),"flexBasis",n.baseSize||0),yi(r.get(0),"flexGrow",n.ratio),yi(r.get(0),"flexShrink",(0,_.$K)(n.shrink)?n.shrink:1),r.children().each((s,o)=>{(0,c.Z)(o).css({width:"auto",height:"auto",display:"".concat((0,Fe.gC)("flexDirection"),"flex"),flexBasis:0}),yi(o,"flexGrow",1),yi(o,"flexDirection",(0,c.Z)(o)[0].style.flexDirection||"column")})})}}let up=(()=>{class i extends Br.Z{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return op}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new lD(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(t,a){this._queue.push({$item:t,config:a})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(t){for(super._renderItems(t);this._queueIsNotEmpty();){var a=this._shiftItemFromQueue();this._createComponent(a.$item,i,(0,f.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},a.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(t){var a=t.itemData&&t.itemData.node;return a?this._renderItemContentByNode(t,a):super._renderItemContent(t)}_postprocessRenderItem(t){var a=t.itemData.box;a&&this._pushItemToQueue(t.itemContent,a)}_createItemByTemplate(t,a){return a.itemData.box?t.source?t.source():(0,c.Z)():super._createItemByTemplate(t,a)}_itemOptionChanged(t,a,r,n){"visible"===a&&this._onItemStateChanged({name:a,state:r,oldState:!1!==n}),super._itemOptionChanged(t,a,r)}_optionChanged(t){switch(t.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(t)}}_itemOptions(){var t=super._itemOptions();return t.fireItemStateChangedAction=a=>{this._onItemStateChanged(a)},t}}return i.ItemClass=oD,i})();(0,X.Z)("dxBox",up);const Fr=up;var io=["year","day","month","day"],hp=["hours","minutes","seconds","milliseconds"],tt={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var i=new Date;return new Date(i.getFullYear()+50,i.getMonth(),i.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:()=>"yyyy-MM-dd",components:io},time:{getStandardPattern:()=>"HH:mm",components:hp},datetime:{getStandardPattern(){var i,e;return(e=(0,c.Z)("<input>").attr("type","datetime")).val("2000-01-01T01:01Z"),e.val()&&(i="yyyy-MM-ddTHH:mmZ"),i||(i="yyyy-MM-ddTHH:mm:ssZ"),tt.FORMATS_INFO.datetime.getStandardPattern=function(){return i},i},components:[...io,...hp]},"datetime-local":{getStandardPattern:()=>"yyyy-MM-ddTHH:mm:ss",components:[...io,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat(i,e){var t=tt.FORMATS_INFO[e].getStandardPattern();return he.serializeDate(i,t)},fromStandardDateFormat(i){var e=he.dateParser(i);return(0,_.J_)(e)?e:void 0},getMaxMonthDay:(i,e)=>new Date(i,e+1,0).getDate(),mergeDates(i,e,t){if(!e)return e||null;if(!i||isNaN(i.getTime())){var a=new Date(null);i=new Date(a.getFullYear(),a.getMonth(),a.getDate())}var r=new Date(i.valueOf());return(0,S.S6)(tt.FORMATS_INFO[t].components,function(){var s=tt.DATE_COMPONENTS_INFO[this];r[s.setter](e[s.getter]())}),r},getLongestCaptionIndex(i){var a,e=0,t=0;for(a=0;a<i.length;++a)i[a].length>t&&(e=a,t=i[a].length);return e},formatUsesMonthName:i=>H.formatUsesMonthName(i),formatUsesDayName:i=>H.formatUsesDayName(i),getLongestDate(i,e,t){var a=function(i){var e=typeof i;return"string"===e?"format":"object"===e&&void 0!==i.type?i.type:null}(i),r=9;(!a||tt.formatUsesMonthName(a))&&(r=tt.getLongestCaptionIndex(e));var n=new Date(1888,r,21,23,59,59,999);if(!a||tt.formatUsesDayName(a)){var s=n.getDate()-n.getDay()+tt.getLongestCaptionIndex(t);n.setDate(s)}return n},normalizeTime(i){i.setSeconds(0),i.setMilliseconds(0)}};tt.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter(i,e){var t=new Date(e.getTime());return t.setFullYear(i),H.format(t,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter(i,e){var t=new Date(e.getTime());return t.setDate(i),H.format(t,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:i=>H.getMonthNames()[i],startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:i=>H.format(new Date(0,0,0,i),"hour"),startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:i=>H.format(new Date(0,0,0,0,i),"minute"),startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:i=>H.format(new Date(0,0,0,0,0,i),"second"),startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:i=>H.format(new Date(0,0,0,0,0,0,i),"millisecond"),startValue:0,endValue:999}};const re=tt;var _p=function(i,e,t){fD(i,e,t)},fD=function(i,e,t){i.css("transform","rotate(".concat(e,"deg)")+" translate(0,".concat(t,"px)"))},vp=wi.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue(){return this.option("value")||new Date},_init(){this.callBase(),this.$element().addClass("dx-timeview")},_render(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox(){var i=(0,c.Z)("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(i,Fr,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock(i,e,t){this._$hourArrow=(0,c.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,c.Z)("<div>").addClass("dx-timeview-minutearrow");var a=(0,c.Z)(t);a.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",a)},_updateClock(){var i=this._getValue(),e=i.getHours()/12*360+i.getMinutes()/60*30,t=i.getMinutes()/60*360;_p(this._$hourArrow,e,this.option("_arrowOffset")),_p(this._$minuteArrow,t,this.option("_arrowOffset"))},_getBoxItems(i){var e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,c.Z)("<div>").addClass("dx-timeview-time-separator").text(H.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return i&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField(){var i=!this.option("use24HourFormat");return this._createHourBox(i),this._createMinuteBox(),i&&this._createFormat12Box(),this._createComponent((0,c.Z)("<div>").addClass("dx-timeview-field"),Fr,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(i)}).$element()},_createHourBox(i){(this._hourBox=this._createComponent((0,c.Z)("<div>"),Ns,(0,f.l)({min:-1,max:i?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:t=>this._keyboardHandler(t)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged(i){var{value:e,component:t}=i,a=this._getValue(),r=new Date(a),n=this._convertMaxHourToMin(e);t.option("value",n),this._isPM()&&(n+=12),r.setHours(n),re.normalizeTime(r),this.option("value",r)},_convertMaxHourToMin(i){var e=this.option("use24HourFormat")?24:12;return(e+i)%e},_createMinuteBox(){(this._minuteBox=this._createComponent((0,c.Z)("<div>"),Ns,(0,f.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{var{value:t,component:a}=e,r=(60+t)%60;a.option("value",r);var n=new Date(this._getValue());n.setMinutes(r),re.normalizeTime(n),this.option("value",n)}},this._getNumberBoxConfig()))).setAria("label","minutes")},_createFormat12Box(){var i=H.getPeriodNames();(this._format12=this._createComponent((0,c.Z)("<div>").addClass("dx-timeview-format12"),Wc,{items:[{value:-1,text:i[0]},{value:1,text:i[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{var{value:a}=t,r=this._getValue().getHours(),n=new Date(this._getValue());n.setHours((r+12*a)%24),this.option("value",n)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12(){if(!this.option("use24HourFormat")){var e=this._getValue().getHours();this._silentEditorValueUpdate(this._format12,e>=12?1:-1)}},_silentEditorValueUpdate(i,e){i&&(i._suppressValueChangeAction(),i.option("value",e),i._resumeValueChangeAction())},_getNumberBoxConfig(){return{showSpinButtons:!0,displayValueFormatter:i=>(i<10?"0":"")+i,stylingMode:this.option("stylingMode")}},_normalizeHours(i){return this.option("use24HourFormat")?i:i%12||12},_updateField(){var i=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,i),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged(i){i&&this._updateTime()},_optionChanged(i){switch(i.name){case"value":this._updateTime(),this.callBase(i);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(i)}}});(0,X.Z)("dxTimeView",vp);const CD=vp;var wD=(0,B.Jj)(),gp="dx-datebox-datetime-time-side",yD=sp.inherit({NAME:"CalendarWithTime",getDefaultOptions(){return(0,f.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter(){return L.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:i=>i||"shortdateshorttime",_is24HourFormat(){return H.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue(){var i=this.callBase();return this._updateDateTime(i)},_renderWidget(){this.callBase(),this._timeView=this.dateBox._createComponent((0,c.Z)("<div>"),CD,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState(){this.callBase();var i=this._getPopup();i&&i.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(()=>{this._getPopup()&&this._getPopup().repaint()},0)},isAdaptivityChanged(){var i=this._isShrinkView(),e=this._currentAdaptiveMode;return i!==e?(this._currentAdaptiveMode=i,void 0!==e):this.callBase()},_updateValue(i){var e=this.dateBoxValue();!e&&!i&&re.normalizeTime(e=new Date),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:()=>(0,b.dz)(wD)<=573,_isShrinkView(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems(){var i=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||i.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),i},renderPopupContent(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var i=this._getPopup().$content();this._box=this.dateBox._createComponent((0,c.Z)("<div>").appendTo(i),Fr,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,t,a){var r=(0,c.Z)("<div>");switch(e.name){case"calendar":r.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(gp),r.append(this._timeView.$element()));break;case"time":r.append(this._timeView.$element()),(0,c.Z)(a).addClass(gp)}return r}.bind(this)})},popupConfig(i){var e=this.callBase(i);return(0,f.l)(e,{width:"auto"})},_preventFocusOnPopup(i){(0,c.Z)(i.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime(i){var e=this._timeView.option("value");return i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i},getValue(){var i,e=null!==(i=this._widget.option("value"))&&void 0!==i?i:this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)},dispose(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});const bD=yD;var bi=T(7118);class ED{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??bi.Et}get isHorizontal(){return this.direction===bi.Xv||this.direction===bi.b$}get isVertical(){return this.direction===bi.Et||this.direction===bi.b$}get isBoth(){return this.direction===bi.b$}}var mp="dx-dateview-item";class fp extends Ch.Z{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){C.Z.on((0,c.Z)(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(this.option("showOnClick")){var e=(0,D.V4)(se.u,this.NAME),t=this._createActionByOption("onClick");C.Z.off((0,c.Z)(this.container()),e),C.Z.on((0,c.Z)(this.container()),e,a=>{t({event:a})})}}_renderItems(){var e=this.option("items")||[],t=(0,c.Z)();(0,c.Z)(this.content()).empty(),e.forEach(a=>{t=t.add((0,c.Z)("<div>").addClass(mp).append(a))}),(0,c.Z)(this.content()).append(t),this._$items=t,this.update()}_renderSelectedItemFrame(){(0,c.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,c.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,c.Z)(this.container()))}_renderSelectedValue(e){var t=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(t)}),this._renderActiveStateItem()}_fitIndex(e){var a=(this.option("items")||[]).length;return e>=a?a-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){var e=this._getItemSelector(),t=(0,D.V4)(se.u,this.NAME);C.Z.off(this.$element(),t,e),C.Z.on(this.$element(),t,e,this._itemClickHandler.bind(this))}_getItemSelector(){return".".concat(mp)}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var e=this.option("selectedIndex");(0,S.S6)(this._$items,function(t){(0,c.Z)(this).toggleClass("dx-dateview-item-selected",e===t)})}_shouldScrollToNeighborItem(){return"desktop"===N.Z.real().deviceType&&this._isWheelScrolled}_moveTo(e){var{top:t,left:a}=function ID(i,e){if((0,_.PO)(i)){var t=(0,E.IS)(i.left,i.x),a=(0,E.IS)(i.top,i.y);return{left:(0,_.$K)(t)?t:void 0,top:(0,_.$K)(a)?a:void 0}}var{isHorizontal:r,isVertical:n}=new ED(e);return{left:r&&(0,_.$K)(i)?i:void 0,top:n&&(0,_.$K)(i)?i:void 0}}(e),r=this.scrollOffset(),n={x:r.left-a,y:r.top-t};if(this._isVisible()&&(n.x||n.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;ge.Z.stop((0,c.Z)(this.content())),ge.Z.animate((0,c.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(n.y)},complete(){(0,de.Kx)((0,c.Z)(s.content())),s.handleMove({delta:n})}}),delete this._animation}else this.handleMove({delta:n})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){var t=this.option("items").length;return Math.max(Math.min(e,t-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){var r=this.scrollOffset().top-e*this._itemHeight();return this._isInNullNeighborhood(r)?e:this._fitSelectedIndexInRange(e+(r>0?1:-1))}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;var t=this.scrollOffset().top/this._itemHeight();return Math.round(t)}_endActionHandler(){var e=this.option("selectedIndex"),t=this._getNewSelectedIndex(e);t===e?this._renderSelectedValue(t):this.option("selectedIndex",t),this._isWheelScrolled=!1}_itemHeight(){var e=this._$items.first();return(0,b.Cr)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,c.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,t){this._selectedIndexChanged({value:e,previousValue:t,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){var e=this.option("selectedIndex"),t=this._fitIndex(e);t===e?this._renderActiveStateItem():this.option("selectedIndex",t)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,X.Z)("dxDateViewRoller",fp);const LD=fp;var no="dx-dateview",wp=wi.Z.inherit({_valueOption(){var i=this.option("value"),e=new Date(i);return!i||isNaN(e)?this._getDefaultDate():e},_getDefaultDate(){var i=new Date;return"date"===this.option("type")?new Date(i.getFullYear(),i.getMonth(),i.getDate()):i},_getDefaultOptions(){return(0,f.l)(this.callBase(),{minDate:re.MIN_DATEVIEW_DEFAULT_DATE,maxDate:re.MAX_DATEVIEW_DEFAULT_DATE,type:"date",value:new Date,applyCompactClass:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:i=>"desktop"!==i.deviceType,options:{applyCompactClass:!0}}])},_render(){this.callBase(),this.$element().addClass(no),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses(i,e){this.$element().addClass("".concat(no,"-").concat(i)),e&&this.$element().removeClass("".concat(no,"-").concat(e))},_toggleCompactClass(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper(){return this._$wrapper},_renderContentImpl(){this._$wrapper=(0,c.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers(){this._$rollersContainer||(this._$rollersContainer=(0,c.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var i=this;(0,S.S6)(i._rollerConfigs,e=>{var t=(0,c.Z)("<div>").appendTo(i._$rollersContainer).addClass("".concat("dx-dateviewroller","-").concat(i._rollerConfigs[e].type));i._rollers[i._rollerConfigs[e].type]=i._createComponent(t,LD,{items:i._rollerConfigs[e].displayItems,selectedIndex:i._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart(a){var r=a.component;r._toggleActive(!0),i._setActiveRoller(i._rollerConfigs[e],r.option("selectedIndex"))},onEnd(a){a.component._toggleActive(!1)},onClick(a){var r=a.component;r._toggleActive(!0),i._setActiveRoller(i._rollerConfigs[e],r.option("selectedIndex")),i._setRollerState(i._rollerConfigs[e],r.option("selectedIndex")),r._toggleActive(!1)},onSelectedIndexChanged(a){i._setRollerState(i._rollerConfigs[e],a.component.option("selectedIndex"))}})}),i._$rollersContainer.appendTo(i._wrapper())},_createRollerConfigs(i){var e=this;i=i||e.option("type"),e._rollerConfigs={},H.getFormatParts(re.FORMATS_MAP[i]).forEach(t=>{e._createRollerConfig(t)})},_createRollerConfig(i){for(var e=re.DATE_COMPONENTS_INFO[i],t=this._calculateRollerConfigValueRange(i),{startValue:a}=t,{endValue:r}=t,{formatter:n}=e,s=this._getCurrentDate(),o={type:i,setValue:e.setter,valueItems:[],displayItems:[],getIndex:d=>d[e.getter]()-a},l=a;l<=r;l++)o.valueItems.push(l),o.displayItems.push(n(l,s));o.selectedIndex=o.getIndex(s),this._rollerConfigs[i]=o},_setActiveRoller(i){var e=i&&this._rollers[i.type];(0,S.S6)(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition(){var i=this;(0,S.S6)(this._rollers,function(e){var t=i._rollerConfigs[e].getIndex(i._getCurrentDate());this.option("selectedIndex",t)})},_setRollerState(i,e){if(e!==i.selectedIndex){var t=i.valueItems[e],{setValue:a}=i,r=new Date(this._getCurrentDate()),n=r.getDate(),s=this.option("minDate"),o=this.option("maxDate");"month"===i.type?n=Math.min(n,re.getMaxMonthDay(r.getFullYear(),t)):"year"===i.type&&(n=Math.min(n,re.getMaxMonthDay(t,r.getMonth()))),r.setDate(n),r[a](t);var l=L.normalizeDate(r,s,o);r=re.mergeDates(l,r,"time"),r=L.normalizeDate(r,s,o),this.option("value",r),i.selectedIndex=e}"year"===i.type&&this._refreshRollers(),"month"===i.type&&(this._refreshRoller("day"),this._refreshRoller("hours"))},_refreshRoller(i){var e=this._rollers[i];if(e){this._createRollerConfig(i);var t=this._rollerConfigs[i];("day"===i||t.displayItems.toString()!==e.option("items").toString())&&e.option({items:t.displayItems,selectedIndex:t.selectedIndex})}},_getCurrentDate(){var i=this._valueOption(),e=this.option("minDate"),t=this.option("maxDate");return L.normalizeDate(i,e,t)},_calculateRollerConfigValueRange(i){var e=this._getCurrentDate(),t=this.option("minDate"),a=this.option("maxDate"),r=L.sameYear(e,t),n=r&&e.getMonth()===t.getMonth(),s=L.sameYear(e,a),o=s&&e.getMonth()===a.getMonth(),l=n&&e.getDate()===t.getDate(),d=o&&e.getDate()===a.getDate(),u=re.DATE_COMPONENTS_INFO[i],{startValue:h}=u,{endValue:p}=u;return"year"===i&&(h=t.getFullYear(),p=a.getFullYear()),"month"===i&&(r&&(h=t.getMonth()),s&&(p=a.getMonth())),"day"===i&&(p=re.getMaxMonthDay(e.getFullYear(),e.getMonth()),r&&n&&(h=t.getDate()),s&&o&&(p=a.getDate())),"hours"===i&&(h=l?t.getHours():h,p=d?a.getHours():p),{startValue:h,endValue:p}},_refreshRollers(){this._refreshRoller("month"),this._refreshRoller("day"),this._refreshRoller("hours")},_optionChanged(i){switch(i.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(i.value,i.previousValue);break;case"visible":this.callBase(i),i.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(i)}},_clean(){this.callBase(),delete this._$rollersContainer}});(0,X.Z)("dxDateView",wp);const kD=wp;var ND=(0,B.Jj)(),HD=Pr.inherit({NAME:"DateView",getDefaultOptions(){return(0,f.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:y.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat(i){return i||re.FORMATS_MAP[this.dateBox.option("type")]},popupConfig(i){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:i.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device(e){var{platform:t}=e;return"generic"===t||"ios"===t},options:{width:"auto",height:"auto"}},{device(e){var{platform:t}=e,{phone:a}=e;return"generic"===t&&a},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:ND}}}]}},_renderWidget(){if((0,wt.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))this._widget&&(this._widget.$element().remove(),this._widget=null);else{var i=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var e=(0,c.Z)("<div>").appendTo(i.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())}},_getWidgetName:()=>kD,renderOpenedState(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*re.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}});const ZD=HD;var zD=(0,B.Jj)(),WD={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},KD=Pr.inherit({NAME:"List",supportedKeys:()=>({space:E.ZT,home:E.ZT,end:E.ZT}),getDefaultOptions(){return(0,f.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:i=>i||"shorttime",popupConfig:i=>i,getValue(){var i=this._widget.option("selectedIndex");return-1===i?this.dateBox.option("value"):this._getDateByItemData(this._widgetItems[i])},useCurrentDateByDefault:()=>!0,getDefaultDate:()=>new Date(null),popupShowingHandler(){this.dateBox._dimensionChanged()},_renderWidget(){this.callBase(),this._refreshItems()},_getWidgetName:()=>ca,_getWidgetOptions(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant(i){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",i.actionValue)},_refreshItems(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue(){var i=this.dateBoxValue(),e=this._getDateIndex(i);-1===e?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex(i){for(var e=-1,t=0,a=this._widgetItems.length;t<a;t++)if(this._areDatesEqual(i,this._widgetItems[t])){e=t;break}return e},_areDatesEqual:(i,e)=>(0,_.J_)(i)&&(0,_.J_)(e)&&i.getHours()===e.getHours()&&i.getMinutes()===e.getMinutes(),_getTimeListItems(){var i=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),t=this.dateBox.dateOption("value")||null,a=e-i,r=i.getMinutes()%this.dateBox.option("interval");return a<0?[]:(a>re.ONE_DAY&&(a=re.ONE_DAY),t-i<re.ONE_DAY||((i=this._getBoundaryDate("min")).setMinutes(r),t&&Math.abs(t-e)<re.ONE_DAY&&(a=(60*e.getHours()+Math.abs(e.getMinutes()-r))*re.ONE_MINUTE)),this._getRangeItems(i,new Date(i),a))},_getRangeItems(i,e,t){for(var a=[],r=this.dateBox.option("interval");e-i<=t;)a.push(new Date(e)),e.setMinutes(e.getMinutes()+r);return a},_getBoundaryDate(i){var e=WD[i],t=new Date((0,E.IS)(this.dateBox.dateOption("value"),0));return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate(i){var e=this.dateBox.option("displayFormat");return H.format(i,this.getDisplayFormat(e))},_listItemClickHandler(i){if("useButtons"!==this.dateBox.option("applyValueMode")){var e=this._getDateByItemData(i.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,i.event)}},_getDateByItemData(i){var e=this.dateBox.option("value"),t=i.getHours(),a=i.getMinutes(),r=i.getSeconds(),n=i.getFullYear(),s=i.getMonth(),o=i.getDate();return e?((e=this.dateBox.option("dateSerializationFormat")?he.deserializeDate(e):new Date(e)).setHours(t),e.setMinutes(a),e.setSeconds(r),e.setFullYear(n),e.setMonth(s),e.setDate(o)):e=new Date(n,s,o,t,a,0,0),e},getKeyboardListener(){return this._widget},_updatePopupHeight(){var i=Ks(this.dateBox.option("dropDownOptions.height"));if(void 0===i||"auto"===i){this.dateBox._setPopupOption("height","auto");var e=(0,b.zp)(this._widget.$element()),t=.45*(0,b.Cr)(zD);this.dateBox._setPopupOption("height",Math.min(e,t))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText(i,e){var t=this.callBase(i,e);return t&&(t=re.mergeDates(t,new Date(null),"date")),t}});const GD=KD;var UD=Pr.inherit({NAME:"Native",popupConfig:i=>(0,f.l)({},i,{width:"auto"}),getParsedText(i){return i?"datetime"===this.dateBox.option("type")?new Date(i.replace(/-/g,"/").replace("T"," ").split(".")[0]):re.fromStandardDateFormat(i):null},renderPopupContent:E.ZT,_getWidgetName:E.ZT,_getWidgetOptions:E.ZT,_getDateBoxType(){var i=this.dateBox.option("type");return re.SUPPORTED_FORMATS.includes(i)?"datetime"===i&&!(0,wt.inputType)(i)&&(i="datetime-local"):i="date",i},customizeButtons(){var i=this.dateBox.getButton("dropDown");N.Z.real().android&&i&&i.on("click",()=>{this.dateBox._input().get(0).click()})},getDefaultOptions(){return{mode:this._getDateBoxType()}},getDisplayFormat(i){var e=this._getDateBoxType();return i||re.FORMATS_MAP[e]},renderInputMinMax(i){i.attr({min:he.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:he.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}});const YD=UD;var _a=(0,B.Jj)(),va="dx-datebox",Mr="dx-datebox-wrapper",Ne={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},He={date:"date",datetime:"datetime",time:"time"},JD={Calendar:sp,DateView:ZD,Native:YD,CalendarWithTime:bD,List:GD},eA=kc.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions(){return(0,f.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:Ne.calendar,invalidDateMessage:y.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:y.Z.format("validation-range"),applyButtonText:y.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device(){var i=N.Z.real(),{platform:e}=i;return"ios"===e||"android"===e},options:{pickerType:Ne.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions(i){this._userOptions=(0,f.l)({},i),this.callBase(i),this._updatePickerOptions()},_updatePickerOptions(){var i=this.option("pickerType"),e=this.option("type");i===Ne.list&&(e===He.datetime||e===He.date)&&(i=Ne.calendar),e===He.time&&i===Ne.calendar&&(i=Ne.list),this._pickerType=i,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){var{platform:i}=N.Z.real(),e="android"===i&&oe.Z.mozilla,t=this._isNativeType(),a="generic"!==i||!t;t&&e&&(a=!1),this.option({showDropDownButton:a})},_init(){this._initStrategy(),this.option((0,f.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:i=>i.charAt(0).toLowerCase()+i.substr(1),_initStrategy(){var i=this._getStrategyName(this._getFormatType());this._strategy&&this._strategy.NAME===i||(this._strategy=new(0,JD[i])(this))},_getFormatType(){var i=this.option("type"),e=/h|m|s/g.test(i),a="";return/d|M|Y/g.test(i)&&(a+=He.date),e&&(a+=He.time),a},_getStrategyName(i){var e=this._pickerType;return e===Ne.rollers?"DateView":e===Ne.native?"Native":i===He.date?"Calendar":i===He.datetime?"CalendarWithTime":"List"},_initMarkup(){this.$element().addClass(va),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render(){this.callBase(),this._formatValidationIcon()},_renderDimensions(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight(){var i,e;this._popup&&(null===(e=(i=this._strategy)._updatePopupHeight)||void 0===e||e.call(i))},_refreshFormatClass(){var i=this.$element();(0,S.S6)(He,(e,t)=>{i.removeClass("".concat(va,"-").concat(t))}),i.addClass("".concat(va,"-").concat(this.option("type")))},_refreshPickerTypeClass(){var i=this.$element();(0,S.S6)(Ne,(e,t)=>{i.removeClass("".concat(va,"-").concat(t))}),i.addClass("".concat(va,"-").concat(this._pickerType))},_formatValidationIcon(){if((0,B.Ym)()){var i=this._input().get(0),e=this.option("rtlEnabled"),t=this._getClearButtonWidth(),a=this._getLongestElementDimensions(),r=parseFloat(_a.getComputedStyle(i).width)-t,n=a.width>r,{style:s}=i;this.$element().toggleClass("dx-show-invalid-badge",!n&&this.option("_showValidationIcon")),n?(void 0===this._storedPadding&&(this._storedPadding=e?a.leftPadding:a.rightPadding),e?s.paddingLeft=0:s.paddingRight=0):e?s.paddingLeft="".concat(this._storedPadding,"px"):s.paddingRight="".concat(this._storedPadding,"px")}},_getClearButtonWidth(){var i=0;if(this._isClearButtonVisible()&&""===this._input().val()){var e=this.$element().find(".".concat("dx-clear-button-area")).get(0);i=parseFloat(_a.getComputedStyle(e).width)}return i},_getLongestElementDimensions(){var i=this._strategy.getDisplayFormat(this.option("displayFormat")),e=H.format(re.getLongestDate(i,H.getMonthNames(),H.getDayNames()),i),t=this._input(),a=t.get(0),r=(0,Rt.l5)(t,e),s=void 0!==this._storedPadding?this._storedPadding:0;r.appendTo(this.$element());var o=parseFloat(_a.getComputedStyle(r.get(0)).width),l=parseFloat(_a.getComputedStyle(a).paddingRight),d=parseFloat(_a.getComputedStyle(a).paddingLeft),u=o+d+l+s;return r.remove(),{width:u,leftPadding:d,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup(){this.callBase(),this._popup.$wrapper().addClass(Mr),this._renderPopupWrapper()},_getPopupToolbarItems(){var i,e,t,a=this.callBase();return null!==(t=null===(e=(i=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(i,a))&&void 0!==t?t:a},_popupConfig(){var i=this.callBase();return(0,f.l)(this._strategy.popupConfig(i),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper(){if(this._popup){var i=this.$element(),e=(0,f.l)({},He,Ne);(0,S.S6)(e,(t,a)=>{i.removeClass("".concat(Mr,"-").concat(a))}),this._popup.$wrapper().addClass("".concat(Mr,"-").concat(this.option("type"))).addClass("".concat(Mr,"-").concat(this._pickerType)).addClass("dx-dropdowneditor-overlay")}},_renderPopupContent(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged(i){i&&this._formatValidationIcon()},_clearValueHandler(i){this.option("text",""),this.callBase(i)},_readOnlyPropValue(){if(this._pickerType===Ne.rollers)return!0;var{platform:i}=N.Z.real();return!this._isNativeType()||"ios"!==i&&"android"!==i?this.callBase():this.option("readOnly")},_isClearButtonVisible(){return this.callBase()&&!this._isNativeType()},_renderValue(){var i=this.dateOption("value");return this.option("text",this._getDisplayedText(i)),this._strategy.renderValue(),this.callBase()},_setSubmitValue(){var i=this.dateOption("value"),e=this.option("dateSerializationFormat"),t=re.SUBMIT_FORMATS_MAP[this.option("type")],a=e?he.serializeDate(i,e):re.toStandardDateFormat(i,t);this._getSubmitElement().val(a)},_getDisplayedText(i){var t,e=this.option("mode");if("text"===e){var a=this._strategy.getDisplayFormat(this.option("displayFormat"));t=H.format(i,a)}else{var r=this._getFormatByMode(e);t=r?H.format(i,r):re.toStandardDateFormat(i,e)}return t},_getFormatByMode:i=>(0,wt.inputType)(i)?null:re.FORMATS_MAP[i],_valueChangeEventHandler(i){var{text:e,type:t,validationError:a}=this.option(),r=this.dateOption("value");if(e!==this._getDisplayedText(r)){var n=this._getParsedDate(e),s=r??this._getDateByDefault(),o=re.mergeDates(s,n,t);if(this._applyInternalValidation(n&&"time"===t?o:n).isValid){var d=this._getDisplayedText(o);s&&o&&s.getTime()===o.getTime()&&d!==e?this._renderValue():this.dateValue(o,i)}}else this._recallInternalValidation(r,a)},_recallInternalValidation(i,e){(!e||e.editorSpecific)&&(this._applyInternalValidation(i),this._applyCustomValidation(i))},_getDateByDefault(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate(i){var e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(i,e)??void 0},_applyInternalValidation(i){var t=!!this.option("text")&&null!==i,a=!!i&&(0,_.J_)(i)&&!isNaN(i.getTime()),r=a&&L.dateInRange(i,this.dateOption("min"),this.dateOption("max"),this.option("type")),n=!t&&!i||r,s="";return a?r||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this._updateInternalValidationState(n,s),{isValid:n,isDate:a}},_updateInternalValidationState(i,e){this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:e}})},_applyCustomValidation(i){this.validationRequest.fire({editor:this,value:this._serializeDate(i)})},_isValueChanged(i){var e=this.dateOption("value");return(e&&e.getTime())!==(i&&i.getTime())},_isTextChanged(i){return this.option("text")!==(i&&this._getDisplayedText(i)||"")},_renderProps(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle(){var i=this.option("placeholder");if(i)return i;var e=this.option("type");return e===He.time?y.Z.format("dxDateBox-simulatedDataPickerTitleTime"):e===He.date||e===He.datetime?y.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler(i){var e=this._strategy.getValue();this.dateValue(e,i.event),this.callBase()},_dispose(){var i;this.callBase(),null===(i=this._strategy)||void 0===i||i.dispose()},_isNativeType(){return this._pickerType===Ne.native},_updatePopupTitle(){var i;null===(i=this._popup)||void 0===i||i.option("title",this._getPopupTitle())},_optionChanged(i){switch(i.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:i.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:i.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(i.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat(){var i=this.option("value");return this.option("dateSerializationFormat")&&(0,ci.Z)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,_.kE)(i)?"number":(0,_.HD)(i)?he.getDateSerializationFormat(i):void 0},_updateValue(i){this.callBase(),this._applyInternalValidation(i??this.dateOption("value"))},dateValue(i,e){var t=this._isValueChanged(i);return t&&e&&this._saveValueChangeEvent(e),t||(this._isTextChanged(i)?this._updateValue(i):""===this.option("text")&&this._applyCustomValidation(i)),this.dateOption("value",i)},dateOption(i,e){if(1===arguments.length)return he.deserializeDate(this.option(i));this.option(i,this._serializeDate(e))},_serializeDate(i){var e=this._getSerializationFormat();return he.serializeDate(i,e)},_clearValue(){var i=this.option("value");this.callBase(),null===i&&this._applyCustomValidation(null)},clear(){var i=this.option("value");this.callBase(),null===i&&this._applyInternalValidation(null)}});const tA=eA;var xp=i=>i.getMonth()+1,Sp=(i,e)=>{var t=i.getDate(),a=ma("M",i),r=(0,ie.n$)(parseInt(e),a.min,a.max);i.setMonth(r-1,1);var{min:n,max:s}=ma("dM",i),o=(0,ie.n$)(t,n,s);i.setDate(o)},iA={a:i=>i.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:xp,L:xp,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds",x:"getTimezoneOffset"},aA=(0,f.l)({},Pn,{a:(i,e)=>{var t=i.getHours();t>=12!=!!parseInt(e)&&i.setHours((t+12)%24)},d:(i,e)=>{e>ma("dM",i).max&&i.setMonth(i.getMonth()+1),i.setDate(e)},h:(i,e)=>{var t=i.getHours()>=12;i.setHours(+e%12+(t?12:0))},M:Sp,L:Sp,E:(i,e)=>{e<0||i.setDate(i.getDate()-i.getDay()+parseInt(e))},y:(i,e)=>{var t=i.getFullYear(),a=String(e).length,r=String(ma("y",i).max).length,n=parseInt(String(t).substr(0,r-a)+e);i.setFullYear(n)},x:i=>i}),ma=(i,e,t)=>{var a={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1},x:{min:0,max:0}};return a[t||i]||a.getAmPm},Ei="dateBoxMask",oA=tA.inherit({_supportedKeys(i){var e=this.callBase(i),t=r=>{var n=e[(0,D.EV)(r)];return n&&n.apply(this,[r])},a=(r,n)=>this._shouldUseOriginalHandler(r)?t.apply(this,[r]):n.apply(this,[r]);return(0,f.l)({},e,{del:r=>a(r,n=>{this._revertPart(1),this._isAllSelected()||n.preventDefault()}),backspace:r=>a(r,n=>{this._revertPart(-1),this._isAllSelected()||n.preventDefault()}),home:r=>a(r,n=>{this._selectFirstPart(),n.preventDefault()}),end:r=>a(r,n=>{this._selectLastPart(),n.preventDefault()}),escape:r=>a(r,n=>{this._revertChanges(n)}),enter:r=>a(r,()=>{this._enterHandler()}),leftArrow:r=>a(r,n=>{this._selectNextPart(-1),n.preventDefault()}),rightArrow:r=>a(r,n=>{this._selectNextPart(1),n.preventDefault()}),upArrow:r=>a(r,n=>{this._upDownArrowHandler(1),n.preventDefault()}),downArrow:r=>a(r,n=>{this._upDownArrowHandler(-1),n.preventDefault()})})},_shouldUseOriginalHandler(i){var e=this.option("opened")&&i&&!["backspace","del"].includes((0,D.EV)(i));return!this._useMaskBehavior()||e||i&&i.altKey},_upDownArrowHandler(i){this._setNewDateIfEmpty();var e=this._getActivePartValue(this._initialMaskValue),a=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._changePartValue(a+i,!0)},_changePartValue(i,e){var t=this._getActivePartProp("pattern");/^a{1,5}$/.test(t)?this._toggleAmPm():this._partIncrease(i,e)},_toggleAmPm(){var i=this._getActivePartProp("text"),e=ui.getPeriodNames().indexOf(i);this._setActivePartValue(1^e)},_getDefaultOptions(){return(0,f.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(i){var{originalEvent:e,alt:t}=i,a=e.data||e.key;return"string"==typeof a&&1===a.length&&!t&&!(0,D.j1)(e)},_isSingleDigitKey(i){var e,t=null===(e=i.originalEvent)||void 0===e?void 0:e.data;return 1===t?.length&&parseInt(t,10)},_useBeforeInputEvent:()=>N.Z.real().android,_keyInputHandler(i,e){var t=this._input().val();this._processInputKey(e),i.preventDefault(),t!==this._input().val()&&C.Z.trigger(this._input(),"input")},_keyboardHandler(i){var{key:e}=i.originalEvent,t=this.callBase(i);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(oe.Z.chrome&&"Process"===i.key&&0===i.code.indexOf("Digit")?(e=i.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(i)&&this._keyInputHandler(i.originalEvent,e)),t},_maskBeforeInputHandler(i){this._maskInputHandler=null;var{inputType:e}=i.originalEvent;"insertCompositionText"===e&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var t="deleteContentBackward"===e;if(t||"deleteContentForward"===e){var r=t?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(r)}}if(this._useMaskBehavior()&&this._isSingleCharKey(i))return this._keyInputHandler(i,i.originalEvent.data),!0},_keyPressHandler(i){var{originalEvent:e}=i;"insertCompositionText"===e?.inputType&&this._isSingleDigitKey(i)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(i),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(i){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(i))?this._searchString(i):this._searchNumber(i)},_isAllSelected(){var i=this._caret();return i.end-i.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var i=this._strategy.getDisplayFormat(this.option("displayFormat")),e=(0,_.HD)(i)&&!H._getPatternByFormat(i);return this._formatPattern=e?i:bd(t=>H.format(t,i)),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var i="time"===this.option("type")?new Date(null):new Date;this._maskValue=i,this._initialMaskValue=i,this._renderDateParts()}},_partLimitsReached(i){var e=String(i).length,t=this._getActivePartProp("pattern").length,r=1===t?e:Math.min(t,e),n=this._searchValue.length===r,s=parseInt("".concat(this._searchValue,"0"))>i;return n||s},_searchNumber(i){var{max:e}=this._getActivePartLimits(),t=String(e).length;this._searchValue=(this._searchValue+i).substr(-t),isNaN(this._searchValue)&&(this._searchValue=i),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(i){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var e=this._getActivePartProp("limits")(this._maskValue),t=this._searchValue+i.toLowerCase(),a=e.max-e.min,r=0;r<=a;r++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(r+1),0===this._getActivePartProp("text").toLowerCase().indexOf(t))return void(this._searchValue=t);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(i))}},_clearSearchValue(){this._searchValue=""},_revertPart(i){if(!this._isAllSelected()){var e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(i)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=Dd(this._getFormatPattern(),H);var{regexp:i}=this._regExpInfo,{source:e}=i,{flags:t}=i,a=new RegExp(/(\{[0-9]+,?[0-9]*\})/),r=e.split(a).map(n=>a.test(n)?n:te.Z.convertDigits(n,!1)).join("");this._regExpInfo.regexp=new RegExp(r,t)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var i=this.option("text")||this._getDisplayedText(this._maskValue);i&&(this._dateParts=((i,e)=>{for(var t=e.regexp.exec(i),a=0,r=0,n=[],s=function(){r=(a=r)+t[o].length;var l=e.patterns[o-1].replace(/^'|'$/g,""),d=(i=>iA[i]||(()=>i))(l[0]);n.push({index:o-1,isStub:l===t[o],caret:{start:a,end:r},pattern:l,text:t[o],limits:function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return ma(l[0],...h)},setter:aA[l[0]]||E.ZT,getter:d})},o=1;o<t.length;o++)s();return n})(i,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){C.Z.off(this._input(),".".concat(Ei))},_attachMaskEvents(){C.Z.on(this._input(),(0,D.V4)("dxclick",Ei),this._maskClickHandler.bind(this)),C.Z.on(this._input(),(0,D.V4)("paste",Ei),this._maskPasteHandler.bind(this)),C.Z.on(this._input(),(0,D.V4)("drop",Ei),()=>{this._renderSelectedPart()}),C.Z.on(this._input(),(0,D.V4)("compositionend",Ei),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&C.Z.on(this._input(),(0,D.V4)("beforeinput",Ei),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(i){this._useMaskBehavior()&&this._partIncrease(i.delta>0?1:-1,i)},_selectNextPart(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.option("text")&&!this._disposed){i&&(this._initialMaskValue=new Date(this._maskValue));var e=(0,ie.n$)(this._activePartIndex+i,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(0===e&&i<0||e===this._dateParts.length-1&&i>0))return void this._selectNextPart(i>=0?i+1:i-1);e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(i){return this._getActivePartProp("limits")(this._maskValue,i&&this._getRealLimitsPattern())},_getActivePartValue(i){i=i||this._maskValue;var e=this._getActivePartProp("getter");return(0,_.mf)(e)?e(i):i[e]()},_addLeadingZeroes(i){var e=this._searchValue.match(/^0+/),t=this._getActivePartLimits(),a=String(t.max).length;return((e&&e[0]||"")+String(i)).substr(-a)},_setActivePartValue(i,e){e=e||this._maskValue;var t=this._getActivePartProp("setter"),a=this._getActivePartLimits();i=(0,ie.Z2)(i,a.min,a.max)?i:i%10,i=this._addLeadingZeroes((0,ie.n$)(i,a.min,a.max)),(0,_.mf)(t)?t(e,i):e[t](i),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(i){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][i]},_loadMaskValue(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=i&&new Date(i),this._initialMaskValue=i&&new Date(i)},_saveMaskValue(){var i=this._maskValue&&new Date(this._maskValue);i&&"date"===this.option("type")&&i.setHours(0,0,0,0),this._initialMaskValue=new Date(i),this.dateOption("value",i)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(i){this.callBase(i),this._useMaskBehavior()&&this.option("text",i)},_partIncrease(i,e){this._setNewDateIfEmpty();var{max:t,min:a}=this._getActivePartLimits(e),r=i+this._getActivePartValue();r>t?r=this._applyLimits(r,{limitBase:a,limitClosest:t,max:t}):r<a&&(r=this._applyLimits(r,{limitBase:t,limitClosest:a,max:t})),this._setActivePartValue(r)},_applyLimits(i,e){var{limitBase:t,limitClosest:a,max:r}=e,n=(i-a)%r;return n?t+n-1*(0,ie.Xx)(n):a},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((i,e)=>{for(var t=0;t<i.length;t++)if(!i[t].isStub&&i[t].caret.end>=e)return t;return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,_.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(i){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(i){var e=this._replaceSelectedText(this.option("text"),this._caret(),(0,Rt.Zx)(i)),t=H.parse(e,this._getFormatPattern());t&&this._isDateValid(t)&&(this._maskValue=t,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),i.preventDefault()},_isDateValid:i=>(0,_.J_)(i)&&!isNaN(i),_isValueDirty(){var i=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(i&&i.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&C.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(i){this._useMaskBehavior()&&!i.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(i),this._selectFirstPart(i)):this.callBase(i)},_valueChangeEventHandler(i){var e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(i),e?null===this._maskValue&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(i)},_optionChanged(i){switch(i.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(i),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(i),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(i)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});(0,X.Z)("dxDateBox",oA);var{isWrapped:dA}=We.Z,fa=function(i,e){return(0,f.l)(i,{readOnly:e.readOnly,placeholder:e.placeholder,inputAttr:{id:e.id,"aria-labelledby":e["aria-labelledby"]},tabIndex:e.tabIndex},e.editorOptions)},yp=function(){return oe.Z.mozilla||N.Z.real().ios},bp=function(i){var e={},t=yp(),a=i.sharedData||e;return fa({placeholder:i.placeholder,width:i.width,value:i.value,onValueChanged:function(r){var n="filterRow"===i.parentType||"searchPanel"===i.parentType,s=r.event&&("input"===r.event.type||"keyup"===r.event.type),o=function(l,d){i&&i.setValue(l.value,d)};clearTimeout(e.valueChangeTimeout),s&&n?a.valueChangeTimeout=e.valueChangeTimeout=setTimeout(function(){o(r,e.valueChangeTimeout!==a.valueChangeTimeout)},(0,_.$K)(i.updateValueTimeout)?i.updateValueTimeout:0):o(r)},onKeyDown:function(r){t&&"enter"===(0,D.EV)(r.event)&&C.Z.trigger((0,c.Z)(r.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===i.parentType?" keyup input":"")},i)},Ep=function(i){i.editorName="dxDateBox",i.editorOptions=fa({value:i.value,onValueChanged:function(e){i.setValue(e.value)},onKeyDown:function(e){var{component:t,event:a}=e,r=t.option("useMaskBehavior");(yp()||r)&&"enter"===(0,D.EV)(a)&&(t.blur(),t.focus())},displayFormat:i.format,type:i.dataType,dateSerializationFormat:null,width:"filterBuilder"===i.parentType?void 0:"auto"},i)},Ip=function(i){var a,e=bp(i),t="searchPanel"===i.parentType;e.value=i.editorType&&"dxTextBox"!==i.editorType?i.value:(0,_.$K)(a=i.value)?a.toString():"",e.valueChangeEvent+=t?" keyup input search":"",e.mode=e.mode||(t?"search":"text"),i.editorName="dxTextBox",i.editorOptions=e},Tp=function(i){var e=bp(i);e.value=(0,_.$K)(i.value)?i.value:null,i.editorName="dxNumberBox",i.editorOptions=e};function Dp(i){var t,a,r,e=i.lookup,n="filterRow"===i.parentType;if(e){var s;t=(0,q.vb)(e.displayExpr),(0,_.mf)(a=e.dataSource)&&!dA(a)&&(a=a(i.row||{}),function pA(i){if(i.row&&i.row.watch&&"dataRow"===i.parentType){var e=i.editorOptions||{};i.editorOptions=e;var t,a=e.onInitialized;e.onInitialized=function(s){a&&a.apply(this,arguments),(t=s.component).on("disposing",n)};var r,n=i.row.watch(()=>(r=i.lookup.dataSource(i.row))&&r.filter,()=>{t.option("dataSource",r)},s=>{i.row=s})}}(i)),((0,_.Kn)(a)||Array.isArray(a))&&(a=(0,ki.aN)(a),n&&(r=a.postProcess,a.postProcess=function(l){return 0===this.pageIndex()&&(l=l.slice(0)).unshift(null),r?r.call(this,l):l}));var o=Boolean(e.allowClearing&&!n);i.editorName=null!==(s=i.editorType)&&void 0!==s?s:"dxSelectBox",i.editorOptions=fa({searchEnabled:!0,value:i.value,valueExpr:i.lookup.valueExpr,searchExpr:i.lookup.searchExpr||i.lookup.displayExpr,allowClearing:o,showClearButton:o,displayExpr:function(l){return null===l?i.showAllText:t(l)},dataSource:a,onValueChanged:function(l){var d=[l.value];!n&&d.push(l.component.option("text")),i.setValue.apply(this,d)}},i)}}function Ap(i){i.editorName="dxCheckBox",i.editorOptions=fa({elementAttr:{id:i.id},value:(0,_.$K)(i.value)?i.value:void 0,hoverStateEnabled:!i.readOnly,focusStateEnabled:!i.readOnly,activeStateEnabled:!1,onValueChanged:function(e){i.setValue&&i.setValue(e.value,e)}},i)}var vA=i=>{i.editorName=i.editorType,i.editorOptions=fa({value:i.value,onValueChanged:function(e){i.setValue(e.value)}},i)},gA=i=>{var e={dxDateBox:Ep,dxCheckBox:Ap,dxNumberBox:Tp,dxTextBox:Ip};if(i.lookup)Dp(i);else if(i.editorType){var t;(null!==(t=e[i.editorType])&&void 0!==t?t:vA)(i)}else switch(i.dataType){case"date":case"datetime":Ep(i);break;case"boolean":!function(i){"filterRow"===i.parentType||"filterBuilder"===i.parentType?Dp((0,f.l)(i,{lookup:{displayExpr:function(e){return!0===e?i.trueText||"true":!1===e?i.falseText||"false":void 0},dataSource:[!0,!1]}})):Ap(i)}(i);break;case"number":Tp(i);break;default:Ip(i)}};const Rp=i=>class extends i{createEditor(e,t){t.cancel=!1,t.editorElement=(0,j.uD)(e),(0,_.$K)(t.tabIndex)||(t.tabIndex=this.option("tabIndex")),gA(t),this.executeAction("onEditorPreparing",t),!t.cancel&&("dataRow"===t.parentType&&!t.isOnForm&&!(0,_.$K)(t.editorOptions.showValidationMark)&&(t.editorOptions.showValidationMark=!1),function(i,e){var t=(0,c.Z)(e.editorElement);if(e.editorName&&e.editorOptions&&t[e.editorName]){if(("dxCheckBox"===e.editorName||"dxSwitch"===e.editorName)&&(e.isOnForm||(t.addClass(i.addWidgetPrefix("checkbox-size")),t.parent().addClass("dx-editor-inline-block"))),i._createComponent(t,e.editorName,e.editorOptions),"dxDateBox"===e.editorName){var a=t.dxDateBox("instance"),r=a._supportedKeys().enter;a.registerKeyHandler("enter",n=>(a.option("opened")&&r(n),!0))}"dxTextArea"===e.editorName&&t.dxTextArea("instance").registerKeyHandler("enter",function(n){"enter"===(0,D.EV)(n)&&!n.ctrlKey&&!n.shiftKey&&n.stopPropagation()})}}(this,t),this.executeAction("onEditorPrepared",t))}};var so="dx-cell-focus-disabled",Op="focus-overlay",oo="dx-focused",Vp="dxDataGridEditorFactory",Lp=(0,D.V4)([ae.Z.down,"focusin",se.u].join(" "),Vp),lo="dx-hidden",EA=Rp(J.ViewController);P.registerModule("editorFactory",{defaultOptions:()=>({}),controllers:{editorFactory:class IA extends EA{init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._columnsResizerController=this.getController("columnsResizer"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsController=this.getController("columns"),this._validatingController=this.getController("validating"),this._rowsView=this.getView("rowsView"),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),C.Z.on(this._subscribedContainerRoot,Lp,this._updateFocusHandler),this._attachContainerEventHandlers()}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),C.Z.off(this._subscribedContainerRoot,Lp,this._updateFocusHandler)}_getFocusedElement(e){var t=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",a=["td[tabindex]:focus","".concat(t),"input:focus","button:focus","textarea:focus","div[tabindex]:focus",".dx-lookup-field:focus",".dx-checkbox:focus",".dx-switch:focus",".dx-dropdownbutton .dx-buttongroup:focus",".dx-adaptive-item-text:focus"].join(","),r=e.find(a);return this.elementIsInsideGrid(r)&&r}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){var e=this.component&&this.component.$element();if(e){var t=this._getFocusedElement(e);if(t&&t.length){var a;if(!t.hasClass(so)&&!t.hasClass("dx-row")){var r=t.closest("".concat(this._getFocusCellSelector(),", .").concat(so));r.get(0)!==t.get(0)&&(a=this._needHideBorder(r),t=r)}if(t.length&&!t.hasClass(so))return void this.focus(t,a)}}this.loseFocus()}_needHideBorder(e){var t=this._rowsView.element(),a=e.closest(t).length>0,r=this._editingController.isEditing();return e.hasClass("dx-editor-inline-block")||a&&!r}_updateFocus(e){var t=this,a=e&&e.event&&(0,c.Z)(e.event.target).hasClass(t.addWidgetPrefix(Op));t._isFocusOverlay=t._isFocusOverlay||a,clearTimeout(t._updateFocusTimeoutID),t._updateFocusTimeoutID=setTimeout(()=>{delete t._updateFocusTimeoutID,t._isFocusOverlay||t._updateFocusCore(),t._isFocusOverlay=!1})}_updateFocusOverlaySize(e,t){e.hide();var a=fi.Z.calculate(e,(0,f.l)({collision:"fit"},t));a.h.oversize>0&&(0,b.Ns)(e,(0,b.Y_)(e)-a.h.oversize),a.v.oversize>0&&(0,b.qt)(e,(0,b.zp)(e)-a.v.oversize),e.show()}callbackNames(){return["focused"]}focus(e,t){var a=this;if(void 0===e)return a._$focusedElement;e&&(e.is(a._$focusedElement)||a._$focusedElement&&a._$focusedElement.removeClass(oo),a._$focusedElement=e,clearTimeout(a._focusTimeoutID),a._focusTimeoutID=setTimeout(()=>{delete a._focusTimeoutID,a.renderFocusOverlay(e,t),e.addClass(oo),a.focused.fire(e)}))}refocus(){var e=this.focus();this.focus(e)}renderFocusOverlay(e,t){if(O.isElementInCurrentGrid(this,e))if(this._$focusOverlay||(this._$focusOverlay=(0,c.Z)("<div>").addClass(this.addWidgetPrefix(Op))),t)this._$focusOverlay.addClass(lo);else if(e.length){var a=oe.Z.mozilla?"right bottom":"left top",r=e.closest(".".concat(this.addWidgetPrefix("content"))),n=(0,ne.l)(e.get(0)),s=e.hasClass(this.addWidgetPrefix("invalid")),o=e.hasClass("dx-cell-modified")&&!s;this._$focusOverlay.removeClass(lo).toggleClass("dx-focused-cell-invalid",s).toggleClass("dx-focused-cell-modified",o).appendTo(r),(0,b.qt)(this._$focusOverlay,n.bottom-n.top+1),(0,b.Ns)(this._$focusOverlay,n.right-n.left+1);var l={precise:!0,my:a,at:a,of:e,boundary:r.length&&r};this._updateFocusOverlaySize(this._$focusOverlay,l),fi.Z.setup(this._$focusOverlay,l),this._$focusOverlay.css("visibility","visible")}}resize(){var e=this._$focusedElement;e&&this.focus(e)}loseFocus(e){this._$focusedElement&&this._$focusedElement.removeClass(oo),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(lo)}_getContainerRoot(){var e,t=null===(e=this.component)||void 0===e?void 0:e.$element(),a=Z.Z.getRootNode(t?.get(0));return a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||a.host?a:Z.Z.getDocument()}_attachContainerEventHandlers(){var e=this,t=e.component&&e.component.$element();t&&C.Z.on(t,(0,D.V4)("keydown",Vp),a=>{"tab"===(0,D.EV)(a)&&e._updateFocusHandler(a)})}}}});var DA=T(4388),kr=(0,B.Jj)(),Pp={text:"OK",onClick:()=>!0},jt="dx-dialog",AA="".concat(jt,"-wrapper"),RA="".concat(jt,"-root"),OA="".concat(jt,"-content"),VA="".concat(jt,"-message"),LA="".concat(jt,"-buttons"),PA="".concat(jt,"-button"),Bp="dx-button",Fp=()=>(0,z.dC)()?{stylingMode:"contained",type:"default"}:{},BA=()=>(0,z.dC)()?{stylingMode:"outlined",type:"default"}:{},Mp=function(i){var e,t=(0,x.BH)();i=i||{};var a=(0,c.Z)("<div>").addClass(jt).appendTo((0,ls.S3)()),n="messageHtml"in i;"message"in i&&Q.Z.log("W1013");var s=String(n?i.messageHtml:i.message),o=i.title?null:new ve.Z,l=(0,c.Z)("<div>").addClass(VA).html(s).attr("id",o),d=[],u=new Dt(a,(0,f.l)({title:null!==(e=i.title)&&void 0!==e?e:"",showTitle:(0,E.IS)(i.showTitle,!0),dragEnabled:(0,E.IS)(i.dragEnabled,!0),height:"auto",width:i.width,showCloseButton:i.showCloseButton||!1,ignoreChildEvents:!1,container:a,visualContainer:kr,dragAndResizeArea:kr,onContentReady(v){v.component.$content().addClass(OA).append(l),o&&v.component.$overlayContent().attr("aria-labelledby",o)},onShowing(v){v.component.bottomToolbar().addClass(LA).find(".".concat(Bp)).addClass(PA),(0,Rt.M3)()},onShown(v){var g=v.component.bottomToolbar().find(".".concat(Bp)).first();C.Z.trigger(g,"focus")},onHiding(){t.reject()},onHidden(v){var{element:g}=v;(0,c.Z)(g).remove()},animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:(0,ci.Z)().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},i.popupOptions));function p(v){t.resolve(v),u.hide()}return(i.buttons||[Pp]).forEach(v=>{var g=new DA.Z(v.onClick,{context:u});d.push({toolbar:"bottom",location:N.Z.current().android?"after":"center",widget:"dxButton",options:(0,V.Z)((0,V.Z)({},v),{onClick(){p(g.execute(...arguments))}})})}),u.option("toolbarItems",d),u.$wrapper().addClass(AA),i.position&&u.option("position",i.position),u.$wrapper().addClass(RA),{show:function(){if("phone"===N.Z.real().deviceType){var v=(0,b.Cr)(kr)>(0,b.dz)(kr);u.option({width:v?"90%":"60%"})}return u.show(),t.promise()},hide:p}},Nr="dx-editor-cell",Vt="dx-row",kp="dx-selection",Hr="edit-form",it="insert",ct="remove",Zr="editing.popup",uo="editing.form",Pe="editing.editRowKey",qt="editing.editColumnName",Np="targetComponent",ho="input:not([type='hidden'])",co="[tabindex]:not([disabled]), ".concat(ho,":not([disabled])"),Xt="batch",pt="row",Ti="cell",Di="form",po="popup",zr="last",Zp="pageBottom",_o="pageTop",zp="viewportBottom",$p="viewportTop",kA=[Xt,pt,Ti,Di,po],NA=[pt,Di,po],HA=[Xt,Ti],ZA=[Xt,pt,Ti],zA=[pt,Di],Wp="dx-command-edit",Kp="".concat(Wp,"-with-icons"),Lt="__DX_INSERT_INDEX__",Gp="dx-cell-modified",Ca="update",JA={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},eR={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},tR={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},iR={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},aR=["edit","save","cancel","delete","undelete"],_t="editing.changes",sR="dx-dropdowneditor-overlay",Up="edit-form-item",pR=It.Z.IS_RENOVATED_WIDGET?"dx-scrollable":"dx-scrollable-container",Yp="dx-edit-row",vo="_DX_KEY_",wa=function(i){return function(e){var t=e instanceof Error?e:new Error(e&&String(e)||"Unknown error");i.reject(t)}},jp=function(i,e){return e.isEditing||i&&e.column.allowEditing},qp=function(i,e){var t=!!e.column.command,a=jp(i,e);return"data"===e.rowType&&!t&&(a||e.column.showEditorAlways)},Ai=(i,e)=>{var t=-1;return i.some((a,r)=>{if(Xp(a)===e)return t=r,!0}),t};function Xp(i){return(0,_.Kn)(i)?i.name:i}var Qp=(i,e)=>{i.forEach(t=>{t.items||t.tabs?Qp(t.items||t.tabs,e):e(t)})},Jp=i=>class extends i{reload(e,t){return!t&&this._editingController.refresh(),super.reload.apply(this,arguments)}repaintRows(){if(!this._editingController.isSaving())return super.repaintRows.apply(this,arguments)}_updateEditRow(e){var t,a=this.option(Pe),n=e[O.getIndexByKey(a,e)];n&&(n.isEditing=!0,null===(t=this._updateEditItem)||void 0===t||t.call(this,n))}_updateItemsCore(e){super._updateItemsCore(e),this._updateEditRow(this.items(!0))}_applyChangeUpdate(e){this._updateEditRow(e.items),super._applyChangeUpdate(e)}_applyChangesOnly(e){this._updateEditRow(e.items),super._applyChangesOnly(e)}_processItems(e,t){return e=this._editingController.processItems(e,t),super._processItems(e,t)}_processDataItem(e,t){return this._editingController.processDataItem(e,t,this.generateDataValues),super._processDataItem(e,t)}_processItem(e,t){return(e=super._processItem(e,t)).isNewRow&&(t.dataIndex--,delete e.dataIndex),e}_getChangedColumnIndices(e,t,a,r){if(e.isNewRow===t.isNewRow&&e.removed===t.removed)return super._getChangedColumnIndices.apply(this,arguments)}_isCellChanged(e,t,a,r,n){var s=e.cells&&e.cells[r],o=this._editingController&&this._editingController.isEditCell(a,r);return(!n||!o)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===o)||super._isCellChanged.apply(this,arguments))}needToRefreshOnDataSourceChange(e){return!(Array.isArray(e.value)&&e.value===e.previousValue&&this._editingController.isSaving())}_handleDataSourceChange(e){var t=super._handleDataSourceChange(e),a=this.option("editing.changes"),r=e.value;if(Array.isArray(r)&&a.length){var n=r.map(d=>this.keyOf(d)),s=a.filter(d=>"insert"===d.type||n.some(u=>(0,E.bY)(d.key,u)));s.length!==a.length&&this.option("editing.changes",s);var o=this.option("editing.editRowKey");!s.some(d=>"insert"===d.type&&(0,E.bY)(o,d.key))&&n.every(d=>!(0,E.bY)(o,d))&&this.option("editing.editRowKey",null)}return t}},go={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:$p,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:y.Z.format("dxDataGrid-editingEditRow"),saveAllChanges:y.Z.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:y.Z.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:y.Z.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:y.Z.format("dxDataGrid-editingCancelRowChanges"),addRow:y.Z.format("dxDataGrid-editingAddRow"),deleteRow:y.Z.format("dxDataGrid-editingDeleteRow"),undeleteRow:y.Z.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:y.Z.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:class SR extends J.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._validatingController=this.getController("validating"),this._editorFactoryController=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsResizerController=this.getController("columnsResizer"),this._errorHandlingController=this.getController("errorHandling"),this._rowsView=this.getView("rowsView"),this._headerPanelView=this.getView("headerPanel"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>{e.reject("cancel")}),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[Pe]=!0,this.component._optionsByReference[_t]=!0}getEditMode(){var e,t=null!==(e=this.option("editing.mode"))&&void 0!==e?e:pt;return kA.includes(t)?t:pt}isCellBasedEditMode(){var e=this.getEditMode();return HA.includes(e)}_getDefaultEditorTemplate(){return(e,t)=>{var a=(0,c.Z)("<div>").appendTo(e),r=(0,f.l)({},t.column,{value:t.value,setValue:t.setValue,row:t.row,parentType:"dataRow",width:null,readOnly:!t.setValue,isOnForm:t.isOnForm,id:t.id});ZA.includes(this.getEditMode())&&(r["aria-labelledby"]=t.column.headerId),this._editorFactoryController.createEditor(a,r)}}_getNewRowPosition(){var e=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(e){case _o:return $p;case Zp:return zp;default:return e}return e}getChanges(){return this.option(_t)}getInsertRowCount(){return this.option(_t).filter(t=>"insert"===t.type).length}resetChanges(){var t=this.getChanges()?.length;t&&this._silentOption(_t,[])}_getInternalData(e){return this._internalState.filter(t=>(0,E.bY)(t.key,e))[0]}_addInternalData(e){var t=this._getInternalData(e.key);return t?(0,f.l)(t,e):(this._internalState.push(e),e)}_getOldData(e){var t;return null===(t=this._getInternalData(e))||void 0===t?void 0:t.oldData}getUpdatedData(e){var t=this._dataController.keyOf(e),a=this.getChanges(),r=O.getIndexByKey(t,a);return a[r]?(0,Ke.FL)(e,a[r].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===it).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===ct).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if("cancel"!==e){var t=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,t)}}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,t){var a=!0;switch(e.name){case"delete":a=this.allowDeleting(t);break;case"undelete":a=!1}return a}isPopupEditMode(){return this.option("editing.mode")===po}_isButtonVisible(e,t){var{visible:a}=e;return(0,_.$K)(a)?(0,_.mf)(a)?a.call(e,{component:t.component,row:t.row,column:t.column}):a:this._isDefaultButtonVisible(e,t)}_isButtonDisabled(e,t){var{disabled:a}=e;return(0,_.mf)(a)?a.call(e,{component:t.component,row:t.row,column:t.column}):!!a}_getButtonConfig(e,t){var a=(0,_.Kn)(e)?e:{},r=Xp(e),n=(i=>{var e=i.component.option("editing.texts")||{};return{save:e.saveRowChanges,cancel:e.cancelRowChanges,edit:e.editRow,undelete:e.undeleteRow,delete:e.deleteRow,add:e.addRowToNode}})(t),s=tR[r],o=this.option("editing"),l=iR[r],d=!l||o[l];return(0,f.l)({name:r,text:n[r],cssClass:JA[r]},{onClick:s&&(u=>{var{event:h}=u;h.stopPropagation(),h.preventDefault(),setTimeout(()=>{t.row&&d&&this[s]&&this[s](t.row.rowIndex)})})},a)}_getEditingButtons(e){var t,a=!!e.column.buttons,r=(e.column.buttons||[]).slice();return a?((t=Ai(r,"edit"))>=0&&(Ai(r,"save")<0&&r.splice(t+1,0,"save"),Ai(r,"cancel")<0&&r.splice(Ai(r,"save")+1,0,"cancel")),(t=Ai(r,"delete"))>=0&&Ai(r,"undelete")<0&&r.splice(t+1,0,"undelete")):r=aR.slice(),r.map(n=>this._getButtonConfig(n,e))}_renderEditingButtons(e,t,a,r){t.forEach(n=>{this._isButtonVisible(n,a)&&this._createButton(e,n,a,r)})}_getEditCommandCellTemplate(){return(e,t,a)=>{var r=(0,c.Z)(e);if("data"===t.rowType){var n=this._getEditingButtons(t);if(this._renderEditingButtons(r,n,t,a),t.watch){var s=t.watch(()=>n.map(o=>({visible:this._isButtonVisible(o,t),disabled:this._isButtonDisabled(o,t)})),()=>{r.empty(),this._renderEditingButtons(r,n,t)});C.Z.on(r,Ft.x,s)}}else O.setEmptyText(r)}}isRowBasedEditMode(){var e=this.getEditMode();return NA.includes(e)}getFirstEditableColumnIndex(){var e,t=this._columnsController.getVisibleColumns();return(0,S.S6)(t,(a,r)=>{if(r.allowEditing)return e=a,!1}),e}getFirstEditableCellInRow(e){var t,a=this.getFirstEditableColumnIndex();return null===(t=this._rowsView)||void 0===t?void 0:t._getCellElement(e||0,a)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,t){return O.getIndexByKey(e,t)}hasChanges(e){for(var t=this.getChanges(),a=!1,r=0;r<t?.length;r++)if(t[r].type&&(!(0,_.$K)(e)||this._dataController.getRowIndexByKey(t[r].key)===e)){a=!0;break}return a}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),C.Z.off(Z.Z.getDocument(),ae.Z.up,this._pointerUpEditorHandler),C.Z.off(Z.Z.getDocument(),ae.Z.down,this._pointerDownEditorHandler),C.Z.off(Z.Z.getDocument(),se.u,this._saveEditorHandler)}_silentOption(e,t){"editing.changes"===e&&(this._changes=(0,Xe.HR)([],t)),super._silentOption(e,t)}optionChanged(e){if("editing"===e.name){var{fullName:t}=e;t===Pe?this._handleEditRowKeyChange(e):t===_t?(0,E.bY)(e.value,this._changes,{maxDepth:4})||(this._changes=(0,Xe.HR)([],e.value),this._handleChangesChange(e)):e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){var t=this._dataController.getRowIndexByKey(e.value),a=this._getEditRowIndexCorrection(),r=this._dataController.getRowIndexByKey(e.previousValue)+a;(0,_.$K)(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(t,r):this.cancelEditData()}_handleChangesChange(e){var t=this._dataController;!e.value.length&&!e.previousValue.length||(e.value.forEach(r=>{var n;if("insert"===r.type)this._addInsertInfo(r);else{var s=t.getCachedStoreData()||(null===(n=t.items())||void 0===n?void 0:n.map(l=>l.data)),o=O.getIndexByKey(r.key,s,t.key());this._addInternalData({key:r.key,oldData:s[o]})}}),t.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,_.$K)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){return(0,_.$K)(this.option(Pe))}isEditRow(e){return!1}_setEditRowKey(e,t){t?this._silentOption(Pe,e):this.option(Pe,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(e,t){var a=this._dataController.getKeyByRowIndex(e);void 0!==a?this._setEditRowKey(a,t):this._dataController.fireError("E1043")}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){var t=this._dataController.getKeyByRowIndex(e);return(0,_.$K)(t)&&(0,E.bY)(this.option(Pe),t)&&this._getVisibleEditRowIndex()===e}isEditCell(e,t){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===t}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,t,a){var r=-1,n=this._dataController,s=this._getInsertAfterOrBeforeKey(t);return(0,_.$K)(s)||0!==e.length?(0,_.$K)(s)&&e.some((o,l)=>{var d=a||this._isProcessedItem(o);if((0,_.Kn)(o)&&(d||(0,_.$K)(o[Lt])?(0,E.bY)(o.key,s)&&(r=l):(0,E.bY)(n.keyOf(o),s)&&(r=l)),r>=0){var u=e[r+1];return u&&("detail"===u.rowType||"detailAdaptive"===u.rowType)&&(0,_.$K)(t.insertAfterKey)?void 0:((0,_.$K)(t.insertAfterKey)&&(r+=1),!0)}}):r=0,r}_generateNewItem(e){var t,a={key:e},r=null===(t=this._getInternalData(e))||void 0===t?void 0:t.insertInfo;return r?.[Lt]&&(a[Lt]=r[Lt]),a}_getLoadedRowIndex(e,t,a){var r=this._getInsertRowIndex(e,t,a),n=this._dataController;if(r<0){var s=this._getNewRowPosition(),o=n.pageIndex(),l=this._getInsertAfterOrBeforeKey(t);s===zr||0!==o||(0,_.$K)(l)?s===zr&&n.isLastPageLoaded()&&(r=e.length):r=0}return r}processItems(e,t){var{changeType:a}=t;return this.update(a),this.getChanges().forEach(n=>{var s;if(n.type===it){var{key:l}=n,d=null===(s=this._getInternalData(l))||void 0===s?void 0:s.insertInfo;(!(0,_.$K)(l)||!(0,_.$K)(d))&&(l=(d=this._addInsertInfo(n)).key);var u=this._getLoadedRowIndex(e,n),h=this._generateNewItem(l);u>=0&&e.splice(u,0,h)}}),e}processDataItem(e,t,a){var r=t.visibleColumns,n=e.data[Lt]?e.data.key:e.key,s=this.getChanges(),o=O.getIndexByKey(n,s);e.isEditing=!1,o>=0&&this._processDataItemCore(e,s[o],n,r,a)}_processDataItemCore(e,t,a,r,n){var{data:s,type:o}=t;switch(o){case it:e.isNewRow=!0,e.key=a,e.data=s;break;case Ca:e.modified=!0,e.oldData=e.data,e.data=(0,Ke.FL)(e.data,s),e.modifiedValues=n(s,r,!0);break;case ct:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){var t=new x.BH;return(0,x.gx)((0,x.p4)(e.promise)).done(t.resolve).fail(wa(t)).fail(a=>this._fireDataErrorOccurred(a)),t}}_createInsertInfo(){var e={};return e[Lt]=this._getInsertIndex(),e}_addInsertInfo(e,t){var a,r;e.key=this.getChangeKeyValue(e);var{key:n}=e;if(r=null===(a=this._getInternalData(n))||void 0===a?void 0:a.insertInfo,!(0,_.$K)(r)){var s=this._getInsertAfterOrBeforeKey(e);r=this._createInsertInfo(),(0,_.$K)(s)||this._setInsertAfterOrBeforeKey(e,t)}return this._addInternalData({insertInfo:r,key:n}),{insertInfo:r,key:n}}getChangeKeyValue(e){if((0,_.$K)(e.key))return e.key;var a,t=this._dataController.key();return e.data&&t&&!Array.isArray(t)&&(a=e.data[t]),(0,_.$K)(a)||(a="".concat(vo).concat(new ve.Z)),a}_setInsertAfterOrBeforeKey(e,t){var a=this.getView("rowsView"),r=this._dataController,n=r.items(!0),s=this._getNewRowPosition();switch(s){case"first":case zr:break;case _o:case Zp:if(n.length){var o=s===_o?0:n.length-1;e[0===o?"insertBeforeKey":"insertAfterKey"]=n[o].key}break;default:var d=s===zp?a?.getBottomVisibleItemIndex():a?.getTopVisibleItemIndex(),u=r.getVisibleRows()[d];u&&(!u.isEditing&&"detail"===u.rowType||"detailAdaptive"===u.rowType)&&d++;var h=r.getKeyByRowIndex(d);(0,_.$K)(h)&&(e.insertBeforeKey=h)}}_getInsertIndex(){var e=0;return this.getChanges().forEach(t=>{var a,r=null===(a=this._getInternalData(t.key))||void 0===a?void 0:a.insertInfo;(0,_.$K)(r)&&t.type===it&&r[Lt]>e&&(e=r[Lt])}),e+1}_getInsertAfterOrBeforeKey(e){var t;return null!==(t=e.insertAfterKey)&&void 0!==t?t:e.insertBeforeKey}_getPageIndexToInsertRow(){var e=this._getNewRowPosition(),t=this._dataController,a=t.pageIndex(),r=t.pageCount()-1;return"first"===e&&0!==a?0:e===zr&&a!==r?r:-1}addRow(e){var t=this._dataController;return t.store()?this._addRow(e):(t.fireError("E1052",this.component.NAME),(new x.BH).reject())}_addRow(e){var a=this._dataController.store(),r=a&&a.key(),n={data:{}},s=this._getVisibleEditRowIndex(),o=new x.BH;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(r||(n.data.__KEY__=String(new ve.Z)),(0,x.gx)(this._initNewRow(n,e)).done(()=>{this._allowRowAdding()?(0,x.gx)(this._addRowCore(n.data,e,s)).done(o.resolve).fail(o.reject):o.reject("cancel")}).fail(o.reject),o.promise()):((0,x.gx)(this._navigateToNewRow(s)).done(o.resolve).fail(o.reject),o.promise())}_allowRowAdding(e){return!(this._getInsertIndex()>1)}_addRowCore(e,t,a){var r={data:e,type:it},n=this._getVisibleEditRowIndex(),s=this._addInsertInfo(r,t),{key:o}=s;return this._setEditRowKey(o,!0),this._addChange(r),this._navigateToNewRow(a,r,n)}_navigateToNewRow(e,t,a){var r=new x.BH,n=this._dataController;if(a=a??-1,!(t=t??this.getChanges().filter(u=>u.type===it)[0]))return r.reject("cancel").promise();var s=this._getPageIndexToInsertRow(),o=this._getLoadedRowIndex(n.items(),t,!0),l=u=>{var h;(0,x.gx)(null===(h=this._focusController)||void 0===h?void 0:h.navigateToRow(u)).done(()=>{o=n.getRowIndexByKey(t.key),r.resolve()})},d=this._getInsertAfterOrBeforeKey(t);return s>=0?n.pageIndex(s).done(()=>{l(t.key)}).fail(r.reject):o<0&&(0,_.$K)(d)?l(d):(n.updateItems({changeType:"update",rowIndices:[e,a,o]}),(o=n.getRowIndexByKey(t.key))<0?l(t.key):r.resolve()),r.done(()=>{var u;null===(u=this._rowsView)||void 0===u||u.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(o),this._afterInsertRow(t.key)})}),r.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var t,a=this._dataController,r=a.getKeyByRowIndex(e),n=this.getFirstEditableCellInRow(e);null===(t=this._keyboardNavigationController)||void 0===t||t.focus(n),this.option("focusedRowKey",r),this._editCellInProgress=!0,this._delayedInputFocus(n,()=>{e=a.getRowIndexByKey(r),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(e,t){}_getVisibleEditColumnIndex(){var e=this.option(qt);return(0,_.$K)(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,t){var a,r=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(a=r[e])||void 0===a?void 0:a.name,t)}_setEditColumnName(e,t){t?this._silentOption(qt,e):this.option(qt,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){var e=this.option(qt);return this._getColumnByName(e)}_getColumnByName(e){var a,t=this._columnsController.getVisibleColumns();return(0,_.$K)(e)&&t.some(r=>{if(r.name===e)return a=r,!0}),a}_getVisibleEditRowIndex(e){var t=this._dataController,a=this.option(Pe),r=t.getRowIndexByKey(a);return-1===r?r:r+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){return"adaptiveHidden"===(e?this._getColumnByName(e):this._getEditColumn())?.visibleWidth?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){var t,a=this._dataController,n=a.items()[e],s={data:n&&n.data,cancel:!1},o=this._getVisibleEditRowIndex();if(n){if(e===o)return!0;if(void 0===n.key)return void this._dataController.fireError("E1043");n.isNewRow||(s.key=n.key),!this._isEditingStart(s)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=a.pageIndex(),this._addInternalData({key:n.key,oldData:null!==(t=n.oldData)&&void 0!==t?t:n.data}),this._setEditRowKey(n.key))}}_editRowFromOptionChanged(e,t){var a=[t,e];this._beforeUpdateItems(a,e,t),this._editRowFromOptionChangedCore(a,e)}_editRowFromOptionChangedCore(e,t,a){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:a})}_focusEditorIfNeed(){}_showEditPopup(e,t){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){var e={text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)};return(0,z.dC)((0,z.Vk)())&&(e.stylingMode="contained",e.type="default"),e}_getCancelButtonConfig(){var e={text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)};return(0,z.dC)((0,z.Vk)())&&(e.stylingMode="outlined"),e}_removeInternalData(e){var t=this._getInternalData(e),a=this._internalState.indexOf(t);a>-1&&this._internalState.splice(a,1)}_updateInsertAfterOrBeforeKeys(e,t){var a=e[t];e.forEach(r=>{var n=this._getInsertAfterOrBeforeKey(r);(0,E.bY)(n,a.key)&&(r[(0,_.$K)(r.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(a))})}_removeChange(e){if(e>=0){var t=[...this.getChanges()],{key:a}=t[e];this._removeInternalData(a),this._updateInsertAfterOrBeforeKeys(t,e),t.splice(e,1),this._silentOption(_t,t),(0,E.bY)(this.option(Pe),a)&&this._resetEditIndices()}}executeOperation(e,t){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{"rejected"!==e.state()&&(t(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,x.gx)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,t,a){!e||!e.showEditorAlways||t&&!t.showEditorAlways?(this._editCellInProgress=!0,this._needFocusEditor=!0,this._editorFactoryController.loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[a,this._getVisibleEditRowIndex()]})):e!==t&&(this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:[]}))}_delayedInputFocus(e,t,a){var r=()=>{if(t&&t(),e){var n=e.find(co).first();O.focusAndSelectElement(this,n)}this._beforeFocusCallback=null};N.Z.real().ios||N.Z.real().android?r():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),a&&(this._beforeFocusCallback=t),this._inputFocusTimeoutID=setTimeout(r))}_focusEditingCell(e,t,a){var r=this._getVisibleEditColumnIndex();(t=t||this._rowsView&&this._rowsView._getCellElement(this._getVisibleEditRowIndex(),r))&&this._delayedInputFocus(t,e,a)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){var t=this.option("editing"),a=t?.texts,r=t?.confirmDelete,n=a?.confirmDeleteMessage,s=this._dataController.items()[e],o=!this.isEditing()||s.isNewRow;if(s&&o)if(r&&n){var l=a&&a.confirmDeleteTitle;(function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,a=(0,_.PO)(i)?i:{title:e,messageHtml:i,showTitle:t,buttons:[(0,V.Z)({text:y.Z.format("Yes"),onClick:()=>!0},Fp()),(0,V.Z)({text:y.Z.format("No"),onClick:()=>!1},BA())],dragEnabled:t};return Mp(a).show()})(n,l,(0,_.$K)(l)&&l.length>0).done(u=>{u&&this._deleteRowCore(e)})}else this._deleteRowCore(e)}_deleteRowCore(e){var a=this._dataController.items()[e],r=a&&a.key,n=this._getVisibleEditRowIndex();this.refresh();var s=this.getChanges(),o=O.getIndexByKey(r,s);return o>=0?s[o].type===it?this._removeChange(o):this._addChange({key:r,type:ct}):this._addChange({key:r,oldData:a.data,type:ct}),this._afterDeleteRow(e,n)}_afterDeleteRow(e,t){return this.saveEditData()}undeleteRow(e){var t=this._dataController,a=t.items()[e],r=this._getVisibleEditRowIndex(),n=a&&a.key,s=this.getChanges();if(a){var o=O.getIndexByKey(n,s);if(o>=0){var{data:l}=s[o];(0,_.Qr)(l)?this._removeChange(o):this._addChange({key:n,type:Ca}),t.updateItems({changeType:"update",rowIndices:[r,e]})}}}_fireOnSaving(){var e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);var t=new x.BH;return(0,x.gx)((0,x.p4)(e.promise)).done(()=>{t.resolve(e)}).fail(a=>{wa(t),this._fireDataErrorOccurred(a),t.resolve({cancel:!0})}),t}_executeEditingAction(e,t,a){if(this.component._disposed)return null;var r=new x.BH;return this.executeAction(e,t),(0,x.gx)((0,x.p4)(t.cancel)).done(n=>{n?setTimeout(()=>{r.resolve("cancel")}):a(t).done(r.resolve).fail(wa(r))}).fail(wa(r)),r}_processChanges(e,t,a,r){var n=this._dataController.store();(0,S.S6)(r,(s,o)=>{var p,v,l=this._getOldData(o.key),{data:d,type:u}=o,h=(0,V.Z)({},o);if(!this._beforeSaveEditData(o,s)){switch(u){case ct:p=this._executeEditingAction("onRowRemoving",v={data:l,key:o.key,cancel:!1},()=>n.remove(o.key).done(m=>{a.push({type:"remove",key:m})}));break;case it:p=this._executeEditingAction("onRowInserting",v={data:d,cancel:!1},()=>n.insert(v.data).done((m,w)=>{(0,_.$K)(w)&&(h.key=w),m&&(0,_.Kn)(m)&&m!==v.data&&(h.data=m),a.push({type:"insert",data:m,index:0})}));break;case Ca:p=this._executeEditingAction("onRowUpdating",v={newData:d,oldData:l,key:o.key,cancel:!1},()=>n.update(o.key,v.newData).done((m,w)=>{m&&(0,_.Kn)(m)&&m!==v.newData&&(h.data=m),a.push({type:"update",key:w,data:m})}))}if(r[s]=h,p){var g=new x.BH;p.always(m=>{t.push({key:o.key,result:m})}).always(g.resolve),e.push(g.promise())}}})}_processRemoveIfError(e,t){return e[t]?.type===ct&&t>=0&&e.splice(t,1),!0}_processRemove(e,t,a){var r=e[t];if(!a||!r||r.type===ct)return this._processRemoveCore(e,t,!a||!r)}_processRemoveCore(e,t,a){return t>=0&&e.splice(t,1),!0}_processSaveEditDataResult(e){for(var t=!1,a=[...this.getChanges()],r=a.length,n=0;n<e.length;n++){var s=e[n].result,o="cancel"===s,l=O.getIndexByKey(e[n].key,a),d=a[l];if(s&&s instanceof Error){if(d&&this._addInternalData({key:d.key,error:s}),this._fireDataErrorOccurred(s),this._processRemoveIfError(a,l))break}else this._processRemove(a,l,o)&&(t=!o)}return a.length<r&&this._silentOption(_t,a),t}_fireSaveEditDataEvents(e){(0,S.S6)(e,(t,a)=>{var{data:r,key:n,type:s}=a,o=this._addInternalData({key:n}),l={key:n,data:r};switch(o.error&&(l.error=o.error),s){case ct:this.executeAction("onRowRemoved",(0,f.l)({},l,{data:o.oldData}));break;case it:this.executeAction("onRowInserted",l);break;case Ca:this.executeAction("onRowUpdated",l)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){var e=new x.BH;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(e):(0,x.gx)(this._beforeSaveEditData()).done(t=>{t?this._resolveAfterSave(e,{cancel:t}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject))}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){var{cancel:t,error:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,x.gx)(this._afterSaveEditData(t)).done(()=>{e.resolve(a)}).fail(e.reject)}_saveEditDataInner(){var e=new x.BH,t=[],a=[],r=[],n=this._dataController.dataSource();return(0,x.gx)(this._fireOnSaving()).done(s=>{var{cancel:o,changes:l}=s;return o?e.resolve().promise():(this._processChanges(a,t,r,l),a.length?(this._refocusEditCell=!0,n?.beginLoading(),(0,x.gx)(...a).done(()=>{this._processSaveEditDataResult(t)?this._endSaving(r,l,e):(n?.endLoading(),e.resolve())}).fail(d=>{n?.endLoading(),e.resolve(d)}),e.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(e))}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,t,a){var r=this._dataController.dataSource();this._beforeEndSaving(t),r?.endLoading(),this._refreshDataAfterSave(e,t,a)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,t,a){var r=this._dataController,n=this.option("editing.refreshMode"),s="reshape"!==n&&"repaint"!==n;s||r.push(e),(0,x.gx)(r.refresh({selection:s,reload:s,load:"reshape"===n,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(t)}).done(()=>{this._resolveAfterSave(a)}).fail(o=>{this._resolveAfterSave(a,{error:o})})}isSaving(){return this._saving}_updateEditColumn(){var e=this._isEditColumnVisible(),t=this.option("editing.useIcons"),a=Wp+(t?" ".concat(Kp):"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:a,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:a})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){var e=this.hasChanges();return!((0,_.$K)(this.option("editing.editRowKey"))||e)}_updateEditButtons(){var e=this._isEditButtonDisabled();this._headerPanelView&&(this._headerPanelView.setToolbarItemDisabled("saveButton",e),this._headerPanelView.setToolbarItemDisabled("revertButton",e))}_applyModified(e,t){e&&e.addClass(Gp)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){var e=this.getChanges(),t={cancel:!1,changes:e};this.executeAction("onEditCanceling",t),t.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){var e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){var t=this._dataController;t&&this._pageIndex!==t.pageIndex()&&("refresh"===e&&this.refresh({isPageChanged:!0}),this._pageIndex=t.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,t){return t?[]:[e.rowIndex]}addDeferred(e){this._deferreds.includes(e)||(this._deferreds.push(e),e.always(()=>{var t=this._deferreds.indexOf(e);t>=0&&this._deferreds.splice(t,1)}))}_prepareChange(e,t,a){var r,n={},s=null===(r=e.row)||void 0===r?void 0:r.data,o=e.key,l=new x.BH;return void 0!==o&&(e.value=t,(0,x.p4)(e.column.setCellValue(n,t,(0,f.l)(!0,{},s),a)).done(()=>{l.resolve({data:n,key:o,oldData:s,type:Ca})}).fail(wa(l)).fail(u=>this._fireDataErrorOccurred(u)),(0,_.$K)(a)&&e.column.displayValueMap&&(e.column.displayValueMap[t]=a),this._updateRowValues(e),this.addDeferred(l)),l}_updateRowValues(e){if(e.values){var t=this._dataController,a=t.getRowIndexByKey(e.key),r=t.getVisibleRows()[a];r&&(e.row.values=r.values,e.values=r.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,t,a,r){var n=e.key,s=new x.BH;return void 0===n&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,t,a).done(o=>{(0,x.gx)(this._applyChange(e,o,r)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){var t=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());var a=e&&e.setCellValue!==e.defaultSetCellValue,r=t.some(n=>n.calculateCellValue!==n.defaultCalculateCellValue);return a||r}_applyChange(e,t,a){var r=(0,V.Z)((0,V.Z)({},e),{forceUpdateRow:a});return this._addChange(t,r),this._updateEditButtons(),this._applyChangeCore(e,r.forceUpdateRow)}_applyChangeCore(e,t){var a=e.column.setCellValue!==e.column.defaultSetCellValue,{row:r}=e;r&&(t||a?this._updateEditRow(r,t,a):r.update&&r.update())}_updateEditRowCore(e,t,a){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,t)})}_updateEditRow(e,t,a){t?this._updateRowImmediately(e,t,a):this._updateRowWithDelay(e,a)}_updateRowImmediately(e,t,a){this._updateEditRowCore(e,!t,a),this._validateEditFormAfterUpdate(e,a),t||this._focusEditingCell()}_updateRowWithDelay(e,t){var a=new x.BH;this.addDeferred(a),setTimeout(()=>{var r,n=(null===(r=this._editForm)||void 0===r?void 0:r.element())||this.component.$element().get(0),s=(0,c.Z)(Z.Z.getActiveElement(n)),o=this._rowsView.getCellIndex(s,e.rowIndex),l=s.get(0),d=O.getSelectionRange(l);if(this._updateEditRowCore(e,!1,t),this._validateEditFormAfterUpdate(e,t),o>=0){var u=this._rowsView._getCellElement(e.rowIndex,o);this._delayedInputFocus(u,()=>{setTimeout(()=>{var h;l=Z.Z.getActiveElement(null===(h=this.component.$element())||void 0===h?void 0:h.get(0)),d.selectionStart>=0&&O.setSelectionRange(l,d)})})}a.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,t){var a,r=t?.row,n=[...this.getChanges()],s=O.getIndexByKey(e.key,n);s<0&&(s=n.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,n.push(e));var o=(0,V.Z)({},n[s]);return o&&(e.data&&(o.data=(0,Ke.FL)(o.data,e.data)),(!o.type||!e.data)&&e.type&&(o.type=e.type),r&&(r.oldData=this._getOldData(r.key),r.data=(0,Ke.FL)(r.data,e.data))),n[s]=o,this._silentOption(_t,n),t&&o!==(null===(a=this.getChanges())||void 0===a?void 0:a[s])&&(t.forceUpdateRow=!0),o}_getFormEditItemTemplate(e,t){return t.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){var r,l,{column:t}=e,a=e.row&&e.row.rowIndex,n=this.isRowBasedEditMode(),s=this.isEditRow(a),o=this.isEditCell(a,e.columnIndex);return!(t.showEditorAlways||t.setCellValue&&(s&&t.allowEditing||o))||"data"!==e.rowType&&"detailAdaptive"!==e.rowType||t.command?"detail"===t.command&&"detail"===e.rowType&&s&&(r=null==this?void 0:this.getEditFormTemplate(e)):(((this.allowUpdating(e)||s)&&t.allowEditing||o)&&(s||!n)&&(t.showEditorAlways&&!n&&this._isEditingStart(l={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:t}),(!l||!l.cancel)&&(e.setValue=(u,h)=>{this.updateFieldValue(e,u,h)})),r=t.editCellTemplate||this._getDefaultEditorTemplate()),r}_createButton(e,t,a,r){var n=eR[t.name],s=this.option("editing.useIcons"),o=this.option("useLegacyColumnButtonTemplate"),l=(0,c.Z)("<a>").attr("href","#").addClass("dx-link").addClass(t.cssClass);if(t.template&&o)this._rowsView.renderTemplate(e,t.template,a,!0);else{if(t.template)l=(0,c.Z)("<span>").addClass(t.cssClass);else if(s&&n||t.icon){var d=zt.P(n=t.icon||n);"image"===d||"svg"===d?l=zt.H(n).addClass(t.cssClass):l.addClass("dx-icon".concat("dxIcon"===d?"-":" ").concat(n)).attr("title",t.text),l.addClass("dx-link-icon"),e.addClass(Kp);var u=this.getButtonLocalizationNames()[t.name];u&&l.attr("aria-label",y.Z.format(u))}else l.text(t.text);(0,_.$K)(t.hint)&&l.attr("title",t.hint),this._isButtonDisabled(t,a)?l.addClass("dx-state-disabled"):(!t.template||t.onClick)&&C.Z.on(l,(0,D.V4)("click","dxDataGridEditing"),this.createAction(h=>{var p;null===(p=t.onClick)||void 0===p||p.call(t,(0,f.l)({},h,{row:a.row,column:a.column})),h.event.preventDefault(),h.event.stopPropagation()})),e.append(l,"&nbsp;"),t.template&&(a.renderAsync=!1,this._rowsView.renderTemplate(l,t.template,a,!0,r))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,t,a,r){var n,s=null!==(n=this.option("editing.texts"))&&void 0!==n?n:{},l={revert:"cancel",save:"save",addRow:"addrow"}[t],d={revert:s.cancelAllChanges,save:s.saveAllChanges,addRow:s.addRow}[t],u=("save"===l||"cancel"===l)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:h=>{(0,c.Z)(h.element).addClass(e._getToolbarButtonClass("".concat("dx-edit-button"," ").concat(this.addWidgetPrefix(l),"-button")))},icon:"edit-button-".concat(l),disabled:u,onClick:()=>{setTimeout(()=>{this[a]()})},text:d,hint:d},showText:"inMenu",name:"".concat(t,"Button"),location:"after",locateInMenu:"auto",sortIndex:r}}prepareEditButtons(e){var t,r=[];return(null!==(t=this.option("editing"))&&void 0!==t?t:{}).allowAdding&&r.push(this.prepareButtonItem(e,"addRow","addRow",20)),r}highlightDataCell(e,t){this.shouldHighlightCell(t)&&e.addClass(Gp)}_afterInsertRow(e){}_beforeSaveEditData(e){if(e&&!(0,_.$K)(e.key)&&(0,_.$K)(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,t){var a=this.option("editing.".concat(e));return(0,_.mf)(a)&&(a=a({component:this.component,row:t.row})),a}allowUpdating(e,t){var a,r=null!==(a=this.option("editing.startEditAction"))&&void 0!==a?a:"click";return(!(arguments.length>1)||r===t||"down"===t)&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var t,a,r,{columnIndex:n}=e,s=null===(a=null===(t=e?.row)||void 0===t?void 0:t.modifiedValues)||void 0===a?void 0:a[n];return!(null===(r=e?.row)||void 0===r)&&r.isNewRow&&(s=e.value),void 0!==s}isNewRowInEditMode(){var e=this._getVisibleEditRowIndex(),t=this._dataController.items();return e>=0&&t[e].isNewRow}_isRowDeleteAllowed(){}shouldHighlightCell(e){return this.isCellModified(e)&&e.column.setCellValue&&(this.getEditMode()!==pt||!e.row.isEditing)}}},extenders:{controllers:{data:Jp},views:{rowsView:i=>class extends i{getCellIndex(e,t){if(!e.is("td")&&t>=0){var a=this.getCellElements(t),r=-1;return(0,S.S6)(a,(n,s)=>{(0,c.Z)(s).find(e).length&&(r=n)}),r}return super.getCellIndex.apply(this,arguments)}publicMethods(){return super.publicMethods().concat(["cellValue"])}_getCellTemplate(e){return this._editingController.getColumnTemplate(e)||super._getCellTemplate(e)}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var a=!!e.removed,r=!!e.isNewRow,n=!!e.modified;r&&t.addClass("dx-row-inserted"),n&&t.addClass("dx-row-modified"),(r||a)&&t.removeClass("dx-selection")}return t}_getColumnIndexByElement(e){for(var t=e.closest("table"),a=this.getTableElements();t.length&&!a.filter(t).length;)e=t.closest("td"),t=e.closest("table");return this._getColumnIndexByElementCore(e)}_getColumnIndexByElementCore(e){var t=e.closest(".".concat(Vt,"> td:not(.dx-master-detail-cell)"));return this.getCellIndex(t)}_editCellByClick(e,t){var a=this._editingController,r=(0,c.Z)(e.event.target),n=this._getColumnIndexByElement(r),s=this._dataController.items()[e.rowIndex],o=a.allowUpdating({row:s},t)||s&&s.isNewRow,l=this._columnsController.getVisibleColumns()[n],d=a.isEditCell(e.rowIndex,n),u=o&&l&&(l.allowEditing||d),h=this.option("editing.startEditAction")||"click",p=l&&l.showEditorAlways;if(d)return!0;if("down"===t)return(N.Z.real().ios||N.Z.real().android)&&(0,Rt.M3)(),p&&u&&a.editCell(e.rowIndex,n);if("click"===t&&"dblClick"===h&&this._pointerDownTarget===r.get(0)){var v=s?.isNewRow;a.closeEditCell(!1,v)}return u&&t===h?a.editCell(e.rowIndex,n)||a.isEditRow(e.rowIndex):void 0}_rowPointerDown(e){this._pointerDownTarget=e.event.target,this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(e,"down")})}_rowClickTreeListHack(e){super._rowClick.apply(this,arguments)}_rowClick(e){var t=(0,c.Z)(e.rowElement).hasClass(this.addWidgetPrefix(Hr));e.event[Np]=this.component,!this._editCellByClick(e,"click")&&!t&&super._rowClick.apply(this,arguments)}_rowDblClickTreeListHack(e){super._rowDblClick.apply(this,arguments)}_rowDblClick(e){this._editCellByClick(e,"dblClick")||super._rowDblClick.apply(this,arguments)}_cellPrepared(e,t){var a,r=this._editingController,n=!!t.column.command,s=t.setValue,o=r.isEditRow(t.rowIndex),l=jp(o,t);if(qp(o,t)){var{alignment:d}=t.column;e.toggleClass(this.addWidgetPrefix("readonly"),!s).toggleClass("dx-cell-focus-disabled",!s),d&&e.find(ho).first().css("textAlign",d)}l&&this._editCellPrepared(e);var u=!(null===(a=t.column)||void 0===a||!a.cellTemplate);t.column&&!n&&(!u||r.shouldHighlightCell(t))&&r.highlightDataCell(e,t),super._cellPrepared.apply(this,arguments)}_getCellOptions(e){var t=super._getCellOptions(e),{columnIndex:a,row:r}=e;return t.isEditing=this._editingController.isEditCell(t.rowIndex,t.columnIndex),t.removed=r.removed,r.modified&&(t.modified=void 0!==r.modifiedValues[a]),t}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),t.removed&&this.setAria("roledescription",y.Z.format("dxDataGrid-ariaDeletedCell"),e),t.modified&&this.setAria("roledescription",y.Z.format("dxDataGrid-ariaModifiedCell"),e),t.column.allowEditing&&!t.removed&&!t.modified&&"data"===t.rowType&&t.column.calculateCellValue===t.column.defaultCalculateCellValue&&this._editingController.isCellBasedEditMode()&&this.setAria("roledescription",y.Z.format("dxDataGrid-ariaEditableCell"),e)}_createCell(e){var t=super._createCell(e),a=this._editingController.isEditRow(e.rowIndex);return qp(a,e)&&t.addClass(Nr),t}cellValue(e,t,a,r){var n=this.getCellOptions(e,t);if(n){if(void 0===a)return n.value;this._editingController.updateFieldValue(n,a,r,!0)}}dispose(){super.dispose.apply(this,arguments),clearTimeout(this._pointerDownTimeout)}_renderCore(){return super._renderCore.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}_editCellPrepared(){}_formItemPrepared(){}},headerPanel:i=>class extends i{optionChanged(e){var{fullName:t}=e;switch(e.name){case"editing":t&&![Zr,_t,qt,Pe].some(n=>n===t)&&this._invalidate(),super.optionChanged(e);break;case"useLegacyColumnButtonTemplate":e.handled=!0;break;default:super.optionChanged(e)}}_getToolbarItems(){var e=super._getToolbarItems();return this._editingController.prepareEditButtons(this).concat(e)}isVisible(){var e=this._editingController.option("editing");return super.isVisible()||e?.allowAdding}}}}};P.registerModule("editing",(0,V.Z)((0,V.Z)({},go),{extenders:(0,V.Z)((0,V.Z)({},go.extenders),{controllers:(0,V.Z)((0,V.Z)({},go.extenders.controllers),{data:i=>class extends(Jp(i)){_changeRowExpandCore(e){var t=this._editingController;return Array.isArray(e)&&t&&t.refresh(),super._changeRowExpandCore.apply(this,arguments)}}})})}));var AR={extenders:{controllers:{editing:i=>class extends i{isRowEditMode(){return this.getEditMode()===pt}_afterCancelEditData(e){var t=this._dataController;this.isRowBasedEditMode()&&e>=0?t.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,t){var a=this.isRowBasedEditMode(),n=!this.isPopupEditMode()&&t.row&&(0,E.bY)(t.row.key,this.option(Pe));if(a)switch(e.name){case"edit":return!n&&this.allowUpdating(t);case"delete":return super._isDefaultButtonVisible(e,t)&&!n;case"save":case"cancel":return n;default:return super._isDefaultButtonVisible(e,t)}return super._isDefaultButtonVisible(e,t)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){var{allowCancelEditing:t}=e??{};if(this.isRowBasedEditMode()){var a=this.getChanges().filter(r=>"update"===r.type).length>0;this.init(),t&&a&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){var e=super._isEditColumnVisible(),t=this.option("editing"),a=this.isRowEditMode();return e||a&&(t.allowUpdating||t.allowAdding)}_focusEditorIfNeed(){var e=this.getEditMode();if(this._needFocusEditor){if(zA.includes(e)){var t=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(t,()=>{t&&this.component.focus(t)})}this._needFocusEditor=!1}}},data:i=>class extends i{_getChangedColumnIndices(e,t,a,r){if(!this._editingController.isRowBasedEditMode()||e.isEditing===t.isEditing)return super._getChangedColumnIndices.apply(this,arguments)}}},views:{rowsView:i=>class extends i{_createRow(e){var t=super._createRow.apply(this,arguments);return e&&this._editingController.isEditRow(e.rowIndex)&&(t.addClass(Yp),t.removeClass(kp),"detail"===e.rowType&&t.addClass(this.addWidgetPrefix(Hr))),t}_update(e){super._update(e),"updateSelection"===e.changeType&&this.getTableElements().children("tbody").children(".".concat(Yp)).removeClass(kp)}}}}};P.registerModule("editingRowBased",AR);var e_="dx-responsivebox",t_="".concat(e_,"-screen-"),i_="dxBoxItemData",a_=Br.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init(){this.option("screenByWidth")||this._options.silent("screenByWidth",B.$n),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:()=>"dx-box-item",_itemDataKey:()=>i_,_initMarkup(){this.callBase(),this.$element().addClass(e_)},_renderItems(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged(i){var e=this._findItemElementByItem(i);e.length&&(this._refreshItem(e,i),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize(){var i=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(t_+i),this.option("currentScreenFactor",i)},_removeScreenSizeClass(){var i=this.option("currentScreenFactor");i&&this.$element().removeClass(t_+i)},_prepareGrid(){var i=this._grid=[];this._prepareRowsAndCols(),(0,S.S6)(this._rows,()=>{var e=[];i.push(e),(0,S.S6)(this._cols,()=>{e.push(this._createEmptyCell())})})},getSingleColumnRows(){var i=this.option("rows"),e=this._screenItems.length;if(i.length){for(var t=this._filterByScreen(i),a=[],r=0;r<e;r++){var n=this._defaultSizeConfig();r<t.length&&(0,_.$K)(t[r].shrink)&&(n.shrink=t[r].shrink),a.push(n)}return a}return this._defaultSizeConfig(e)},_prepareRowsAndCols(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems(){this._screenItems.sort((i,e)=>i.location.row-e.location.row||i.location.col-e.location.col),(0,S.S6)(this._screenItems,(i,e)=>{(0,f.l)(e.location,{row:i,col:0,rowspan:1,colspan:1})})},_sizesByScreen(i){return(0,S.UI)(this._filterByScreen(i),e=>(0,f.l)(this._defaultSizeConfig(),e))},_createDefaultSizeConfig:()=>({ratio:1,baseSize:0,minSize:0,maxSize:0}),_defaultSizeConfig(i){var e=this._createDefaultSizeConfig();if(!arguments.length)return e;for(var t=[],a=0;a<i;a++)t.push(e);return t},_filterByScreen(i){var e=this._screenRegExp();return(0,E.h3)(i,t=>!t.screen||e.test(t.screen))},_screenRegExp(){var i=this._getCurrentScreen();return new RegExp("(^|\\s)".concat(i,"($|\\s)"),"i")},_getCurrentScreen(){var i=this._screenWidth();return this.option("screenByWidth")(i)},_screenWidth:()=>(0,B.Ym)()?(0,b.dz)((0,B.Jj)()):1920,_createEmptyCell:()=>({item:{},location:{colspan:1,rowspan:1}}),_spreadItems(){(0,S.S6)(this._screenItems,(i,e)=>{var t=e.location||{},n=this._grid[t.row];this._occupyCells(n&&n[t.col],e)})},_itemsByScreen(){return this.option("items").reduce((i,e)=>{var t=e.location||{};return t=(0,_.PO)(t)?[t]:t,this._filterByScreen(t).forEach(a=>{i.push({item:e,location:(0,f.l)({rowspan:1,colspan:1},a)})}),i},[])},_occupyCells(i,e){!i||this._isItemCellOccupied(i,e)||((0,f.l)(i,e),this._markSpanningCell(i))},_isItemCellOccupied(i,e){if(!(0,_.Qr)(i.item))return!0;var t=!1;return this._loopOverSpanning(e.location,a=>{t=t||!(0,_.Qr)(a.item)}),t},_loopOverSpanning(i,e){var t=i.row+i.rowspan-1,a=i.col+i.colspan-1,r=Math.min(t,this._rows.length-1),n=Math.min(a,this._cols.length-1);i.rowspan-=t-r,i.colspan-=a-n;for(var s=i.row;s<=r;s++)for(var o=i.col;o<=n;o++)(s!==i.row||o!==i.col)&&e(this._grid[s][o])},_markSpanningCell(i){this._loopOverSpanning(i.location,e=>{(0,f.l)(e,{item:i.item,spanningCell:i})})},_linkNodeToItem(){(0,S.S6)(this._itemElements(),(i,e)=>{var t=(0,c.Z)(e),a=t.data(i_);a.box||(a.node=t.children())})},_layoutItems(){var i=this._grid.length,e=i&&this._grid[0].length;if(i||e){var t=this._layoutBlock({direction:"col",row:{start:0,end:i-1},col:{start:0,end:e-1}}),a=this._prepareBoxConfig(t.box||{direction:"row",items:[(0,f.l)(t,{ratio:1})]});(0,f.l)(a,this._rootBoxConfig(a.items)),this._$root=(0,c.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,Fr,a)}},_rootBoxConfig(i){return{width:"100%",height:"100%",items:(0,S.S6)(i,(t,a)=>{this._needApplyAutoBaseSize(a)&&(0,f.l)(a,{baseSize:"auto"})}),itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:i=>!(i.baseSize||i.minSize&&"auto"!==i.minSize||i.maxSize&&"auto"!==i.maxSize),_prepareBoxConfig(i){return(0,f.l)(i||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock(i){return this._isSingleItem(i)?this._itemByCell(i.row.start,i.col.start):this._layoutDirection(i)},_isSingleItem(i){var e=this._grid[i.row.start][i.col.start].location;return i.row.end-i.row.start==e.rowspan-1&&i.col.end-i.col.start==e.colspan-1},_itemByCell(i,e){var t=this._grid[i][e];return t.spanningCell?null:t.item},_layoutDirection(i){for(var r,e=[],{direction:t}=i,a=this._crossDirection(t);r=this._nextBlock(i);){if(this._isBlockIndivisible(i.prevBlockOptions,r))throw Q.Z.Error("E1025");var n=this._layoutBlock({direction:a,row:r.row,col:r.col,prevBlockOptions:i});n&&((0,f.l)(n,this._blockSize(r,a)),e.push(n)),i[a].start=r[a].end+1}return{box:this._prepareBoxConfig({direction:t,items:e})}},_isBlockIndivisible:(i,e)=>i&&i.col.start===e.col.start&&i.col.end===e.col.end&&i.row.start===e.row.start&&i.row.end===e.row.end,_crossDirection:i=>"col"===i?"row":"col",_nextBlock(i){var{direction:e}=i,t=this._crossDirection(e),a=i[e].start,r=i[e].end,n=i[t].start;if(n>i[t].end)return null;for(var s=1,o=n;o<n+s;o++){for(var l=1,d=a;d<=r;d++){var u=this._cellByDirection(e,d,o);l=Math.max(l,u.location["".concat(t,"span")])}var h=o+l,p=n+s;h>p&&(s+=h-p)}var v={};return v[e]={start:a,end:r},v[t]={start:n,end:n+s-1},v},_cellByDirection(i,e,t){return"col"===i?this._grid[t][e]:this._grid[e][t]},_blockSize(i,e){for(var t="row"===e?"auto":0,a="row"===e?this._rows:this._cols,r=(0,f.l)(this._createDefaultSizeConfig(),{ratio:0}),n=i[e].start;n<=i[e].end;n++){var s=a[n];r.ratio+=s.ratio,r.baseSize+=s.baseSize,r.minSize+=s.minSize,r.maxSize+=s.maxSize,(0,_.$K)(s.shrink)&&(r.shrink=s.shrink)}return r.minSize=r.minSize?r.minSize:t,r.maxSize=r.maxSize?r.maxSize:"auto",this._isSingleColumnScreen()&&(r.baseSize="auto"),r},_update(i){var e=this._$root;this._renderItems(),e&&(i?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot(i){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(i)},_dispose(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots(){this._assistantRoots&&(0,S.S6)(this._assistantRoots,(i,e)=>{(0,c.Z)(e).remove()})},_clearItemNodeTemplates(){(0,S.S6)(this.option("items"),function(){delete this.node})},_attachClickEvent:E.ZT,_optionChanged(i){switch(i.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(i),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(i);break;case"currentScreenFactor":break;default:this.callBase(i)}},_dimensionChanged(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint(){this._update()}});(0,X.Z)("dxResponsiveBox",a_);const VR=a_;var LR="dx-field-button-item";var MR="dx-field-empty-item";function r_(i){var{$parent:e,rootElementCssClassList:t}=i;return(0,c.Z)("<div>").addClass(MR).html("&nbsp;").addClass(t.join(" ")).appendTo(e)}var Re=T(3082),kR=xi.Z.inherit({ctor(i,e){this.editor=i,this.validator=e,this.validationRequestsCallbacks=[];var t=a=>{this.validationRequestsCallbacks.forEach(r=>r(a))};i.validationRequest.add(t),i.on("disposing",()=>{i.validationRequest.remove(t)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(i){this.editor.option({validationErrors:i.brokenRules,validationStatus:i.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}});const NR=kR;var mo="pending",s_=ta.Z.inherit({_initOptions(i){this.callBase.apply(this,arguments),this.option(Re.Z.initValidationOptions(i))},_getDefaultOptions(){return(0,f.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,le.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var i=this._findGroup();this._groupWasInit||this.on("disposing",e=>{Re.Z.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==i)&&(Re.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=i,Re.Z.registerValidatorInGroup(i,this))},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var i=this.$element()[0];return(0,Wa.aT)(i,"dx-validation-target")},_initAdapter(){var i=this._getEditor(),e=this.option("adapter");if(!e){if(i)return(e=new NR(i,this)).validationRequestsCallbacks.push(a=>{this._validationInfo.skipValidation||this.validate(a)}),void this.option("adapter",e);throw Q.Z.Error("E0120")}var t=e.validationRequestsCallbacks;t&&t.push(a=>{this.validate(a)})},_toggleRTLDirection(i){var e,t,a,r=null!==(a=null===(t=null===(e=this.option("adapter"))||void 0===e?void 0:e.editor)||void 0===t?void 0:t.option("rtlEnabled"))&&void 0!==a?a:i;this.callBase(r)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var i=this._getEditor();if(i){var t=(this.option("validationRules")||[]).some(a=>{var{type:r}=a;return"required"===r})||null;i.isInitialized()&&i.setAria("required",t),i.option("_onMarkupRendered",()=>{i.setAria("required",t)})}},_visibilityChanged(i){i&&this._initGroupRegistration()},_optionChanged(i){switch(i.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(Re.Z.synchronizeValidationOptions(i,this.option()));break;default:this.callBase(i)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,S.UI)(this.option("validationRules"),(i,e)=>(0,f.l)({},i,{validator:this,index:e}))),this._validationRules},_findGroup(){var i=this.$element();return this.option("validationGroup")||Re.Z.findGroup(i,this._modelByElement(i))},_resetValidationRules(){delete this._validationRules},validate(i){var l,e=this.option("adapter"),t=this.option("name"),a=e.bypass&&e.bypass(),r=i&&void 0!==i.value?i.value:e.getValue(),n=e.getCurrentValidationError&&e.getCurrentValidationError(),s=this._getValidationRules(),o=this._validationInfo&&this._validationInfo.result;return o&&o.status===mo&&o.value===r?(0,f.l)({},o):(a?l={isValid:!0,status:"valid"}:n&&n.editorSpecific?(n.validator=this,l={isValid:!1,status:"invalid",brokenRule:n,brokenRules:[n]}):l=Re.Z.validate(r,s,t),l.id=(new ve.Z).toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(d=>{d.id===this._validationInfo.result.id&&this._applyValidationResult(d,e)}),(0,f.l)({},this._validationInfo.result))},reset(){var i=this.option("adapter");this._validationInfo.skipValidation=!0,i.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},i)},_updateValidationResult(i){if(this._validationInfo.result&&this._validationInfo.result.id===i.id)for(var t in i)"id"!==t&&"complete"!==t&&(this._validationInfo.result[t]=i[t]);else this._validationInfo.result=(0,f.l)({},i,{complete:this._validationInfo.deferred&&this._validationInfo.result.complete})},_applyValidationResult(i,e){var t=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(i.validator=this,this._updateValidationResult(i),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===mo)return this._validationInfo.deferred||(this._validationInfo.deferred=(0,x.BH)(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);this._validationInfo.result.status!==mo&&(t(i),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(i),this._validationInfo.deferred=null))},focus(){var i=this.option("adapter");i&&i.focus&&i.focus()},_useTemplates:()=>!1});(0,X.Z)("dxValidator",s_);const o_=s_,l_=o_;var fo="dx-form-group",d_="dx-col-",u_="dx-field-item",h_="dx-layout-manager-one-col",c_="dx-field-item-label-content",p_="dx-field-item-label",Co="dx-field-item-content",__="dx-root-simple-item",v_="dx-field-item-tab",g_="dx-group-colcount-",m_="group-col-count",wo="simple",QR=["dxTagBox","dxRangeSlider","dxDateRangeBox"],JR=["dxRangeSlider","dxSlider"],eO=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function f_(i,e){var{showRequiredMark:t,requiredMark:a,showOptionalMark:r,optionalMark:n}=i;return{showRequiredMark:t&&e,requiredMark:a,showOptionalMark:r&&!e,optionalMark:n}}var sO="dx-field-item-required-mark",C_="dx-field-item-label-location-",oO="dx-field-item-optional-mark",lO="dx-field-item-label-text";function cO(i){for(var e=0,t=i.children.length,a=0;a<t;a++)e+=i.children[a].offsetWidth;return e}var pO="dx-flex-layout",_O="dx-field-item-optional",vO="dx-field-item-required",w_="dx-field-item-content-wrapper",gO="dx-field-item-content-location-",mO="dx-field-item-label-align",fO="dx-field-item-help-text",CO="dx-label-v-align",wO="dx-label-h-align",xO="dx-toggle-controls-paddings",SO="dx-template-wrapper",xo="dx-validation-target",yO="dx-invalid";function bO(i){var{$parent:e,rootElementCssClassList:t,formOrLayoutManager:a,createComponentCallback:r,labelOptions:n,labelNeedBaselineAlign:s,labelLocation:o,needRenderLabel:l,formLabelLocation:d,item:u,editorOptions:h,isSimpleItem:p,isRequired:v,template:g,helpID:m,labelID:w,name:I,helpText:A,requiredMessageTemplate:F,validationGroup:G}=i,M=(0,c.Z)("<div>").addClass(t.join(" ")).appendTo(e);M.addClass(v?vO:_O),p&&M.addClass(pO),p&&s&&M.addClass(mO);var k=(0,c.Z)("<div>");k.data("dx-form-item",u),k.addClass(Co).addClass(gO+{right:"left",left:"right",top:"bottom"}[d]);var De,U=null;if(l&&(n.labelTemplate&&(n.labelTemplateData=y_(u,h,a)),U=function dO(i){var{text:e,id:t,location:a,alignment:r,labelID:n=null,markOptions:s={},labelTemplate:o,labelTemplateData:l,onLabelTemplateRendered:d}=i;if((!(0,_.$K)(e)||e.length<=0)&&!(0,_.$K)(o))return null;var u=(0,c.Z)("<label>").addClass("".concat(p_," ").concat(C_).concat(a)).attr("for",t).attr("id",n).css("textAlign",r),h=(0,c.Z)("<span>").addClass(c_),p=(0,c.Z)("<span>").addClass(lO).text(e);return o&&(p=(0,c.Z)("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,o.render({container:(0,j.uD)(p),model:l,onRendered(){d?.()}})),u.append(h.append(p,function uO(i){var e=function iO(i){var{showRequiredMark:e,requiredMark:t,showOptionalMark:a,optionalMark:r}=i;return e||a?String.fromCharCode(160)+(e?t:r):""}(i);return""===e?null:(0,c.Z)("<span>").addClass(i.showRequiredMark?sO:oO).text(e)}(s)))}(n)),U){var{editorType:ee}=u;M.append(U),("top"===o||"left"===o)&&M.append(k),"right"===o&&M.prepend(k),M.addClass("top"===o?CO:wO),("dxCheckBox"===ee||"dxSwitch"===ee)&&C.Z.on(U,se.u,()=>{C.Z.trigger(k.children(),se.u)});var $=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(ee),ce=n.alignment;!g&&$&&"top"===o&&("left"===ce||!ce)&&k.addClass(xO)}else M.append(k);if(g)g.render({container:(0,j.uD)(k),model:y_(u,h,a),onRendered(){var bH=function EO(i){var e,t;return i?.data(xo)||(null===(t=null===(e=i?.parent)||void 0===e?void 0:e.call(i))||void 0===t?void 0:t.data(xo))}(x_(k));S_(bH)}});else{var je=(0,c.Z)("<div>").appendTo(k);try{(De=r(je,u.editorType,h)).setAria("describedby",m),w&&De.setAria("labelledby",w),De.setAria("required",v)}catch(Bl){Q.Z.log("E1035",Bl.message)}}var Za=x_(k),of=Za&&Za.data(xo);if(of){var za,lf=u.label&&u.label.text,df=lf?null:I,xH=lf?u.label.text:df&&(0,Me.GK)(df);if(p)if(u.validationRules)za=u.validationRules;else{var SH=(0,qe.WU)(F,xH||"");za=u.isRequired?[{type:"required",message:SH}]:null}Array.isArray(za)&&za.length&&r(Za,l_,{validationRules:za,validationGroup:G,dataGetter:()=>({formItem:u})}),S_(of)}return A&&p&&k.parent().append((0,c.Z)("<div>").addClass(w_).append(k).append((0,c.Z)("<div>").addClass(fO).attr("id",m).text(A))),{$fieldEditorContainer:k,$rootElement:M,widgetInstance:De}}function x_(i){var e=i.children().first();return e.hasClass(SO)?e.children().first():e}function S_(i){if(i&&(0,z.yj)()){var e=".".concat(w_),t=a=>{var{element:r,component:n}=a,{isValid:s,validationMessageMode:o}=n.option();(0,c.Z)(r).parents(e).toggleClass(yO,!1===s&&(n._isFocused()||"always"===o))};i.on("optionChanged",a=>{"isValid"===a.name&&t(a)}),i.on("focusIn",t).on("focusOut",t).on("enterKey",t)}}function y_(i,e,t){return{dataField:i.dataField,editorType:i.editorType,editorOptions:e,component:t,name:i.name}}class b_{constructor(){this._map={}}_findWidgetInstance(e){var t;return(0,S.S6)(this._map,(a,r)=>{var{widgetInstance:n,item:s}=r;if(e(s))return t=n,!1}),t}_findFieldByCondition(e,t){var a;return(0,S.S6)(this._map,(r,n)=>{if(e(n))return a="guid"===t?r:n[t],!1}),a}clear(){this._map={}}removeItemsByItems(e){(0,S.S6)(e.getItems(),t=>this.removeItemByKey(t))}removeItemByKey(e){delete this._map[e]}add(e){var t=e.guid||new ve.Z;return this._map[t]=e,t}addItemsOrExtendFrom(e){e.each((t,a)=>{this._map[t]?(a.widgetInstance&&(this._map[t].widgetInstance=a.widgetInstance),this._map[t].$itemContainer=a.$itemContainer):this.add({item:a.item,widgetInstance:a.widgetInstance,guid:t,$itemContainer:a.$itemContainer})})}extendRunTimeItemInfoByKey(e,t){this._map[e]&&(this._map[e]=(0,f.l)(this._map[e],t))}findWidgetInstanceByItem(e){return this._findWidgetInstance(t=>t===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(t=>{var{path:a}=t;return a===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(t=>{var{path:a}=t;return a===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(t=>e===t.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(t=>e===((0,_.HD)(t)?t:t.dataField))}findItemContainerByItem(e){for(var t in this._map)if(this._map[t].item===e)return this._map[t].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(t=>{var{item:a}=t;return a===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(t=>{var{item:a}=t;return a===e},"preparedItem")}getItems(){return this._map}each(e){(0,S.S6)(this._map,(t,a)=>{e(t,a)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(r=>!!this._map[r].path&&this._map[r].path.indexOf(e,0)>-1).forEach(r=>this.removeItemByKey(r))}}var OO=Ge.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:y.Z.format("dxForm-optionalMark"),requiredMessage:y.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init(){var i=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new b_,this._updateReferencedOptions(i),this._initDataAndItems(i)},_dispose(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems(i){this._syncDataWithItems(),this._updateItems(i)},_syncDataWithItems(){var i=this.option("layoutData"),e=this.option("items");(0,_.$K)(e)&&e.forEach(t=>{var a;t.dataField&&void 0===this._getDataByField(t.dataField)&&(t.editorOptions&&(a=t.editorOptions.value),((0,_.$K)(a)||t.dataField in i)&&this._updateFieldValue(t.dataField,a))})},_getDataByField(i){return i?this.option("layoutData.".concat(i)):null},_isCheckboxUndefinedStateEnabled(i){var{allowIndeterminateState:e,editorType:t,dataField:a}=i;if(!0===e&&"dxCheckBox"===t){var r=["layoutData",...a.split(".")],n=r.pop(),s=this.option(r.join("."));return s&&n in s}return!1},_updateFieldValue(i,e){var t=this.option("layoutData"),a=e;!We.Z.isWrapped(t[i])&&(0,_.$K)(i)?this.option("layoutData.".concat(i),a):We.Z.isWritableWrapped(t[i])&&(a=(0,_.mf)(a)?a():a,t[i](a)),this._triggerOnFieldDataChanged({dataField:i,value:a})},_triggerOnFieldDataChanged(i){this._createActionByOption("onFieldDataChanged")(i)},_updateItems(i){var e=this,t=this.option("items"),a=(0,_.$K)(t),r=e.option("customizeItem"),n=a?t:this._generateItemsByData(i);if((0,_.$K)(n)){var s=[];(0,S.S6)(n,(o,l)=>{e._isAcceptableItem(l)&&(l=e._processItem(l),r&&r(l),(0,_.Kn)(l)&&!1!==We.Z.unwrap(l.visible)&&s.push(l))}),(!e._itemWatchers.length||!a)&&e._updateItemWatchers(n),this._setItems(s),this._sortItems()}},_cleanItemWatchers(){this._itemWatchers.forEach(i=>{i()}),this._itemWatchers=[]},_updateItemWatchers(i){var e=this,t=e._getWatch();i.forEach(a=>{(0,_.Kn)(a)&&(0,_.$K)(a.visible)&&(0,_.mf)(t)&&e._itemWatchers.push(t(()=>We.Z.unwrap(a.visible),()=>{e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData(i){var e=[];return(0,_.$K)(i)&&(0,S.S6)(i,t=>{e.push({dataField:t})}),e},_isAcceptableItem(i){var t=this._getDataByField(i.dataField||i);return!((0,_.mf)(t)&&!We.Z.isWrapped(t))},_processItem(i){var e;if("string"==typeof i&&(i={dataField:i}),"object"==typeof i&&!i.itemType&&(i.itemType=wo),!(0,_.$K)(i.editorType)&&(0,_.$K)(i.dataField)){var t=this._getDataByField(i.dataField);i.editorType=(0,_.$K)(t)?this._getEditorTypeByDataType((0,_.dt)(t)):"dxTextBox"}return"dxCheckBox"===i.editorType&&(i.allowIndeterminateState=null===(e=i.allowIndeterminateState)||void 0===e||e),i},_getEditorTypeByDataType(i){switch(i){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems(){(0,Ui.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes(){this._items.sort((i,e)=>{var t=i.visibleIndex,a=e.visibleIndex;return t>a?1:t<a?-1:0})},_initMarkup(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox(){var i=[];if(this._items&&this._items.length){var e=this._getColCount(),t=(0,c.Z)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);var a=this._generateLayoutItems();this._responsiveBox=this._createComponent(t,VR,this._getResponsiveBoxConfig(a,e,i)),(0,B.Ym)()||this._renderTemplates(i)}},_itemStateChangedHandler(i){this._refresh()},_renderTemplates(i){var e=this,t=0;i.forEach(a=>{var n,{item:r}=a;null!==(n=r?.label)&&void 0!==n&&n.template&&t++}),(0,S.S6)(i,(a,r)=>{switch(r.itemType){case"empty":r_(r);break;case"button":e._renderButtonItem(r);break;default:e._renderFieldItem(r,t)}})},_getResponsiveBoxConfig(i,e,t){var a=this,r=a.option("colCountByScreen"),n=r&&r.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged(){var s=a.option("onLayoutChanged"),o=a.isSingleColumnMode();s&&(a.$element().toggleClass(h_,o),s(o))},onContentReady(s){(0,B.Ym)()&&a._renderTemplates(t),a.option("onLayoutChanged")&&a.$element().toggleClass(h_,a.isSingleColumnMode(s.component))},itemTemplate(s,o,l){if(s.location){var d=(0,c.Z)(l),h=a._items[s.location.col+s.location.row*e];if(h){var p=[h.cssClass];d.toggleClass("dx-single-column-item-content",a.isSingleColumnMode(this)),0===s.location.row&&p.push("dx-first-row"),0===s.location.col&&p.push("dx-first-col"),h.itemType===wo&&a.option("isRoot")&&d.addClass(__);var v=s.location.col===e-1||s.location.col+s.location.colspan===e,g=a._getRowsCount(),m=s.location.row===g-1;v&&p.push("dx-last-col"),m&&p.push("dx-last-row"),"empty"!==h.itemType&&(p.push(u_),p.push(a.option("cssItemClass")),(0,_.$K)(h.col)&&p.push("dx-col-".concat(h.col))),t.push({itemType:h.itemType,item:h,$parent:d,rootElementCssClassList:p})}}},cols:a._generateRatio(e),rows:a._generateRatio(a._getRowsCount(),!0),dataSource:i,screenByWidth:a.option("screenByWidth"),singleColumnScreen:!n&&"xs"}},_getColCount(){var i=this.option("colCount"),e=this.option("colCountByScreen");if(e){var t=this.option("form").getTargetScreenFactor();t||(t=(0,B.Ym)()?(0,B.Wf)(this.option("screenByWidth")):"lg"),i=e[t]||i}if("auto"===i){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=i=this._getMaxColCount()}return i<1?1:i},_getMaxColCount(){if(!(0,B.Ym)())return 1;var i=this.option("minColWidth"),e=(0,b.dz)(this.$element()),t=this._items.length,a=Math.floor(e/i)||1;return t<a?t:a},isCachedColCountObsolete(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging(i){var t,a,n,s,e=this._items.slice(0),r=[];for(s=0;s<e.length;s++)if(r.push(t=e[s]),(this.option("alignItemLabels")||t.alignItemLabels||t.colSpan)&&(t.col=this._getColByIndex(r.length-1,i)),t.colSpan>1&&t.col+t.colSpan<=i){for(a=[],n=0;n<t.colSpan-1;n++)a.push({merged:!0});r=r.concat(a)}else delete t.colSpan;this._setItems(r)},_getColByIndex:(i,e)=>i%e,_setItems(i){this._items=i,this._cashedColCount=null},_generateLayoutItems(){var a,r,i=this._items,e=this._getColCount(),t=[];for(r=0;r<i.length;r++)if(!(a=i[r]).merged){var n={location:{row:parseInt(r/e),col:this._getColByIndex(r,e)}};(0,_.$K)(a.disabled)&&(n.disabled=a.disabled),(0,_.$K)(a.visible)&&(n.visible=a.visible),(0,_.$K)(a.colSpan)&&(n.location.colspan=a.colSpan),(0,_.$K)(a.rowSpan)&&(n.location.rowspan=a.rowSpan),t.push(n)}return t},_renderEmptyItem(i){r_({$container:i})},_renderButtonItem(i){var{item:e,$parent:t,rootElementCssClassList:a}=i,{$rootElement:r,buttonInstance:n}=function PR(i){var{item:e,$parent:t,rootElementCssClassList:a,validationGroup:r,createComponentCallback:n}=i,s=(0,c.Z)("<div>").appendTo(t).addClass(a.join(" ")).addClass(LR).css("textAlign",function BR(i){return(0,_.$K)(i)?i:"right"}(e.horizontalAlignment));return t.css("justifyContent",function FR(i){switch(i){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(e.verticalAlignment)),{$rootElement:s,buttonInstance:n((0,c.Z)("<div>").appendTo(s),"dxButton",(0,f.l)({validationGroup:r},e.buttonOptions))}}({item:e,$parent:t,rootElementCssClassList:a,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:n,guid:e.guid,$itemContainer:r})},_renderFieldItem(i,e){var n,s,{item:t,$parent:a,rootElementCssClassList:r}=i,o=this._getDataByField(t.dataField),l=!1;if(void 0===o){var{allowIndeterminateState:d,editorType:u,dataField:h}=t;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:d,editorType:u,dataField:h})}var p=t.dataField||t.name,v=this._getFormOrThis(),{$fieldEditorContainer:g,widgetInstance:m,$rootElement:w}=bO(function tO(i){var{$parent:e,rootElementCssClassList:t,formOrLayoutManager:a,createComponentCallback:r,item:n,template:s,labelTemplate:o,name:l,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:h,editorValue:p,canAssignUndefinedValueToEditor:v,editorValidationBoundary:g,editorStylingMode:m,showColonAfterLabel:w,managerLabelLocation:I,itemId:A,managerMarkOptions:F,labelMode:G,onLabelTemplateRendered:M}=i,k=(0,_.$K)(n.isRequired)?n.isRequired:!!function rO(i){var e;return i&&i.length&&(0,S.S6)(i,(t,a)=>{if("required"===a.type)return e=!0,!1}),e}(n.validationRules),U=n.itemType===wo,ee=n.helpText?"dx-".concat(new ve.Z):null,$=function nO(i){var{item:e,id:t,isRequired:a,managerMarkOptions:r,showColonAfterLabel:n,labelLocation:s,labelTemplate:o,formLabelMode:l,onLabelTemplateRendered:d}=i,u=eO.includes(e.editorType),h=(0,f.l)({showColon:n,location:s,id:t,visible:"outside"===l||u&&"hidden"!==l,isRequired:a},e?e.label:{},{markOptions:f_(r,a),labelTemplate:o,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(h.labelID="dx-label-".concat(new ve.Z)),!h.text&&e.dataField&&(h.text=(0,Me.GK)(e.dataField)),h.text&&(h.textWithoutColon=h.text,h.text+=h.showColon?":":""),h}({item:n,id:A,isRequired:k,managerMarkOptions:F,showColonAfterLabel:w,labelLocation:I,formLabelMode:G,labelTemplate:o,onLabelTemplateRendered:M}),ce=$.visible&&($.text||$.labelTemplate&&U),{location:Ie,labelID:$e}=$,Te="top"!==Ie&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(n.editorType),De=function aO(i){var{editorType:e,defaultEditorName:t,editorValue:a,canAssignUndefinedValueToEditor:r,externalEditorOptions:n,editorInputId:s,editorValidationBoundary:o,editorStylingMode:l,formLabelMode:d,labelText:u,labelMark:h}=i,p={};(void 0!==a||r)&&(p.value=a),QR.includes(e)&&(p.value=p.value||[]);var v=n?.labelMode;(0,_.$K)(v)||(v="outside"===d?"hidden":d);var g=n?.stylingMode||l,m=JR.includes(e),w=(0,f.l)(!0,p,n,{inputAttr:{id:s},validationBoundary:o,stylingMode:g,label:m?n?.label:u,labelMode:v,labelMark:h});return n&&(w.dataSource&&(w.dataSource=n.dataSource),w.items&&(w.items=n.items)),t&&!w.name&&(w.name=t),w}({editorType:n.editorType,editorValue:p,defaultEditorName:n.dataField,canAssignUndefinedValueToEditor:v,externalEditorOptions:n.editorOptions,editorInputId:A,editorValidationBoundary:g,editorStylingMode:m,formLabelMode:G,labelText:$.textWithoutColon,labelMark:$.markOptions.showRequiredMark?String.fromCharCode(160)+$.markOptions.requiredMark:""});return{$parent:e,rootElementCssClassList:t,formOrLayoutManager:a,createComponentCallback:r,labelOptions:$,labelNeedBaselineAlign:Te,labelLocation:Ie,needRenderLabel:ce,item:n,isSimpleItem:U,isRequired:k,template:s,helpID:ee,labelID:$e,name:l,helpText:!$.markOptions.showOptionalMark||$.visible||"hidden"===De.labelMode||(0,_.$K)(n.helpText)?n.helpText:$.markOptions.optionalMark,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:h,editorOptions:De}}({$parent:a,rootElementCssClassList:r,item:t,name:p,editorValue:o,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:t.template?this._getTemplate(t.template):null,labelTemplate:null!==(n=t.label)&&void 0!==n&&n.template?this._getTemplate(t.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(p),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(v,e)&&v._alignLabels(this,this.isSingleColumnMode(v))}}));null===(s=this.option("onFieldItemRendered"))||void 0===s||s(),m&&t.dataField&&this._bindDataField(m,t.dataField,t.editorType,g),this._itemsRunTimeInfo.add({item:t,widgetInstance:m,guid:t.guid,$itemContainer:w})},_incTemplateRenderedCallCount(){var i;this._labelTemplateRenderedCallCount=(null!==(i=this._labelTemplateRenderedCallCount)&&void 0!==i?i:0)+1},_shouldAlignLabelsOnTemplateRendered(i,e){return i.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis(){return this.option("form")||this},_bindDataField(i,e,t,a){var r=this._getFormOrThis();i.on("enterKey",n=>{r._createActionByOption("onEditorEnterKey")((0,f.l)(n,{dataField:e}))}),this._createWatcher(i,a,e),this.linkEditorToDataField(i,e,t)},_createWatcher(i,e,t){var a=this,r=a._getWatch();if((0,_.mf)(r)){var n=r(()=>a._getDataByField(t),()=>{var s=a._getDataByField(t);if("dxTagBox"===i.NAME){var o=i.option("value");if(s!==o&&function(l,d){if(!Array.isArray(l)||!Array.isArray(d)||l.length!==d.length)return!1;for(var u=0;u<l.length;u++)if(l[u]!==d[u])return!1;return!0}(s,o))return}i.option("value",s)},{deep:!0,skipImmediate:!0},{createWatcherDataField:t});C.Z.on(e,Ft.x,n)}},_getWatch(){if(!(0,_.$K)(this._watch)){var i=this.option("form");this._watch=i&&i.option("integrationOptions.watchMethod")}return this._watch},_createComponent(i,e,t){var a=this.option("readOnly"),r=Object.hasOwn(t,"readOnly"),n=this.callBase(i,e,(0,V.Z)((0,V.Z)({},t),{readOnly:r?t.readOnly:a})),s=!1;return n.on("optionChanged",o=>{"readOnly"===o.name&&!s&&(r=!0)}),this.on("optionChanged",o=>{"readOnly"===o.name&&!r&&(s=!0,n.option(o.name,o.value),s=!1)}),n},_generateRatio(i,e){var a,r,t=[];for(r=0;r<i;r++)a={ratio:1},e&&(a.baseSize="auto"),t.push(a);return t},_getRowsCount(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions(i){var e=this.option("layoutData");(0,_.Kn)(e)&&Object.getOwnPropertyNames(e).forEach(t=>delete this._optionsByReference["layoutData.".concat(t)]),(0,_.Kn)(i)&&Object.getOwnPropertyNames(i).forEach(t=>this._optionsByReference["layoutData.".concat(t)]=!0)},_clearWidget(i){this._disableEditorValueChangedHandler=!0,i.clear(),this._disableEditorValueChangedHandler=!1,i.option("isValid",!0)},_optionChanged(i){if(0!==i.fullName.search("layoutData."))switch(i.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(i.value),this.option("items")?(0,_.Qr)(i.value)||this._itemsRunTimeInfo.each((e,t)=>{if((0,_.$K)(t.item)){var{dataField:a}=t.item;if(a&&(0,_.$K)(t.widgetInstance)){var n=(0,q.vb)(a)(i.value),{allowIndeterminateState:s,editorType:o}=t.item;void 0!==n||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:s,editorType:o,dataField:a})?t.widgetInstance.option("value",n):this._clearWidget(t.widgetInstance)}}}):(this._initDataAndItems(i.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(i.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(i),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(i)}},_resetColCount(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(i,e){this.on("optionChanged",t=>{t.fullName==="layoutData.".concat(e)&&i._setOptionWithoutOptionChange("value",t.value)}),i.on("valueChanged",t=>{var a=(0,_.Kn)(t.value)||Array.isArray(t.value);!this._disableEditorValueChangedHandler&&(!a||t.value!==t.previousValue)&&this._updateFieldValue(e,t.value)})},_dimensionChanged(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData(i,e){var t=this;(0,_.Kn)(i)?(0,S.S6)(i,(a,r)=>{t._updateFieldValue(a,r)}):"string"==typeof i&&t._updateFieldValue(i,e)},getEditor(i){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(i)||this._itemsRunTimeInfo.findWidgetInstanceByName(i)},isSingleColumnMode(i){var e=this._responsiveBox||i;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo(){return this._itemsRunTimeInfo}});(0,X.Z)("dxLayoutManager",OO);var So="dx-validationsummary",VO="".concat(So,"-item"),LO="".concat(So,"-item-data"),E_=Br.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var i=this.$element(),e=this.option("validationGroup")||Re.Z.findGroup(i,this._modelByElement(i)),t=Re.Z.addGroup(e,!0);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),t.on("validated",this.groupSubscription)},_unsubscribeGroup(){var i=Re.Z.getGroupConfig(this._validationGroup);i&&i.off("validated",this.groupSubscription)},_getOrderedItems(i,e){var t=[];return(0,S.S6)(i,(a,r)=>{var n=(0,E.h3)(e,s=>{if(s.validator===r)return!0});n.length&&(t=t.concat(n))}),t},_groupValidationHandler(i){var e=this._getOrderedItems(i.validators,(0,S.UI)(i.brokenRules,t=>({text:t.message,validator:t.validator,index:t.index})));this.validators=i.validators,(0,S.S6)(this.validators,(t,a)=>{if(a._validationSummary!==this){var r=this._itemValidationHandler.bind(this);a.on("validated",r),a.on("disposing",function(){a.off("validated",r),a._validationSummary=null,r=null}),a._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(i){for(var{isValid:e,validator:t,brokenRules:a}=i,r=this.option("items"),n=!1,s=0,o=function(){var l=r[s];if(l.validator===t){var d=(0,E.h3)(a||[],u=>u.index===l.index)[0];if(e||!d)return r.splice(s,1),n=!0,1;d.message!==l.text&&(l.text=d.message,n=!0)}s++};s<r.length;)o();(0,S.S6)(a,(l,d)=>{(0,E.h3)(r,h=>h.validator===t&&h.index===d.index)[0]||(r.push({text:d.message,validator:t,index:d.index}),n=!0)}),n&&(r=this._getOrderedItems(this.validators,r),this.option("items",r))},_initMarkup(){this.$element().addClass(So),this.callBase()},_optionChanged(i){"validationGroup"===i.name?this._initGroupRegistration():this.callBase(i)},_itemClass:()=>VO,_itemDataKey:()=>LO,_postprocessRenderItem(i){C.Z.on(i.itemElement,"click",()=>{i.itemData.validator&&i.itemData.validator.focus&&i.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,X.Z)("dxValidationSummary",E_);const PO=E_;var I_="dx-validationgroup";(0,X.Z)("dxValidationGroup",class MO extends ta.Z{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),Re.Z.addGroup(this,!1)}_initMarkup(){var e=this.$element();e.addClass(I_),e.find(".".concat("dx-validator")).each((t,a)=>{o_.getInstance((0,c.Z)(a))._initGroupRegistration()}),e.find(".".concat("dx-validationsummary")).each((t,a)=>{PO.getInstance((0,c.Z)(a)).refreshValidationGroup()}),super._initMarkup()}validate(){return Re.Z.validateGroup(this)}reset(){return Re.Z.resetGroup(this)}_dispose(){Re.Z.removeGroup(this),this.$element().removeClass(I_),super._dispose()}_useTemplates(){return!1}});var $r={move(i,e){(0,de.pB)(i,{left:e})}},yo={moveTo(i,e,t,a){ge.Z.animate(i,{type:"slide",to:{left:e},duration:t,complete:a})},complete(i){ge.Z.stop(i,!0)}},T_="dx-multiview-item",D_=i=>+i,A_=hs.Z.inherit({_activeStateUnit:".".concat(T_),_supportedKeys(){return(0,f.l)(this.callBase(),{pageUp:E.ZT,pageDown:E.ZT})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}}])},_itemClass:()=>T_,_itemDataKey:()=>"dxMultiViewItemData",_itemContainer(){return this._$itemContainer},_itemElements(){return this._itemContainer().children(this._itemSelector())},_itemWidth(){return this._itemWidthValue||(this._itemWidthValue=(0,b.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache(){delete this._itemWidthValue},_itemsCount(){return this.option("items").length},_normalizeIndex(i){var e=this._itemsCount();return i<0&&(i+=e),i>=e&&(i-=e),i},_getRTLSignCorrection(){return this.option("rtlEnabled")?-1:1},_init(){this.callBase.apply(this,arguments);var i=this.$element();i.addClass("dx-multiview"),this._$wrapper=(0,c.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(i),this._$itemContainer=(0,c.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup(){this._deferredItems=[],this.callBase();var i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted(i,e){this.callBase(i,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted(i){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(i.index,0,null)},_executeItemRenderAction(i,e,t){i=(this.option("items")||[]).indexOf(e),this.callBase(i,e,t)},_renderItemContent(i){var e=(0,x.BH)(),t=this,{callBase:a}=this,r=(0,x.BH)();return r.done(()=>{var n=a.call(t,i);e.resolve(n)}),this._deferredItems[i.index]=r,this.option("deferRendering")||r.resolve(),e.promise()},_render(){this.callBase(),(0,E.g0)(()=>{var i=this._getSelectedItemIndices();this._updateItems(i[0])})},_getElementAria:()=>({role:"group",roledescription:y.Z.format("dxMultiView-elementAriaRoleDescription"),label:y.Z.format("dxMultiView-elementAriaLabel")}),_setElementAria(){var i=this._getElementAria();this.setAria(i,this.$element())},_setItemsAria(){var i=this._itemElements(),e=this._itemsCount();i.each((t,a)=>{var r=this._getItemAria({itemIndex:t,itemsCount:e});this.setAria(r,(0,c.Z)(a))})},_getItemAria(i){var{itemIndex:e,itemsCount:t}=i;return{role:"group",roledescription:y.Z.format("dxMultiView-itemAriaRoleDescription"),label:y.Z.format("dxMultiView-itemAriaLabel",e+1,t)}},_updateItems(i,e){this._updateItemsPosition(i,e),this._updateItemsVisibility(i,e)},_modifyByChanges(){this.callBase.apply(this,arguments);var i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0])},_updateItemsPosition(i,e){var t=this._itemElements(),a=(0,_.$K)(e)?-this._animationDirection(e,i):void 0,r=t.eq(i);$r.move(r,0),(0,_.$K)(e)&&$r.move(t.eq(e),"".concat(100*a,"%"))},_updateItemsVisibility(i,e){this._itemElements().each((a,r)=>{var n=(0,c.Z)(r),s=a!==i&&a!==e;s||this._renderSpecificItem(a),n.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,n)})},_renderSpecificItem(i){var e=this._itemElements().eq(i),t=e.find(this._itemContentClass()).length>0;(0,_.$K)(i)&&!t&&(this._deferredItems[i].resolve(),(0,ht.U_)(e))},_refreshItem(i,e){this.callBase(i,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:E.ZT,_updateSelection(i,e){var t=i[0],a=e[0];yo.complete(this._$itemContainer),this._updateItems(a,t);var r=this._animationDirection(t,a);this._animateItemContainer(r*this._itemWidth(),()=>{$r.move(this._$itemContainer,0),this._updateItems(t),(0,b.dz)(this._$itemContainer)})},_animateItemContainer(i,e){var t=this.option("animationEnabled")?200:0;yo.moveTo(this._$itemContainer,i,t,e)},_animationDirection(i,e){var t=(i=>(0,de.jt)(this._$itemContainer).left)(),a=(e-i)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return(0,ie.Xx)(0!==t?t:a)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),Gs,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:i=>this._swipeStartHandler(i.event),onUpdated:i=>this._swipeUpdateHandler(i.event),onEnd:i=>this._swipeEndHandler(i.event)})},_findBoundaryIndices(){var e,t,i=this.option("items");i.forEach((a,r)=>{Boolean(a?.disabled)||(e??(e=r),t=r)}),this._boundaryIndices={firstAvailableIndex:e??0,lastAvailableIndex:t??i.length-1,firstTrueIndex:0,lastTrueIndex:i.length-1}},_swipeStartHandler(i){yo.complete(this._$itemContainer);var e=this.option("selectedIndex"),t=this.option("loop"),{firstAvailableIndex:a,lastAvailableIndex:r}=this._boundaryIndices,n=this.option("rtlEnabled");i.maxLeftOffset=D_(t||(n?e>a:e<r)),i.maxRightOffset=D_(t||(n?e<r:e>a)),this._swipeDirection=null},_swipeUpdateHandler(i){var{offset:e}=i,t=(0,ie.Xx)(e)*this._getRTLSignCorrection();if($r.move(this._$itemContainer,e*this._itemWidth()),t!==this._swipeDirection){this._swipeDirection=t;var a=this.option("selectedIndex"),r=this._normalizeIndex(a-t);this._updateItems(a,r)}},_findNextAvailableIndex(i,e){var{items:t,loop:a}=this.option(),{firstAvailableIndex:r,lastAvailableIndex:n,firstTrueIndex:s,lastTrueIndex:o}=this._boundaryIndices,l=[s,r].includes(i),d=[o,n].includes(i);if(a){if(l&&e<0)return n;if(d&&e>0)return r}for(var u=i+e;u>=r&&u<=n;u+=e)if(!Boolean(t[u].disabled))return u;return i},_swipeEndHandler(i){var e=i.targetOffset*this._getRTLSignCorrection();if(e){var t=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",t);var a=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,j.uD)(a))}else this._animateItemContainer(0,E.ZT)},_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1},_moveFocus(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem(i){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(i.last()),e},_nextItem(i){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(i.first()),e},_dimensionChanged(){this._clearItemWidthCache()},_visibilityChanged(i){i&&this._dimensionChanged()},_updateSwipeDisabledState(){var i=this._getSwipeDisabledState();Gs.getInstance(this.$element()).option("disabled",i)},_dispose(){delete this._boundaryIndices,this.callBase()},_optionChanged(i){var{value:e}=i;switch(i.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(i);break;default:this.callBase(i)}}});(0,X.Z)("dxMultiView",A_);const KO=A_;function R_(i){return i.scrollWidth-i.clientWidth}var B_="dx-tabs-expanded",F_="dx-badge",YO=mr.Z.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge(i){if(this._$element.children(".".concat(F_)).remove(),i){var e=(0,c.Z)("<div>").addClass("dx-tabs-item-badge").addClass(F_).text(i);this._$element.append(e)}}});const jO=YO;var M_="dx-tabs-stretched",k_="dx-tabs-nav-buttons",N_="dx-overflow-hidden",Z_="dx-state-disabled",z_="dx-focused-disabled-next-tab",$_="dx-focused-disabled-prev-tab",K_={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},xa={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},bo={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},G_="chevronnext",U_="chevronprev",Io=hs.Z.inherit({_activeStateUnit:".".concat("dx-tab"),_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:"horizontal",iconPosition:"start",stylingMode:"primary",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:i=>i?i.badge:void 0,_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules(){var i=(0,z.Vk)();return this.callBase().concat([{device:()=>"desktop"!==N.Z.real().deviceType,options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,z.dC)(i),options:{iconPosition:"top",stylingMode:"secondary"}},{device:()=>(0,z.x2)(i),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:"top"}}])},_init(){var{orientation:i,stylingMode:e,scrollingEnabled:t}=this.option(),a=this._getIndicatorPosition();this.callBase(),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(t),this._toggleOrientationClass(i),this._toggleIndicatorPositionClass(a),this._toggleIconPositionClass(),this._toggleStylingModeClass(e),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(i,e){var t=(0,_.PO)(i)?i?.text:i;if((0,_.$K)(t)){var a=(0,c.Z)("<span>").addClass("dx-tab-text-span");a.text(t);var r=(0,c.Z)("<span>").addClass("dx-tab-text-span-pseudo");r.text(t),r.appendTo(a),a.appendTo(e)}(0,_.$K)(i.html)&&e.html(i.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Qi.c((i,e)=>{this._prepareDefaultItemTemplate(e,i);var t=(0,zt.H)(e.icon);t&&t.prependTo(i);var a=(0,c.Z)("<div>").addClass("dx-tab-text");i.wrapInner(a)},["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(i,e){var{itemData:t,container:a,index:r}=e;return this._deferredTemplates[r]=(0,x.BH)(),i.render({model:t,container:a,index:r,onRendered:()=>this._deferredTemplates[r].resolve()})},_itemClass:()=>"dx-tab",_selectedItemClass:()=>"dx-tab-selected",_itemDataKey:()=>"dxTabData",_initMarkup(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(N_)},_render(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){x.gx.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling(){var i=[M_,B_,N_];if(this.$element().removeClass(i.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){var t=R_((0,c.Z)(this.getScrollable().container()).get(0));e.scrollTo({left:t})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass(M_),this.$element().removeClass(k_).addClass(B_))},_isVertical(){return"vertical"===this.option("orientation")},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){var i=this._getVisibleItems(),e=this._getSummaryItemsSize("width",i,!0),t=(0,b.dz)(this.$element());return![e,t].includes(0)&&e>t-1},_isItemsHeightExceeded(){var i=this._getVisibleItems();return this._getSummaryItemsSize("height",i,!0)-1>(0,b.Cr)(this.$element())},_needStretchItems(){var i=this._getVisibleItems(),e=(0,b.dz)(this.$element()),t=[];return(0,S.S6)(i,(s,o)=>{t.push((0,b.Y_)(o,!0))}),Math.max.apply(null,t)>e/i.length+1},_cleanNavButtons(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple(){this._inkRipple=(0,Sh.sY)()},_getPointerEvent:()=>ae.Z.up,_toggleActiveState(i,e,t){if(this.callBase.apply(this,arguments),this._inkRipple){var a={element:i,event:t};e?this._inkRipple.showWave(a):this._inkRipple.hideWave(a)}},_renderMultiple(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper(){this._$wrapper=(0,c.Z)("<div>").addClass("dx-tabs-wrapper"),this.setAria("role","tablist",this._$wrapper),this.$element().append(this._$wrapper)},_itemContainer(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?"vertical":"horizontal"},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){var i=this.$element().wrapInner((0,c.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(i,It.Z,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem(i){if(this._scrollable){var e=this._editStrategy.getItemElement(i);this._scrollable.scrollToElement(e)}},_renderNavButtons(){if(this.$element().toggleClass(k_,this.option("showNavButtons")),this.option("showNavButtons")){var i=this.option("rtlEnabled");this._leftButton=this._createNavButton(-30,i?G_:U_);var e=this._leftButton.$element();e.addClass("dx-tabs-nav-button-left"),this.$element().prepend(e),this._rightButton=this._createNavButton(30,i?U_:G_);var t=this._rightButton.$element();t.addClass("dx-tabs-nav-button-right"),this.$element().append(t)}},_updateNavButtonsState(){var i,e,t,a,r=this._isVertical(),n=this.getScrollable();r?(null===(i=this._leftButton)||void 0===i||i.option("disabled",function L_(i,e){return Math.round(i)<=e}(n.scrollTop(),1)),null===(e=this._rightButton)||void 0===e||e.option("disabled",function P_(i,e,t,a){return Math.round(function GO(i){return i.scrollHeight-i.clientHeight}(i)-e-t)<=a}((0,c.Z)(n.container()).get(0),n.scrollTop(),0,1))):(null===(t=this._leftButton)||void 0===t||t.option("disabled",function O_(i,e){return Math.round(i)<=e}(n.scrollLeft(),1)),null===(a=this._rightButton)||void 0===a||a.option("disabled",function V_(i,e,t){return Math.round(R_(i)-e)<=t}((0,c.Z)(n.container()).get(0),n.scrollLeft(),1)))},_updateScrollPosition(i,e){this._scrollable.update(),this._scrollable.scrollBy(i/e)},_createNavButton(i,e){var t=this._createAction(()=>{this._holdInterval=setInterval(()=>{this._updateScrollPosition(i,5)},5)}),a=(0,D.V4)(oa.Z.name,"dxNavButton"),r=(0,D.V4)(ae.Z.up,"dxNavButton"),n=(0,D.V4)(ae.Z.out,"dxNavButton"),s=this._createComponent((0,c.Z)("<div>").addClass("dx-tabs-nav-button"),ye.Z,{focusStateEnabled:!1,icon:e,integrationOptions:{},onClick:()=>{this._updateScrollPosition(i,1)}}),o=s.$element();return C.Z.on(o,a,{timeout:300},l=>{t({event:l})}),C.Z.on(o,r,()=>{this._clearInterval()}),C.Z.on(o,n,()=>{this._clearInterval()}),s},_clearInterval(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection(i){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(i[0]))},_visibilityChanged(i){i&&this._dimensionChanged()},_dimensionChanged(){this._renderScrolling()},_itemSelectHandler(i){"single"===this.option("selectionMode")&&this.isItemSelected(i.currentTarget)||this.callBase(i)},_refreshActiveDescendant(){this.callBase(this._$wrapper)},_clean(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(i){this.$element().toggleClass("dx-tabs-vertical",i)},_toggleTabsHorizontalClass(i){this.$element().toggleClass("dx-tabs-horizontal",i)},_getIndicatorPositionClass:i=>K_[i],_getIndicatorPosition(){var{_indicatorPosition:i,rtlEnabled:e}=this.option();if(i)return i;var t=this._isVertical();return e?t?"left":"bottom":t?"right":"bottom"},_toggleIndicatorPositionClass(i){var e=this._getIndicatorPositionClass(i);this._toggleElementClasses(K_,e)},_toggleScrollingEnabledClass(i){this.$element().toggleClass("dx-tabs-scrolling-enabled",Boolean(i))},_toggleOrientationClass(i){var e="vertical"===i;this._toggleTabsVerticalClass(e),this._toggleTabsHorizontalClass(!e)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case"top":return xa.top;case"end":return xa.end;case"bottom":return xa.bottom;default:return xa.start}},_toggleIconPositionClass(){var i=this._getTabsIconPositionClass();this._toggleElementClasses(xa,i)},_toggleStylingModeClass(i){var e,t=null!==(e=bo[i])&&void 0!==e?e:bo.primary;this._toggleElementClasses(bo,t)},_toggleElementClasses(i,e){for(var t in i)this.$element().removeClass(i[t]);this.$element().addClass(e)},_toggleFocusedDisabledNextClass(i,e){this._itemElements().eq(i).toggleClass(z_,e)},_toggleFocusedDisabledPrevClass(i,e){this._itemElements().eq(i).toggleClass($_,e)},_toggleFocusedDisabledClasses(i){var{selectedIndex:e}=this.option();this._itemElements().removeClass(z_).removeClass($_);var t=e-1,a=e+1,r=(0,c.Z)(i).index(),n=this._itemElements().eq(a).hasClass(Z_),l=this._itemElements().eq(t).hasClass(Z_)&&r===t;this._toggleFocusedDisabledNextClass(e,n&&r===a),this._toggleFocusedDisabledPrevClass(e,l)},_updateFocusedElement(){var{focusStateEnabled:i,selectedIndex:e}=this.option(),t=this._itemElements();if(i&&t.length){var a=t.get(e);this.option({focusedElement:a})}},_optionChanged(i){switch(i.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(i.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(i.name,i.value);break;case"width":case"height":this.callBase(i),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(i);break;case"focusedElement":this._toggleFocusedDisabledClasses(i.value),this.callBase(i),this._scrollToItem(i.value);break;case"rtlEnabled":this.callBase(i);var e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e);break;case"orientation":this._toggleOrientationClass(i.value);var t=this._getIndicatorPosition();this._toggleIndicatorPositionClass(t),(0,B.Ym)()&&this._updateScrollable();break;case"iconPosition":this._toggleIconPositionClass(),(0,B.Ym)()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(i.value),(0,B.Ym)()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(i.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(i),this._updateFocusedElement();break;default:this.callBase(i)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(i,e){this.callBase(i,e),this._renderScrolling()},getScrollable(){return this._scrollable}});Io.ItemClass=jO,(0,X.Z)("dxTabs",Io);const uV=Io;var Ri={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},Jt={top:"top",right:"right",bottom:"bottom",left:"left"},wV={top:"bottom",right:"left",bottom:"top",left:"right"},To=KO.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:Jt.top,iconPosition:"start",stylingMode:"primary",onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:i=>i?i.badge:void 0,_tabsIndicatorPosition:null})},_defaultOptionsRules(){var i=(0,z.Vk)();return this.callBase().concat([{device:()=>"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!wt.touch,options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>(0,z.dC)(i),options:{stylingMode:"secondary"}},{device:()=>(0,z.yj)(i),options:{iconPosition:"top"}}])},_init(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(i,e){var t=(0,zt.H)(i?.icon);t&&e.append(t);var a=(0,_.PO)(i)?i?.title:i;if((0,_.$K)(a)&&!(0,_.PO)(a)){var r=(0,c.Z)("<span>").addClass("dx-tab-text-span");r.append(Z.Z.createTextNode(a));var n=(0,c.Z)("<span>").addClass("dx-tab-text-span-pseudo");n.append(Z.Z.createTextNode(a)),n.appendTo(r),r.appendTo(e)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Qi.c((i,e)=>{this._prepareTabsItemTemplate(e,i);var t=(0,c.Z)("<div>").addClass("dx-tab-text");i.wrapInner(t)},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout(){if(!this._tabs){var i=this.$element();this._$tabContainer=(0,c.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(i);var e=(0,c.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,uV,this._tabConfig()),this._$container=(0,c.Z)("<div>").addClass("dx-tabpanel-container").appendTo(i),this._$container.append(this._$wrapper)}},_refreshActiveDescendant(){if(this._tabs){var i=this._tabs,e=i.itemElements(),t=(0,c.Z)(e[i.option("selectedIndex")]),a=this.getFocusedItemId();this.setAria("controls",void 0,(0,c.Z)(e)),this.setAria("controls",a,t)}},_getTabsIndicatorPosition(){var{_tabsIndicatorPosition:i,tabsPosition:e}=this.option();return i??wV[e]},_tabConfig(){var i=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(e){if("focusedElement"===e.name)if(e.value){var t=(0,c.Z)(e.value),a=this._itemElements().eq(t.index());this.option("focusedElement",(0,j.uD)(a))}else this.option("focusedElement",e.value)}.bind(this),onFocusIn:function(e){this._focusInHandler(e.event)}.bind(this),onFocusOut:function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}.bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:i}},_renderFocusTarget(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){var{tabsPosition:i}=this.option();return[Jt.right,Jt.left].includes(i)?"vertical":"horizontal"},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case Jt.right:return Ri.right;case Jt.bottom:return Ri.bottom;case Jt.left:return Ri.left;default:return Ri.top}},_toggleTabPanelTabsPositionClass(){for(var i in Ri)this.$element().removeClass(Ri[i]);var e=this._getTabPanelTabsPositionClass();this.$element().addClass(e)},_updateTabsOrientation(){var i=this._getTabsOrientation();this._setTabsOption("orientation",i)},_toggleWrapperFocusedClass(i){this._toggleFocusClass(i,this._$wrapper)},_toggleDisabledFocusedClass(i){this._focusTarget().toggleClass("dx-disabled-focused-tab",i)},_updateFocusState(i,e){this.callBase(i,e);var t=i.target===this._tabs._focusTarget().get(0),a=i.target===this._focusTarget().get(0);if(t&&this._toggleFocusClass(e,this._focusTarget()),t||a){var r=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!r),this._toggleDisabledFocusedClass(e&&r)}a&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler(i){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(i),this._isFocusOutHandlerExecuting=!1},_setTabsOption(i,e){this._tabs&&this._tabs.option(i,e)},_visibilityChanged(i){i&&this._tabs._dimensionChanged()},registerKeyHandler(i,e){this.callBase(i,e),this._tabs&&this._tabs.registerKeyHandler(i,e)},repaint(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){var i=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",i)},_optionChanged(i){var{name:e,value:t,fullName:a}=i;switch(e){case"dataSource":default:this.callBase(i);break;case"items":this._setTabsOption(e,this.option(e)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(i);break;case"width":this.callBase(i),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(a,t),this.callBase(i),!0===this.option("focusStateEnabled")){var r=this.option("selectedIndex"),n=this._itemElements().eq(r);this.option("focusedElement",(0,j.uD)(n))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(a,t),this.callBase(i);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(a,t);break;case"focusedElement":var s=t&&(0,c.Z)(t).index(),o=t&&this._tabs._itemElements().eq(s);if(this._setTabsOption("focusedElement",(0,j.uD)(o)),t){var l=this._isDisabled(t);this._toggleWrapperFocusedClass(!l),this._toggleDisabledFocusedClass(l)}this.callBase(i);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",t);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",t);break;case"stylingMode":this._setTabsOption("stylingMode",t);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",t)}}});To.ItemClass=class hV extends mr.Z{_renderWatchers(){return this._startWatcher("badge",E.ZT),super._renderWatchers()}},(0,X.Z)("dxTabPanel",To);const xV=To;var Ue=T(9150);class ei{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){xi.Z.abstract()}}var Do=(i,e)=>"".concat(e?"tabs":"items","[").concat(i,"]"),tv=(i,e)=>(0,_.$K)(i)&&(0,_.$K)(e)?"".concat(i,".").concat(e):i||e,Ao=i=>i?i.replace(/\s/g,""):void 0,Sa=(i,e)=>"".concat(i,".").concat(e),iv=i=>{var e=i.split(".");return e[e.length-1].replace(/\[\d+]/,"")},av=i=>i.indexOf("tabs")>-1,rv=(i,e,t)=>{var a=i.indexOf(e);if(a>-1)return Do(a,t);for(var r=0;r<i.length;r++){var n=i[r],s=n.tabs||n.items;if(s){var o=rv(s,e,n.tabs);if(o)return tv(Do(r,t),o)}}};class EV extends ei{tryExecute(){var{value:e}=this._options,t=this.findInstance();return!!t&&(t.option(e),!0)}}class nv extends ei{tryExecute(){var e=this.findInstance();if(e){var{optionName:t,item:a,value:r}=this._options,n=this._itemsRunTimeInfo.findItemIndexByItem(a);if(n>=0)return e.option(Sa("items[".concat(n,"]"),t),r),!0}return!1}}class IV extends ei{tryExecute(){return!1}}class TV extends ei{tryExecute(){var e=this.findPreparedItem();return!(null==e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate||(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),0))}}class DV extends ei{tryExecute(){var e=this.findInstance();if(e){var{value:t}=this._options;return e.option("dataSource",t),!0}return!1}}class AV extends ei{tryExecute(){var{item:e}=this._options,t=this.findInstance(),a=t&&(0,Wa.aT)(t.$element()[0],"dxValidator");if(a&&e){var r=o=>"required"===o.type,n=(a.option("validationRules")||[]).some(r),s=(e.validationRules||[]).some(r);if(!n&&!s||n&&s)return a.option("validationRules",e.validationRules),!0}return!1}}class RV extends ei{tryExecute(){var e=this.findItemContainer(),{previousValue:t,value:a}=this._options;return!!e&&(e.removeClass(t).addClass(a),!0)}}var sv="dx-state-focused",LV=["items","isRequired","validationRules","visible"],ov=Ge.Z.inherit({_init(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new b_,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions(){return(0,f.l)(this.callBase(),{formID:"dx-".concat(new ve.Z),formData:{},colCount:1,screenByWidth:B.$n,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:y.Z.format("dxForm-optionalMark"),requiredMessage:y.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,ci.Z)().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>(0,z.yj)(),options:{labelLocation:"top"}},{device:()=>(0,z.x2)(),options:{showColonAfterLabel:!1}}])},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:i=>parseInt(i.attr(m_)),_applyLabelsWidthByCol(i,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.inOneColumn?u_:d_+e,n=t.excludeTabbed?":not(.".concat(v_,")"):"";!function hO(i,e,t){var s,o,a="".concat(e," > .").concat(p_,":not(.").concat(C_,"top) > .").concat(c_),r=i.find(a),n=r.length,l=0;for(o=0;o<n;o++)(s=cO(r[o]))>l&&(l=s);for(o=0;o<n;o++)r[o].style.width="".concat(l,"px")}(i,".".concat(r).concat(n))},_applyLabelsWidth(i,e,t,a,r){a=t?1:a||this._getGroupColCount(i);var s,n={excludeTabbed:e,inOneColumn:t};for(s=0;s<a;s++)this._applyLabelsWidthByCol(i,s,n,r)},_getGroupElementsInColumn(i,e,t){var a=(0,_.$K)(t)?".".concat(g_).concat(t):"",r=".".concat(d_).concat(e," > .").concat(Co," > .").concat(fo).concat(a);return i.find(r)},_applyLabelsWidthWithGroups(i,e,t,a){if(!0===this.option("alignRootItemLabels"))for(var r=i.find(".".concat(__)),n=0;n<e;n++)this._applyLabelsWidthByCol(r,n,t,a);if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(i,e,t,a);else{var l,o=this.$element().find(".".concat(fo));for(l=0;l<o.length;l++)this._applyLabelsWidth(o.eq(l),t,void 0,void 0,a)}},_applyLabelsWidthWithNestedGroups(i,e,t,a){var n,s,o,l,r={excludeTabbed:t};for(n=0;n<e;n++)for(l=this._getGroupElementsInColumn(i,n),this._applyLabelsWidthByCol(l,0,r,a),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(i,n,this._groupsColCount[s]);var d=this._getGroupColCount(l);for(o=1;o<d;o++)this._applyLabelsWidthByCol(l,o,r,a)}},_labelLocation(){return this.option("labelLocation")},_alignLabelsInColumn(i){var{layoutManager:e,inOneColumn:t,$container:a,excludeTabbed:r,items:n}=i;if((0,B.Ym)()&&"top"!==this._labelLocation()){var s=f_(e._getMarkOptions());t?this._applyLabelsWidth(a,r,!0,void 0,s):this._checkGrouping(n)?this._applyLabelsWidthWithGroups(a,e._getColCount(),r,s):this._applyLabelsWidth(a,r,!1,e._getColCount(),s)}},_prepareFormData(){(0,_.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup(){Ue.Z.addGroup(this._getValidationGroup(),!1),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription(){if((0,B.Ym)()){var i=this.$element().get(0);ea.Z.unobserve(i),ea.Z.observe(i,()=>{this._resizeHandler()})}},_resizeHandler(){this._cachedLayoutManagers.length&&(0,S.S6)(this._cachedLayoutManagers,(i,e)=>{var t;null===(t=e.option("onLayoutChanged"))||void 0===t||t(e.isSingleColumnMode())})},_getCurrentScreenFactor(){return(0,B.Ym)()?(0,B.Wf)(this.option("screenByWidth")):"lg"},_clearCachedInstances(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels(i,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:i,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),(0,ht.U_)(this.$element().find(".".concat(Qu)))},_clean(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,ea.Z.unobserve(this.$element().get(0))},_renderScrollable(){var i=this.option("useNativeScrolling");this._scrollable=new It.Z(this.$element(),{useNative:!!i,useSimulatedScrollbar:!i,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent(){return this.option("scrollingEnabled")?(0,c.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary(){var i;null===(i=this._$validationSummary)||void 0===i||i.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,c.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(i,e,t,a){if(i){for(var r=[],n=0;n<i.length;n++){var s=i[n],o=tv(t,Do(n,a)),l={item:s,itemIndex:n,path:o},d=this._itemsRunTimeInfo.add(l);if((0,_.HD)(s)&&(s={dataField:s}),(0,_.Kn)(s)){var u=(0,V.Z)({},s);l.preparedItem=u,u.guid=d,this._tryPrepareGroupItem(u),this._tryPrepareTabbedItem(u,o),this._tryPrepareItemTemplate(u),e&&(u.cssItemClass=v_),u.items&&(u.items=this._prepareItems(u.items,e,o)),r.push(u)}else r.push(s)}return r}},_tryPrepareGroupItem(i){"group"===i.itemType&&(i.alignItemLabels=(0,E.IS)(i.alignItemLabels,!0),i._prepareGroupItemTemplate=e=>{i.template&&(i.groupContentTemplate=this._getTemplate(e)),i.template=this._itemGroupTemplate.bind(this,i)},i._prepareGroupItemTemplate(i.template))},_tryPrepareTabbedItem(i,e){"tabbed"===i.itemType&&(i.template=this._itemTabbedTemplate.bind(this,i),i.tabs=this._prepareItems(i.tabs,!0,e,!0))},_tryPrepareItemTemplate(i){i.template&&(i.template=this._getTemplate(i.template))},_checkGrouping(i){if(i)for(var e=0;e<i.length;e++)if("group"===i[e].itemType)return!0},_renderLayout(){var i=this,e=i.option("items"),t=i._getContent();e=i._prepareItems(e),i._rootLayoutManager=i._renderLayoutManager(t,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:i.option("colCount"),alignItemLabels:i.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged(a){i._alignLabels.bind(i)(i._rootLayoutManager,a)},onContentReady(a){i._alignLabels(a.component,a.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:i=>i.items||[],_itemTabbedTemplate(i,e,t){var a,r=(0,c.Z)("<div>").appendTo(t),n=(0,f.l)({},i.tabPanelOptions,{dataSource:i.tabs,onItemRendered:l=>{var d,u;null===(u=null===(d=i.tabPanelOptions)||void 0===d?void 0:d.onItemRendered)||void 0===u||u.call(d,l),(0,ht.Uo)(l.itemElement)},itemTemplate:(l,d,u)=>{var h=(0,c.Z)(u),p=(0,E.IS)(l.alignItemLabels,!0),v=this._renderLayoutManager(h,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(l),{colCount:l.colCount,alignItemLabels:p,screenByWidth:this.option("screenByWidth"),colCountByScreen:l.colCountByScreen,cssItemClass:l.cssItemClass,onLayoutChanged:g=>{this._alignLabelsInColumn({$container:h,layoutManager:v,items:l.items,inOneColumn:g})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(l.guid,{layoutManager:v}),p&&this._alignLabelsInColumn({$container:h,layoutManager:v,items:l.items,inOneColumn:v.isSingleColumnMode()})}}),s=(l,d)=>{Array.isArray(l)&&l.forEach(u=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(u.guid,{widgetInstance:d}))},o=this._createComponent(r,xV,n);(0,c.Z)(t).parent().addClass("dx-field-item-has-tabs"),o.on("optionChanged",l=>{"dataSource"===l.fullName&&s(l.value,l.component)}),s([{guid:i.guid},...null!==(a=i.tabs)&&void 0!==a?a:[]],o)},_itemGroupTemplate(i,e,t){var{id:a}=e.editorOptions.inputAttr,r=(0,c.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,_.$K)(i.caption)&&i.caption.length).addClass(fo).appendTo(t);this.setAria({role:"group",labelledby:a},r),(0,c.Z)(t).parent().addClass("dx-field-item-has-group"),i.caption&&(0,c.Z)("<span>").addClass("dx-form-group-caption").text(i.caption).attr("id",a).appendTo(r);var s=(0,c.Z)("<div>").addClass("dx-form-group-content").appendTo(r);if(i.groupContentTemplate)i._renderGroupContentTemplate=()=>{s.empty();var d={formData:this.option("formData"),component:this};i.groupContentTemplate.render({model:d,container:(0,j.uD)(s)})},i._renderGroupContentTemplate();else{var o=this._renderLayoutManager(s,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(i),{colCount:i.colCount,colCountByScreen:i.colCountByScreen,alignItemLabels:i.alignItemLabels,cssItemClass:i.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(i.guid,{layoutManager:o});var l=o._getColCount();this._groupsColCount.includes(l)||this._groupsColCount.push(l),r.addClass(g_+l),r.attr(m_,l)}},_createLayoutManagerOptions(i,e){return function bV(i){var{form:e,$formElement:t,formOptions:a,items:r,validationGroup:n,extendedLayoutManagerOptions:s,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u}=i;return(0,f.l)({form:e,items:r,$formElement:t,validationGroup:n,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u,validationBoundary:a.scrollingEnabled?t:void 0,scrollingEnabled:a.scrollingEnabled,showRequiredMark:a.showRequiredMark,showOptionalMark:a.showOptionalMark,requiredMark:a.requiredMark,optionalMark:a.optionalMark,requiredMessage:a.requiredMessage,screenByWidth:a.screenByWidth,layoutData:a.formData,labelLocation:a.labelLocation,customizeItem:a.customizeItem,minColWidth:a.minColWidth,showColonAfterLabel:a.showColonAfterLabel,onEditorEnterKey:a.onEditorEnterKey,labelMode:a.labelMode},{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:i,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:t=>{this._isDataUpdating||this._triggerOnFieldDataChanged(t)},onContentReady:t=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(t.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(t)},onDisposing:t=>{var{component:a}=t,r=a.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(r)},onFieldItemRendered:()=>{var t;null===(t=this._validationSummary)||void 0===t||t.refreshValidationGroup()}})},_renderLayoutManager(i,e){this._cachedColCountOptions.push({colCountByScreen:(0,f.l)({lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1},e.colCountByScreen)});var a=(0,c.Z)("<div>");a.appendTo(i);var r=this._createComponent(a,"dxLayoutManager",e);return r.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(r),r},_getValidationGroup(){return this.option("validationGroup")||this},_createComponent(i,e,t){return this._extendConfig(t=t||{},{readOnly:this.option("readOnly")}),this.callBase(i,e,t)},_attachSyncSubscriptions(){var i=this;i.on("optionChanged",e=>{var t=e.fullName;"formData"===t&&((0,_.$K)(e.value)||i._options.silent("formData",e.value={}),i._triggerOnFieldDataChangedByDataSet(e.value)),i._cachedLayoutManagers.length&&(0,S.S6)(i._cachedLayoutManagers,(a,r)=>{"formData"===t&&(i._isDataUpdating=!0,r.option("layoutData",e.value),i._isDataUpdating=!1),("readOnly"===e.name||"disabled"===e.name)&&r.option(t,e.value)})})},_optionChanged(i){var e=i.fullName.split(".");e.length>1&&-1!==e[0].search("items")&&this._itemsOptionChangedHandler(i)||e.length>1&&-1!==e[0].search("formData")&&this._formDataOptionChangedHandler(i)||this._defaultOptionChangedHandler(i)},_defaultOptionChangedHandler(i){switch(i.name){case"formData":this.option("items")?(0,_.Qr)(i.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(i),this._rootLayoutManager.option(i.name,i.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":Ue.Z.removeGroup(i.previousValue||this),this._invalidate();break;default:this.callBase(i)}},_itemsOptionChangedHandler(i){var e=i.fullName.split("."),{value:t}=i,a=this._getItemPath(e),r=this.option(a),n=i.fullName.replace("".concat(a,"."),""),s=n.split(".")[0].replace(/\[\d+]/,""),o=this._tryCreateItemOptionAction(s,r,r[s],i.previousValue,a),l=this._tryExecuteItemOptionAction(o)||this._tryChangeLayoutManagerItemOption(i.fullName,t);if(!l&&r){this._changeItemOption(r,n,t);var d=this._generateItemsFromData(this.option("items"));this.option("items",d),l=!0}return l},_formDataOptionChangedHandler(i){var e=i.fullName.split("."),{value:t}=i,a=e.slice(1).join("."),r=this.getEditor(a);return r?r.option("value",t):this._triggerOnFieldDataChanged({dataField:a,value:t}),!0},_tryCreateItemOptionAction(i,e,t,a,r){return"tabs"===i&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(r,".tabs")),t=this._prepareItems(t,!0,r,!0)),((i,e)=>{var t,a,r;switch(i){case"editorOptions":case"buttonOptions":return new EV(e);case"validationRules":return new AV(e);case"cssClass":return new RV(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new nv((0,f.l)(e,{optionName:i}));case"tabs":return new DV(e);case"template":var n=null!==(a=null===(t=e?.item)||void 0===t?void 0:t.itemType)&&void 0!==a?a:null===(r=e.itemsRunTimeInfo.findPreparedItemByItem(e?.item))||void 0===r?void 0:r.itemType;return"simple"===n?new IV(e):"group"===n?new TV(e):new nv((0,f.l)(e,{optionName:i}));default:return null}})(i,{item:e,value:t,previousValue:a,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:i=>i&&i.tryExecute(),_updateValidationGroupAndSummaryIfNeeded(i){var e,t=iv(i);LV.includes(t)&&(Ue.Z.addGroup(this._getValidationGroup(),!1),this.option("showValidationSummary")&&(null===(e=this._validationSummary)||void 0===e||e.refreshValidationGroup()))},_setLayoutManagerItemOption(i,e,t,a){if(this._updateLockCount>0){!i._updateLockCount&&i.beginUpdate();var r=this._itemsRunTimeInfo.findKeyByPath(a);this.postponedOperations.add(r,()=>(!i._disposed&&i.endUpdate(),(0,x.BH)().resolve()))}var n=s=>{if(s.component.off("contentReady",n),av(a)){var o=(i=>{for(var e=i.split("."),t=[...e],a=e.length-1;a>=0;a--){if(av(e[a]))return t.join(".");t.splice(a,1)}return""})(a),l=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);l&&this._alignLabelsInColumn({items:l.option("items"),layoutManager:l,$container:l.$element(),inOneColumn:l.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};i.on("contentReady",n),i.option(e,t),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(i,e){var t=i.split("."),a=iv(i);if("items"===a&&t.length>1){var r=this._getItemPath(t),n=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(r);if(n){this._itemsRunTimeInfo.removeItemsByItems(n.getItemsRunTimeInfo());var s=this._prepareItems(e,!1,r);return this._setLayoutManagerItemOption(n,a,s,r),!0}}else if(t.length>2){var o=t.length-2,l=this._getItemPath(t.slice(0,o)),d=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(l);if(d){var u=Sa(t[o],a);if("editorType"===a&&d.option(u)!==e)return!1;if("visible"===a){var h=this.option(Sa(l,"items"));if(h&&h.length){var p=d.option("items");h.forEach((v,g)=>{p[g].visibleIndex=v.visibleIndex})}}return this._setLayoutManagerItemOption(d,u,e,l),!0}}return!1},_tryChangeLayoutManagerItemOptions(i,e){var t;return this.beginUpdate(),(0,S.S6)(e,(a,r)=>{if(!(t=this._tryChangeLayoutManagerItemOption(Sa(i,a),r)))return!1}),this.endUpdate(),t},_getItemPath(i){var t,e=i[0];for(t=1;t<i.length&&-1!==i[t].search(/items\[\d+]|tabs\[\d+]/);t++)e+=".".concat(i[t]);return e},_triggerOnFieldDataChanged(i){this._updateIsDirty(i.dataField),this._createActionByOption("onFieldDataChanged")(i)},_triggerOnFieldDataChangedByDataSet(i){i&&(0,_.Kn)(i)&&Object.keys(i).forEach(e=>{this._triggerOnFieldDataChanged({dataField:e,value:i[e]})})},_updateFieldValue(i,e){if((0,_.$K)(this.option("formData"))){var t=this.getEditor(i);this.option("formData.".concat(i),e),t&&t.option("value")!==e&&t.option("value",e)}},_generateItemsFromData(i){var e=this.option("formData"),t=[];return!i&&(0,_.$K)(e)&&(0,S.S6)(e,a=>{t.push({dataField:a})}),i&&(0,S.S6)(i,(a,r)=>{(0,_.Kn)(r)?t.push(r):t.push({dataField:r})}),t},_getItemByField(i,e){var s,t=this,a=(0,_.Kn)(i)?i:t._getFieldParts(i),{fieldName:r}=a,{fieldPath:n}=a;return e.length&&(0,S.S6)(e,(o,l)=>{var{itemType:d}=l;if(n.length){var u=n.slice();l=t._getItemByFieldPath(u,r,l)}else if("group"===d&&!l.caption&&!l.name||"tabbed"===d&&!l.name){var h=t._getSubItemField(d);l.items=t._generateItemsFromData(l.items),l=t._getItemByField({fieldName:r,fieldPath:n},l[h])}if(((i,e)=>!!i&&(i.dataField===e||i.name===e||Ao(i.title)===e||"group"===i.itemType&&Ao(i.caption)===e))(l,r))return s=l,!1}),s},_getFieldParts(i){for(var e=i,t=e.indexOf("."),a=[];-1!==t;)a.push(e.substr(0,t)),t=(e=e.substr(t+1)).indexOf(".");return{fieldName:e,fieldPath:a.reverse()}},_getItemByFieldPath(i,e,t){var s,{itemType:a}=t,r=this._getSubItemField(a),n="group"===a||"tabbed"===a||t.title;do{if(!n)break;var o=t.name||t.caption||t.title,l=(0,_.$K)(o),d=Ao(o),u=void 0;if(t[r]=this._generateItemsFromData(t[r]),l&&(u=i.pop()),!i.length&&(s=this._getItemByField(e,t[r])))break;(!l||l&&d===u)&&i.length&&(s=this._searchItemInEverySubItem(i,e,t[r]))}while(i.length&&!(0,_.$K)(s));return s},_getSubItemField:i=>"tabbed"===i?"tabs":"items",_searchItemInEverySubItem(i,e,t){var r,a=this;return(0,S.S6)(t,(n,s)=>{if(r=a._getItemByFieldPath(i.slice(),e,s))return!1}),r||(r=!1),r},_changeItemOption(i,e,t){(0,_.Kn)(i)&&(i[e]=t)},_dimensionChanged(){var i=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==i&&(this._isColCountChanged(this._lastMarkupScreenFactor,i)&&(this._targetScreenFactor=i,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=i)},_isColCountChanged(i,e){var t=!1;return(0,S.S6)(this._cachedColCountOptions,(a,r)=>{if(r.colCountByScreen[i]!==r.colCountByScreen[e])return t=!0,!1}),t},_refresh(){var i=".".concat(sv," > :not(.dx-dropdowneditor-input-wrapper) input,")+" .".concat(sv," textarea");C.Z.trigger(this.$element().find(i),"change"),this.callBase()},_updateIsDirty(i){var e=this.getEditor(i);e&&(e.option("isDirty")?this._dirtyFields.add(i):this._dirtyFields.delete(i),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor(i){this._itemsRunTimeInfo.each((e,t)=>{var{widgetInstance:a}=t;(0,_.$K)(a)&&wi.Z.isEditor(a)&&i(a)})},_clear(){this.updateRunTimeInfoForEachEditor(i=>{i.clear(),i.option("isValid",!0)}),Ue.Z.resetGroup(this._getValidationGroup())},_updateData(i,e,t){var a=this,r=t?e:i;(0,_.Kn)(r)?(0,S.S6)(r,(n,s)=>{a._updateData(t?"".concat(i,".").concat(n):n,s,(0,_.Kn)(s))}):(0,_.HD)(i)&&a._updateFieldValue(i,e)},registerKeyHandler(i,e){this.callBase(i,e),this._itemsRunTimeInfo.each((t,a)=>{(0,_.$K)(a.widgetInstance)&&a.widgetInstance.registerKeyHandler(i,e)})},_focusTarget(){return this.$element().find(".".concat(Co," [tabindex]")).first()},_visibilityChanged(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose(){this._clearAutoColCountChangedTimeout(),Ue.Z.removeGroup(this._getValidationGroup()),this.callBase()},clear(){this._clear()},resetValues(){this._clear()},reset(i){this.updateRunTimeInfoForEachEditor(e=>{var t=e.option("name");i&&t in i?e.reset(i[t]):e.reset()}),this._renderValidationSummary()},updateData(i,e){this._updateData(i,e)},getEditor(i){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(i)||this._itemsRunTimeInfo.findWidgetInstanceByName(i)},getButton(i){return this._itemsRunTimeInfo.findWidgetInstanceByName(i)},updateDimensions(){var i=this,e=(0,x.BH)();return i._scrollable?i._scrollable.update().done(()=>{e.resolveWith(i)}):e.resolveWith(i),e.promise()},itemOption(i,e,t){var a=this._generateItemsFromData(this.option("items")),r=this._getItemByField(i,a),n=rv(a,r);if(r)switch(arguments.length){case 1:return r;case 3:var s=this._tryCreateItemOptionAction(e,r,t,r[e],n);this._changeItemOption(r,e,t);var o=Sa(n,e);!this._tryExecuteItemOptionAction(s)&&!this._tryChangeLayoutManagerItemOption(o,t)&&this.option("items",a);break;default:var l;(0,_.Kn)(e)&&!this._tryChangeLayoutManagerItemOptions(n,e)&&((0,S.S6)(e,(d,u)=>{var h=this._tryCreateItemOptionAction(d,r,u,r[d],n);this._changeItemOption(r,d,u),!l&&!this._tryExecuteItemOptionAction(h)&&(l=!0)}),l&&this.option("items",a))}},validate(){return Ue.Z.validateGroup(this._getValidationGroup())},getItemID(i){return"dx_".concat(this.option("formID"),"_").concat(i||new ve.Z)},getTargetScreenFactor(){return this._targetScreenFactor}});(0,X.Z)("dxForm",ov);const lv=ov;var MV={extenders:{controllers:{editing:i=>class extends i{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isEditRow(e){return!this.isPopupEditMode()&&super.isEditRow(e)}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isFormEditMode(){return this.option("editing.mode")===Di}getFirstEditableColumnIndex(){var e=this._firstFormItem;if(this.isFormEditMode()&&e){var t=this.option(Pe),a=this._dataController.getRowIndexByKey(t),r=this._rowsView.getCellElements(a);return this._rowsView._getEditFormEditorVisibleIndex(r,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){var e=super._isEditColumnVisible(),t=this.option("editing");return this.isFormOrPopupEditMode()&&t.allowUpdating||e}_handleDataChanged(e){var t,a;if(this.isPopupEditMode()){var r=this.option("editing.editRowKey"),n=null===(t=e?.items)||void 0===t?void 0:t.some(o=>(0,E.bY)(o.key,r)),s=(null===(a=e.changeTypes)||void 0===a?void 0:a.length)&&e.changeTypes.every(o=>"insert"===o);("refresh"===e.changeType||n&&e.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e,t=null===(e=this._editPopup)||void 0===e?void 0:e.option("visible");if(this.isPopupEditMode()&&t)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,t,a){var r,n=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(r=e.update)||void 0===r||r.call(e,e),this._rowsView.renderDelayedTemplates()):n&&(this._updateEditFormDeferred=(new x.BH).done(()=>n.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(e,t,a)}_showEditPopup(e,t){var a="desktop"!==N.Z.current().deviceType,r=this.addWidgetPrefix("edit-popup"),n=(0,f.l)({showTitle:!1,fullScreen:a,wrapperAttr:{class:r},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(Zr));if(!this._editPopup){var s=(0,c.Z)("<div>").appendTo(this.component.$element()).addClass(r);this._editPopup=this._createComponent(s,Dt),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",o=>{var l;C.Z.trigger(o.component.$content().find(co).not(".".concat(pR)).first(),"focus"),t&&(null===(l=this._editForm)||void 0===l||l.repaint())})}this._editPopup.option(n),this._editPopup.show(),super._showEditPopup(e,t)}_getPopupEditFormTemplate(e){var t=this.component.getVisibleRows()[e],a={row:t,values:t.values,rowType:t.rowType,key:t.key,rowIndex:e};return this._rowsView._addWatchMethod(a,t),r=>{var n=this.getEditFormTemplate(),s=this._createComponent((0,c.Z)("<div>").appendTo(r),It.Z);this._$popupContent=(0,c.Z)(s.content()),n(this._$popupContent,a,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,c.Z)(r).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){var e,t,a=this._getVisibleEditRowIndex();if(a>=0){var r=null===(e=this._editPopup)||void 0===e?void 0:e.option("animation");null===(t=this._editPopup)||void 0===t||t.option("animation",null),this._showEditPopup(a,!0),void 0!==r&&this._editPopup.option("animation",r)}}_hideEditPopup(){var e;null===(e=this._editPopup)||void 0===e||e.option("visible",!1)}optionChanged(e){if("editing"===e.name&&this.isFormOrPopupEditMode()){var{fullName:t}=e;0===t.indexOf(uo)?(this._handleFormOptionChange(e),e.handled=!0):0===t.indexOf(Zr)&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var t;if(this.isFormEditMode()){var a=this._getVisibleEditRowIndex();a>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[a]})}else null!==(t=this._editPopup)&&void 0!==t&&t.option("visible")&&0===e.fullName.indexOf(uo)&&this._repaintEditPopup()}_handlePopupOptionChange(e){var t=this._editPopup;if(t){var a=e.fullName.slice(Zr.length+1);a?t.option(a,e.value):t.option(e.value)}}renderFormEditorTemplate(e,t,a,r,n){var s=this,o=(0,c.Z)(r),{column:l}=t,d=(i=>{var e,{column:t}=i;return i.isCustomEditorType?i.editorType:null===(e=t.formItem)||void 0===e?void 0:e.editorType})(t),u=e?.row,h=u?.data,p=a.component,v=l.calculateCellValue(h),g=O.getDisplayValue(l,v,h,u?.rowType),{label:m,labelMark:w,labelMode:I}=a.editorOptions||{},A=(0,f.l)({},e,{data:h,cellElement:null,isOnForm:!0,item:t,id:p.getItemID(t.name||t.dataField),column:(0,f.l)({},l,{editorType:d,editorOptions:(0,f.l)({label:m,labelMark:w,labelMode:I},l.editorOptions,t.editorOptions)}),columnIndex:l.index,setValue:!n&&l.allowEditing&&function(G,M){s.updateFieldValue(A,G,M)}});A.value=v,A.displayValue=g,A.text=l.command?"":O.formatValue(g,l);var F=this._getFormEditItemTemplate.bind(this)(A,l);return this._rowsView.renderTemplate(o,F,A,!!(0,Rt.al)(o)).done(()=>{this._rowsView._updateCell(o,A)}),A}getFormEditorTemplate(e,t){var a=this.component.columnOption(t.name||t.dataField);return(r,n)=>{var s=(0,c.Z)(n),{row:o}=e;if(o?.watch){var l=o.watch(()=>a.selector(o.data),()=>{var d=s.find(".dx-widget").first(),u=d.data("dxValidator"),h=u?.option();s.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,t,r,s),u=(d=s.find(".dx-widget").first()).data("dxValidator"),h&&!u&&d.dxValidator({validationRules:h.validationRules,validationGroup:h.validationGroup,dataGetter:h.dataGetter})});C.Z.on(s,Ft.x,l)}e=this.renderFormEditorTemplate.bind(this)(e,t,r,s)}}getEditFormOptions(e){var t,a=null===(t=this._getValidationGroupsInForm)||void 0===t?void 0:t.call(this,e),r=this.option("editing.form.customizeItem"),n=this.addWidgetPrefix(Up),s=this.option("editing.form.items"),o={};if(s)Qp(s,d=>{var u=d?.name||d?.dataField;u&&(o[u]=!!d.editorType)});else{var l=this._columnsController.getColumns();s=[],(0,S.S6)(l,(d,u)=>{!u.isBand&&!u.type&&s.push({column:u,name:u.name,dataField:u.dataField})})}return(0,f.l)({},a,{items:s,formID:"dx-".concat(new ve.Z),customizeItem:d=>{var u,h=d.name||d.dataField;if((d.column||h)&&(u=d.column||this._columnsController.columnOption(d.name?"name:".concat(d.name):"dataField:".concat(d.dataField))),u){if(d.label=d.label||{},d.label.text=d.label.text||u.caption,"boolean"===u.dataType&&void 0===d.label.visible){var p=this.option("editing.form.labelMode");("floating"===p||"static"===p)&&(d.label.visible=!0)}d.template=d.template||this.getFormEditorTemplate(e,d),d.column=u,d.isCustomEditorType=o[h],u.formItem&&(0,f.l)(d,u.formItem),void 0===d.isRequired&&u.validationRules&&(d.isRequired=u.validationRules.some(g=>"required"===g.type),d.validationRules=[]);var v=!(0,_.$K)(d.visible)||d.visible;!this._firstFormItem&&v&&(this._firstFormItem=d)}r?.call(this,d),d.cssClass=(0,_.HD)(d.cssClass)?"".concat(d.cssClass," ").concat(n):n}})}getEditFormTemplate(){return(e,t,a)=>{var r=this.option(uo),n=this.getEditFormOptions(t),s=(0,c.Z)("<div>").appendTo(e),o=a?.isPopupForm;if(this._firstFormItem=void 0,o&&s.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent(s,lv,(0,f.l)({},r,n)),!o){var l=(0,c.Z)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo(e);this._createComponent((0,c.Z)("<div>").appendTo(l),ye.Z,this._getSaveButtonConfig()),this._createComponent((0,c.Z)("<div>").appendTo(l),ye.Z,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var d;this._rowsView.renderDelayedTemplates(),null===(d=this._editPopup)||void 0===d||d.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;null===(e=this._updateEditFormDeferred)||void 0===e||e.resolve()}_beforeEndSaving(e){var t;super._beforeEndSaving(e),this.isPopupEditMode()&&(null===(t=this._editPopup)||void 0===t||t.hide())}_processDataItemCore(e,t,a,r,n){var{type:s}=t;this.isPopupEditMode()&&s===it&&(e.visible=!1),super._processDataItemCore(e,t,a,r,n)}_editRowFromOptionChangedCore(e,t){var a=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,t,a),a&&this._showEditPopup(t)}},data:i=>class extends i{_updateEditItem(e){this._editingController.isFormEditMode()&&(e.rowType="detail")}_getChangedColumnIndices(e,t,a,r){if(!1!==r||!t.isEditing||!this._editingController.isFormEditMode())return super._getChangedColumnIndices.apply(this,arguments)}}},views:{rowsView:i=>class extends i{_renderCellContent(e,t){"data"===t.rowType&&this._editingController.isPopupEditMode()&&!1===t.row.visible||super._renderCellContent.apply(this,arguments)}getCellElements(e){var t=super.getCellElements(e),a=this._editingController,r=a.getEditForm();return a.getEditFormRowIndex()===e&&t&&r?r.$element().find(".".concat(this.addWidgetPrefix(Up),", .").concat("dx-button")):t}_getVisibleColumnIndex(e,t,a){if(this._editingController.getEditFormRowIndex()===t&&(0,_.HD)(a)){var n=this._columnsController.columnOption(a);return this._getEditFormEditorVisibleIndex(e,n)}return super._getVisibleColumnIndex.apply(this,arguments)}_getEditFormEditorVisibleIndex(e,t){var a=-1;return(0,S.S6)(e,(r,n)=>{var s=(0,c.Z)(n).find(".dx-field-item-content").data("dx-form-item");if(s?.column&&t&&s.column.index===t.index)return a=r,!1}),a}_isFormItem(e){var t="detail"===e.rowType||"detailAdaptive"===e.rowType,a="data"===e.rowType&&this._editingController.isPopupEditMode();return(t||a)&&e.item}_updateCell(e,t){this._isFormItem(t)?this._formItemPrepared(t,e):super._updateCell(e,t)}_updateContent(){var e=this._editingController,t=e.getEditForm(),a=t?.option("validationGroup");return super._updateContent.apply(this,arguments).done(()=>{var n=e.getEditForm();a&&n&&n!==t&&n.option("validationGroup",a)})}}}}};P.registerModule("editingFormBased",MV);var ZV={extenders:{controllers:{editing:i=>class extends i{init(){var t,a,e=!this._saveEditorHandler;super.init(),e&&(this._pointerUpEditorHandler=()=>{var r;a=null===(r=this._columnsResizerController)||void 0===r?void 0:r.isResizing()},this._pointerDownEditorHandler=r=>t=(0,c.Z)(r.target),this._saveEditorHandler=this.createAction(function(r){var{event:n}=r,s=(0,c.Z)(n.target),o=n[Np],{component:l}=this;if((!function wR(i){return i&&(i.is("input")||i.is("textarea"))}(t)||t.is(s))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var u=d(s)||d(o?.$element()),h=o&&!o._disposed&&o!==this.component,p=!!s.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,v=s.hasClass(this.addWidgetPrefix("focus-overlay")),g=this.isCellEditMode();!a&&!u&&!v&&!(p&&g&&this.isEditing())&&((0,Rt.al)(s)||h)&&this._closeEditItem.bind(this)(s)}function d(m){if(!m)return!1;var w=m.closest(".".concat(sR)),I=l.$element();return w.length>0&&0===I.closest(w).length}}),C.Z.on(Z.Z.getDocument(),ae.Z.up,this._pointerUpEditorHandler),C.Z.on(Z.Z.getDocument(),ae.Z.down,this._pointerDownEditorHandler),C.Z.on(Z.Z.getDocument(),se.u,this._saveEditorHandler))}isCellEditMode(){return this.option("editing.mode")===Ti}isBatchEditMode(){return this.option("editing.mode")===Xt}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){var t,a=this.component.$element(),r=this.isEditing();if((!a||e.closest(a).length)&&e.closest(".".concat("dx-data-row")).length){var o=e.closest(".".concat(Vt,"> td")),l=this._rowsView.getRowIndex(o.parent()),d=this._rowsView.getCellElements(l);if(d?.length){var u=d.index(o),p=null===(t=this._columnsController.getVisibleColumns()[u])||void 0===t?void 0:t.allowEditing,v=this.isEditCell(l,u);r=r&&!p&&!v}}return r||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){var e;if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var t=this._getVisibleEditColumnIndex(),a=null===(e=this._rowsView)||void 0===e?void 0:e._getCellElement(this._getVisibleEditRowIndex(),t);this._refocusEditCell=!1,clearTimeout(this._inputFocusTimeoutID),a&&!a.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},a,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){var e=(0,_.$K)(this.option(Pe)),t=(0,_.$K)(this.option(qt));return e&&t}return super.isEditing()}_handleEditColumnNameChange(e){var t=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&-1!==t&&(0,_.$K)(e.value)&&e.value!==e.previousValue){var a=this._columnsController.getVisibleColumnIndex(e.value),r=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(a,r,t)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){var t=new x.BH;return this.saveEditData().done(()=>{this.hasChanges()?t.reject("cancel"):this.addRow(e).done(t.resolve).fail(t.reject)}),t.promise()}return super._addRow(e)}editCell(e,t){return this._editCell({rowIndex:e,columnIndex:t})}_editCell(e){var a,t=new x.BH;return this.executeOperation(t,()=>{a=this._editCellCore(e),(0,x.gx)(a).done(t.resolve).fail(t.reject)}),void 0!==a?a:t.promise()}_editCellCore(e){var t=this._dataController,a=(0,_.$K)(e.oldColumnIndex)||(0,_.$K)(e.oldRowIndex),{columnIndex:r,rowIndex:n,column:s,item:o}=this._getNormalizedEditCellOptions(e),l={data:o?.data,cancel:!1,column:s};if(void 0!==o.key){if(s&&("data"===o.rowType||"detailAdaptive"===o.rowType)&&!o.removed&&this.isCellOrBatchEditMode()){if(!a&&this.isEditCell(n,r))return!0;var d=n+t.getRowIndexOffset();return(0,x.gx)(this._beforeEditCell(n,r,o)).done(u=>{u||this._prepareEditCell(l,o,r,d)||this._processCanceledEditingCell()})}return!1}this._dataController.fireError("E1043")}_beforeEditCell(e,t,a){if(this.isCellEditMode()&&!a.isNewRow&&this.hasChanges()){var r=new x.BH;return this.saveEditData().always(()=>{r.resolve(this.hasChanges())}),this.addDeferred(r),r}return!1}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){var u,{oldColumnIndex:t,oldRowIndex:a,columnIndex:r,rowIndex:n}=e,s=this._columnsController,o=s.getVisibleColumns(),d=this._dataController.items()[n];return u=(0,_.$K)(t)?o[t]:this._getEditColumn(),(0,_.$K)(a)||(a=this._getVisibleEditRowIndex()),(0,_.HD)(r)&&(r=s.columnOption(r,"index"),r=s.getVisibleIndex(r)),{oldColumn:u,columnIndex:r,oldRowIndex:a,rowIndex:n,column:o[r],item:d}}_prepareEditCell(e,t,a,r){var n;return t.isNewRow||(e.key=t.key),!this._isEditingStart(e)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(t.key),this._setEditColumnNameByIndex(a),e.column.showEditorAlways||this._addInternalData({key:t.key,oldData:null!==(n=t.oldData)&&void 0!==n?n:t.data}),!0)}closeEditCell(e,t){var a=(0,x.gx)(),r=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var n=new x.BH;a=new x.BH,this.executeOperation(n,()=>{this._closeEditCellCore(e,r,t).always(a.resolve)})}return a.promise()}_closeEditCellCore(e,t,a){var r=this._dataController,n=new x.BH,s=n.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!a)return this.saveEditData().done(l=>{this.hasChanges()?n.resolve():this.closeEditCell(!!l).always(n.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),t>=0){var o=[t];this._beforeCloseEditCellInBatchMode(o),e||r.updateItems({changeType:"update",rowIndices:o})}return n.resolve(),s}_resetModifiedClassCells(e){if(this.isBatchEditMode()){var t=this._columnsController.getVisibleColumns().length;e.forEach(a=>{for(var{key:r}=a,n=this._dataController.getRowIndexByKey(r),s=0;s<t;s++)this._rowsView._getCellElement(n,s)?.removeClass("dx-cell-modified")})}}_prepareChange(e,t,a){var r=(0,c.Z)(e.cellElement);return this.isBatchEditMode()&&void 0!==e.key&&this._applyModified(r,e),super._prepareChange(e,t,a)}_cancelSaving(e){var t=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),t.updateItems()),super._cancelSaving(e)}optionChanged(e){var{fullName:t}=e;"editing"===e.name&&t===qt?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,t,a){var r=this._columnsController.getVisibleColumns();e>-1&&(0,E.g0)(()=>{this._repaintEditCell(r[e],r[t],a)})}_handleEditRowKeyChange(e){var t;if(this.isCellOrBatchEditMode()){var a=this._getVisibleEditColumnIndex(),r=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(e.previousValue)+r;(0,_.$K)(e.value)&&e.value!==e.previousValue&&(null===(t=this._editCellFromOptionChanged)||void 0===t||t.call(this,a,a,n))}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){var{isNewRow:t}=this._dataController.items()[e],a=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,t).always(()=>{e=this._dataController.getRowIndexByKey(a),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){var{isPageChanged:t}=e??{},a=this.isBatchEditMode()||t&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?a&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return!!this.isBatchEditMode()||super._allowRowAdding(e)}_afterDeleteRow(e,t){var a=this._dataController;return this.isBatchEditMode()?(a.updateItems({changeType:"update",rowIndices:[t,e]}),(new x.BH).resolve()):super._afterDeleteRow(e,t)}_updateEditRow(e,t,a){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,t,a):super._updateEditRow(e,t,a)}_isDefaultButtonVisible(e,t){if(this.isCellOrBatchEditMode()){var a=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,t)&&(!a||!t.row.removed);case"undelete":return a&&this.allowDeleting(t)&&t.row.removed;default:return super._isDefaultButtonVisible(e,t)}}return super._isDefaultButtonVisible(e,t)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(e){var t;this.isCellEditMode()?"update"!==(null===(t=e[0])||void 0===t?void 0:t.type)&&super._beforeEndSaving(e):(this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e))}prepareEditButtons(e){var t,a=null!==(t=this.option("editing"))&&void 0!==t?t:{},r=super.prepareEditButtons(e);return(a.allowUpdating||a.allowAdding||a.allowDeleting)&&this.isBatchEditMode()&&(r.push(this.prepareButtonItem(e,"save","saveEditData",21)),r.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),r}_saveEditDataInner(){var n,e=this._dataController.getVisibleRows()[this.getEditRowIndex()],a=this._getEditColumn()?.showEditorAlways;return this.isCellEditMode()&&!e?.isNewRow&&a&&(n=new x.BH,this.addDeferred(n)),super._saveEditDataInner().always(n?.resolve)}_applyChange(e,t,a){var r=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:n}=e.column,s=e.column.setCellValue!==e.column.defaultSetCellValue;return n&&!a&&r&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(e.row,!0,s)):super._applyChange(e,t,a)}_applyChangeCore(e,t){var{showEditorAlways:a}=e.column,r=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(a&&!t){if(r)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return t=this._needUpdateRow(e.column),super._applyChangeCore(e,t)}return super._applyChangeCore(e,t)}_processDataItemCore(e,t,a,r,n){var{data:s,type:o}=t;this.isBatchEditMode()&&o===ct&&(e.data=(0,Ke.FL)(e.data,s)),super._processDataItemCore(e,t,a,r,n)}_processRemoveCore(e,t,a){if(!this.isBatchEditMode()||a)return super._processRemoveCore(e,t,a)}_processRemoveIfError(e,t){if(!this.isBatchEditMode())return super._processRemoveIfError(e,t)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);var t=e>=0?e:0,a=this.getFirstEditableColumnIndex();a>=0&&this.editCell(t,a)}}},views:{rowsView:i=>class extends i{_createTable(){var e=super._createTable.apply(this,arguments),t=this._editingController;return t.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&C.Z.on(e,(0,D.V4)(oa.Z.name,"dxDataGridRowsView"),"td:not(.".concat(Nr,")"),this.createAction(()=>{t.isEditing()&&t.closeEditCell()})),e}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var r=!!e.removed;this._editingController.isBatchEditMode()&&r&&t.addClass("dx-row-removed")}return t}},headerPanel:i=>class extends i{isVisible(){var e=this._editingController.option("editing");return super.isVisible()||e&&(e.allowUpdating||e.allowDeleting)&&e.mode===Xt}}}}};P.registerModule("editingCellBased",ZV);var dv="invalid",Ro="revert-tooltip",uv="dx-invalid-message",hv="dxInvalidMessage",Oo="invalid-message",cv="dx-invalid-message-always",pv="dxRevertButton",_v="validator",Vo="dx-pending-indicator",vv="dx-validation-pending",gv="content",mv="__DX_INSERT_INDEX__",fv="row",Kr="batch",Oi="cell",Cv=["popup","form"],ya="insert",ba="cancel",Ea=function(i){return(0,_.$K)(i)&&i!==ba},wv=function(i,e){return void 0!==i||void 0===i&&e&&!e.isNewRow},iL={defaultOptions:()=>({editing:{texts:{validationCancelChanges:y.Z.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:class jV extends J.Controller{constructor(){super(...arguments),this._isValidationInProgress=!1,this._disableApplyValidationResults=!1}init(){this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._columnsController=this.getController("columns"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()}initValidationState(){this._validationState=[],this._validationStateCache={}}_rowIsValidated(e){var t=this._getValidationData(e?.key);return!!t&&!!t.validated}_getValidationData(e,t){var n,a=(0,E.k3)(e),r=(0,_.Kn)(a);return!(n=r?this._validationState.filter(s=>(0,E.bY)(s.key,e))[0]:this._validationStateCache[a])&&t&&(this._validationState.push(n={key:e,isValid:!0}),r||(this._validationStateCache[a]=n)),n}_getBrokenRules(e,t){return t?t.brokenRules||t.brokenRule&&[t.brokenRule]:e.brokenRules||[]}_rowValidating(e,t){var a=new x.BH,r=this._editingController.getChangeByKey(e?.key),n=this._getBrokenRules(e,t),o={brokenRules:n,isValid:t?t.isValid:e.isValid,key:r.key,newData:r.data,oldData:this._editingController._getOldData(r.key),promise:null,errorText:this.getHiddenValidatorsErrorText(n)};return this.executeAction("onRowValidating",o),(0,x.gx)((0,x.p4)(o.promise)).always(()=>{e.isValid=o.isValid,e.errorText=o.errorText,a.resolve(o)}),a.promise()}getHiddenValidatorsErrorText(e){var t=[];return(0,S.S6)(e,(a,r)=>{var{column:n}=r,s=n&&void 0!==n.groupIndex&&!n.showWhenGrouped,o=n&&n.visible;!r.validator.$element().parent().length&&(!o||s)&&t.push(r.message)}),t.join(", ")}validate(e){var t=!0,a=this._editingController,r=new x.BH,n=[],s=a.getEditMode();if(e=e||s===fv,this._isValidationInProgress)return r.resolve(!1).promise();if(this._isValidationInProgress=!0,e){a.addDeferred(r);var o=a.getChanges();(0,S.S6)(o,(d,u)=>{var{type:h,key:p}=u;if("remove"!==h){var v=this._getValidationData(p,!0),g=this.validateGroup(v);n.push(g),g.done(m=>{v.validated=!0,t=t&&m.isValid})}})}else if(this._currentCellValidator){var l=this.validateGroup(this._currentCellValidator._findGroup());n.push(l),l.done(d=>{t=d.isValid})}return(0,x.gx)(...n).done(()=>{this._isValidationInProgress=!1,r.resolve(t)}),r.promise()}validateGroup(e){var r,t=new x.BH;return(e&&Ue.Z.getGroupConfig(e))?.validators.length&&(this.resetRowValidationResults(e),r=Ue.Z.validateGroup(e)),(0,x.gx)(r?.complete||r).done(n=>{(0,x.gx)(this._rowValidating(e,n)).done(t.resolve)}),t.promise()}isRowDataModified(e){return!(0,_.Qr)(e.data)}updateValidationState(e){var t=this._editingController.getEditMode(),{key:a}=e,r=this._getValidationData(a,!0);if(Cv.includes(t))r.isValid=!0;else{if(e.type===ya&&!this.isRowDataModified(e))return void(r.isValid=!0);if(this.setDisableApplyValidationResults(!0),Ue.Z.getGroupConfig(r)){var s=Ue.Z.validateGroup(r);(0,x.gx)(s.complete||s).done(o=>{r.isValid=o.isValid,r.brokenRules=o.brokenRules})}else(!r.brokenRules||!r.brokenRules.length)&&(r.isValid=!0);this.setDisableApplyValidationResults(!1)}}setValidator(e){this._currentCellValidator=e}renderCellPendingIndicator(e){var t=e.find(".".concat(Vo));if(!t.length){var a=e;t=(0,c.Z)("<div>").appendTo(a).addClass(Vo),this._createComponent(t,bt.Z),e.addClass(vv)}}disposeCellPendingIndicator(e){var t=e.find(".".concat(Vo));if(t.length){var a=bt.Z.getInstance(t);a&&(a.dispose(),a.$element().remove()),e.removeClass(vv)}}validationStatusChanged(e){var{validator:t}=e,a=t.option("validationGroup"),{column:r}=t.option("dataGetter")();this.updateCellValidationResult({rowKey:a.key,columnIndex:r.index,validationResult:e})}validatorInitialized(e){e.component.on("validating",this.validationStatusChanged.bind(this)),e.component.on("validated",this.validationStatusChanged.bind(this))}validatorDisposing(e){var t=e.component,a=t.option("validationGroup"),{column:r}=t.option("dataGetter")(),n=this.getCellValidationResult({rowKey:a?.key,columnIndex:r.index});Ea(n)&&"pending"===n.status&&this.cancelCellValidationResult({change:a,columnIndex:r.index})}applyValidationResult(e,t){var{validator:a}=t,r=a.option("validationGroup"),{column:n}=a.option("dataGetter")();if(t.brokenRules&&t.brokenRules.forEach(u=>{u.columnIndex=n.index,u.column=n}),e){var s=this.getCellValidationResult({rowKey:r.key,columnIndex:n.index}),o=Ea(s)&&s.disabledPendingId===t.id;if(this._disableApplyValidationResults||o)return;if("invalid"===t.status){var l=e.find(":focus");(0,Dr.si)(l)||(C.Z.trigger(l,"focus"),C.Z.trigger(l,ae.Z.down))}var d=!n.editCellTemplate&&this._editorFactoryController.getEditorInstance(e);"pending"===t.status?d?d.option("validationStatus","pending"):this.renderCellPendingIndicator(e):d?d.option("validationStatus","valid"):this.disposeCellPendingIndicator(e),e.toggleClass(this.addWidgetPrefix(dv),"invalid"===t.status)}}_syncInternalEditingData(e){var t,a=this._editingController,r=a.getChangeByKey(e.key),n=a._getOldData(e.key),s=null===(t=e.row)||void 0===t?void 0:t.oldData;r&&s&&!n&&a._addInternalData({key:e.key,oldData:s})}createValidator(e,t){var a,r,n,s=this._editingController,{column:o}=e,{showEditorAlways:l}=o;if(!(0,_.$K)(o.command)&&o.validationRules&&Array.isArray(o.validationRules)&&o.validationRules.length){var u=s.getIndexByKey(e.key,s.getChanges())>-1;if(!u){l||(l=((null===(a=this._columnsController)||void 0===a?void 0:a.getVisibleColumns())||[]).some(M=>M.showEditorAlways));var p=(0,E.bY)(this.option("editing.editRowKey"),e.key),v=s.isCellOrBatchEditMode()&&s.allowUpdating({row:e.row});u=p||v&&l,v&&l&&s._addInternalData({key:e.key,oldData:null!==(n=null===(r=e.row)||void 0===r?void 0:r.oldData)&&void 0!==n?n:e.data})}if(u){if(t&&!t.length)return void Q.Z.log("E1050");this._syncInternalEditingData(e);var g=this._getValidationData(e.key,!0),m=()=>{var M=s.getChangeByKey(g?.key),k=o.calculateCellValue(M?.data||{});return void 0!==k?k:e.value},w=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix(_v));var I=new l_(t||(0,c.Z)("<div>"),{name:o.caption,validationRules:(0,f.l)(!0,[],o.validationRules),validationGroup:g,adapter:w?null:{getValue:m,applyValidationResults:M=>{this.applyValidationResult(t,M)}},dataGetter(){var M=g?.key,k=s.getChangeByKey(M),U=s._getOldData(M);return{data:(0,Ke.FL)(U,k?.data),column:o}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(w){var A=I.option("adapter");if(A){var F=A.bypass,G=()=>e.row.isNewRow&&!this._isValidationInProgress&&!s.isCellModified(e);A.getValue=m,A.validationRequestsCallbacks=[],A.bypass=()=>F.call(A)||G()}}return I}}}setDisableApplyValidationResults(e){this._disableApplyValidationResults=e}getDisableApplyValidationResults(){return this._disableApplyValidationResults}isCurrentValidatorProcessing(e){var{rowKey:t,columnIndex:a}=e;return this._currentCellValidator&&(0,E.bY)(this._currentCellValidator.option("validationGroup").key,t)&&this._currentCellValidator.option("dataGetter")().column.index===a}validateCell(e){var t={rowKey:e.option("validationGroup").key,columnIndex:e.option("dataGetter")().column.index,validationResult:null},a=this.getCellValidationResult(t),r=Ea(a),n=e.option("adapter");if(r){var s=n.getValue();(0,E.bY)(s,a.value)||(a=e.validate())}else a=e.validate();var o=new x.BH;return r&&"pending"===a.status&&(this.updateCellValidationResult(t),n.applyValidationResults(a)),(0,x.gx)(a.complete||a).done(l=>{r&&n.applyValidationResults(l),o.resolve(l)}),o.promise()}updateCellValidationResult(e){var{rowKey:t,columnIndex:a,validationResult:r}=e,n=this._getValidationData(t);if(n){var s;if(n.validationResults||(n.validationResults={}),r){if(s=(0,f.l)({},r),n.validationResults[a]=s,"pending"===r.status&&(this._editingController.getEditMode()===Oi&&(s.deferred=new x.BH,s.complete.always(()=>{s.deferred.resolve()}),this._editingController.addDeferred(s.deferred)),this._disableApplyValidationResults))return void(s.disabledPendingId=r.id)}else s=n.validationResults[a];s&&s.disabledPendingId&&delete s.disabledPendingId}}getCellValidationResult(e){var r,{rowKey:t,columnIndex:a}=e;return null===(r=this._getValidationData(t,!0)?.validationResults)||void 0===r?void 0:r[a]}removeCellValidationResult(e){var{change:t,columnIndex:a}=e,r=this._getValidationData(t?.key);r&&r.validationResults&&(this.cancelCellValidationResult({change:t,columnIndex:a}),delete r.validationResults[a])}cancelCellValidationResult(e){var{change:t,columnIndex:a}=e,r=this._getValidationData(t.key);if(t&&r.validationResults){var n=r.validationResults[a];n&&(n.deferred&&n.deferred.reject(ba),r.validationResults[a]=ba)}}resetRowValidationResults(e){e&&(e.validationResults&&delete e.validationResults,delete e.validated)}isInvalidCell(e){var{rowKey:t,columnIndex:a}=e,r=this.getCellValidationResult({rowKey:t,columnIndex:a});return Ea(r)&&"invalid"===r.status}getCellValidator(e){var{rowKey:t,columnIndex:a}=e,r=this._getValidationData(t),n=r&&Ue.Z.getGroupConfig(r),s=n&&n.validators;return s&&s.filter(o=>{var{column:l}=o.option("dataGetter")();return!!l&&l.index===a})[0]}setCellValidationStatus(e){var t=this.getCellValidationResult({rowKey:e.key,columnIndex:e.column.index});(0,_.$K)(t)?e.validationStatus=t!==ba?t.status:ba:delete e.validationStatus}}},extenders:{controllers:{editing:i=>class extends i{processDataItemTreeListHack(e){super.processDataItem.apply(this,arguments)}processItemsTreeListHack(e,t){return super.processItems.apply(this,arguments)}_addChange(e){var t=super._addChange.apply(this,arguments);return t&&"remove"!==e.type&&this._validatingController.updateValidationState(t),t}_handleChangesChange(e){super._handleChangesChange.apply(this,arguments),e.value.forEach(t=>{void 0===this._validatingController._getValidationData(t.key)&&this._validatingController.updateValidationState(t)})}_updateRowAndPageIndices(){var e=this,t=e.getView("rowsView").getTopVisibleItemIndex(),a=t;(0,S.S6)(e.getChanges(),(r,n)=>{var{key:s,type:o}=n,l=this._validatingController._getValidationData(s);l&&!l.isValid&&l.pageIndex!==e._pageIndex&&(l.pageIndex=e._pageIndex,l.rowIndex=o===ya?t:a,a++)})}_getValidationGroupsInForm(e){return{validationGroup:this._validatingController._getValidationData(e.key,!0)}}_validateEditFormAfterUpdate(e,t){t&&this._editForm&&this._editForm.validate(),super._validateEditFormAfterUpdate.apply(this,arguments)}_prepareEditCell(e){var t=super._prepareEditCell.apply(this,arguments);return t&&e.column.showEditorAlways&&this._validatingController.updateValidationState({key:e.key}),t}processItems(e,t){var a=this.getChanges(),r=(s,o)=>{var l=-1,d=s.type===ya,{key:u}=s;return(0,S.S6)(o,(h,p)=>{if((0,E.bY)(u,d?p.key:this._dataController.keyOf(p)))return l=h,!1}),l},n=(e=super.processItems(e,t)).length;return this.getEditMode()===Kr&&"prepend"!==t&&"append"!==t&&a.forEach(s=>{var{key:o}=s,l=this._validatingController._getValidationData(o);l&&s.type&&l.pageIndex===this._pageIndex&&s?.pageIndex!==this._pageIndex&&function(d,u){var h={key:d.key};if(!(r(d,e)>=0)){u.rowIndex=u.rowIndex>n?u.rowIndex%n:u.rowIndex;var{rowIndex:v}=u;h[mv]=1,e.splice(v,0,h)}}(s,l)}),e}processDataItem(e){var t=e.data[mv],a=t?e.data.key:e.key;if(this.getEditMode()===Kr&&t&&a){var n=this.getChanges(),s=O.getIndexByKey(a,n);if(s>=0){var o=n[s];if(o.type!==ya){var l=this._getOldData(o.key);e.data=(0,f.l)(!0,{},l,o.data),e.key=a}}}super.processDataItem.apply(this,arguments)}_createInvisibleColumnValidators(e){var t=this,a=this._columnsController.getColumns(),r=this._columnsController.getInvisibleColumns().filter(l=>!l.isBand),n=this._columnsController.getGroupColumns().filter(l=>!l.showWhenGrouped&&-1===r.indexOf(l)),s=[],o=(l,d)=>this._dataController.getRowIndexByKey(d)>=0&&r.indexOf(l)<0;return r.push(...n),Cv.includes(this.getEditMode())||(0,S.S6)(a,(l,d)=>{e.forEach(u=>{var h;if(!o(d,u.key)){if(u.type===ya)h=u.data;else if("update"===u.type){var p=t._getOldData(u.key);if(!(0,_.$K)(p))return;h=(0,Ke.FL)(p,u.data)}if(h){var v=this._validatingController.createValidator({column:d,key:u.key,value:d.calculateCellValue(h)});v&&s.push(v)}}})}),function(){s.forEach(l=>{l.dispose()})}}_beforeSaveEditData(e,t){var a=super._beforeSaveEditData.apply(this,arguments),r=this._validatingController._getValidationData(e?.key);if(e)a=a||!("remove"===e.type||r.isValid);else{var s=this._createInvisibleColumnValidators(this.getChanges());a=new x.BH,this.executeOperation(a,()=>{this._validatingController.validate(!0).done(o=>{switch(s(),this._updateRowAndPageIndices(),this.getEditMode()){case Oi:o||this._focusEditingCell();break;case Kr:o||(this._resetEditRowKey(),this._resetEditColumnName(),this._dataController.updateItems())}a.resolve(!o)})})}return a.promise?a.promise():a}_beforeEditCell(e,t,a){var r=super._beforeEditCell(e,t,a);if(this.getEditMode()===Oi){var n=this._rowsView._getCellElement(e,t),s=n&&n.data("dxValidator"),o=n&&n.closest(".dx-row").data("options"),l=s&&s.option("adapter").getValue();if(s&&wv(l,o)){var d=new x.BH;return(0,x.gx)(this._validatingController.validateCell(s),r).done((u,h)=>{d.resolve("valid"===u.status&&h)}),d.promise()}if(!s)return r}return!1}_afterSaveEditData(e){var t,a=this.getEditMode()===Oi;if((0,S.S6)(this.getChanges(),(d,u)=>{var h=this._showErrorRow(u);t=t||h}),t){var r=this._rowsView.getScrollable();r&&(r.update(),r.scrollToElement(t))}if(e&&a&&this._needUpdateRow()){var n=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[n]}),this._focusEditingCell()}else if(!e){var s=!0;a&&(s=!(this._columnsController.getColumns().filter(d=>{var u;return d.showEditorAlways&&(null===(u=d.validationRules)||void 0===u?void 0:u.length)>0}).length>0)),s&&this._validatingController.initValidationState()}}_handleDataChanged(e){var t=this._validatingController._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===e.changeType&&(0,S.S6)(t,(a,r)=>{r.rowIndex+=e.items.length}),super._handleDataChanged(e)}resetRowAndPageIndices(){(0,S.S6)(this._validatingController._validationState,(t,a)=>{a.pageIndex!==this._pageIndex&&(delete a.pageIndex,delete a.rowIndex)})}_beforeCancelEditData(){this._validatingController.initValidationState(),super._beforeCancelEditData()}_showErrorRow(e){var t,a=this._dataController.items(),r=this.getIndexByKey(e.key,a),n=this._validatingController._getValidationData(e.key);if(!n?.isValid&&n?.errorText&&r>=0)return t=this.getPopupContent(),this._errorHandlingController&&this._errorHandlingController.renderErrorRow(n?.errorText,r,t)}updateFieldValue(e){var t=new x.BH;return this._validatingController.removeCellValidationResult({change:this.getChangeByKey(e.key),columnIndex:e.column.index}),super.updateFieldValue.apply(this,arguments).done(()=>{var a=this._validatingController.getCellValidator({rowKey:e.key,columnIndex:e.column.index});(0,x.gx)(a&&this._validatingController.validateCell(a)).done(r=>{this._editorFactoryController.refocus(),t.resolve(r)})}),t.promise()}highlightDataCell(e,t){super.highlightDataCell.apply(this,arguments),this._validatingController.setCellValidationStatus(t);var a=!!t.setValue,r=this.isCellModified(t),n=(0,_.$K)(t.validationStatus);if(r&&t.column.setCellValue||a&&!r&&!t.row.isNewRow&&n){var o=e.data("dxValidator");o&&(0,x.gx)(this._validatingController.validateCell(o)).done(()=>{this._validatingController.setCellValidationStatus(t)})}}getChangeByKey(e){var t=this.getChanges();return t[O.getIndexByKey(e,t)]}isCellModified(e){var t=super.isCellModified(e),a=this.getChangeByKey(e.key),r=!!e.row&&this._validatingController.isInvalidCell({rowKey:e.key,columnIndex:e.column.index});return t||this._validatingController._rowIsValidated(a)&&r}},editorFactory:i=>class extends i{_showRevertButton(e){var t,a=null===(t=this._revertTooltip)||void 0===t?void 0:t.$element();if(!e||!e.length)return a?.remove(),void(this._revertTooltip=void 0);if(!e.find(a).length){var r=e.closest(".".concat(this.addWidgetPrefix(gv))).parent(),n=this.addWidgetPrefix(Ro);a?.remove(),a=(0,c.Z)("<div>").addClass(n).appendTo(e);var s={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:r,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:n},contentTemplate:()=>{var o=(0,c.Z)("<div>").addClass("dx-revert-button"),l={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),elementAttr:{id:pv,"aria-label":y.Z.format("dxDataGrid-ariaRevertButton")},onClick:()=>{this._editingController.cancelEditData()}};return new ye.Z(o,l).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:e},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new Wi.Z(a,s)}}_hideFixedGroupCell(e,t){var a,r,n=this._rowsView.isFixedColumns(),s=this._editingController.isFormOrPopupEditMode();if(n&&!s){var o=e.closest(".dx-row").next().data("options");o&&"group"===o.rowType&&(a=(0,c.Z)(this._rowsView.getRowElement(o.rowIndex)).last(),(r=a.find(".".concat("dx-group-cell"))).length&&"hidden"!==r.get(0).style.visibility&&(r.css("visibility","hidden"),t.onDisposing=function(){r.css("visibility","")}))}}_positionedHandler(e,t){if(!e.component.__skipPositionProcessing){var a=(0,c.Z)(e.element).hasClass(this.addWidgetPrefix(Ro)),r=!a&&this._rowsView.updateFreeSpaceRowHeight(),n=this._normalizeValidationMessagePositionAndMaxWidth(e,a,t);e.component.__skipPositionProcessing=!(!r&&!n),n?e.component.option(n):r&&e.component.repaint()}}_showValidationMessage(e,t,a){var r,n=e.find(".dx-dropdowneditor-overlay").data("dxPopup"),s=n&&n.option("visible"),o=s?"top right":"top ".concat(a),l=s?"top left":"bottom ".concat(a),u=(null===(r=this._columnsController.getFixedColumns())||void 0===r?void 0:r.length)>0?this.getView("rowsView").element():e.closest(".".concat(this.addWidgetPrefix(gv))),h="";t&&t.forEach(m=>{h+=(h.length?"<br/>":"")+(0,qe.HZ)(m)});var p=this.addWidgetPrefix(Oo);this._rowsView.element().find(".".concat(p)).remove();var v=(0,c.Z)("<div>").addClass(uv).addClass(cv).addClass(p).html(h).appendTo(e),g={container:u,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{id:hv,class:"".concat(uv," ").concat(cv," ").concat(p)},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!s&&oe.Z.mozilla?-1:0},my:o,at:l,of:e},onPositioned:m=>{this._positionedHandler(m,s),this._shiftValidationMessageIfNeed(m.component.$content(),e)}};this._hideFixedGroupCell(e,g),new Wi.Z(v,g)}_hideValidationMessage(){var e;(null===(e=this._rowsView.element())||void 0===e?void 0:e.find(this._getValidationMessagesSelector()))?.remove()}_normalizeValidationMessagePositionAndMaxWidth(e,t,a){var r=this._columnsController.getFixedColumns();if(r&&r.length){var n,s=!t&&function(i,e){var t=(0,c.Z)(e).closest("tr").index(),a=(0,c.Z)(i._rowsView.getRowElement(t)).first().children().filter(":not(.dx-hidden-cell)");return i._rowsView._getWidths(a).reduce((r,n)=>r+n,0)}(this,e.element),o=e.component.$content(),l=(0,b.Y_)(o,!0),d=!t&&l>s,u=this._rowsView.getCellIndex((0,c.Z)(e.element).closest("td")),h=function(i){var e,t;return i.some((a,r)=>{if("transparent"===a.command)return e=0===r?-1:r,t=r===i.length-1?-1:r+a.colspan-1,!0}),{startColumnIndex:e,endColumnIndex:t}}(r);return t||u!==h.startColumnIndex&&!d?u===h.endColumnIndex&&(n={collision:"none flip",my:"top right",at:t||a?"top left":"bottom right"},t&&(n.offset="-1 0")):n={collision:"none flip",my:"top left",at:a?"top right":"bottom left"},n&&{position:n,maxWidth:d?s-2:void 0}}}_shiftValidationMessageIfNeed(e,t){var a=this._revertTooltip&&this._revertTooltip.$content();if(a){var r=e.offset(),n=a.offset();if(r.top===n.top&&r.left+(0,b.dz)(e)>n.left){var s=(0,b.dz)(a)+2;e.css("left",n.left<t.offset().left?-s:s)}}}_getRevertTooltipsSelector(){var e=this.addWidgetPrefix(Ro);return".dx-editor-cell .".concat(e)}_getValidationMessagesSelector(){var e=this.addWidgetPrefix(Oo);return".dx-editor-cell .".concat(e,", .dx-cell-modified .").concat(e)}loseFocus(e){e||this._validatingController.setValidator(null),super.loseFocus()}updateCellState(e,t,a){var r,n=e?.closest(this._getFocusCellSelector()),s=n?.is("td")?n:null,o=n?.closest(".dx-row").data("options"),l=o?this._editingController.getChangeByKey(o.key):null,d=s&&this._columnsController.getVisibleColumns()[s.index()],u=void 0!==(null===(r=l?.data)||void 0===r?void 0:r[d?.name])&&!this._editingController.isSaving(),h=[];if(this._editingController.getEditMode()===Oi&&("invalid"===t?.status||u?(this._showRevertButton(n),h.push(pv)):this._revertTooltip&&this._revertTooltip.$element().remove()),t&&"invalid"===t.status&&s&&d&&t&&t.brokenRules){var v=[];t.brokenRules.forEach(g=>{g.message&&v.push(g.message)}),v.length&&(this._showValidationMessage(n,v,d.alignment||"left"),h.push(hv))}this._updateAriaValidationAttributes(n,h),!a&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()}_updateAriaValidationAttributes(e,t){if(0!==t.length){var a=this._editingController.getEditMode();if([Oi,Kr,fv].includes(a)){var n=this._getCurrentFocusElement(e);n.attr("aria-labelledby",t.join(" ")),n.attr("aria-invalid",!0)}}}_getCurrentFocusElement(e){return this._editingController.isEditing()?e.find(ho).first():e}focus(e,t){if(!arguments.length)return super.focus();if(this._hideValidationMessage(),e?.hasClass("dx-row")||e?.hasClass("dx-master-detail-cell"))return super.focus(e,t);var o,a=e?.closest(this._getFocusCellSelector()),r=a&&(a.data("dxValidator")||e.find(".".concat(this.addWidgetPrefix(_v))).eq(0).data("dxValidator")),n=a&&a.closest(".dx-row").data("options"),s=n?this._editingController.getChangeByKey(n.key):null;if(r){this._validatingController.setValidator(r);var l=r.option("adapter").getValue();if(wv(l,n)||this._validatingController._rowIsValidated(s))return this._editingController.waitForDeferredOperations().done(()=>{!this._rowsView.isElementInside(e)||(0,x.gx)(this._validatingController.validateCell(r)).done(u=>{o=u;var{column:h}=o.validator.option("dataGetter")();s&&h&&!this._validatingController.isCurrentValidatorProcessing({rowKey:s.key,columnIndex:h.index})||(!(0,z.dC)((0,z.Vk)())&&"invalid"===o.status&&(t=!0),this.updateCellState(e,o,t),super.focus.call(this,e,t))})}),super.focus(e,t)}return this.updateCellState(e,o,t),super.focus(e,t)}getEditorInstance(e){var t=e.find(".dx-texteditor").eq(0);return O.getWidgetInstance(t)}},data:i=>class extends i{_getValidationStatus(e){return(Ea(e)?e.status:e)||"valid"}_isCellChanged(e,t,a,r,n){var s,o,l=null===(s=e.cells)||void 0===s?void 0:s[r],d=this._getValidationStatus({status:l?.validationStatus}),u=this._validatingController.getCellValidationResult({rowKey:e.key,columnIndex:r}),h=this._validatingController._getValidationData(e.key),p=this._getValidationStatus(u),v=JSON.stringify(t.modifiedValues)!==JSON.stringify(e.modifiedValues),g=d!==p&&v,m=(0,c.Z)(l?.cellElement).hasClass(this.addWidgetPrefix(dv)),w=null===(o=l?.column.validationRules)||void 0===o?void 0:o.length;return!!(e.isEditing!==t.isEditing&&w||g||h.isValid&&m)||super._isCellChanged.apply(this,arguments)}}},views:{rowsView:i=>class extends i{updateFreeSpaceRowHeight(e){var t,a,r,n=this.element(),s=n&&n.find(".".concat(this.addWidgetPrefix(Oo)," .dx-overlay-content"));if(super.updateFreeSpaceRowHeight(e),s&&s.length&&(t=this._getRowElements(),(a=(r=this._getFreeSpaceRowElements(e)).first())&&1===t.length&&(!a.is(":visible")||(0,b.zp)(s)>(0,b.zp)(a))))return r.show(),(0,b.QQ)(r,(0,b.zp)(s)),!0}_formItemPrepared(e,t){super._formItemPrepared.apply(this,arguments),(0,E.Su)(()=>{var a=t.find(".dx-widget").first();a.length&&!a.children().length||this._validatingController.createValidator(e,a)})}_cellPrepared(e,t){this._editingController.isFormOrPopupEditMode()||this._validatingController.createValidator(t,e),super._cellPrepared.apply(this,arguments)}_restoreErrorRow(e){this._editingController&&this._editingController.hasChanges()&&this._getRowElements(e).each((t,a)=>{var r=(0,c.Z)(a).data("options");if(r){var n=this._editingController.getChangeByKey(r.key);n&&this._editingController._showErrorRow(n)}})}}}}};P.registerModule("validating",iL);var Lo="scrolling.legacyMode",xv=i=>i.option("scrolling.loadTwoPagesOnStart")||i._controller.isVirtual()||i._controller.getViewportItemIndex()>0,Gr=i=>i._cache.length?i._cache[0].pageIndex:-1,Po=i=>i._cache.length?i._cache[i._cache.length-1].pageIndex:-1,Ur=(i,e,t)=>{i._isChangedFiring=!0,e(t),i._isChangedFiring=!1},Sv=(i,e,t)=>{if(i._isDelayChanged)return i._isDelayChanged=!1,Ur(i,e,t),!0},Yr=(i,e)=>{var t=i.option("scrolling.preloadEnabled"),a=(i=>{var e=i._dataOptions.pageSize();if(i.option("scrolling.preventPreload"))return 0;var a=i._controller.viewportSize();if(i._controller.isVirtualMode()&&i.option("scrolling.removeInvisiblePages")){a=0;for(var r=i._controller.viewportSize()*i._controller.viewportItemSize(),n=i._controller.getContentOffset(),s=i._controller.getViewportPosition(),o=i._controller.virtualItemsCount(),l=i._dataOptions.totalItemsCount(),d=o.begin;d<l&&!(n>=s+r);d++)(n+=i._controller.getItemSizes()[d]||i._controller.viewportItemSize())>=s&&a++}return e&&a>0?Math.ceil(a/e):1})(i),r=i._controller.isAppendMode();return a&&(e?a=t?1:0:(t&&a++,(r||!xv(i))&&a--)),a},yv=(i,e,t,a,r)=>{var n=i._dataOptions,s=n.items().slice(),o=(0,_.Kn)(t)?t:void 0,l="prepend"===t,d=n.viewportItems();t&&(0,_.HD)(t)&&!i._isDelayChanged&&(o={changeType:t,items:s},r&&(o.removeCount=r.itemsCount,o.removeCount&&n.correctCount&&(o.removeCount=n.correctCount(d,o.removeCount,l))));var u=r?r.itemsLength:0;u&&n.correctCount&&(u=n.correctCount(d,u,l)),"append"===t?(d.push.apply(d,s),r&&d.splice(0,u)):l?(d.unshift.apply(d,s),r&&d.splice(-u)):i._dataOptions.viewportItems(s),n.updateLoading(),i._lastPageIndex=i.pageIndex(),i._isDelayChanged=a,a||Ur(i,e,o)};class sL{constructor(e,t){this._dataOptions=t,this._controller=e,this._pageIndex=this._lastPageIndex=t.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){var o,t=this._dataOptions.pageSize(),a=this._dataOptions.pageCount(),r=this._controller.isVirtualMode(),n=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();if(t&&(r||n)&&s>=0){var l=this._controller.viewportSize();if(l&&e+l>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var d=s%t;(o=a-1)>0&&d>0&&d<l&&o--}else o=a;else{o=Math.floor(e/t);var u=a-1;o=Math.max(o,0),o=Math.min(o,u)}return this.pageIndex(o),this.load()}}pageIndex(e){var t=this._controller.isVirtualMode(),a=this._controller.isAppendMode();return!1!==this.option(Lo)&&(t||a)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){var t=Gr(this);return t<0&&(t=void 0!==e?e:this.pageIndex()),t}endPageIndex(){var e=Po(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var t,e=this._dataOptions,a=this._controller.isVirtualMode(),r=this._controller.isAppendMode();if(!1!==this.option(Lo)&&(a||r)){var n=(i=>{var e=-1,t=Gr(i),a=i._dataOptions;return t<0?e=i._pageIndex:i._cache[i._pageIndex-t]?t>=0&&i._controller.viewportSize()>=0&&(t>0&&(Po(i)+1===a.pageCount()&&i._cache.length<Yr(i)+1||i._pageIndex===t&&Yr(i,!0))&&(e=t-1),e<0&&t+i._cache.length<=i._pageIndex+Yr(i)&&(e=t+i._cache.length)):e=i._pageIndex,i._loadingPageIndexes[e]&&(e=-1),e})(this);if(n>=0){var s=((i,e)=>{var t=i._dataOptions;if(e===i.pageIndex()||!t.isLoading()&&e<t.pageCount()||!t.hasKnownLastPage()&&e===t.pageCount())return t.pageIndex(e),i._loadingPageIndexes[e]=!0,(0,x.gx)(t.load()).always(()=>{i._loadingPageIndexes[e]=!1})})(this,n);s&&(t=new x.BH,s.done(()=>{var o=this._delayDeferred;o?o.done(t.resolve).fail(t.reject):t.resolve()}).fail(t.reject),e.updateLoading())}}else t=e.load();return!t&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),t||(new x.BH).resolve()}loadIfNeed(){var e=this._controller.isVirtualMode(),t=this._controller.isAppendMode();if((e||t)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var a=this._controller.getViewportPosition();a>0?this._controller._setViewportPositionCore(a):this.load()}}handleDataChanged(e,t){var n,s,a=this._dataOptions,r=this._cache.length,o=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(t&&t.changes)Ur(this,e,t);else if(!1!==this.option(Lo)&&(o||l)){var d=Gr(this);if(d>=0&&(o&&d+this._cache.length!==a.pageIndex()&&d-1!==a.pageIndex()&&(r=0,this._cache=[]),l))if(0===a.pageIndex())this._cache=[];else if(a.pageIndex()<Po(this))return void Ur(this,e,{changeType:"append",items:[]});var h,u={pageIndex:a.pageIndex(),itemsLength:a.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&o?s=this._cache.length>Math.max(Yr(this)+(this.option("scrolling.preloadEnabled")?1:0),2):Sv(this,e,{isDelayed:!0}),d===a.pageIndex()+1?(s&&(h=this._cache.pop()),n="prepend",this._cache.unshift(u)):(s&&(h=this._cache.shift()),n="append",this._cache.push(u));var p=o&&0===r&&xv(this);yv(this,e,this._cache.length>1?n:void 0,p,h),this._delayDeferred=this.load().done(()=>{Sv(this,e)&&this.load()})}else yv(this,e,t)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){var t=0,a=this._controller.isVirtualMode();return!e&&a?this._cache.forEach(r=>{t+=r.itemsCount}):t=this._dataOptions.itemsCount(),t}virtualItemsCount(){var e=Gr(this);e<0&&(e=this._dataOptions.pageIndex());var t=e*this._dataOptions.pageSize(),a=this._cache.length*this._dataOptions.pageSize();return{begin:t,end:Math.max(0,this._dataOptions.totalItemsCount()-a-t)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var bv="virtual",jr="scrolling.legacyMode",Ev=i=>i.option("scrolling.mode")===bv||i._isVirtual;function Iv(i,e,t){var a,r=[],n=[],s=[];function o(h){var p=h.element?h.$element():h,v=fi.Z.offset(p);return v?h.scrollTop()-(v.top-i.offset().top):i.offset().top}var h,p,l={on(h,p,v){h.on("scroll",v)},off(h,p,v){h.off("scroll",v)}};function d(h){var I,p="#document"===h.get(0).nodeName,v=h.get(0).nodeType===(0,B.Jj)().Node.ELEMENT_NODE,g=h.data("dxScrollable"),m=l;if(g||(g=p&&(0,c.Z)((0,B.Jj)())||v&&"auto"===h.css("overflowY")&&h,m=C.Z,g)){var w=(I=g,function(){var A=I.scrollTop()-o(I);e(A=A>0?A:0)});m.on(g,"scroll",w),n.push(I=>{var A=o(g);I-A>=0&&g[g.scrollTo?"scrollTo":"scrollTop"](I+A)}),r.push(g),s.push(()=>{m.off(g,"scroll",w)})}}for(a=(t=t||i).parent();a.length;void 0,a=(0,c.Z)(null!==(p=(h=a).get(0).parentNode)&&void 0!==p?p:h.get(0).host))d(a);return{scrollTo(h){(0,S.S6)(n,(p,v)=>{v(h)})},dispose(){(0,S.S6)(s,(h,p)=>{p()})}}}class Bo{constructor(e,t,a){this._dataOptions=t,this.component=e,this._viewportSize=!1===e.option(jr)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=a,this.positionChanged=(0,le.Z)(),this._dataLoader=new sL(this,this._dataOptions)}getItemSizes(){return this._itemSizes}option(e,t){return this.component.option.apply(this.component,arguments)}isVirtual(){return this._isVirtual}virtualItemsCount(){if(Ev(this)){var e=this._dataOptions,t=e.totalItemsCount();if(!1===this.option(jr)&&-1!==t){var a=this.getViewportParams(),r=e.loadedOffset(),n=e.loadedItemCount(),s=Math.max(a.skip,r),o=Math.min(a.take,n);return{begin:s,end:Math.max(t-(s+o),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}}getScrollingTimeout(){var e,t=this.option("scrolling.renderAsync"),a=0;return(0,_.$K)(t)?t&&(a=null!==(e=this.option("scrolling.timeout"))&&void 0!==e?e:0):(a=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(a=this.option("scrolling.minTimeout")||0),a}setViewportPosition(e){var t=new x.BH,a=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),a>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),t.resolve()},a):(this._setViewportPositionCore(e),t.resolve()),t.promise()}getViewportPosition(){return this._position}getItemIndexByPosition(e,t,a){e=e??this._position;for(var r=this.getItemSize(),n=0,s=0,o=Object.keys(this._itemSizes).concat(-1),l=0;l<o.length&&n<e;l++){var d=parseInt(o[l]),u=(e-n)/r;if(d<0||s+u<d){s+=u,this._sizeRatio<1&&(0,_.$K)(t)&&(s=t+a/this._viewportItemSize);break}n+=(u=d-s)*r,s+=u;var h=this._itemSizes[d];s+=(n+=h)<e?1:(e-n+h)/h}return Math.round(50*s)/50}isScrollingBack(){return this._isScrollingBack}_setViewportPositionCore(e){var t=this._position||0;this._position=e,t!==this._position&&(this._isScrollingBack=this._position<t);var a=this.getItemIndexByPosition(),r=this.setViewportItemIndex(a);return this.positionChanged.fire(),r}setContentItemSizes(e){var t=this.virtualItemsCount();if(this._contentSize=e.reduce((n,s)=>n+s,0),t){e.forEach((n,s)=>{this._itemSizes[t.begin+s]=n});var a=(t.begin+t.end+this.itemsCount())*this._viewportItemSize,r=O.getContentHeightLimit(oe.Z);this._sizeRatio=a>r?r/a:1}}getItemSize(){return this._viewportItemSize*this._sizeRatio}getItemOffset(e,t){var a=this.virtualItemsCount(),r=e;if(!a)return 0;var n=0,s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(o=>{r&&(t?o>=s-e:o<e)&&(n+=this._itemSizes[o],r--)}),Math.floor(n+r*this._viewportItemSize*this._sizeRatio)}getContentOffset(e){var t="end"===e,a=this.virtualItemsCount();return a?this.getItemOffset(t?a.end:a.begin,t):0}getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0}getViewportItemIndex(){return this._viewportItemIndex}setViewportItemIndex(e){if(this._viewportItemIndex=e,!1!==this.option(jr))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)}viewportItemSize(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize}viewportSize(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize}viewportHeight(e,t){var a=t??this._position,r=this.getItemIndexByPosition(a),n=this.getItemIndexByPosition(a+e,r,e);this.viewportSize(Math.ceil(n-r)),!(0,_.$K)(t)&&this._viewportItemIndex!==r&&this._setViewportPositionCore(a)}reset(e){this._dataLoader.reset(),e||(this._itemSizes={})}subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||Iv(e,t=>{this.viewportItemSize()&&this.setViewportPosition(t)})}dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null}scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)}isVirtualMode(){return Ev(this)}isAppendMode(){return(i=>"infinite"===i.option("scrolling.mode")&&!i._isVirtual)(this)}getViewportParams(){var e,t=this.option("scrolling.mode")===bv,a=this._dataOptions.totalItemsCount(),n=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>a?a:this._viewportItemIndex,s=this._viewportSize+n,o=this.option("scrolling.prerenderedRowChunkSize")||1,l=this.isScrollingBack(),d=null!==(e=this.option("scrolling.prerenderedRowCount"))&&void 0!==e?e:1,h=l?0:d,p=Math.floor(Math.max(0,n-(l?d:0))/o)*o,v=Math.ceil((s+h-p)/o)*o;if(t){var g=Math.max(0,a-p);v=Math.min(v,g)}return{skip:p,take:v}}itemsCount(){return this.option(jr)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}pageIndex(){return this._dataLoader.pageIndex(...arguments)}beginPageIndex(){return this._dataLoader.beginPageIndex(...arguments)}endPageIndex(){return this._dataLoader.endPageIndex(...arguments)}pageSize(){return this._dataLoader.pageSize(...arguments)}load(){return this._dataLoader.load(...arguments)}loadIfNeed(){return this._dataLoader.loadIfNeed(...arguments)}handleDataChanged(){return this._dataLoader.handleDataChanged(...arguments)}getDelayDeferred(){return this._dataLoader.getDelayDeferred()}}var Tv="bottom-load-panel",Dv="dx-freespace-row",qr="dx-virtual-row",W="scrolling.legacyMode",Fo="paging.pageIndex",_L=["beginPageIndex","endPageIndex","pageIndex"],xe=function(i){return"virtual"===i.option("scrolling.mode")},at=function(i){return"infinite"===i.option("scrolling.mode")},Ye=function(i){return xe(i)||at(i)},Rv=function(i,e,t,a){for(var r=0;r<e+1;r++){var n=i[t?i.length-1-r:r];n&&!a(n,r===e,t)&&e++}return e},Xr=function(i,e){return"data"===i.rowType&&!i.isNewRow||"group"===i.rowType&&e.isGroupItemCountable(i.data)},Mo=function(i){var e=i._virtualScrollController.beginPageIndex(-1);xe(i)&&(e<0||i.viewportSize()>=0&&i.getViewportItemIndex()>=0&&(e*i.pageSize()>i.getViewportItemIndex()||e*i.pageSize()+i.itemsCount()<i.getViewportItemIndex()+i.viewportSize())&&i._dataSource.isLoading()?i._isLoading||(i._isLoading=!0,i.loadingChanged.fire(!0)):i._isLoading&&(i._isLoading=!1,i.loadingChanged.fire(!1)))},Se=function(i,e,t){if(!1===i.option(W)&&_L.includes(e)){var a=i._dataSource;return a.pageIndex.apply(a,t)}var r=i._virtualScrollController;return r[e].apply(r,t)},Ov=function(i,e){var t=i.toArray().map(n=>(0,c.Z)(n).parent(".".concat(e)).get(0)).filter(n=>n);t.length&&(i=(0,c.Z)(t));for(var a=e===Dv?i.length-1:i.length,r=0;r<a;r++)i.eq(r).remove()},wL={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{controllers:{data:i=>class extends i{dispose(){var e=this._rowsScrollController;e&&e.dispose(),super.dispose.apply(this,arguments)}_refreshDataSource(){var e=super._refreshDataSource.apply(this,arguments)||(new x.BH).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e}_loadDataSource(){var e;if(this._rowsScrollController&&Ye(this)){var{loadPageCount:t}=(0,_.$K)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:0};t>=1&&(null===(e=this._dataSource)||void 0===e||e.loadPageCount(t))}return super._loadDataSource.apply(this,arguments)}getRowPageSize(){var e=this.option("scrolling.rowPageSize"),t=this.pageSize();return t&&t<e?t:e}reload(){var e=this._rowsScrollController||this._dataSource,t=e&&e.getItemIndexByPosition(),a=super.reload.apply(this,arguments);return a&&a.done(()=>{var r,n;if(xe(this)||O.isVirtualRowRendering(this)){var s=this.getRowIndexOffset(),o=Math.floor(t)-s,{component:l}=this,d=l.getScrollable&&l.getScrollable(),u=this.dataSource().operationTypes().sorting;if(d&&!u&&o>=0){var h=l.getRowElement(o),p=h&&h[0]&&(0,c.Z)(h[0]),v=p&&(null===(r=p.position())||void 0===r?void 0:r.top),g=oe.Z.chrome&&Number(null!==(n=oe.Z.version)&&void 0!==n?n:0)>=91;v&&v>(oe.Z.mozilla||g?1:0)&&(v=Math.round(v+(0,b.zp)(p)*(t%1)),d.scrollTo({y:v}))}}})}initVirtualRows(){var e=O.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!e||!e||!1!==this.option(W)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var t=!xe(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(t*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option(W)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new Bo(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var a;if(!1===this.option(W))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(a=this._dataSource)||void 0===a||a.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option(W)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option(W)&&this._rowsScrollController.load()}isViewportChanging(){return this._viewportChanging}_getRowsScrollDataOptions(){var e=this,t=function(a){return Xr(a,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var a;return xe(e)&&(null===(a=e._dataSource)||void 0===a?void 0:a.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount:()=>Ye(e)?e.totalItemsCount():!1===e.option(W)?e._itemCount:e._items.filter(t).length,hasKnownLastPage:()=>!1!==e.option(W)||e.hasKnownLastPage(),pageIndex:a=>(void 0!==a&&(e._rowPageIndex=a),e._rowPageIndex),isLoading:()=>e.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),(this.items().length||!this.totalItemsCount())&&e._rowsScrollController.handleDataChanged(a=>{(a=a||{}).changeType=a.changeType||"refresh",a.items=a.items||e._visibleItems,e._visibleItems.forEach((r,n)=>{r.rowIndex=n}),e._fireChanged(a)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(a,r,n)=>Rv(a,r,n,(s,o,l)=>s.isNewRow?o&&!l:o&&l?!s.isNewRow:t(s)),items(a){var r=e._items;if(e.option(W)){var s=e.dataSource()?.virtualItemsCount(),o=s?s.begin:0,l=e.getRowPageSize(),d=e._rowPageIndex*l-o,u=l;if(d<0)return[];d&&(d=this.correctCount(r,d),r=r.slice(d)),u&&(u=this.correctCount(r,u),r=r.slice(0,u))}return a?r.filter(t):r},viewportItems:a=>(a&&!1!==e.option(W)&&(e._visibleItems=a),e._visibleItems),onChanged(){},changingDuration(){var a=e.dataSource();return a?.isLoading()&&!1!==e.option(W)?300:a?._renderTime||0}}}_updateItemsCore(e){var t=this.getRowIndexDelta();if(super._updateItemsCore.apply(this,arguments),!1===this.option(W)&&O.isVirtualRowRendering(this))"update"===e.changeType&&0===e.rowIndices.length&&e.cancelEmptyChanges&&(e.cancel=!0);else{var a=this._rowsScrollController;if(a){var r=this._visibleItems,n="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;n||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,n&&a.reset(!0),a.load()):("update"===e.changeType?e.rowIndices.forEach((s,o)=>{var l=e.changeTypes[o],d=e.items[o];"update"===l?r[s]=d:"insert"===l?r.splice(s,0,d):"remove"===l&&r.splice(s,1)}):(r.forEach((s,o)=>{r[o]=this._items[o+t]||r[o]}),e.items=r),function(i){i.forEach((e,t)=>{e.rowIndex=t})}(r))}}}_updateLoadViewportParams(){var e=this._rowsScrollController.getViewportParams(),t=this.pageSize();if(e&&!Ye(this)&&t>0){var a=this.pageIndex()*t;e.skip+=a}this._loadViewportParams=e}_processItems(){var e,t=super._processItems.apply(this,arguments);if(!1===this.option(W)){var n,s,o,a=this._dataSource,r=null!==(e=a?.lastLoadOptions().skip)&&void 0!==e?e:0,l=!1,d=[];t.forEach(u=>{var{rowType:h}=u,p=Xr(u,a),v="group"===h&&(n||p||"group"!==s&&r>0),g="data"===h&&p&&(n||"group"!==s);!u.isNewRow&&(0,_.$K)(n)&&(v||g)&&(!o||l)&&r++,(v||g)&&(l=!0),u.isNewRow?d.push(u):(d.forEach(w=>{w.loadIndex=r}),d=[]),u.loadIndex=r,n=p,s=h,o=u.isNewRow}),d.forEach(u=>{u.loadIndex=r})}return t}_afterProcessItems(e){if(this._itemCount=e.filter(s=>Xr(s,this._dataSource)).length,(0,_.$K)(this._loadViewportParams)){this._updateLoadViewportParams();var t=e;if(this._allItems=e,e.length){var{skipForCurrentPage:a}=this.getLoadPageParams(!0),r=e[0].loadIndex+a,{take:n}=this._loadViewportParams;t=e.filter(s=>s.loadIndex>=r&&(s.loadIndex<r+n||s.isNewRow&&s.loadIndex===r&&0===n))}return t}return super._afterProcessItems.apply(this,arguments)}_applyChange(e){var t=this,{items:a}=e,{changeType:r}=e,{removeCount:n}=e;switch(n&&(n=Rv(t._items,n,"prepend"===r,(o,l)=>"data"===o.rowType&&!o.isNewRow||"group"===o.rowType&&(t._dataSource.isGroupItemCountable(o.data)||l)),e.removeCount=n),r){case"prepend":t._items.unshift.apply(t._items,a),n&&t._items.splice(-n);break;case"append":t._items.push.apply(t._items,a),n&&t._items.splice(0,n);break;default:super._applyChange(e)}}items(e){return e?this._allItems||this._items:this._visibleItems||this._items}getRowIndexDelta(){var e=0;if(this.option(W)){var t=this._visibleItems;t&&t[0]&&(e=this._items.indexOf(t[0]))}return e<0?0:e}getRowIndexOffset(e,t){var a,r,n=0,s=this.dataSource(),o=this._rowsScrollController,l=!1===this.option(W),d=Ye(this);if(o&&!e)if(l&&(0,_.$K)(this._loadViewportParams)){var{skipForCurrentPage:u,pageIndex:h}=this.getLoadPageParams(!0),p=this.items(!0);if(n=d?h*this.pageSize():0,p.length){var v=p[0].loadIndex;n+=p.filter(m=>m.loadIndex<v+u).length}}else n=o.beginPageIndex()*o.pageSize();else if(d&&l&&s){var g=s.lastLoadOptions();n=t&&null!==(a=g.skips)&&void 0!==a&&a.length?g.skips.reduce((m,w)=>m+w,0):null!==(r=g.skip)&&void 0!==r?r:0}else xe(this)&&s&&(n=s.beginPageIndex()*s.pageSize());return n}getDataIndex(){return!1===this.option(W)?this.getRowIndexOffset(!0,!0):super.getDataIndex.apply(this,arguments)}viewportSize(){var e=this._rowsScrollController,t=this._dataSource,a=e?.viewportSize.apply(e,arguments);return!1===this.option(W)?a:t?.viewportSize.apply(t,arguments)}viewportHeight(e,t){var a;null===(a=this._rowsScrollController)||void 0===a||a.viewportHeight(e,t)}viewportItemSize(){var e=this._rowsScrollController,t=this._dataSource,a=e?.viewportItemSize.apply(e,arguments);return!1===this.option(W)?a:t?.viewportItemSize.apply(t,arguments)}setViewportPosition(){var e=this._rowsScrollController,t=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):t?.setViewportPosition.apply(t,arguments)}setContentItemSizes(e){var a=this._dataSource,r=this._rowsScrollController?.setContentItemSizes(e);return!1===this.option(W)?r:a?.setContentItemSizes(e)}getPreloadedRowCount(){var e=this.option("scrolling.preloadedRowCount"),t=this.option("scrolling.preloadEnabled");if((0,_.$K)(e))return e;var a=this.viewportSize();return t?2*a:a}getLoadPageParams(e){var t,a,r=this.pageSize(),n=this._loadViewportParams,s=null===(t=this._dataSource)||void 0===t?void 0:t.lastLoadOptions(),o=s?.pageIndex||0,l=s?.take||0,d=this._rowsScrollController.isScrollingBack(),u=d?this.getPreloadedRowCount():0,h=d?0:this.getPreloadedRowCount(),p=(null===(a=this._dataSource)||void 0===a?void 0:a.totalCountCorrection())||0,v=Math.max(0,n.skip-u),g=e?o:Math.floor(r?v/r:0),w=n.skip-g*r,F=Math.ceil(r?(e?l:n.take+w+h-p)/r:0);return{pageIndex:g,loadPageCount:Math.max(1,F),skipForCurrentPage:Math.max(0,w)}}_updateVisiblePageIndex(e){if(this._rowsScrollController){if((0,_.$K)(e))return this._silentOption(Fo,e),void this.pageChanged.fire();var t=this._rowsScrollController.getViewportItemIndex(),a=Math.floor(t/this.pageSize());this.pageIndex()!==a&&(this._silentOption(Fo,a),this.updateItems({changeType:"pageIndex"}))}}_getChangedLoadParams(){var e=this.getLoadPageParams(!0),{pageIndex:t,loadPageCount:a}=this.getLoadPageParams(),r=this._pageIndexIsValid(t),n=null;return!this._isLoading&&r&&(t!==e.pageIndex||a!==e.loadPageCount)&&(n={pageIndex:t,loadPageCount:a}),n}_pageIndexIsValid(e){var t=!0;return(at(this)&&this.hasKnownLastPage()||xe(this))&&(t=e*this.pageSize()<this.totalItemsCount()),t}_loadItems(e,t){var a,r,n=Ye(this),s=this._dataSource,o=this._getChangedLoadParams(),l=null!==(a=s?.loadPageCount())&&void 0!==a?a:0,d=this.pageSize()*l,u=null!==(r=s?.pageIndex())&&void 0!==r?r:0,h=o?.pageIndex===u,p=at(this)&&this.totalItemsCount()<d,v="repaint"===this.option("editing.refreshMode"),m=!1;if(!s||n&&e&&(v&&t||o?.pageIndex>u||h&&p))return m;if(n&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),n&&o){m=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var w=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{var I=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(w||I)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return m}loadViewport(e){var t,a,r,{checkLoadedParamsOnly:n,checkLoading:s,viewportIsNotFilled:o}=e??{};if(Ye(this)||O.isVirtualRowRendering(this)){this._updateLoadViewportParams();var d=this._loadItems(s,!o),u=null===(t=this._dataSource)||void 0===t?void 0:t.isCustomLoading();if(!(d||s&&!u&&this._isLoading||n)){var v=!(null!==(r=null===(a=this._editingController)||void 0===a?void 0:a.getChanges())&&void 0!==r&&r.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:v,cancelEmptyChanges:!0})}}}updateViewport(){var e,t,a=this.viewportSize(),r=this.items().length,n=a>r,s=null!==(t=null===(e=this._loadViewportParams)||void 0===e?void 0:e.take)&&void 0!==t?t:0,l=this._rowsScrollController?.getViewportParams().take;(n||s<l)&&!this._isPaging&&r&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:n})}loadIfNeed(){if(!1!==this.option(W)){var e=this._rowsScrollController;e&&e.loadIfNeed();var t=this._dataSource;return t&&t.loadIfNeed()}}getItemSize(){var e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSize.apply(t,arguments)}getItemSizes(){var e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSizes.apply(t,arguments)}getContentOffset(){var e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);var t=this._dataSource;return t&&t.getContentOffset.apply(t,arguments)}refresh(e){var t=this._dataSource;return t&&e&&e.load&&at(this)&&t.resetCurrentTotalCount(),super.refresh.apply(this,arguments)}topItemIndex(){var e;return null===(e=this._loadViewportParams)||void 0===e?void 0:e.skip}bottomItemIndex(){var e=this._loadViewportParams;return e&&e.skip+e.take}virtualItemsCount(){var e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);var t=this._dataSource;return t?.virtualItemsCount.apply(t,arguments)}pageIndex(e){var t,a=Ye(this),r=this._rowsScrollController;return!1===this.option(W)&&a&&r&&void 0===e?null!==(t=this.option(Fo))&&void 0!==t?t:0:super.pageIndex.apply(this,arguments)}_fireChanged(e){super._fireChanged.apply(this,arguments);var{operationTypes:t}=e;if(!1===this.option(W)&&Ye(this)&&t){var{fullReload:a,pageIndex:r}=t;e.isDataChanged&&!a&&r&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}}_getPagingOptionValue(e){var t=super._getPagingOptionValue.apply(this,arguments);return!1===this.option(W)&&Ye(this)&&(t=this[e]()),t}isEmpty(){return!1===this.option(W)?!this.items(!0).length:super.isEmpty.apply(this,arguments)}isLastPageLoaded(){var e=!1;if(!1===this.option(W)&&Ye(this)){var{pageIndex:t,loadPageCount:a}=this.getLoadPageParams(!0);e=t+a>=this.pageCount()}else e=super.isLastPageLoaded.apply(this,arguments);return e}reset(){this._itemCount=0,this._allItems=null,super.reset.apply(this,arguments)}_applyFilter(){var e;return null===(e=this._dataSource)||void 0===e||e.loadPageCount(1),super._applyFilter.apply(this,arguments)}getVirtualContentSize(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.getVirtualContentSize.apply(this._dataSource,arguments)}setViewportItemIndex(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.setViewportItemIndex.apply(this._dataSource,arguments)}},resizing:i=>class extends i{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._resizeTimeout)}_updateMasterDataGridCore(e){return(0,x.gx)(super._updateMasterDataGridCore.apply(this,arguments)).done(t=>{var a=xe(e)&&!1===e.option(W);!t&&a&&e.getScrollable()&&e.updateDimensions()})}hasResizeTimeout(){return!!this._resizeTimeout}resize(){var e;if(xe(this)||O.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var t=new Date-this._lastTime,a=this.option("scrolling.updateTimeout");this._lastTime&&t<a?(e=new x.BH,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,super.resize.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},a),this._lastTime=new Date):(e=super.resize.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=super.resize.apply(this);return e}}},views:{rowsView:i=>class extends i{init(){var e;super.init(),this._dataController.pageChanged.add(t=>{var a=this._scrollTop;this.scrollToPage(t??this._dataController.pageIndex()),!1===this.option(W)&&this._scrollTop===a&&this._dataController.updateViewport()}),this._dataController.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(e=this._dataController.stateLoaded)||void 0===e||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()}dispose(){clearTimeout(this._scrollTimeoutID),super.dispose()}_scrollToCurrentPageOnResize(){if(this._dataController.pageIndex()>0){var e=()=>{this.resizeCompleted.remove(e),this.scrollToPage(this._dataController.pageIndex())};this.resizeCompleted.add(e)}}scrollToPage(e){var a,t=this._dataController?this._dataController.pageSize():0;if(xe(this)||at(this)){var r=this._dataController.getItemSize(),n=this._dataController.getItemSizes(),s=e*t;for(var o in a=s*r,n)parseInt(o)<s&&(a+=n[o]-r)}else a=0;this.scrollTo({y:a,x:this._scrollLeft})}renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),super.renderDelayedTemplates.apply(this,arguments)}_renderCore(e){var t=new Date,a=super._renderCore.apply(this,arguments),r=this._dataController._dataSource;if(r&&e){var n=e.items?e.items.length:20,s=this._dataController.viewportSize()||20;r._renderTime=O.isVirtualRowRendering(this)&&n>0&&!1!==this.option(W)?(new Date-t)*s/n:new Date-t}return a}_getRowElements(e){var t=super._getRowElements(e);return t&&t.not(".".concat(qr))}_removeRowsElements(e,t,a){var r=this._getRowElements(e).toArray();(r="append"===a?r.slice(0,t):r.slice(-t)).map(n=>{var s=(0,c.Z)(n);this._errorHandlingController&&this._errorHandlingController.removeErrorRow(s.next()),s.remove()})}_updateContent(e,t){var a,r=this._findContentElement(),n=t&&t.changeType,s=(0,x.BH)(),o=r.children().first();return"append"===n||"prepend"===n?this.waitAsyncTemplates().done(()=>{var l=this._getBodies(e);1===l.length?this._getBodies(o)["append"===n?"append":"prepend"](l.children()):l["append"===n?"appendTo":"prependTo"](o),e.remove(),a=this._getFreeSpaceRowElements(o),Ov(a,Dv),t.removeCount&&this._removeRowsElements(o,t.removeCount,n),this._restoreErrorRow(o),s.resolve()}).fail(s.reject):super._updateContent.apply(this,arguments).done(()=>{"update"===n&&this._restoreErrorRow(o),s.resolve()}).fail(s.reject),s.promise().done(()=>{this._updateBottomLoading()})}_addVirtualRow(e,t,a,r){if(r){var n=this._createEmptyRow(qr,t,r);n=this._wrapRowIfNeed(e,n),this._appendEmptyRow(e,n,a)}}_updateContentItemSizes(){var e=this._getRowHeights(),t=this._correctRowHeights(e);this._dataController.setContentItemSizes(t)}_updateViewportSize(e,t){(0,_.$K)(e)||(e=(0,b.zp)(this._hasHeight?this.element():(0,B.Jj)())),this._dataController.viewportHeight(e,t)}_getRowHeights(){var e,t,a=null===(t=null===(e=this._editingController)||void 0===e?void 0:e.isPopupEditMode)||void 0===t?void 0:t.call(e),r=this._getRowElements(this._tableElement).toArray();return a&&(r=r.filter(n=>!(0,c.Z)(n).hasClass("dx-row-inserted"))),r.map(n=>(0,ne.l)(n).height)}_correctRowHeights(e){for(var t=this._dataController,a=t._dataSource,r=[],n=t.getVisibleRows(),s=0,o=!0,l=-1,d=0;d<e.length;d++){var u=n[d];(0,_.$K)(u)&&(!1===this.option(W)?(l>=0&&l!==u.loadIndex&&(r.push(s),s=0),l=u.loadIndex):Xr(u,a)&&(o?o=!1:(r.push(s),s=0)),s+=e[d])}return s>0&&r.push(s),r}_updateContentPosition(e){if(this._dataController.viewportItemSize(this._rowHeight||20),xe(this)||O.isVirtualRowRendering(this)){e||this._updateContentItemSizes();var a=this._dataController.getContentOffset("begin"),r=this._dataController.getContentOffset("end"),n=this.getTableElements(),s=n.children("tbody").children(".".concat(qr));Ov(s,qr),n.each((o,l)=>{var d=o>0,u=this._isFixedTableRendering;this._isFixedTableRendering=d,this._addVirtualRow((0,c.Z)(l),d,"top",a),this._addVirtualRow((0,c.Z)(l),d,"bottom",r),this._isFixedTableRendering=u})}}_isTableLinesDisplaysCorrect(e){return e.find(".".concat("dx-column-lines")).length>0===this.option("showColumnLines")}_isColumnElementsEqual(e,t){var a=e.length===t.length;return a&&(0,S.S6)(e,(r,n)=>{if(n.style.width!==t[r].style.width)return a=!1}),a}_getCellClasses(e){var t=[],{cssClass:a}=e,r="expand"===e.command;return a&&t.push(a),r&&t.push(this.addWidgetPrefix("group-space")),t}_findBottomLoadPanel(e){var t=e||this.element(),a=t&&t.find(".".concat(this.addWidgetPrefix(Tv)));if(a&&a.length)return a}_updateBottomLoading(){var e=xe(this),t=at(this),a=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(e||t),r=this._findContentElement(),n=this._findBottomLoadPanel(r);a?n||(0,c.Z)("<div>").addClass(this.addWidgetPrefix(Tv)).append(this._createComponent((0,c.Z)("<div>"),bt.Z).$element()).appendTo(r):n&&n.remove()}_handleScroll(e){var t=!0===this.option(W);(this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition)&&(this._hasHeight||!t&&0===e.scrollOffset.top)&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(xe(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option(W)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),super._handleScroll.apply(this,arguments)}_needUpdateRowHeight(e){return super._needUpdateRowHeight.apply(this,arguments)||e>0&&at(this)&&!O.isVirtualRowRendering(this)}_updateRowHeight(){if(super._updateRowHeight.apply(this,arguments),this._rowHeight){this._updateContentPosition();var e=(0,b.zp)(this._hasHeight?this.element():(0,B.Jj)());!1===this.option(W)?(this._updateViewportSize(e),this._dataController.updateViewport()):this._dataController.viewportSize(Math.ceil(e/this._rowHeight))}}updateFreeSpaceRowHeight(){var e=super.updateFreeSpaceRowHeight.apply(this,arguments);return e&&this._updateContentPosition(),e}setLoading(e,t){var a=this._dataController,r=a.pageIndex()>0&&a.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option(W)&&e&&a.isViewportChanging()||(r&&(e=!1),super.setLoading.call(this,e,t))}throwHeightWarningIfNeed(){void 0!==this._hasHeight&&!this._hasHeight&&Ye(this)&&!this._heightWarningIsThrown&&(this._heightWarningIsThrown=!0,Q.Z.log("W1025"))}_resizeCore(){var e=this,t=e.element();super._resizeCore(),this.throwHeightWarningIfNeed(),e.component.$element()&&!e._windowScroll&&(0,Rt.al)(t)&&(e._windowScroll=Iv(t,a=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(a)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),!1!==this.option(W)&&e.loadIfNeed()}loadIfNeed(){var e,t;null===(t=null===(e=this._dataController)||void 0===e?void 0:e.loadIfNeed)||void 0===t||t.call(e)}_restoreErrorRow(e){var t;!1===this.option(W)&&(null===(t=this._errorHandlingController)||void 0===t||t.removeErrorRow()),super._restoreErrorRow.apply(this,arguments)}}}}};P.registerModule("virtualScrolling",wL),ar.extend(i=>class extends i{init(){super.init.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new Bo(this.component,this._getVirtualScrollDataOptions())}dispose(){this._virtualScrollController.dispose(),super.dispose.apply(this,arguments)}_getVirtualScrollDataOptions(){var e=this;return{pageSize:()=>e.pageSize(),totalItemsCount:()=>e.totalItemsCount(),hasKnownLastPage:()=>e.hasKnownLastPage(),pageIndex:t=>e._dataSource.pageIndex(t),isLoading:()=>e._dataSource.isLoading()&&!e.isCustomLoading(),pageCount:()=>e.pageCount(),load:()=>e._dataSource.load(),updateLoading(){Mo(e)},itemsCount:()=>e.itemsCount(!0),items:()=>e._dataSource.items(),viewportItems:t=>(t&&(e._items=t),e._items),onChanged(t){e.changed.fire(t)},changingDuration:()=>e.isLoading()?300:e._renderTime||0}}_handleLoadingChanged(e){!1!==this.option(W)?((!xe(this)||this._isLoadingAll)&&(this._isLoading=e,super._handleLoadingChanged.apply(this,arguments)),this._startLoadTime=e?new Date:void 0):super._handleLoadingChanged.apply(this,arguments)}_handleLoadError(){!1!==this.option(W)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),super._handleLoadError.apply(this,arguments)}_handleDataChanged(e){if(!1===this.option(W))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void super._handleDataChanged.apply(this,arguments);var t=super._handleDataChanged.bind(this);this._virtualScrollController.handleDataChanged(t,e)}_customizeRemoteOperations(e,t){var a=!1===this.option(W),r=this.option("scrolling.renderAsync");(0,_.$K)(r)||(r=this._renderTime>=this.option("scrolling.renderingThreshold")),(xe(this)||at(this)&&a)&&!t.reload&&(t.skip||a)&&!r&&(e.delay=void 0),super._customizeRemoteOperations.apply(this,arguments)}items(){return this._items}_dataSourceTotalCount(e){return!1===this.option(W)&&xe(this)&&!e?this._totalCount:super._dataSourceTotalCount()}itemsCount(e){return e||!1===this.option(W)?super.itemsCount():this._virtualScrollController.itemsCount()}load(e){return!1===this.option(W)||e?super.load(e):this._virtualScrollController.load()}isLoading(){return!1===this.option(W)?this._dataSource.isLoading():this._isLoading}isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded}resetPagesCache(e){e||this._virtualScrollController.reset(!0),super.resetPagesCache.apply(this,arguments)}_changeRowExpandCore(){var e=super._changeRowExpandCore.apply(this,arguments);return!1===this.option(W)||(this.resetPagesCache(),Mo(this)),e}reload(){this._dataSource.pageIndex(this.pageIndex());var e=this._virtualScrollController;if(!1!==this.option(W)&&e){var t=new x.BH;return super.reload.apply(this,arguments).done(a=>{var r=e.getDelayDeferred();r?r.done(t.resolve).fail(t.reject):t.resolve(a)}).fail(t.reject),t}return super.reload.apply(this,arguments)}refresh(e,t){if(!1!==this.option(W)){var{storeLoadOptions:a}=e,r=this._dataSource;t.reload?(this._virtualScrollController.reset(),r.items().length=0,this._isLoaded=!1,Mo(this),this._isLoaded=!0,at(this)?(this.pageIndex(0),r.pageIndex(0),a.pageIndex=0,e.pageIndex=0,a.skip=0):(r.pageIndex(this.pageIndex()),r.paginate()&&(e.pageIndex=this.pageIndex(),a.skip=this.pageIndex()*this.pageSize()))):at(this)&&a.skip&&this._totalCountCorrection<0&&(a.skip+=this._totalCountCorrection)}return super.refresh.apply(this,arguments)}loadPageCount(e){if(!(0,_.$K)(e))return this._loadPageCount;this._loadPageCount=e}_handleDataLoading(e){var t=this.loadPageCount(),a=this.pageSize(),r=!1===this.option(W),{storeLoadOptions:n}=e,s=(0,_.$K)(n.take);e.loadPageCount=t,!e.isCustomLoading&&r&&s&&t>1&&a>0&&(n.take=t*a),super._handleDataLoading.apply(this,arguments)}_loadPageSize(){return super._loadPageSize.apply(this,arguments)*this.loadPageCount()}beginPageIndex(){return Se(this,"beginPageIndex",[...arguments])}endPageIndex(){return Se(this,"endPageIndex",[...arguments])}pageIndex(e){return Se(this,"pageIndex",[...arguments])}virtualItemsCount(){return Se(this,"virtualItemsCount",[...arguments])}getContentOffset(){return Se(this,"getContentOffset",[...arguments])}getVirtualContentSize(){return Se(this,"getVirtualContentSize",[...arguments])}setContentItemSizes(){return Se(this,"setContentItemSizes",[...arguments])}setViewportPosition(){return Se(this,"setViewportPosition",[...arguments])}getViewportItemIndex(){return Se(this,"getViewportItemIndex",[...arguments])}setViewportItemIndex(e){return Se(this,"setViewportItemIndex",[...arguments])}getItemIndexByPosition(){return Se(this,"getItemIndexByPosition",[...arguments])}viewportSize(){return Se(this,"viewportSize",[...arguments])}viewportItemSize(){return Se(this,"viewportItemSize",[...arguments])}getItemSize(){return Se(this,"getItemSize",[...arguments])}getItemSizes(){return Se(this,"getItemSizes",[...arguments])}loadIfNeed(){return Se(this,"loadIfNeed",[...arguments])}});var Vv=T(1502),ko={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},Lv={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},Ia="filter-row",Qr="filter-range-overlay",Jr="filter-range-start",Bv="dx-menu",Fv="dx-editor-with-menu",ti="dx-editor-container",No="dx-editor-cell",Ho="dx-highlight-outline",Mv="dx-focused",Zo="dx-filter-range-content",zo="dx-filter-modified",Ta="input:not([type='hidden'])",IL=["date","datetime","number"],TL=y.Z.format("dxDataGrid-ariaSearchBox");function Vi(i){return"onClick"===i.option("filterRow.applyFilter")}var $o=function(i){var e=i&&i.children(),t=e&&e.data("dxComponents"),a=t&&t.length&&e.data(t[0]);return a instanceof wi.Z?a:null},Wo=function(i,e){var t="",a="",r=Ko(i,e),n=O.getFormatOptionsByColumn(e,"filterRow");return Array.isArray(r)?(t=O.formatValue(r[0],n),""!==(a=O.formatValue(r[1],n))&&(t+=" - ".concat(a))):(0,_.$K)(r)&&(t=O.formatValue(r,n)),t};function Ko(i,e){if(e)return Vi(i)&&void 0!==e.bufferedFilterValue?e.bufferedFilterValue:e.filterValue}var rt=function(i,e){if(e)return Vi(i)&&void 0!==e.bufferedSelectedFilterOperation?e.bufferedSelectedFilterOperation:e.selectedFilterOperation},Go=function(i,e,t){var a=i._columnsController.columnOption(e),r=Ko(i,a),n=t.closest(".".concat(i.addWidgetPrefix(Qr))).length,s=t.hasClass(i.addWidgetPrefix(Jr));return r&&Array.isArray(r)&&"between"===rt(i,a)?s?r[0]:r[1]:!n&&function(i,e){return!(e&&IL.includes(e.dataType)&&Array.isArray(i))&&void 0!==i}(r,a)?r:null},ML={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:y.Z.format("dxDataGrid-filterRowShowAllText"),resetOperationText:y.Z.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:y.Z.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:y.Z.format("dxDataGrid-filterRowOperationEquals"),notEqual:y.Z.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:y.Z.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:y.Z.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:y.Z.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:y.Z.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:y.Z.format("dxDataGrid-filterRowOperationStartsWith"),contains:y.Z.format("dxDataGrid-filterRowOperationContains"),notContains:y.Z.format("dxDataGrid-filterRowOperationNotContains"),endsWith:y.Z.format("dxDataGrid-filterRowOperationEndsWith"),between:y.Z.format("dxDataGrid-filterRowOperationBetween"),isBlank:y.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:y.Z.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:y.Z.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:y.Z.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:class LL extends J.ViewController{init(){this._columnsController=this.getController("columns")}_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel}setHighLight(e,t){Vi(this)&&(e&&e.toggleClass(Ho,t)&&e.closest(".".concat(No)).toggleClass(zo,t),this._getHeaderPanel().enableApplyButton(t))}applyFilter(){var e=this._columnsController.getColumns();this._columnsController.beginUpdate();for(var t=0;t<e.length;t++){var a=e[t];void 0!==a.bufferedFilterValue&&(this._columnsController.columnOption(t,"filterValue",a.bufferedFilterValue),a.bufferedFilterValue=void 0),void 0!==a.bufferedSelectedFilterOperation&&(this._columnsController.columnOption(t,"selectedFilterOperation",a.bufferedSelectedFilterOperation),a.bufferedSelectedFilterOperation=void 0)}this._columnsController.endUpdate(),this.removeHighLights()}removeHighLights(){if(Vi(this)){var e=this.getView("columnHeadersView").element();e.find(".".concat(this.addWidgetPrefix(Ia)," .").concat(Ho)).removeClass(Ho),e.find(".".concat(this.addWidgetPrefix(Ia)," .").concat(zo)).removeClass(zo),this._getHeaderPanel().enableApplyButton(!1)}}setCurrentColumnForFiltering(e){this._currentColumn=e}getCurrentColumnForFiltering(){return this._currentColumn}}},extenders:{controllers:{data:i=>class extends i{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),a=this._applyFilterController;return(0,S.S6)(t,function(){var r,n=(null===(r=a.getCurrentColumnForFiltering())||void 0===r?void 0:r.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,_.$K)(this.filterValue)&&!n){var s=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");e.push(s)}}),O.combineFilters(e)}},columnsResizer:i=>class extends i{_startResizing(){if(super._startResizing.apply(this,arguments),this.isResizing()){var e=this._columnHeadersView.getFilterRangeOverlayInstance();if(e){var t=e.$element().closest("td").index();(t===this._targetPoint.columnIndex||t===this._targetPoint.columnIndex+1)&&e.$content().hide()}}}_endResizing(){var e;if(this.isResizing()){var t=this._columnHeadersView.getFilterRangeOverlayInstance();t&&(e=t.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,b.Y_)(e,!0)+1}),t.$content().show())}super._endResizing.apply(this,arguments)}},editing:i=>class extends i{updateFieldValue(e){return e.column.lookup&&(this._needUpdateLookupDataSource=!0),super.updateFieldValue.apply(this,arguments)}_afterSaveEditData(e){var t;return this._needUpdateLookupDataSource&&!e&&(null===(t=this.getView("columnHeadersView"))||void 0===t||t.updateLookupDataSource()),this._needUpdateLookupDataSource=!1,super._afterSaveEditData.apply(this,arguments)}_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,super._afterCancelEditData.apply(this,arguments)}}},views:{columnHeadersView:i=>class extends i{init(){super.init(),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){switch(e.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;case"syncLookupFilterValues":e.value?this.updateLookupDataSource():this.render(),e.handled=!0;break;default:super.optionChanged(e)}}_updateEditorValue(e,t){var a=$o(t);a&&a.option("value",Go(this,e.index,t))}_columnOptionChanged(e){var t,r,n,s,o,{optionNames:a}=e;if(O.checkChanges(a,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==e.columnIndex){var l=this._columnsController.getVisibleIndex(e.columnIndex),d=this._columnsController.columnOption(e.columnIndex);if(n=(r=null!==(t=this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(Ia))).index(),l))&&void 0!==t?t:(0,c.Z)()).find(".".concat(ti)).first(),a.filterValue||a.bufferedFilterValue){this._updateEditorValue(d,n);var u=r.find(".".concat(this.addWidgetPrefix(Qr))).data("dxOverlay");u&&(s=u.$content().find(".".concat(ti)),this._updateEditorValue(d,s.first()),this._updateEditorValue(d,s.last())),(!u||!u.option("visible"))&&this._updateFilterRangeContent(r,Wo(this,d))}(a.selectedFilterOperation||a.bufferedSelectedFilterOperation)&&l>=0&&d&&(o=r.find(".".concat(Bv))).length&&(this._updateFilterOperationChooser(o,d,n),"between"===rt(this,d)?this._renderFilterRangeContent(r,d):n.find(".".concat(Zo)).length&&(this._renderEditor(n,this._getEditorOptions(n,d)),this._hideFilterRange()))}else super._columnOptionChanged(e)}_renderCore(){return this._filterRangeOverlayInstance=null,super._renderCore.apply(this,arguments)}_resizeCore(){var e;super._resizeCore.apply(this,arguments),null===(e=this._filterRangeOverlayInstance)||void 0===e||e.repaint()}isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))}isVisible(){return super.isVisible()||this.isFilterRowVisible()}_initFilterRangeOverlay(e,t){var a=this,r={},n=e.find(".dx-editor-container"),s=a.addWidgetPrefix(Qr),o=(0,c.Z)("<div>").addClass(s).appendTo(e);return a._createComponent(o,Wi.Z,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:s},animation:!1,position:{my:"top",at:"top",of:n.length&&n||e,offset:"0 -1"},contentTemplate(l){var d,u=(0,c.Z)("<div>").addClass("".concat(ti," ").concat(a.addWidgetPrefix(Jr))).appendTo(l);return t=a._columnsController.columnOption(t.index),(d=a._getEditorOptions(u,t)).sharedData=r,a._renderEditor(u,d),C.Z.on(u.find(Ta),"keydown",h=>{var p=e.find("[tabindex]").not(h.target).first();"tab"===(0,D.EV)(h)&&h.shiftKey&&(h.preventDefault(),a._hideFilterRange(),p.length||(p=e.prev().find("[tabindex]").last()),C.Z.trigger(p,"focus"))}),u=(0,c.Z)("<div>").addClass("".concat(ti," ").concat(a.addWidgetPrefix("filter-range-end"))).appendTo(l),(d=a._getEditorOptions(u,t)).sharedData=r,a._renderEditor(u,d),C.Z.on(u.find(Ta),"keydown",h=>{"tab"===(0,D.EV)(h)&&!h.shiftKey&&(h.preventDefault(),a._hideFilterRange(),C.Z.trigger(e.next().find("[tabindex]").first(),"focus"))}),(0,c.Z)(l).addClass(a.getWidgetContainerClass())},onShown(l){var d=l.component.$content().find(".".concat(ti)).first();C.Z.trigger(d.find(Ta),"focus")},onHidden(){t=a._columnsController.columnOption(t.index),e.find(".".concat(Bv)).parent().addClass(Fv),"between"===rt(a,t)&&(a._updateFilterRangeContent(e,Wo(a,t)),a.component.updateDimensions())}})}_updateFilterRangeOverlay(e){var t=this._filterRangeOverlayInstance;t&&t.option(e)}_showFilterRange(e,t){var a=e.children(".".concat(this.addWidgetPrefix(Qr))),r=a.length&&a.data("dxOverlay");!r&&t&&(r=this._initFilterRangeOverlay(e,t)),r.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=r,this._updateFilterRangeOverlay({width:(0,b.Y_)(e,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())}_hideFilterRange(){var e=this._filterRangeOverlayInstance;e&&e.hide()}getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance}_createRow(e){var t=super._createRow(e);return"filter"===e.rowType&&(t.addClass(this.addWidgetPrefix(Ia)),this.option("useLegacyKeyboardNavigation")||C.Z.on(t,"keydown",a=>En("filterRow",this,a))),t}_getRows(){var e=super._getRows();return this.isFilterRowVisible()&&e.push({rowType:"filter"}),e}_renderFilterCell(e,t){var{column:a}=t,r=(0,c.Z)(e);this.component.option("showColumnHeaders")&&this.setAria("describedby",a.headerId,r),this.setAria("label",y.Z.format("dxDataGrid-ariaFilterCell"),r),r.addClass(No);var n=(0,c.Z)("<div>").appendTo(r),s=(0,c.Z)("<div>").addClass(ti).appendTo(n);if("between"===rt(this,a))this._renderFilterRangeContent(r,a);else{var o=this._getEditorOptions(s,a);this._renderEditor(s,o)}var{alignment:l}=a;l&&"center"!==l&&r.find(Ta).first().css("textAlign",a.alignment),a.filterOperations&&a.filterOperations.length&&this._renderFilterOperationChooser(n,a,s)}_renderCellContent(e,t){var a=this,{column:r}=t;if("filter"===t.rowType)if(r.command)e.html("&nbsp;");else if(r.allowFiltering)return void a.renderTemplate(e,a._renderFilterCell.bind(a),t).done(()=>{a._updateCell(e,t)});super._renderCellContent.apply(this,arguments)}_getEditorOptions(e,t){var a=this,r={editorOptions:{inputAttr:a._getFilterInputAccessibilityAttributes(t)}},n=(0,f.l)(r,t,{value:Go(a,t.index,e),parentType:"filterRow",showAllText:a.option("filterRow.showAllText"),updateValueTimeout:"onClick"===a.option("filterRow.applyFilter")?0:700,width:null,setValue(s,o){!function(i,e){var t=""===e.value?null:e.value,a=e.container,r=i._columnsController.columnOption(e.column.index),n=Go(i,r.index,a);if((0,_.$K)(n)||(0,_.$K)(t)){i._applyFilterViewController.setHighLight(a,n!==t);var s=Vi(i)?"bufferedFilterValue":"filterValue",o=function(i,e,t,a){if("between"===rt(i,t)){var r=Ko(i,t);return a.hasClass(i.addWidgetPrefix(Jr))?[e,Array.isArray(r)?r[1]:void 0]:[Array.isArray(r)?r[0]:r,e]}return e}(i,t,r,a),l="between"===rt(i,r),d=e.notFireEvent||l&&Array.isArray(o)&&o.includes(void 0);i._columnsController.columnOption(r.index,s,o,d)}}(a,{column:t,value:s,container:e,notFireEvent:o})}});return"between"===rt(a,t)&&(n.placeholder=e.hasClass(a.addWidgetPrefix(Jr))?a.option("filterRow.betweenStartText"):a.option("filterRow.betweenEndText")),n}_getFilterInputAccessibilityAttributes(e){var t=y.Z.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":t,"aria-describedby":e.headerId}:{"aria-label":t}}_renderEditor(e,t){e.empty();var a=(0,c.Z)("<div>").appendTo(e),r=this._dataController.dataSource();if(t.lookup&&this.option("syncLookupFilterValues")){this._applyFilterViewController.setCurrentColumnForFiltering(t);var n=this._dataController.getCombinedFilter();this._applyFilterViewController.setCurrentColumnForFiltering(null);var s=O.getWrappedLookupDataSource(t,r,n),o=(0,V.Z)((0,V.Z)({},t),{lookup:(0,V.Z)((0,V.Z)({},t.lookup),{dataSource:s})});return this._editorFactoryController.createEditor(a,o)}return this._editorFactoryController.createEditor(a,t)}_renderFilterRangeContent(e,t){var a=this,r=e.find(".".concat(ti)).first();r.empty();var n=(0,c.Z)("<div>").addClass(Zo).attr("tabindex",this.option("tabIndex"));C.Z.on(n,"focusin",()=>{a._showFilterRange(e,t)}),n.appendTo(r),a._updateFilterRangeContent(e,Wo(a,t))}_updateFilterRangeContent(e,t){var a=e.find(".".concat(Zo));a.length&&(""===t?a.html("&nbsp;"):a.text(t))}_updateFilterOperationChooser(e,t,a){var n,r=this,s=function(){var l=Vv.Z.getInstance(e);l&&l.option("focusedElement",null),n&&r._focusEditor(a)},o=this._editorFactoryController;r._createComponent(e,Vv.Z,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:"".concat(r.getWidgetContainerClass()," ").concat("dx-cell-focus-disabled"," ").concat("dx-filter-menu"),showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(t.filterOperations&&t.filterOperations.length),icon:ko[rt(r,t)||"default"],selectable:!1,items:r._getFilterOperationMenuItems(t)}],onItemRendered:l=>{var{itemElement:d}=l;this.setAria("label",TL,(0,c.Z)(d))},onItemClick(l){var d=l.itemData.name,u=rt(r,t),h=!1,p=Vi(r),v={};if(!(l.itemData.items||d&&d===u)){if(d?(v[p?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=d,("between"===d||"between"===u)&&(h="between"===d,v[p?"bufferedFilterValue":"filterValue"]=null)):(v[p?"bufferedFilterValue":"filterValue"]=null,v[p?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=t.defaultSelectedFilterOperation||null),r._columnsController.columnOption(t.index,v),r._applyFilterViewController.setHighLight(a,!0),!d){var g=$o(a);g&&"dxDateBox"===g.NAME&&!g.option("isValid")&&(g.clear(),g.option("isValid",!0))}h?r._showFilterRange(a.closest(".".concat(No)),t):r._focusEditor(a)}},onSubmenuShowing(){n=r._isEditorFocused(a),o.loseFocus()},onSubmenuHiding(){C.Z.trigger(e,"blur"),s()},onContentReady(l){C.Z.on(e,"blur",()=>{l.component._hideSubmenuAfterTimeout(),s()})},rtlEnabled:r.option("rtlEnabled")})}_isEditorFocused(e){return e.hasClass(Mv)||e.parents(".".concat(Mv)).length}_focusEditor(e){this._editorFactoryController.focus(e),C.Z.trigger(e.find(Ta),"focus")}_renderFilterOperationChooser(e,t,a){var r;this.option("filterRow.showOperationChooser")&&(e.addClass(Fv),r=(0,c.Z)("<div>").prependTo(e),this._updateFilterOperationChooser(r,t,a))}_getFilterOperationMenuItems(e){var t=this,a=[{}],r=t.option("filterRow"),n=r&&r.operationDescriptions||{};if(e.filterOperations&&e.filterOperations.length){var s=e.filterOperations.filter(o=>(0,_.$K)(Lv[o]));(a=(0,S.UI)(s,o=>{var l=Lv[o];return{name:o,selected:(rt(t,e)||e.defaultFilterOperation)===o,text:n[l],icon:ko[o]}})).push({name:null,text:r&&r.resetOperationText,icon:ko.default})}return a}_handleDataChanged(e){var t,a,r,n,s,o,l=null===(a=null===(t=this._dataController)||void 0===t?void 0:t.dataSource)||void 0===a?void 0:a.call(t),d=null===(r=l?.lastLoadOptions)||void 0===r?void 0:r.call(l);super._handleDataChanged.apply(this,arguments),(null!==(n=e.operationTypes)&&void 0!==n&&n.filtering||null!==(s=e.operationTypes)&&void 0!==s&&s.fullReload)&&this.updateLookupDataSource((null===(o=e.operationTypes)||void 0===o?void 0:o.filtering)||d?.filter)}updateLookupDataSource(e){if(this.option("syncLookupFilterValues")&&this.element()){var t=this._columnsController.getVisibleColumns(),a=this._dataController.dataSource(),r=this._applyFilterViewController,n=this.element().find(".".concat(this.addWidgetPrefix(Ia))).index();-1!==n&&t.forEach((s,o)=>{if(s.lookup&&s.calculateCellValue===s.defaultCalculateCellValue){var l=this._getCellElement(n,o),d=$o(l?.find(".dx-editor-container"));if(d){r.setCurrentColumnForFiltering(s);var u=this._dataController.getCombinedFilter()||null;r.setCurrentColumnForFiltering(null);var h=d.option("dataSource");if(!e||!(0,E.bY)(h.__dataGridSourceFilter||null,u)){var v=O.getWrappedLookupDataSource(s,a,u);d.option("dataSource",v)}}}})}}},headerPanel:i=>class extends i{init(){super.init(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){"filterRow"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_getToolbarItems(){var e=super._getToolbarItems();return this._prepareFilterItem().concat(e)}_prepareFilterItem(){var e=this,t=[];if(e._isShowApplyFilterButton()){var a=e.option("filterRow.applyFilterText"),n=!e._columnsController.getColumns().filter(o=>void 0!==o.bufferedFilterValue).length;t.push({widget:"dxButton",options:{icon:"apply-filter",disabled:n,onClick:function(){e._applyFilterViewController.applyFilter()},hint:a,text:a,onInitialized:function(o){(0,c.Z)(o.element).addClass(e._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10})}return t}_isShowApplyFilterButton(){var e=this.option("filterRow");return!!e?.visible&&"onClick"===e.applyFilter}enableApplyButton(e){this.setToolbarItemDisabled("applyFilterButton",!e)}isVisible(){return super.isVisible()||this._isShowApplyFilterButton()}}}}};P.registerModule("filterRow",ML),zs.Z.setEditorClass(pc.Z);var kv="dx-header-filter",Nv="dx-header-filter-menu";function Hv(i){i=i||[];for(var e=0;e<i.length;e++)i[e].selected=!1,Hv(i[e].items)}function Zv(i){var e="dxTreeView"===i.NAME?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return i.$element().find(e).dxCheckBox("instance")}function zv(i,e){if(!i.component.option("searchValue")){var t=Zv(i.component);t&&e&&e.length&&t.option("value",void 0)}}function NL(i,e,t){if(e^t){if(i.selected=!0,t&&i.items)for(var a=0;a<i.items.length;a++)if(!i.items[a].selected){i.selected=void 0;break}}else(t||i.selected)&&(i.selected=!1,Hv(i.items))}var en=function(i){return(0,_.$K)(i.allowHeaderFiltering)?i.allowHeaderFiltering:i.allowFiltering},$v=i=>class extends i{optionChanged(e){if("headerFilter"===e.name){var t="columnHeadersView"===this.name;this._invalidate(t,t),e.handled=!0}else super.optionChanged(e)}_applyColumnState(e){var t,{rootElement:a}=e,{column:r}=e;if("headerFilter"===e.name){if(a.find(".".concat(kv)).remove(),en(r)){t=super._applyColumnState(e).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(r)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0);var n=y.Z.format("dxDataGrid-headerFilterIndicatorLabel",r.caption);t.attr("aria-label",n),t.attr("aria-haspopup","dialog"),t.attr("role","button")}return t}return super._applyColumnState(e)}_isHeaderFilterEmpty(e){return!e.filterValues||!e.filterValues.length}_getIndicatorClassName(e){return"headerFilter"===e?kv:super._getIndicatorClassName(e)}_renderIndicator(e){var t=e.container,a=e.indicator;if("headerFilter"===e.name){var r=this.option("rtlEnabled");if(t.children().length&&(!r&&"right"===e.columnAlignment||r&&"left"===e.columnAlignment))return void t.prepend(a)}super._renderIndicator(e)}},ZL={month:i=>H.getMonthNames()[i-1],quarter:i=>H.format(new Date(2e3,3*i-1),"quarter")};function Wv(i,e,t){return e=e||[],t=t||[],i.forEach(a=>{if((0,_.$K)(a.key)){if(e.push(1===e.length?a.key-1:a.key),a.items)Wv(a.items,e,t);else{var n=new Date(Date.UTC.apply(Date,e));t.push(n)}e.pop()}else t.push(null)}),t}function zL(i,e){var t=Wv(i),a=(0,Gt.Z)(t),r=O.getHeaderFilterGroupParameters((0,V.Z)((0,V.Z)({},e),{calculateCellValue:n=>n}));return ua.Z.queryByOptions(a,{group:r}).toArray()}var jL={defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:y.Z.format("dxDataGrid-headerFilterEmptyValue"),ok:y.Z.format("dxDataGrid-headerFilterOK"),cancel:y.Z.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:class KL extends J.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")}_updateSelectedState(e,t){for(var a=e.length,r="exclude"===t.filterType;a--;){var n=e[a];"items"in e[a]&&this._updateSelectedState(e[a].items,t),NL(n,O.getIndexByKey(e[a].value,t.filterValues,null)>-1,r)}}_normalizeGroupItem(e,t,a){var r,n,{path:s}=a,{valueSelector:o}=a,{displaySelector:l}=a,{column:d}=a;return o&&l?(r=o(e),n=l(e)):n=r=e.key,e=(0,_.Kn)(e)?(0,f.l)({},e):{},s.push(r),e.value=1===s.length?s[0]:s.join("/"),e.text=this.getHeaderItemText(n,d,t,a.headerFilterOptions),e}getHeaderItemText(e,t,a,r){var n=O.formatValue(e,function(i,e,t){var a=Nt.getGroupInterval(e),r=O.getFormatOptionsByColumn(e,"headerFilter");return a&&(r.groupInterval=a[t],O.isDateType(e.dataType)?r.format=ZL[a[t]]:"number"===e.dataType&&(r.getDisplayFormat=function(){var n={format:e.format,target:"headerFilter"},s=O.formatValue(i,n),l=O.formatValue(i+a[t],n);return s&&l?"".concat(s," - ").concat(l):""})),r}(e,t,a));return n||(n=r.texts.emptyValue),n}_processGroupItems(e,t,a,r){var n,s,{column:o}=r,{lookup:l}=o,{level:d}=r;a=a||[],t=t||0,l&&(n=(0,q.vb)(l.displayExpr),s=(0,q.vb)(l.valueExpr));for(var u=0;u<e.length;u++)e[u]=this._normalizeGroupItem(e[u],t,{column:r.column,headerFilterOptions:r.headerFilterOptions,displaySelector:n,valueSelector:s,path:a}),"items"in e[u]&&(t!==d&&(0,_.$K)(e[u].value)?this._processGroupItems(e[u].items,t+1,a,r):delete e[u].items),a.pop()}getDataSource(e){var t,a=this._dataController.dataSource(),r=a?.remoteOperations().grouping,n=O.getHeaderFilterGroupParameters(e,r),s=null===(t=e.headerFilter)||void 0===t?void 0:t.dataSource,o=this.option("headerFilter"),l=!1,d={component:this.component};if(a){if((0,_.$K)(s)&&!(0,_.mf)(s))d.dataSource=(0,ki.aN)(s);else if(e.lookup)if(l=!0,this.option("syncLookupFilterValues")){this._currentColumn=e;var u=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource=O.getWrappedLookupDataSource(e,a,u)}else d.dataSource=O.normalizeLookupDataSource(e.lookup);else{var h=Array.isArray(n)?n.length-1:0;this._currentColumn=e;var p=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource={filter:p,group:n,useDefaultSearch:!0,load:m=>{var w=new x.BH;return m.dataField=e.dataField||e.name,a.load(m).done(I=>{var A=r&&function $L(i){return"Z"===i?.slice(-1)||"'Z'"===i?.slice(-3)}(e.serializationFormat)&&h>3;A&&(I=zL(I,e)),g._processGroupItems(I,null,null,{level:h,column:e,headerFilterOptions:o}),w.resolve(I)}).fail(w.reject),w}}}(0,_.mf)(s)&&s.call(e,d);var v=d.dataSource.postProcess,g=this;return d.dataSource.postProcess=function(m){var w=m;return l&&(w=w.filter(I=>null!==I[e.lookup.valueExpr]),0===this.pageIndex()&&!this.searchValue()&&(w=w.slice(0)).unshift(null),g._processGroupItems(w,null,null,{level:0,column:e,headerFilterOptions:o})),w=v&&v.call(this,w)||w,g._updateSelectedState(w,e),w},d.dataSource}}getCurrentColumn(){return this._currentColumn}showHeaderFilterMenu(e,t){var a=this._columnsController,r=(0,f.l)(!0,{},this._columnsController.getColumns()[e]);if(r){var n=a.getVisibleIndex(e),o=this.getView(t?"headerPanel":"columnHeadersView").getColumnElements().eq(t?r.groupIndex:n);this.showHeaderFilterMenuBase({columnElement:o,column:r,applyFilter:!0,apply(){a.columnOption(e,{filterValues:this.filterValues,filterType:this.filterType})}})}}showHeaderFilterMenuBase(e){var{column:t}=e;if(t){var a=Nt.getGroupInterval(t),r=this._dataController.dataSource(),n=r&&r.remoteOperations().filtering,s=e.onHidden;(0,f.l)(e,t,{type:a&&a.length>1?"tree":"list",remoteFiltering:n,onShowing:o=>{var l=o.component.$overlayContent().dxResizable("instance");l&&l.option("onResizeEnd",d=>{var u=this._columnsController.columnOption(e.dataField,"headerFilter");(u=u||{}).width=d.width,u.height=d.height,this._columnsController.columnOption(e.dataField,"headerFilter",u,!0)})},onHidden:()=>{s?.(),bn(this)}}),e.dataSource=this.getDataSource(e),e.isFilterBuilder&&(e.dataSource.filter=null,e.alignment="right"),this._headerFilterView.showHeaderFilterMenu(e.columnElement,e)}}hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}},views:{headerFilterView:class HL extends J.View{getPopupContainer(){return this._popupContainer}getListComponent(){return this._listComponent}applyHeaderFilter(e){var t=this.getListComponent(),a=t.option("searchValue"),r=Zv(t),s=[];a||e.isFilterBuilder||!r?.option("value")?"tree"===e.type&&(e.filterType&&(e.filterType="include"),function o(l,d,u){(0,S.S6)(d,(h,p)=>{if(void 0!==p.selected&&!!p.selected^u){var v=t._getNode(p),m=t._hasChildren(v)&&p.items&&p.items.some(w=>w.selected);if(!a||!m)return void l.push(p.value)}p.items&&p.items.length&&o(l,p.items,u)})}(s,t.option("items"),!1),e.filterValues=s):("tree"===e.type&&(e.filterType="exclude"),Array.isArray(e.filterValues)&&(e.filterValues=[])),e.filterValues&&!e.filterValues.length&&(e.filterValues=null),e.apply(),this.hideHeaderFilterMenu()}showHeaderFilterMenu(e,t){if(t){this._initializePopupContainer(t);var a=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup(e,t),a.show()}}hideHeaderFilterMenu(){var e=this.getPopupContainer();e&&e.hide()}updatePopup(e,t){var a=this.option("showColumnLines"),r="right"===t.alignment^!a?"left":"right";this._popupContainer.setAria({role:"dialog",label:y.Z.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:"".concat(r," top"),at:"".concat(r," bottom"),of:e,collision:"fit fit"}))}_getSearchExpr(e,t){var{lookup:a}=e,{useDefaultSearchExpr:r}=e,n=t.dataSource,s=t.search.searchExpr;if(s)return s;if(r||(0,_.$K)(n)&&!(0,_.mf)(n))return"text";if(a)return a.displayExpr||"this";if(e.dataSource){var{group:o}=e.dataSource;if(Array.isArray(o)&&o.length>0)return o[0].selector;if((0,_.mf)(o)&&!e.remoteFiltering)return o}return e.dataField||e.selector}_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()}_initializePopupContainer(e){var t=this,a=t.element(),r=this._normalizeHeaderFilterOptions(e),{height:n,width:s}=r,o={width:s,height:n,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:Nv},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:r.texts.ok,onClick(){t.applyHeaderFilter(e)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:r.texts.cancel,onClick(){t.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(l){l.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(e,r),e.onShowing&&e.onShowing(l)},onShown(){t.getListComponent().focus()},onHidden:e.onHidden,onInitialized(l){var{component:d}=l;d.option("animation",d._getDefaultOptions().animation)}};(0,_.$K)(t._popupContainer)?t._popupContainer.option(o):t._popupContainer=t._createComponent(a,Dt,o)}_initializeListContainer(e,t){var a=this,r=a._popupContainer.$content(),n=!e.isFilterBuilder&&t.allowSelectAll,s={searchEnabled:t.search.enabled,searchTimeout:t.search.timeout,searchEditorOptions:t.search.editorOptions,searchMode:t.search.mode||"",dataSource:e.dataSource,onContentReady(){a.renderCompleted.fire()},itemTemplate(l,d,u){var h=(0,c.Z)(u);return e.encodeHtml?h.text(l.text):h.html(l.text)}};function o(l){"searchValue"===l.fullName&&n&&!1!==a.option("headerFilter.hideSelectAllOnSearch")&&("tree"===e.type?l.component.option("showCheckBoxesMode",l.value?"normal":"selectAll"):l.component.option("selectionMode",l.value?"multiple":"all"))}a._listComponent="tree"===e.type?a._createComponent((0,c.Z)("<div>").appendTo(r),Is.Z,(0,f.l)(s,{showCheckBoxesMode:n?"selectAll":"normal",onOptionChanged:o,keyExpr:"id"})):a._createComponent((0,c.Z)("<div>").appendTo(r),ca,(0,f.l)(s,{searchExpr:a._getSearchExpr(e,t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:n?"all":"multiple",onOptionChanged:o,onSelectionChanged(l){var d=l.component.option("items"),u=l.component.option("selectedItems");if(!l.component._selectedItemsUpdating&&!l.component.option("searchValue")&&!e.isFilterBuilder){var h=e.filterValues||[];0===u.length&&d.length&&(h.length<=1||"exclude"===e.filterType&&h.length===d.length-1)?(e.filterType="include",e.filterValues=[]):u.length===d.length&&(e.filterType="exclude",e.filterValues=[])}(0,S.S6)(d,(v,g)=>{var m=O.getIndexByKey(g,u,null)>=0;if(!!g.selected!==m){g.selected=m,e.filterValues=e.filterValues||[];var I=O.getIndexByKey(g.value,e.filterValues,null);I>=0&&e.filterValues.splice(I,1),m^"exclude"===e.filterType&&e.filterValues.push(g.value)}}),zv(l,e.filterValues)},onContentReady(l){var{component:d}=l,u=d.option("items"),h=[];(0,S.S6)(u,function(){this.selected&&h.push(this)}),d._selectedItemsUpdating=!0,d.option("selectedItems",h),d._selectedItemsUpdating=!1,zv(l,e.filterValues)}}))}_normalizeHeaderFilterOptions(e){var t=this.option("headerFilter")||{},a=e.headerFilter||{};return(0,f.l)(!0,{},t,{search:{enabled:t.allowSearch,timeout:t.searchTimeout}},a,{search:{enabled:a.allowSearch,mode:a.searchMode,timeout:a.searchTimeout}})}_renderCore(){this.element().addClass(Nv)}}},extenders:{controllers:{data:i=>class extends i{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),r=this._headerFilterController.getCurrentColumn();return(0,S.S6)(t,(n,s)=>{var o;if((!r||r.index!==s.index)&&en(s)&&s.calculateFilterExpression&&Array.isArray(s.filterValues)&&s.filterValues.length){var l=[];(0,S.S6)(s.filterValues,(d,u)=>{Array.isArray(u)?o=u:(s.deserializeValue&&!O.isDateType(s.dataType)&&"number"!==s.dataType&&(u=s.deserializeValue(u)),o=s.createFilterExpression(u,"=","headerFilter")),o&&(o.columnIndex=s.index),l.push(o)}),l=O.combineFilters(l,"or"),e.push("exclude"===s.filterType?["!",l]:l)}}),O.combineFilters(e)}}},views:{columnHeadersView:i=>class extends($v(i)){_renderCellContent(e,t){var a,{column:r}=t;!r.command&&en(r)&&this.option("headerFilter.visible")&&"header"===t.rowType&&(a=this._applyColumnState({name:"headerFilter",rootElement:e,column:r,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent(a,r,"headerFilter"),super._renderCellContent.apply(this,arguments)}_subscribeToIndicatorEvent(e,t,a){"headerFilter"===a&&C.Z.on(e,se.u,this.createAction(r=>{r.event.stopPropagation(),Wl(e,this),this._headerFilterController.showHeaderFilterMenu(t.index,!1)}))}_updateIndicator(e,t,a){var r=super._updateIndicator(e,t,a);r&&this._subscribeToIndicatorEvent(r,t,a)}_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")}_needUpdateFilterIndicators(){return!0}_columnOptionChanged(e){var{optionNames:t}=e,a=O.checkChanges(t,["filterValues","filterValue"]),r=O.checkChanges(t,["filterValues","filterType"]);(a||r)&&this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators(),r||super._columnOptionChanged(e)}},headerPanel:i=>class extends($v(i)){_createGroupPanelItem(e,t){var r,a=super._createGroupPanelItem.apply(this,arguments);return!t.command&&en(t)&&this.option("headerFilter.visible")&&(r=this._applyColumnState({name:"headerFilter",rootElement:a,column:{alignment:(0,ne.q)(this.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0,caption:t.caption},showColumnLines:!0}))&&C.Z.on(r,se.u,this.createAction(n=>{var{event:s}=n;s.stopPropagation(),this._headerFilterController.showHeaderFilterMenu(t.index,!0)})),a}}}}};P.registerModule("headerFilter",jL);var tn="dx-filterbuilder-range",qL="".concat(tn,"-start"),XL="".concat(tn,"-end"),QL="".concat(tn,"-separator"),Kv="\u2013";function JL(i,e){var t=(0,c.Z)("<div>").addClass(qL),a=(0,c.Z)("<div>").addClass(XL),r=i.value||[],n=function(o){return o&&o.length>0?o[0]:null},s=function(o){return o&&2===o.length?o[1]:null};e.append(t),e.append((0,c.Z)("<span>").addClass(QL).text(Kv)),e.append(a),e.addClass(tn),this._editorFactory.createEditor.call(this,t,(0,f.l)({},i.field,i,{value:n(r),parentType:"filterBuilder",setValue(o){r=[o,s(r)],i.setValue(r)}})),this._editorFactory.createEditor.call(this,a,(0,f.l)({},i.field,i,{value:s(r),parentType:"filterBuilder",setValue(o){r=[n(r),o],i.setValue(r)}}))}function Gv(i,e){return{name:"between",caption:i,icon:"range",valueSeparator:Kv,dataTypes:["number","date","datetime"],editorTemplate:JL.bind(e),notForLookup:!0}}var eP={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},tP={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const Uv={getIconByFilterOperation:i=>eP[i],getNameByFilterOperation:i=>tP[i]};var Uo="string",Yv="icon-none",Pt="and",Yo="=",iP="<>",aP={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},rP={date:"shortDate",datetime:"shortDateShortTime"},nP=["=","<>","isblank","isnotblank"],sP=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"],jv="".concat("dx-filterbuilder","-text"),lP="".concat(jv,"-part"),qv="".concat(jv,"-separator"),dP="".concat(qv,"-empty");function ii(i){return i&&i.length>1&&"!"===i[0]&&!pe(i)}function vt(i){return ii(i)?i[1]:i}function Xv(i){if(pe(i))return Pt;for(var e="",t=0;t<i.length;t++){var a=i[t];if(!Array.isArray(a)){if(e&&e!==a)throw new xr.R0.Error("E4019");"!"!==a&&(e=a)}}return e}function ai(i){var e=vt(i),t=Xv(e);return t||(t=Pt),e!==i&&(t="!".concat(t)),t}function Qv(i){var e=function gP(i){return Array.isArray(i)&&i.length}(i.filterOperations)?i.filterOperations:function vP(i){return i.lookup&&nP||aP[i.dataType||Uo]}(i);return(0,f.l)([],e)}function jo(i,e){var t=Uv.getNameByFilterOperation(i);return e&&e[t]?e[t]:t}function gt(i,e){var t=i.filter(a=>a.name===e);return t.length?t[0]:null}function qo(i){return i.defaultFilterOperation||Qv(i)[0]}function Xo(i,e){var t=vt(i),a=t.indexOf(e);return t.splice(a,1),1!==t.length&&t.splice(a,1),i}function Jv(i){var e=Qo(i),t=e?Jo(i):i;return e?["!",[t]]:[t]}function an(i,e){var t=vt(e),a=ai(t);return 1===t.length?t.unshift(i):t.push(i,a),e}function rn(i,e){for(var t=0;t<e.length;t++)if(e[t].name===i||e[t].dataField.toLowerCase()===i.toLowerCase())return e[t];var a=lg(e,!0).filter(r=>r.dataField.toLowerCase()===i.toLowerCase());if(a.length>0)return a[0];throw new Q.Z.Error("E1047",i)}function Bt(i){return!!Array.isArray(i)&&(i.length<2||Array.isArray(i[0])||Array.isArray(i[1]))}function pe(i){return!!Array.isArray(i)&&i.length>1&&!Array.isArray(i[0])&&!Array.isArray(i[1])}function eg(i,e,t){t=t||Pt;for(var a=Xv(i).toLowerCase()||t,r=[],n=0;n<i.length;n++)Bt(i[n])?(r.push(il(i[n],e,t)),r=tl(r,a)):pe(i[n])&&(r.push(nn(i[n],e)),r=tl(r,a));return 0===r.length&&(r=tl(r,a)),r}function nn(i,e){return function wP(i,e){var t=gt(e,i[1]);return t&&t.name===i[1]}(i,e)||i.length<3&&(i[2]=i[1],i[1]=Yo),i}function Qo(i){return-1!==i.indexOf("not")}function Jo(i){return i.substring(3).toLowerCase()}function el(i,e){var t=Qo(e);return e=t?Jo(e):e,t?["!",i,e]:[i,e]}function tl(i,e){var t=Qo(e);e=t?Jo(e):e,i.push(e);var a=i;return t&&(a=["!",a]),a}function il(i,e,t){return t=t||Pt,i?pe(i=(0,f.l)(!0,[],i))?el(nn(i,e),t):ii(i)?["!",pe(i[1])?el(nn(i[1],e),t):ii(i[1])?el(il(i[1],e),t):eg(i[1],e,t)]:eg(i,e,t):Jv(t)}function tg(i,e,t,a){var r=rn(i[0],e),n=nn(i,t),s=t.length&&gt(t,n[1]);return s&&s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[n[2],r,e]):r.createFilterExpression?r.createFilterExpression.apply(r,[n[2],n[1],a]):r.calculateFilterExpression?r.calculateFilterExpression.apply(r,[n[2],n[1],a]):r.defaultCalculateFilterExpression.apply(r,[n[2],n[1],a])}function Li(i,e,t,a){if(!(0,_.$K)(i))return null;if(ii(i))return["!",Li(i[1],e,t,a)];var n=vt(i);if(pe(n))return tg(n,e,t,a)||null;for(var o,s=[],l=ai(n),d=0;d<n.length;d++)Bt(n[d])?(o=Li(n[d],e,t,a))&&(d&&s.push(l),s.push(o)):pe(n[d])&&(o=tg(n[d],e,t,a))&&(s.length&&s.push(l),s.push(o));return 1===s.length&&(s=s[0]),s.length?s:null}function Da(i){var t,e=vt(i);if(0===e.length)return null;var a=[];for(t=0;t<e.length;t++)if(Bt(e[t])){var r=Da(e[t]);r?e[t]=r:a.push(e[t])}else pe(e[t])&&(yP(e[t])||a.push(e[t]));for(t=0;t<a.length;t++)Xo(e,a[t]);return 1===e.length||(e.splice(e.length-1,1),1===e.length&&(i=function hP(i,e){return ii(i)?i[1]=e:i=e,i}(i,e[0])),0===i.length)?null:i}function ig(i,e,t){if(""!==e){var{lookup:a}=i;if(a.items)t(a.calculateCellValue(e)||"");else{var r=(0,_.mf)(a.dataSource)?a.dataSource({}):a.dataSource;new St.o(r).loadSingle(a.valueExpr,e).done(s=>{var o="";s&&(o=a.displayExpr?(0,q.vb)(a.displayExpr)(s):s),i.customizeText&&(o=i.customizeText({value:e,valueText:o})),t(o)}).fail(()=>{t("")})}}else t("")}function ag(i,e,t,a,r){var n;return n=!0===e?i.trueText||y.Z.format("dxDataGrid-trueText"):!1===e?i.falseText||y.Z.format("dxDataGrid-falseText"):function uP(i,e){return Ld.format(e,i.format||rP[i.dataType])}(i,e),i.customizeText&&(n=i.customizeText.call(i,{value:e,valueText:n,target:a})),t&&t.customizeText&&(n=t.customizeText.call(t,{value:e,valueText:n,field:i,target:a},r)),n}function al(i){return""===i||null===i}function rg(i,e,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(al(e))return"";if(Array.isArray(e)){var r=new x.BH;return x.gx.apply(this,function SP(i,e,t,a){var r={values:e};return e.map(n=>ag(i,n,t,a,r))}(i,e,t,a)).done(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.some(d=>!al(d))?s.map(d=>al(d)?"?":d):"";r.resolve(l)}),r}return ag(i,e,t,a)}function ng(i,e){return i.some(t=>t.dataField===e)}function sg(i,e,t){var{dataField:a}=t;rl(a)&&(t.parentId=dg(a),!ng(e,t.parentId)&&!ng(i,t.parentId)&&sg(i,e,{id:t.parentId,dataType:"object",dataField:t.parentId,caption:og(t.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:Nt.defaultCalculateFilterExpression})),e.push(t)}function og(i,e){var t="";if(e)i=i.substring(i.lastIndexOf(".")+1);else if(rl(i))return i.split(".").forEach((a,r,n)=>{t+=(0,Me.GK)(a),r!==n.length-1&&(t+=".")}),t;return(0,Me.GK)(i)}function lg(i,e){for(var t=[],a=0;a<i.length;a++){var r=(0,f.l)(!0,{caption:og(i[a].dataField,e)},i[a]);r.id=r.name||r.dataField,e?sg(i,t,r):t.push(r)}return t}function rl(i){return-1!==i.lastIndexOf(".")}function dg(i){return i.substring(0,i.lastIndexOf("."))}function ug(i,e){if(rl(i.dataField))for(var t=dg(i.dataField),a=0;a<e.length;a++)if(e[a].dataField===t)return"".concat(ug(e[a],e),".").concat(i.caption);return i.caption}function nl(i,e,t){var a=gt(t,e);return a?(!1===a.hasValue?(i[1]=e,i.length=2):(i[1]=e,i[2]=""),i):("isblank"===e?(i[1]=Yo,i[2]=null):"isnotblank"===e?(i[1]=iP,i[2]=null):(((a=gt(t,i[1]))||2===i.length||null===i[2])&&(i[2]=""),i[1]=e),i)}function hg(i){return null===i[2]?i[1]===Yo?"isblank":"isnotblank":i[1]}function yP(i){return""!==i[2]}function Aa(i,e){return i[0]===e}function sl(i,e){return i&&0!==i.length?pe(i)?Aa(i,e)?null:i:cg(i,[e],!1):null}function cg(i,e,t){var a=[];return i.forEach(r=>{pe(r)?Aa(r,e[0])?t?(a.push(e),t=!1):a.splice(a.length-1,1):a.push(r):(a.length||Bt(r))&&a.push(r)}),0===a.length?null:(t&&(a.push(Pt),a.push(e)),1===a.length?a[0]:a)}function pg(i,e){return null===i||0===i.length?e:pe(i)?Aa(i,e[0])?e:[i,Pt,e]:ai(i)!==Pt?[e,"and",i]:cg(i,e,!0)}function _g(i,e){return null!==i&&0!==i.length&&(pe(i)?i[0]===e:i.some(t=>(pe(t)||Bt(t))&&_g(t,e)))}var ol=function(i,e,t){if(Array.isArray(e)){var a=e.length-1;i.empty(),e.forEach((r,n)=>{(0,c.Z)("<span>").addClass(lP).text(r).appendTo(i),n!==a&&(0,c.Z)("<span>").addClass(qv).text(t&&t.valueSeparator?t.valueSeparator:"|").addClass(dP).appendTo(i)})}else i.text(e||y.Z.format("dxFilterBuilder-enterValueText"))};function vg(i){var e=function(a,r){return r?"".concat(r,"/").concat(a):a},t=i&&i.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(a,r,n){var s=[],o=a.length-1;return a&&a.forEach((l,d)=>{if(pe(l)||Bt(l)){var u=Li(l,n,[],"headerFilter");s.push(u)}else{var h=Li([r.dataField,"=",l],n,[],"headerFilter");s.push(h)}d!==o&&s.push("or")}),1===s.length?s[0]:s},editorTemplate(a,r){var n=(0,c.Z)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(r),s=(0,f.l)(!0,{},i.columnOption(a.field.dataField));return ol(n,a.text&&a.text.split("|")),s.filterType="include",s.filterValues=a.value?a.value.slice():[],t.showHeaderFilterMenuBase({columnElement:n,column:s,apply(){a.setValue(this.filterValues),t.hideHeaderFilterMenu(),a.closeEditor()},onHidden(){a.closeEditor()},isFilterBuilder:!0}),r},customizeText:function(a,r){r=r||{};var{value:n}=a,s=i.columnOption(a.field.dataField),o=s&&s.headerFilter,l=s&&s.lookup,d=r.values||[n];if(o&&o.dataSource||l&&l.dataSource){var u=new x.BH,h=r.items||new x.BH;if(!r.items){s=(0,f.l)({},s,{filterType:"include",filterValues:d});var p=t.getDataSource(s);p.paginate=!1;var v=new St.o(p),g=v.store().key();if(g){var{values:m}=r;if(m&&m.length>1){var w=m.reduce((A,F)=>(A.length&&A.push("or"),A.push([g,"=",F]),A),[]);v.filter(w)}else v.filter([g,"=",a.value])}else a.field.calculateDisplayValue&&Q.Z.log("W1017");r.items=h,v.load().done(h.resolve)}return h.done(A=>{var F=d.indexOf(a.value);u.resolve(function G(M,k){var U=[];return M.forEach(ee=>{if(ee.items){var $=G(ee.items,e(ee.text,k));U=U.concat($)}ee.selected&&U.push(e(ee.text,k))}),U}(A,null)[F])}),u}return t.getHeaderItemText(n,s,0,i.option("headerFilter"))}}}function IP(i){return(0,f.l)(vg(i),{name:"anyof",icon:"selectall",caption:y.Z.format("dxFilterBuilder-filterOperationAnyOf")})}function TP(i){var e=vg(i);return(0,f.l)({},e,{calculateFilterExpression(t,a,r){var n=e.calculateFilterExpression(t,a,r);return n&&0!==n.length?"!"===n[0]?n:["!",n]:null},name:"noneof",icon:"unselectall",caption:y.Z.format("dxFilterBuilder-filterOperationNoneOf")})}var DP=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"],gg="include",Ra="exclude";function nt(i){return i.name||i.dataField}var ll=function(){return{filterType:gg,filterValues:void 0}},mg=function(i){var e=i.filterValues||[];return!Nt.getGroupInterval(i)&&!(i.headerFilter&&i.headerFilter.dataSource)||1===e.length&&null===e[0]},fg=function(i){if((0,_.$K)(i.filterValue)){var t=i.selectedFilterOperation||i.defaultFilterOperation||qo(i);return[nt(i),t,i.filterValue]}return null},Cg=function(i){var e,t,{filterValues:a}=i;return a?(1===a.length&&mg(i)&&!Array.isArray(a[0])?(e=i.filterType===Ra?"<>":"=",t=a[0]):(e=i.filterType===Ra?"noneof":"anyof",t=a),[nt(i),e,t]):null},wg=function(i,e,t){var a=function(i,e){if(!i)return ll();var t,a=i[1],r=i[2],n=Array.isArray(r);if(!n&&!mg(e))return ll();switch(a){case"anyof":case"=":t=gg;break;case"noneof":case"<>":t=Ra;break;default:return ll()}return{filterType:t,filterValues:n?r:[r]}}(t,e);i.columnOption(nt(e),a)},xg=function(i,e,t){var a,r=t?.[1],n=t?.[2],s=e.filterOperations||e.defaultFilterOperations;(!s||s.indexOf(r)>=0||r===e.defaultFilterOperation)&&DP.includes(r)&&null!==n?(r===e.defaultFilterOperation&&!(0,_.$K)(e.selectedFilterOperation)&&(r=e.selectedFilterOperation),a={filterValue:n,selectedFilterOperation:r}):a={filterValue:void 0,selectedFilterOperation:void 0},i.columnOption(nt(e),a)},PP={defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:class OP extends J.Controller{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._dataController.isFilterSyncActive()&&(this._columnsController.isAllDataTypesDefined()?this._initSync():this._dataController.dataSourceChanged.add(()=>this._initSync()))}publicMethods(){return["getCustomFilterOperations"]}syncFilterValue(){var e=this,t=this._columnsController.getFilteringColumns();this._skipSyncColumnOptions=!0,t.forEach(a=>{var r=function EP(i,e){return null===i||0===i.length?[]:pe(i)?Aa(i,e)?[i]:[]:ai(i)!==Pt?[]:i.filter(r=>pe(r)&&Aa(r,e))}(e.option("filterValue"),nt(a));if(1===r.length){var n=r[0];wg(this._columnsController,a,n),xg(this._columnsController,a,n)}else(0,_.$K)(a.filterValues)&&wg(this._columnsController,a,null),(0,_.$K)(a.filterValue)&&xg(this._columnsController,a,null)}),this._skipSyncColumnOptions=!1}_initSync(){var e=this._columnsController.getColumns(),t=this._dataController.pageIndex();if(function AP(i){i.forEach(e=>{var t=nt(e);if(!(0,_.$K)(t)&&e.allowFiltering)throw new Q.Z.Error("E1049",e.caption)})}(e),!this.option("filterValue")){var a=this._columnsController.getFilteringColumns(),r=this.getFilterValueFromColumns(a);this._silentOption("filterValue",r)}this.syncFilterValue(),this._dataController.pageIndex(t)}_getSyncFilterRow(e,t){var a=fg(t);return(0,_.$K)(a)?pg(e,a):sl(e,nt(t))}_getSyncHeaderFilter(e,t){var a=Cg(t);return a?pg(e,a):sl(e,nt(t))}getFilterValueFromColumns(e){if(!this._dataController.isFilterSyncActive())return null;var t=["and"];return e&&e.forEach(a=>{var r=Cg(a),n=fg(a);r&&an(r,t),n&&an(n,t)}),Da(t)}syncFilterRow(e,t){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),e))}syncHeaderFilter(e){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),e))}getCustomFilterOperations(){var e,t=null!==(e=this.option("filterBuilder.customOperations"))&&void 0!==e?e:[];return[IP(this.component),TP(this.component)].concat(t)}}},extenders:{controllers:{data:i=>class extends i{optionChanged(e){switch(e.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this._filterSyncController.syncFilterValue(),e.handled=!0;break;case"filterSyncEnabled":e.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var t=this._columnsController.getColumnByPath(e.fullName);if(t&&!this._filterSyncController._skipSyncColumnOptions){var a=this._parseColumnPropertyName(e.fullName);this._filterSyncController._skipSyncColumnOptions=!0,"filterType"===a?(Ra===e.value||Ra===e.previousValue)&&this._filterSyncController.syncHeaderFilter(t):"filterValues"===a?this._filterSyncController.syncHeaderFilter(t):["filterValue","selectedFilterOperation"].includes(a)&&this._filterSyncController.syncFilterRow(t,t.filterValue),this._filterSyncController._skipSyncColumnOptions=!1}}super.optionChanged(e);break;default:super.optionChanged(e)}}isFilterSyncActive(){var e=this.option("filterSyncEnabled");return"auto"===e?this.option("filterPanel.visible"):e}skipCalculateColumnFilters(){return((0,_.$K)(this.option("filterValue"))||this._filterSyncController._skipSyncColumnOptions)&&this.isFilterSyncActive()}_calculateAdditionalFilter(){if(!1===this.option("filterPanel.filterEnabled"))return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getFilteringColumns(),a=this.option("filterValue");if(this.isFilterSyncActive()){var r=this._headerFilterController.getCurrentColumn(),n=this._applyFilterController.getCurrentColumnForFiltering(),s=r||n;(r||(0,_.$K)(n?.filterValue))&&a&&(a=sl(a,nt(s)))}var d=Li(a,t,this._filterSyncController.getCustomFilterOperations(),"filterBuilder");return d&&e.push(d),O.combineFilters(e)}_parseColumnPropertyName(e){var t=e.match(/.*\.(.*)/);return t?t[1]:null}clearFilter(e){this.component.beginUpdate(),arguments.length>0?("filterValue"===e&&this.option("filterValue",null),super.clearFilter(e)):(this.option("filterValue",null),super.clearFilter()),this.component.endUpdate()}_applyFilter(){return this._filterSyncController._skipSyncColumnOptions?(new x.BH).resolve():super._applyFilter.apply(this,arguments)}}},views:{columnHeadersView:i=>class extends i{optionChanged(e){"filterValue"===e.name?this._updateHeaderFilterIndicators():super.optionChanged(e)}_isHeaderFilterEmpty(e){return this._dataController.isFilterSyncActive()?!_g(this.option("filterValue"),nt(e)):super._isHeaderFilterEmpty(e)}_needUpdateFilterIndicators(){return!this._dataController.isFilterSyncActive()}}}}};P.registerModule("filterSync",PP);var BP=T(810),Be="dx-filterbuilder",Pi="".concat(Be,"-group"),Sg="".concat(Pi,"-item"),yg="".concat(Pi,"-content"),FP="".concat(Pi,"-operations"),MP="".concat(Pi,"-operation"),dl="".concat(Be,"-action"),bg="".concat(dl,"-icon"),Oa="".concat(Be,"-text"),HP="".concat(Be,"-item-field"),ZP="".concat(Be,"-item-operation"),Eg="".concat(Be,"-item-value"),zP="".concat(Be,"-item-value-text"),$P="".concat(Be,"-overlay"),WP="".concat(Be,"-operations"),KP="".concat(Be,"-fields"),GP="".concat(Be,"-add-condition"),sn="dx-state-active",UP="".concat(Be,"-menu-custom-operation"),Ig="filterBuilder",ul="enter",jP=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],Ag={and:"and",or:"or",notAnd:"!and",notOr:"!or"},qP=Rp(class{});class Rg extends Ge.Z{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:y.Z.format("dxFilterBuilder-and"),or:y.Z.format("dxFilterBuilder-or"),notAnd:y.Z.format("dxFilterBuilder-notAnd"),notOr:y.Z.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:y.Z.format("dxFilterBuilder-filterOperationBetween"),equal:y.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:y.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:y.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:y.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:y.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:y.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:y.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:y.Z.format("dxFilterBuilder-filterOperationContains"),notContains:y.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:y.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:y.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:y.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}})}_optionChanged(e){switch(e.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(e.value!==e.previousValue){var t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:e.value,previousValue:e.previousValue}),this._disableInvalidateForValue=t}break;default:super._optionChanged(e)}}getFilterExpression(){var e=this._getNormalizedFields();return Li(Da((0,f.l)(!0,[],this._model)),e,this._customOperations,Ig)}_getNormalizedFields(){return function xP(i){return i.reduce((e,t)=>{if((0,_.$K)(t.dataField)){var a={};for(var r in t)t[r]&&sP.includes(r)&&(a[r]=t[r]);a.defaultCalculateFilterExpression=Nt.defaultCalculateFilterExpression,(0,_.$K)(a.dataType)||(a.dataType=Uo),(0,_.$K)(a.trueText)||(a.trueText=y.Z.format("dxDataGrid-trueText")),(0,_.$K)(a.falseText)||(a.falseText=y.Z.format("dxDataGrid-falseText")),e.push(a)}return e},[])}(this.option("fields"))}_updateFilter(){this._disableInvalidateForValue=!0;var t=Da((0,f.l)(!0,[],this._model)),a=Da(this._getModel(this.option("value")));JSON.stringify(a)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()}_init(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),super._init()}_initEditorFactory(){this._editorFactory=new qP}_initCustomOperations(){this._customOperations=function bP(i,e,t){var a=(0,f.l)(!0,[],i),r=-1;return a.some((n,s)=>{if("between"===n.name)return r=s,!0}),-1!==r?a[r]=(0,f.l)(Gv(e,t),a[r]):a.unshift(Gv(e,t)),a}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)}_getDefaultGroupOperation(){var e,t;return null!==(t=null===(e=this.option("groupOperations"))||void 0===e?void 0:e[0])&&void 0!==t?t:Ag.and}_getModel(e){return il(e,this._customOperations,this._getDefaultGroupOperation())}_initModel(){this._model=this._getModel(this.option("value"))}_initActions(){var e=this;e._actions={},jP.forEach(t=>{var a=(0,f.l)({},t.config);e._actions[t.name]=e._createActionByOption(t.name,a)})}executeAction(e,t){var a=this._actions[e];return a&&a(t)}_initMarkup(){this.$element().addClass(Be),super._initMarkup(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())}_createConditionElement(e,t){return(0,c.Z)("<div>").addClass(Pi).append(this._createConditionItem(e,t))}_createGroupElementByCriteria(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._createGroupElement(e,t,a),n=r.find(".".concat(yg)),s=vt(e),o=0;o<s.length;o++){var l=s[o];Bt(l)?this._createGroupElementByCriteria(l,e,a+1).appendTo(n):pe(l)&&this._createConditionElement(l,e).appendTo(n)}return r}_createGroupElement(e,t,a){var r=(0,c.Z)("<div>").addClass(Sg),n=(0,c.Z)("<div>").addClass(yg),s=(0,c.Z)("<div>").addClass(Pi).append(r).append(n);return null!=t&&this._createRemoveButton(()=>{Xo(t,e),s.remove(),this._updateFilter()}).appendTo(r),this._createGroupOperationButton(e).appendTo(r),this._createAddButton(()=>{var o=Jv(this._getDefaultGroupOperation());an(o,e),this._createGroupElement(o,e,a+1).appendTo(n),this._updateFilter()},()=>{var l=function CP(i,e){var t=[i.dataField,"",""];return nl(t,qo(i),e),t}(this.option("fields")[0],this._customOperations);an(l,e),this._createConditionElement(l,e).appendTo(n),this._updateFilter()},a).appendTo(r),s}_createButton(e){return(0,c.Z)("<div>").text(e)}_createGroupOperationButton(e){var t=this._getGroupOperations(e),a=function _P(i,e){var t=ai(i);return e.filter(a=>a.value===t)[0]}(e,t),r=a.text,n=t&&t.length<2?this._createButton(r).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:r,menu:{items:t,displayExpr:"text",keyExpr:"value",onItemClick:s=>{a!==s.itemData&&(function pP(i,e){var a,r;return function cP(i,e){-1!==e.indexOf("!")?ii(i)||function(t){var a=t.slice(0);t.length=0,t.push("!",a)}(i):ii(i)&&function(t){var a=vt(t);t.length=0,[].push.apply(t,a)}(i)}(i,e),function(r,n){for(a=0;a<r.length;a++)Array.isArray(r[a])||(r[a]=n)}(vt(i),e=-1===(r=e).indexOf("!")?r:r.substring(1)),i}(e,s.itemData.value),n.text(s.itemData.text),a=s.itemData,this._updateFilter())},onContentReady(s){s.component.selectItem(a)},cssClass:FP}});return n.addClass(Oa).addClass(MP).attr("tabindex",0)}_createButtonWithMenu(e){var o,t=this,a=function(){t.$element().find(".".concat(sn)).removeClass(sn),t.$element().find(".dx-overlay .dx-treeview").remove(),t.$element().find(".dx-overlay").remove()},r=this.option("rtlEnabled"),n=r?"right":"left",s=this._createButton(e.caption);return(0,f.l)(e.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(o=e.menu.onItemClick,function(l){o(l),"dxclick"===l.event.type&&a()}),onHiding(){s.removeClass(sn)},position:{my:"".concat(n," top"),at:"".concat(n," bottom"),offset:"0 1",of:s,collision:"flip"},animation:null,onHidden(){a()},cssClass:"".concat($P," ").concat(e.menu.cssClass),rtlEnabled:r}),e.popup={onShown(l){var d=(0,c.Z)(l.component.content()).find(".dx-treeview"),u=d.dxTreeView("instance");C.Z.on(d,"keyup keydown",h=>{var p=(0,D.EV)(h);("keydown"===h.type&&"tab"===p||"keyup"===h.type&&("escape"===p||p===ul))&&(l.component.hide(),C.Z.trigger(e.menu.position.of,"focus"))}),u.focus(),u.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(s,()=>{a(),t._createPopupWithTreeView(e,t.$element()),s.addClass(sn)}),s}_hasValueButton(e){var t=gt(this._customOperations,e[1]);return t?!1!==t.hasValue:null!==e[2]}_createOperationButtonWithMenu(e,t){var a=this,r=function fP(i,e,t){var a=Qv(i),r=!!i.lookup;return t.forEach(n=>{if(!i.filterOperations&&-1===a.indexOf(n.name)){var s=n&&n.dataTypes;(!r||!n.notForLookup)&&s&&s.indexOf(i.dataType||Uo)>=0&&a.push(n.name)}}),a.map(n=>{var s=gt(t,n);return s?{icon:s.icon||Yv,text:s.caption||(0,Me.GK)(s.name),value:s.name,isCustom:!0}:{icon:Uv.getIconByFilterOperation(n)||Yv,text:jo(n,e),value:n}})}(t,this.option("filterOperationDescriptions"),this._customOperations),n=function mP(i,e){for(var t=0;t<e.length;t++)if(e[t].value===i)return e[t];throw new Q.Z.Error("E1048",i)}(hg(e),r),s=this._createButtonWithMenu({caption:n.text,menu:{items:r,displayExpr:"text",onItemRendered(o){o.itemData.isCustom&&(0,c.Z)(o.itemElement).addClass(UP)},onContentReady(o){o.component.selectItem(n)},onItemClick:o=>{if(n!==o.itemData){nl(e,(n=o.itemData).value,a._customOperations);var l=s.siblings().filter(".".concat(Eg));a._hasValueButton(e)?(0!==l.length&&l.remove(),a._createValueButton(e,t).appendTo(s.parent())):l.remove(),s.text(n.text),this._updateFilter()}},cssClass:WP}}).addClass(Oa).addClass(ZP).attr("tabindex",0);return s}_createOperationAndValueButtons(e,t,a){this._createOperationButtonWithMenu(e,t).appendTo(a),this._hasValueButton(e)&&this._createValueButton(e,t).appendTo(a)}_createFieldButtonWithMenu(e,t,a){var r=this,n=this.option("allowHierarchicalFields"),s=lg(e,n),o=rn(a.name||a.dataField,s),l=function(u,h){return n?ug(u,h):u.caption},d=this._createButtonWithMenu({caption:l(o,s),menu:{items:s,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:u=>{if(o!==u.itemData){t[0]=(o=u.itemData).name||o.dataField,t[2]="object"===o.dataType?null:"",nl(t,qo(o),r._customOperations),d.siblings().filter(".".concat(Oa)).remove(),r._createOperationAndValueButtons(t,o,d.parent());var h=l(o,u.component.option("items"));d.text(h),this._updateFilter()}},onContentReady(u){u.component.selectItem(o)},cssClass:KP}}).addClass(Oa).addClass(HP).attr("tabindex",0);return d}_createConditionItem(e,t){var a=(0,c.Z)("<div>").addClass(Sg),r=this._getNormalizedFields(),n=rn(e[0],r);return this._createRemoveButton(()=>{Xo(t,e),1===a.parent().children().length?a.parent().remove():a.remove(),this._updateFilter()}).appendTo(a),this._createFieldButtonWithMenu(r,e,n).appendTo(a),this._createOperationAndValueButtons(e,n,a),a}_getGroupOperations(e){var t=this.option("groupOperations"),a=this.option("groupOperationDescriptions");return(!t||!t.length)&&(t=[ai(e).replace("!","not")]),t.map(r=>({text:a[r],value:Ag[r]}))}_createRemoveButton(e){var t=(0,c.Z)("<div>").addClass(bg).addClass("dx-icon-remove").addClass(dl).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(t,e),t}_createAddButton(e,t,a){var r,n=this.option("maxGroupLevel");return(0,_.$K)(n)&&a>=n?(r=this._createButton(),this._subscribeOnClickAndEnterKey(r,t)):r=this._createButtonWithMenu({menu:{items:[{caption:y.Z.format("dxFilterBuilder-addCondition"),click:t},{caption:y.Z.format("dxFilterBuilder-addGroup"),click:e}],displayExpr:"caption",onItemClick(s){s.itemData.click()},cssClass:GP}}),r.addClass(bg).addClass("dx-icon-plus").addClass(dl).attr("tabindex",0)}_createValueText(e,t,a){var r=this,n=(0,c.Z)("<div>").html("&nbsp;").addClass(zP).attr("tabindex",0).appendTo(a),s=e[2],o=gt(r._customOperations,e[1]);return!o&&t.lookup?ig(t,s,l=>{ol(n,l)}):(0,x.gx)(rg(t,s,o)).done(l=>{ol(n,l,o)}),r._subscribeOnClickAndEnterKey(n,l=>{"keyup"===l.type&&l.stopPropagation(),r._createValueEditorWithEvents(e,t,a)}),n}_updateConditionValue(e,t,a){e[2]!==t&&(e[2]=t),a(),this._updateFilter()}_addDocumentKeyUp(e,t){var a=!1,r=!1,n=Z.Z.getDocument(),s=l=>{a||r?r=!1:t(l)};C.Z.on(n,"keyup",s);var o=e.find("input");C.Z.on(o,"compositionstart",()=>{a=!0}),C.Z.on(o,"compositionend",()=>{a=!1,r=!0}),C.Z.on(o,"keydown",l=>{229!==l.which&&(r=!1)}),this._documentKeyUpHandler=s}_addDocumentClick(e,t){var a=Z.Z.getDocument(),r=n=>{this._isFocusOnEditorParts(e,n.target)||(C.Z.trigger(e.find("input"),"change"),t())};C.Z.on(a,"dxpointerdown",r),this._documentClickHandler=r}_isFocusOnEditorParts(e,t){var a=t||Z.Z.getActiveElement();return(0,c.Z)(a).closest(e.children()).length||(0,c.Z)(a).closest(".dx-dropdowneditor-overlay").length}_removeEvents(){var e=Z.Z.getDocument();(0,_.$K)(this._documentKeyUpHandler)&&C.Z.off(e,"keyup",this._documentKeyUpHandler),(0,_.$K)(this._documentClickHandler)&&C.Z.off(e,"dxpointerdown",this._documentClickHandler)}_dispose(){this._removeEvents(),super._dispose()}_createValueEditorWithEvents(e,t,a){var r=e[2],n=()=>(a.empty(),this._removeEvents(),this._createValueText(e,t,a)),s=()=>{this._updateConditionValue(e,r,()=>{n()})},o={value:""===r?null:r,filterOperation:hg(e),setValue(d){r=null===d?"":d},closeEditor:s,text:a.text()};a.empty();var l=this._createValueEditor(a,t,o);C.Z.trigger(l.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(l,s),this._addDocumentKeyUp(l,d=>{var u=(0,D.EV)(d);if("tab"===u){if(this._isFocusOnEditorParts(l))return;this._updateConditionValue(e,r,()=>{n(),d.shiftKey&&C.Z.trigger(a.prev(),"focus")})}"escape"===u&&C.Z.trigger(n(),"focus"),u===ul&&this._updateConditionValue(e,r,()=>{C.Z.trigger(n(),"focus")})}),this._fireContentReadyAction()}_createValueButton(e,t){var a=(0,c.Z)("<div>").addClass(Oa).addClass(Eg);return this._createValueText(e,t,a),a}_createValueEditor(e,t,a){var r=(0,c.Z)("<div>").attr("tabindex",0).appendTo(e),n=gt(this._customOperations,a.filterOperation),s=n&&n.editorTemplate?n.editorTemplate:t.editorTemplate;return s?this._getTemplate(s).render({model:(0,f.l)({field:t},a),container:r}):this._editorFactory.createEditor.call(this,r,(0,f.l)({},t,a,{parentType:Ig})),r}_createPopupWithTreeView(e,t){var a=this,r=(0,c.Z)("<div>").addClass(e.menu.cssClass).appendTo(t);this._createComponent(r,Dt,{onHiding:e.menu.onHiding,onHidden:e.menu.onHidden,rtlEnabled:e.menu.rtlEnabled,position:e.menu.position,animation:e.menu.animation,contentTemplate(n){var s=(0,c.Z)("<div>").appendTo(n);a._createComponent(s,Is.Z,e.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:()=>(0,BP._)(e.menu.position.of),visible:!0,focusStateEnabled:!1,preventScrollEvents:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:e.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:e.menu.cssClass})}_subscribeOnClickAndEnterKey(e,t){C.Z.on(e,"dxclick",t),C.Z.on(e,"keyup",a=>{(0,D.EV)(a)===ul&&t(a)})}}(0,X.Z)("dxFilterBuilder",Rg);const XP=Rg;P.registerModule("filterBuilder",{defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:y.Z.format("dxFilterBuilder-and"),or:y.Z.format("dxFilterBuilder-or"),notAnd:y.Z.format("dxFilterBuilder-notAnd"),notOr:y.Z.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:y.Z.format("dxFilterBuilder-filterOperationBetween"),equal:y.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:y.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:y.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:y.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:y.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:y.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:y.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:y.Z.format("dxFilterBuilder-filterOperationContains"),notContains:y.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:y.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:y.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:y.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:class QP extends J.View{init(){super.init(),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync")}optionChanged(e){switch(e.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_renderCore(){this._updatePopupOptions()}_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()}_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)}_initPopup(){var e=this;e._disposePopup(),e._filterBuilderPopup=e._createComponent(e.element(),Dt,(0,f.l)({title:y.Z.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:t=>e._getPopupContentTemplate(t),onOptionChanged(t){"visible"===t.name&&e.option("filterBuilderPopup.visible",t.value)},toolbarItems:e._getPopupToolbarItems()},e.option("filterBuilderPopup"),{onHidden(){bn(e),e._disposePopup()}}))}_getPopupContentTemplate(e){var t=(0,c.Z)(e),a=(0,c.Z)("<div>").appendTo((0,c.Z)(e));this._filterBuilder=this._createComponent(a,XP,(0,f.l)({value:this.option("filterValue"),fields:this._columnsController.getFilteringColumns()},this.option("filterBuilder"),{customOperations:this._filterSyncController.getCustomFilterOperations()})),this._createComponent(t,xh,{direction:"both"})}_getPopupToolbarItems(){var e=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:y.Z.format("OK"),onClick(){var t=e._filterBuilder.option("value");e.option("filterValue",t),e._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:y.Z.format("Cancel"),onClick(){e._filterBuilderPopup.hide()}}}]}}}});var Va="filter-panel",eB="".concat(Va,"-text"),tB="".concat(Va,"-checkbox"),iB="".concat(Va,"-clear-filter"),aB="".concat(Va,"-left"),oB={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:y.Z.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:y.Z.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:y.Z.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:class nB extends J.View{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync"),this._dataController.dataSourceChanged.add(()=>this.render())}isVisible(){return this.option("filterPanel.visible")&&this._dataController.dataSource()}_renderCore(){var e=this.element();if(e.empty(),this._columnsController.getColumns().length){e.addClass(this.addWidgetPrefix(Va));var a=(0,c.Z)("<div>").addClass(this.addWidgetPrefix(aB)).appendTo(e);this._renderFilterBuilderText(e,a)}}_renderFilterBuilderText(e,t){var a=this._getFilterElement(),r=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){var n=this._getCheckElement(),s=this._getRemoveButtonElement();return t.append(n).append(a).append(r),void e.append(s)}t.append(a).append(r)}_getCheckElement(){var e=this,t=(0,c.Z)("<div>").addClass(this.addWidgetPrefix(tB));return e._createComponent(t,Hs.Z,{value:e.option("filterPanel.filterEnabled"),onValueChanged(a){e.option("filterPanel.filterEnabled",a.value)}}),t.attr("title",this.option("filterPanel.texts.filterEnabledHint")),t}_getFilterElement(){var e=this,t=(0,c.Z)("<div>").addClass("dx-icon-filter");return C.Z.on(t,"click",()=>e._showFilterBuilder()),Mi("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_getTextElement(){var a,e=this,t=(0,c.Z)("<div>").addClass(e.addWidgetPrefix(eB)),r=e.option("filterValue");return r?(0,x.gx)(e.getFilterText(r,this._filterSyncController.getCustomFilterOperations())).done(n=>{var s=e.option("filterPanel.customizeText");if(s){var o=s({component:e.component,filterValue:r,text:n});"string"==typeof o&&(n=o)}t.text(n)}):(a=e.option("filterPanel.texts.createFilter"),t.text(a)),C.Z.on(t,"click",()=>e._showFilterBuilder()),Mi("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)}_getRemoveButtonElement(){var e=this,t=()=>e.option("filterValue",null),a=(0,c.Z)("<div>").addClass(e.addWidgetPrefix(iB)).text(e.option("filterPanel.texts.clearFilter"));return C.Z.on(a,"click",t),Mi("filterPanel",this,a,void 0,t),e._addTabIndexToElement(a),a}_addTabIndexToElement(e){if(!this.option("useLegacyKeyboardNavigation")){var t=this.option("tabindex")||0;e.attr("tabindex",t)}}optionChanged(e){switch(e.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),e.handled=!0;break;case"filterPanel":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_getConditionText(e,t,a){var r="[".concat(e,"] ").concat(t);return(0,_.$K)(a)&&(r+=a),r}_getValueMaskedText(e){return Array.isArray(e)?"('".concat(e.join("', '"),"')"):" '".concat(e,"'")}_getValueText(e,t,a){var r=new x.BH,n=t&&t.customizeText;if((0,_.$K)(a)||n)if(!n&&e.lookup)ig(e,a,o=>{r.resolve(this._getValueMaskedText(o))});else{var s=Array.isArray(a)?a:O.getDisplayValue(e,a,null);(0,x.gx)(rg(e,s,t,"filterPanel")).done(o=>{r.resolve(this._getValueMaskedText(o))})}else r.resolve("");return r.promise()}getConditionText(e,t){var o,a=this,r=e[1],n=new x.BH,s=gt(t.customOperations,r),l=rn(e[0],t.columns),d=l.caption||"",u=e[2];return o=s?s.caption||(0,Me.GK)(s.name):jo(null===u?"="===r?"isblank":"isnotblank":r,t.filterOperationDescriptions),this._getValueText(l,s,u).done(h=>{n.resolve(a._getConditionText(d,o,h))}),n}getGroupText(e,t,a){var r=this,n=new x.BH,s=[],o=ai(e);return e.forEach(l=>{pe(l)?s.push(r.getConditionText(l,t)):Bt(l)&&s.push(r.getGroupText(l,t,!0))}),x.gx.apply(this,s).done(function(){for(var l,d=arguments.length,u=new Array(d),h=0;h<d;h++)u[h]=arguments[h];if(o.startsWith("!")){var p=t.groupOperationDescriptions["not".concat(o.substring(1,2).toUpperCase()).concat(o.substring(2))].split(" ");l="".concat(p[0]," ").concat(u[0])}else l=u.join(" ".concat(t.groupOperationDescriptions[o]," "));a&&(l="(".concat(l,")")),n.resolve(l)}),n}getFilterText(e,t){var a={customOperations:t,columns:this._columnsController.getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return pe(e)?this.getConditionText(e,a):this.getGroupText(e,a)}}},extenders:{controllers:{data:i=>class extends i{optionChanged(e){"filterPanel"===e.name?(this._applyFilter(),e.handled=!0):super.optionChanged(e)}}}}};P.registerModule("filterPanel",oB);var Og="search-panel",Vg="search-text";function Lg(i){var e;return!!(null!==(e=i.allowSearch)&&void 0!==e?e:i.allowFiltering)}function Pg(i,e){var{lookup:t}=i;return i.parseValue?t?i.parseValue.call(t,e):i.parseValue(e):e}var pB={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:y.Z.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:i=>class extends i{optionChanged(e){switch(e.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return super.publicMethods().concat(["searchByText"])}_calculateAdditionalFilter(){var e=super._calculateAdditionalFilter(),t=this.calculateSearchFilter(this.option("searchPanel.text"));return O.combineFilters([e,t])}searchByText(e){this.option("searchPanel.text",e)}calculateSearchFilter(e){var t,a,s,r=this._columnsController.getColumns(),n=this.option("searchPanel.searchVisibleColumnsOnly"),o=[];if(!e)return null;function l(u){for(var h=(0,q.vb)(s.valueExpr),p=0;p<u.length;p++){var v=h(u[p]);o.push(a.createFilterExpression(v,null,"search"))}}for(t=0;t<r.length;t++)if(a=r[t],(!n||a.visible)&&Lg(a)&&a.calculateFilterExpression){s=a.lookup;var d=Pg(a,e);s&&s.items?(0,Gt.Z)(s.items).filter(a.createFilterExpression.call({dataField:s.displayExpr,dataType:s.dataType,calculateFilterExpression:a.calculateFilterExpression},d,null,"search")).enumerate().done(l):void 0!==d&&o.push(a.createFilterExpression(d,null,"search"))}return 0===o.length?["!"]:O.combineFilters(o,"or")}}},views:{headerPanel:i=>class extends i{optionChanged(e){if("searchPanel"===e.name){if("searchPanel.text"===e.fullName){var t=this.getSearchTextEditor();t&&t.option("value",e.value)}else this._invalidate();e.handled=!0}else super.optionChanged(e)}_getToolbarItems(){var e=super._getToolbarItems();return this._prepareSearchItem(e)}_prepareSearchItem(e){var t=this,a=this._dataController,r=this.option("searchPanel");return r&&r.visible&&e.push({template(s,o,l){var d=(0,c.Z)("<div>").addClass(t.addWidgetPrefix(Og)).appendTo(l);t._editorFactoryController.createEditor(d,{width:r.width,placeholder:r.placeholder,parentType:"searchPanel",value:t.option("searchPanel.text"),updateValueTimeout:700,setValue(u){a.searchByText(u)},editorOptions:{inputAttr:{"aria-label":y.Z.format("".concat(t.component.NAME,"-ariaSearchInGrid"))}}}),t.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40}),e}getSearchTextEditor(){var e=this,t=e.element(),a=t.find(".".concat(e.addWidgetPrefix(Og))).filter(function(){return(0,c.Z)(this).closest(".".concat(e.addWidgetPrefix("header-panel"))).is(t)});return a.length?a.dxTextBox("instance"):null}isVisible(){var e=this.option("searchPanel");return super.isVisible()||!!e?.visible}},rowsView:i=>class extends i{init(){super.init.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")}dispose(){clearTimeout(this._highlightTimer),super.dispose()}_getFormattedSearchText(e,t){var a=Pg(e,t),r=O.getFormatOptionsByColumn(e,"search");return O.formatValue(a,r)}_getStringNormalizer(){var e,t,a,r,n=this.option("searchPanel.highlightCaseSensitive"),s=null===(t=null===(e=this._dataController)||void 0===e?void 0:e.getDataSource)||void 0===t?void 0:t.call(e),o=null===(r=null===(a=s?.loadOptions)||void 0===a?void 0:a.call(s))||void 0===r?void 0:r.langParams;return l=>(0,q.Ex)(l,n,o)}_findHighlightingTextNodes(e,t,a){var n,r=t.parent(),s=this._getStringNormalizer(),o=s(a),l=[];if(r.length){if(e)if(e.groupIndex>=0&&!e.showWhenGrouped)n=t;else{var d=this._columnsController.getVisibleIndex(e.index);n=r.children("td").eq(d).find("*")}}else r=(0,c.Z)("<div>").append(t);return(n=n?.length?n:r.find("*")).each((u,h)=>{for(var p,v,g=(0,c.Z)(h).contents(),m=0;m<g.length;m++){var w=g.get(m);3===w.nodeType&&s(null!==(v=null!==(p=w.textContent)&&void 0!==p?p:w.nodeValue)&&void 0!==v?v:"").includes(o)&&l.push(w)}}),l}_highlightSearchTextCore(e,t){var a=(0,c.Z)("<span>").addClass(this.addWidgetPrefix(Vg)),r=e.text(),n=e[0],s=this._getStringNormalizer(),o=s(r).indexOf(s(t));if(o>=0)return n.textContent?n.textContent=r.substr(0,o):n.nodeValue=r.substr(0,o),e.after(a.text(r.substr(o,t.length))),e=(0,c.Z)(Z.Z.createTextNode(r.substr(o+t.length))).insertAfter(a),this._highlightSearchTextCore(e,t)}_highlightSearchText(e,t,a){var r=this,n=this._getStringNormalizer(),s=r.option("searchPanel.text");t&&a&&(s=s&&r._getFormattedSearchText(a,s)),s&&r.option("searchPanel.highlightSearchText")&&r._findHighlightingTextNodes(a,e,s).forEach(l=>{t?n((0,c.Z)(l).text())===n(s??"")&&(0,c.Z)(l).replaceWith((0,c.Z)("<span>").addClass(r.addWidgetPrefix(Vg)).text((0,c.Z)(l).text())):r._highlightSearchTextCore((0,c.Z)(l),s)})}_renderCore(){var e=super._renderCore.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),e}_updateCell(e,t){var{column:a}=t,n="string"!==(a.lookup&&a.lookup.dataType||a.dataType);Lg(a)&&!t.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(s=>{this._highlightSearchText.apply(this,s)}),this._searchParams=[]})),this._searchParams.push([e,n,a])):this._highlightSearchText(e,n,a)),super._updateCell(e,t)}}}}};P.registerModule("search",pB);var _B=T(46);class vB extends _B.Z{_optionChanged(e){switch(e.name){case"pageIndex":var t=this.option("pageIndexChanged");t&&t(e.value);break;case"pageSize":var a=this.option("pageSizeChanged");a&&a(e.value)}super._optionChanged(e)}}var be=T(3366),K=T(2954),ue=T(6444),Bg=T(6842),gB=T(6044);function mt(i,e){var t;return ch((null!==(t=(0,gB.Z)(e))&&void 0!==t?t:{})[i])}function on(i){return mt("marginLeft",i)+mt("marginRight",i)+mt("width",i)}function Fg(i){return mt("minWidth",i)}var fB=["contentTemplate","pagerProps"];var yB={},bB=i=>i&&(i.defaultProps?e=>(0,K.vs)((0,K.Iz)(2,i,(0,V.Z)({},e))):i);let EB=(()=>{class i extends ue.OS{constructor(t){super(t),this.parentRef=(0,K.Vf)(),this.pageSizesRef=(0,K.Vf)(),this.infoTextRef=(0,K.Vf)(),this.pagesRef=(0,K.Vf)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new ue.b0(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new ue.b0(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var t,a;null===(t=this._effects[0])||void 0===t||t.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(a=this._effects[1])||void 0===a||a.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var t=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return Bg.Z.add(t),()=>{Bg.Z.remove(t)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className:t,displayMode:a,gridCompatibility:r,hasKnownLastPage:n,infoText:s,label:o,lightModeEnabled:l,maxPagesCount:d,onKeyDown:u,pageCount:h,pageIndex:p,pageIndexChange:v,pageSize:g,pageSizeChange:m,pageSizes:w,pagesCountText:I,pagesNavigatorVisible:A,rtlEnabled:F,showInfo:G,showNavigationButtons:M,showPageSizes:k,totalCount:U,visible:ee}=this.props.pagerProps;return(0,V.Z)({},this.restAttributes,{pageSize:g,pageIndex:p,pageIndexChange:v,pageSizeChange:m,gridCompatibility:r,className:t,showInfo:G,infoText:s,lightModeEnabled:l,displayMode:a,maxPagesCount:d,pageCount:h,pagesCountText:I,visible:ee,hasKnownLastPage:n,pagesNavigatorVisible:A,showPageSizes:k,pageSizes:w,rtlEnabled:F,showNavigationButtons:M,totalCount:U,onKeyDown:u,label:o})}get parentWidth(){return this.parentRef.current?on(this.parentRef.current):0}updateAdaptivityProps(){var t=function SB(i){var{info:e,pageSizes:t,pages:a,parent:r}=i,n=function mB(i){var e=mt("paddingLeft",i)+mt("paddingRight",i);return mt("width",i)-e}(r),s=on(t),o=on(e),l=on(a);return{parent:n,pageSizes:s,info:o+mt("marginLeft",e)+mt("marginRight",e),pages:l}}({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var a=!(0,_.$K)(this.elementsWidth);a&&(this.elementsWidth={}),(a||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=t.pageSizes,this.elementsWidth.pages=t.pages),(a||this.state.infoTextVisible)&&(this.elementsWidth.info=t.info),this.actualIsLargeDisplayMode=function wB(i){var{pageSizes:e,pages:t,parent:a}=i;return a-(e+t)>0}((0,V.Z)({parent:t.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function xB(i){var{info:e,pageSizes:t,pages:a,parent:r}=i;return r-(t+a+e)>0}((0,V.Z)({},t,{info:this.elementsWidth.info})),this.setState(r=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(r=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}}get restAttributes(){return(0,be.Z)(this.props,fB)}render(){var t=this.props;return(i=>{var{contentAttributes:e,infoTextRef:t,infoTextVisible:a,isLargeDisplayMode:r,pageSizesRef:n,pagesRef:s,parentRef:o,props:{contentTemplate:l}}=i;return l((0,V.Z)({rootElementRef:o,pageSizesRef:n,infoTextRef:t,pagesRef:s,infoTextVisible:a,isLargeDisplayMode:r},e))})({props:(0,V.Z)({},t,{contentTemplate:bB(t.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}return i.defaultProps=yB,i})();var Mg={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return y.Z.format("dxPager-ariaLabel")}},IB=Object.create(Object.prototype,(0,V.Z)(Object.getOwnPropertyDescriptors(Mg),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),_e=Object.create(Object.prototype,(0,V.Z)(Object.getOwnPropertyDescriptors(Mg),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),TB=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],kg="dx-info",AB={get pageIndex(){return _e.pageIndex},get pageCount(){return _e.pageCount},get totalCount(){return _e.totalCount}};let RB=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={}}get infoText(){var t;return(null!==(t=this.props.infoText)&&void 0!==t?t:"")||y.Z.getFormatter("dxPager-infoText")()}get text(){var{pageCount:t,pageIndex:a,totalCount:r}=this.props;return(0,qe.WU)(this.infoText,(a+1).toString(),t.toString(),r.toString())}get restAttributes(){return(0,be.Z)(this.props,TB)}render(){return(i=>{var{props:{rootElementRef:e},text:t}=i;return(0,K.Wm)(1,"div",kg,t,0,null,null,e)})({props:(0,V.Z)({},this.props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}return i.defaultProps=AB,i})();var OB=T(6024),La=(0,ue.kr)(void 0),VB=["children","className","label","onClick","selected","tabIndex"],PB={className:"",label:"",tabIndex:0,selected:!1};let ln=(()=>{class i extends ue.OS{constructor(t){super(t),this.state={},this.widgetRef=(0,K.Vf)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[La.id]?this.context[La.id]:La.defaultValue}createEffects(){return[new ue.b0(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new ue.b0(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var t,a;null===(t=this._effects[0])||void 0===t||t.update([this.keyboardContext,this.props.onClick]),null===(a=this._effects[1])||void 0===a||a.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,OB.OZ)(this.widgetRef.current,this.props.onClick)}get restAttributes(){return(0,be.Z)(this.props,VB)}render(){return(i=>{var{props:{children:e,className:t,label:a,selected:r,tabIndex:n},widgetRef:s}=i;return(0,K.Wm)(1,"div",t,e,0,{tabIndex:n,role:"button","aria-label":a,"aria-current":r?"page":void 0},null,s)})({props:(0,V.Z)({},this.props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}return i.defaultProps=PB,i})();var Ng="dx-selection",Hg="dx-page-size",ZB="".concat(Hg," ").concat(Ng),dn=T(6499),$B=["className","index","onClick","selected"],KB={index:0,selected:!1,className:"dx-page"};let Zg=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={}}get label(){return(0,qe.WU)(y.Z.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected:t}=this.props;return(0,dn.G)({["".concat(this.props.className)]:!!this.props.className,[Ng]:!!t})}get restAttributes(){return(0,be.Z)(this.props,$B)}render(){return(i=>{var{className:e,label:t,props:{onClick:a,selected:r},value:n}=i;return(0,K.Iz)(2,ln,{className:e,label:t,onClick:a,selected:r,children:n})})({props:(0,V.Z)({},this.props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}return i.defaultProps=KB,i})();var st=T(2845),GB=["pageIndexes"],UB=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function zg(i,e,t){return 1===i?"high":i+e===t-1?"low":"both"}function $g(i,e,t){var a=[],r=[];switch(t){case"none":a=[...i];break;case"both":a=[0,"low",...i,"high",e-1],r=i.slice(1,-1);break;case"high":a=[0,...i,"high",e-1],r=i.slice(0,-1);break;case"low":a=[0,"low",...i,e-1],r=i.slice(1)}return{slidingWindowIndexes:i,indexesForReuse:r,pageIndexes:a}}function Wg(i,e,t,a){for(var r=[],n=0;n<e;n+=1)r.push(n+i);return $g(r,t,a)}var qB={get pageIndex(){return _e.pageIndex},get maxPagesCount(){return _e.maxPagesCount},get pageCount(){return _e.pageCount}};let XB=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[st.E.id]?this.context[st.E.id]:st.E.defaultValue}get slidingWindowState(){return this.slidingWindowStateHolder||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(t,a){var{indexesForReuse:r}=this.slidingWindowState,n=r.slice(-1)[0]<t-1,s=r.includes(a);return n&&s}generatePageIndexes(){var r,{pageCount:t,pageIndex:a}=this.props,{slidingWindowIndexes:n}=this.slidingWindowState,l=Wg(r=a===n[0]?a-1:a===n[n.length-1]?a+2-4:a<4?1:a>=t-4?t-4-1:a-1,4,t,zg(r,4,t)),{pageIndexes:d}=l,u=(0,be.Z)(l,GB);return this.slidingWindowStateHolder=u,d}isSlidingWindowMode(){var{maxPagesCount:t,pageCount:a}=this.props;return a<=4||a<=t}onPageClick(t){this.props.pageIndexChange(t)}get pageIndexes(){var{pageCount:t}=this.props;if(this.isSlidingWindowMode())return Wg(0,t,t,"none").pageIndexes;if(this.canReuseSlidingWindow(t,this.props.pageIndex)){var{slidingWindowIndexes:a}=this.slidingWindowState;return $g(a,t,zg(a[0],4,t)).pageIndexes}return this.generatePageIndexes()}get pages(){var t,{pageIndex:a}=this.props,r=s=>{var o="low"===s||"high"===s?null:{index:s,onClick:()=>this.onPageClick(s),selected:a===s};return{key:s.toString(),pageProps:o}};return(null!==(t=this.config)&&void 0!==t&&t.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(s=>r(s))}get restAttributes(){return(0,be.Z)(this.props,UB)}render(){return(i=>{var{pages:e}=i,t=e.map(a=>{var{key:r,pageProps:n}=a;return n?(0,K.Iz)(2,Zg,{index:n.index,selected:n.selected,onClick:n.onClick},r):(0,K.Wm)(1,"div","dx-separator",". . .",16,null,r)});return(0,K.xJ)(t,0)})({props:(0,V.Z)({},this.props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}return i.defaultProps=qB,i})();var Kg=T(2134),Gg=T(6410),Bi={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===N.Z.real().deviceType&&!N.Z.isSimulator()}},un={label:"",get labelMode(){return(0,z.x2)((0,z.Vk)())?"floating":"static"}},QB=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isDirty","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Ee=Object.create(Object.prototype,(0,V.Z)(Object.getOwnPropertyDescriptors(Gg.nY),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),tF={get defaultValue(){return Ee.defaultValue},get readOnly(){return Ee.readOnly},get name(){return Ee.name},get validationError(){return Ee.validationError},get validationErrors(){return Ee.validationErrors},get validationMessageMode(){return Ee.validationMessageMode},get validationMessagePosition(){return Ee.validationMessagePosition},get validationStatus(){return Ee.validationStatus},get isValid(){return Ee.isValid},get isDirty(){return Ee.isDirty},get inputAttr(){return Ee.inputAttr},get className(){return Ee.className},get activeStateEnabled(){return Bi.activeStateEnabled},get disabled(){return Ee.disabled},get focusStateEnabled(){return Bi.focusStateEnabled},get hoverStateEnabled(){return Bi.hoverStateEnabled},get tabIndex(){return Ee.tabIndex},get visible(){return Ee.visible},get label(){return un.label},get labelMode(){return un.labelMode},isReactComponentWrapper:!0};let iF=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,V.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var t=(0,V.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,be.Z)(t,QB)}render(){return(i=>{var{componentProps:e,restAttributes:t}=i;return(0,K.vs)((0,K.Iz)(2,Kg.Ag,(0,V.Z)({componentType:Ns,componentProps:e,templateNames:[]},t)))})({props:(0,V.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=tF,i})();var aF=10;function Ug(i,e){return i+aF*Math.max(...e).toString().length}var rF=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],nF="".concat(kg,"  dx-info-text"),Yg="dx-page-index",dF={inputAttr:Object.freeze({"aria-label":y.Z.format("dxPager-ariaPageNumber")})},uF={get pageIndex(){return _e.pageIndex},get pageCount(){return _e.pageCount},get inputAttr(){return dF.inputAttr}};let hF=(()=>{class i extends ue.OS{constructor(t){super(t),this.pageIndexRef=(0,K.Vf)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new ue.b0(this.updateWidth,[this.state.minWidth])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.state.minWidth])}updateWidth(){var t,a=null===(t=this.pageIndexRef.current)||void 0===t?void 0:t.querySelector(".".concat(Yg));this.setState(r=>({minWidth:a&&Fg(a)||r.minWidth}))}get value(){return this.props.pageIndex+1}get width(){var{pageCount:t}=this.props;return Ug(this.state.minWidth,[t])}get pagesCountText(){var t;return(null!==(t=this.props.pagesCountText)&&void 0!==t?t:"")||y.Z.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(t){this.props.pageIndexChange(t-1)}get restAttributes(){return(0,be.Z)(this.props,rF)}render(){return(i=>{var{pageIndexRef:e,pagesCountText:t,props:{inputAttr:a,pageCount:r},selectLastPageIndex:n,value:s,valueChange:o,width:l}=i;return(0,K.Wm)(1,"div","dx-light-pages",[(0,K.Iz)(2,iF,{className:Yg,min:1,max:Math.max(r,s),width:l,value:s,valueChange:o,inputAttr:a}),(0,K.Wm)(1,"span",nF,t,0),(0,K.Iz)(2,Zg,{className:"dx-pages-count",selected:!1,index:r-1,onClick:n})],4,null,null,e)})({props:(0,V.Z)({},this.props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}return i.defaultProps=uF,i})();var cF=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],hn="dx-navigate-button",jg="dx-prev-button",qg="dx-next-button",Xg="dx-button-disable",vF={nextEnabledClass:"".concat(hn," ").concat(qg),prevEnabledClass:"".concat(hn," ").concat(jg),nextDisabledClass:"".concat(Xg," ").concat(hn," ").concat(qg),prevDisabledClass:"".concat(Xg," ").concat(hn," ").concat(jg)},gF={next:"prev",prev:"next"},wF={get pageIndex(){return _e.pageIndex},get maxPagesCount(){return _e.maxPagesCount},get pageCount(){return _e.pageCount},get hasKnownLastPage(){return _e.hasKnownLastPage},get showNavigationButtons(){return _e.showNavigationButtons},get totalCount(){return _e.totalCount},get isLargeDisplayMode(){return true}};let xF=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[st.E.id]?this.context[st.E.id]:st.E.defaultValue}pageIndexChange(t){this.canNavigateToPage(t)&&this.props.pageIndexChange(t)}getButtonProps(t){var a,r=null!==(a=this.config)&&void 0!==a&&a.rtlEnabled?gF[t]:t,n=this.canNavigateTo(r);return{className:vF["".concat(t).concat(n?"Enabled":"Disabled","Class")],tabIndex:n?0:-1,navigate:()=>this.navigateToPage(r)}}canNavigateToPage(t){return this.props.hasKnownLastPage?t>=0&&t<=this.props.pageCount-1:t>=0}getNextPageIndex(t){return this.props.pageIndex+function fF(i){return"next"===i?1:-1}(t)}canNavigateTo(t){return this.canNavigateToPage(this.getNextPageIndex(t))}navigateToPage(t){this.pageIndexChange(this.getNextPageIndex(t))}get renderPrevButton(){var{isLargeDisplayMode:t,showNavigationButtons:a}=this.props;return!t||a}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){return(0,be.Z)(this.props,cF)}componentWillUpdate(t,a,r){(this.context[st.E.id]!==r[st.E.id]||this.props.hasKnownLastPage!==t.hasKnownLastPage||this.props.pageCount!==t.pageCount||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[st.E.id]!==r[st.E.id]||this.props.hasKnownLastPage!==t.hasKnownLastPage||this.props.pageCount!==t.pageCount||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){return(i=>{var{nextButtonProps:e,pageIndexChange:t,prevButtonProps:a,props:{isLargeDisplayMode:r,maxPagesCount:n,pageCount:s,pageIndex:o,pagesCountText:l},renderNextButton:d,renderPrevButton:u}=i;return(0,K.xJ)([u&&(0,K.Iz)(2,ln,{label:y.Z.getFormatter("dxPager-prevPage")(),className:a.className,tabIndex:a.tabIndex,onClick:a.navigate}),r&&(0,K.Iz)(2,XB,{maxPagesCount:n,pageCount:s,pageIndex:o,pageIndexChange:t}),!r&&(0,K.Iz)(2,hF,{pageCount:s,pageIndex:o,pageIndexChange:t,pagesCountText:l}),d&&(0,K.Iz)(2,ln,{label:y.Z.getFormatter("dxPager-nextPage")(),className:e.className,tabIndex:e.tabIndex,onClick:e.navigate})],0)})({props:(0,V.Z)({},this.props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}return i.defaultProps=wF,i})();var SF=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],Ce=Object.create(Object.prototype,(0,V.Z)(Object.getOwnPropertyDescriptors(Gg.nY),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),bF={get placeholder(){return Ce.placeholder},get hoverStateEnabled(){return Bi.hoverStateEnabled},get searchEnabled(){return Ce.searchEnabled},get defaultValue(){return Ce.defaultValue},get readOnly(){return Ce.readOnly},get name(){return Ce.name},get validationError(){return Ce.validationError},get validationErrors(){return Ce.validationErrors},get validationMessageMode(){return Ce.validationMessageMode},get validationMessagePosition(){return Ce.validationMessagePosition},get validationStatus(){return Ce.validationStatus},get isValid(){return Ce.isValid},get isDirty(){return Ce.isDirty},get inputAttr(){return Ce.inputAttr},get className(){return Ce.className},get activeStateEnabled(){return Bi.activeStateEnabled},get disabled(){return Ce.disabled},get focusStateEnabled(){return Bi.focusStateEnabled},get tabIndex(){return Ce.tabIndex},get visible(){return Ce.visible},get label(){return un.label},get labelMode(){return un.labelMode},isReactComponentWrapper:!0};let EF=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,V.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var t=(0,V.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,be.Z)(t,SF)}render(){return(i=>{var{componentProps:e,restAttributes:t}=i;return(0,K.vs)((0,K.Iz)(2,Kg.Ag,(0,V.Z)({componentType:Wc,componentProps:e,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},t)))})({props:(0,V.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=bF,i})();var IF=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],DF={inputAttr:Object.freeze({"aria-label":y.Z.format("dxPager-ariaPageSize")})},AF={get pageSize(){return _e.pageSize},get inputAttr(){return DF.inputAttr}};let RF=(()=>{class i extends ue.OS{constructor(t){super(t),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new ue.b0(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(t=>({minWidth:Fg(this.props.parentRef.current)||t.minWidth}))}get width(){return Ug(this.state.minWidth,this.props.pageSizes.map(t=>t.value))}get restAttributes(){return(0,be.Z)(this.props,IF)}render(){return(i=>{var{props:{inputAttr:e,pageSize:t,pageSizeChange:a,pageSizes:r},width:n}=i;return(0,K.Iz)(2,EF,{displayExpr:"text",valueExpr:"value",dataSource:r,value:t,valueChange:a,width:n,inputAttr:e})})({props:(0,V.Z)({},this.props),width:this.width,restAttributes:this.restAttributes})}}return i.defaultProps=AF,i})();var OF=["pageSize","pageSizeChange","pageSizes"],LF={get pageSize(){return _e.pageSize}};let PF=(()=>{class i extends ue.Ul{constructor(t){super(t),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize:t,pageSizes:a}=this.props;return a.map((r,n)=>{var{text:s,value:o}=r;return{className:(0,dn.G)({[o===t?ZB:Hg]:!0,"dx-first-child":0===n}),click:this.onPageSizeChange(o),label:(0,qe.WU)(y.Z.getFormatter("dxPager-pageSize"),o||y.Z.getFormatter("dxPager-pageSizesAllText")),text:s}})})()}onPageSizeChange(t){return()=>(this.props.pageSizeChange(t),this.props.pageSize)}get restAttributes(){return(0,be.Z)(this.props,OF)}componentWillUpdate(t,a,r){(this.props.pageSize!==t.pageSize||this.props.pageSizes!==t.pageSizes||this.props.pageSizeChange!==t.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){return(i=>{var{pageSizesText:e}=i;return(0,K.xJ)(e.map(t=>{var{className:a,click:r,label:n,text:s}=t;return(0,K.Iz)(2,ln,{className:a,label:n,onClick:r,children:s},s)}),0)})({props:(0,V.Z)({},this.props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}return i.defaultProps=LF,i})();var BF=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],NF={get pageSize(){return _e.pageSize},get pageSizes(){return _e.pageSizes},get isLargeDisplayMode(){return true}};let HF=(()=>{class i extends ue.OS{constructor(t){super(t),this.state={},this.htmlRef=(0,K.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new ue.b0(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes:t}=this.props;return t.map(a=>"all"===a||0===a?{text:y.Z.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(a),value:a})})()}get restAttributes(){return(0,be.Z)(this.props,BF)}componentWillUpdate(t,a,r){super.componentWillUpdate(),this.props.pageSizes!==t.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){return(i=>{var{htmlRef:e,normalizedPageSizes:t,props:{isLargeDisplayMode:a,pageSize:r,pageSizeChange:n}}=i;return(0,K.Wm)(1,"div","dx-page-sizes",[a&&(0,K.Iz)(2,PF,{pageSizes:t,pageSize:r,pageSizeChange:n}),!a&&(0,K.Iz)(2,RF,{parentRef:e,pageSizes:t,pageSize:r,pageSizeChange:n})],0,null,null,e)})({props:(0,V.Z)({},this.props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}return i.defaultProps=NF,i})();var ZF=T(5347),zF=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],WF=Object.create(Object.prototype,(0,V.Z)(Object.getOwnPropertyDescriptors(_e),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));let KF=(()=>{class i extends ue.OS{constructor(t){super(t),this.state={},this.widgetRootElementRef=(0,K.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new ue.b0(this.setRootElementRef,[])]}getChildContext(){return(0,V.Z)({},this.context,{[La.id]:this.keyboardAction||La.defaultValue})}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>t=>{var a,r;null===(a=(r=this.props).onKeyDown)||void 0===a||a.call(r,t)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(t,a)=>Yl("pager",this.createFakeInstance(),t,void 0,a)}))()}get infoVisible(){var{infoTextVisible:t,showInfo:a}=this.props;return a&&t}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode:t,lightModeEnabled:a}=this.props;return"adaptive"===t&&void 0!==a?a?"compact":"full":t}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var t=this.normalizedDisplayMode;return"adaptive"===t?this.props.isLargeDisplayMode:"full"===t}get classes(){var t={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,dn.G)(t)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){return(0,be.Z)(this.props,zF)}componentWillUpdate(t,a,r){super.componentWillUpdate(),this.props.onKeyDown!==t.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){return(i=>{var{aria:e,classes:t,infoVisible:a,isLargeDisplayMode:r,pageIndexSelectorVisible:n,pagesContainerVisibility:s,pagesContainerVisible:o,props:{hasKnownLastPage:l,infoText:d,infoTextRef:u,maxPagesCount:h,pageCount:p,pageIndex:v,pageIndexChange:g,pageSize:m,pageSizeChange:w,pageSizes:I,pageSizesRef:A,pagesCountText:F,pagesRef:G,rtlEnabled:M,showNavigationButtons:k,showPageSizes:U,totalCount:ee,visible:$},restAttributes:ce,widgetRootElementRef:Ie}=i;return(0,K.vs)((0,K.Iz)(2,ZF.$L,(0,V.Z)({rootElementRef:Ie,rtlEnabled:M,classes:t,visible:$,aria:e},ce,{children:[U&&(0,K.Iz)(2,HF,{rootElementRef:A,isLargeDisplayMode:r,pageSize:m,pageSizeChange:w,pageSizes:I}),o&&(0,K.Wm)(1,"div","dx-pages",[a&&(0,K.Iz)(2,RB,{rootElementRef:u,infoText:d,pageCount:p,pageIndex:v,totalCount:ee}),n&&(0,K.Wm)(1,"div","dx-page-indexes",(0,K.Iz)(2,xF,{hasKnownLastPage:l,isLargeDisplayMode:r,maxPagesCount:h,pageCount:p,pageIndex:v,pageIndexChange:g,pagesCountText:F,showNavigationButtons:k,totalCount:ee}),2,null,null,G)],0,{style:(0,ue.jk)({visibility:s})})]})))})({props:(0,V.Z)({},this.props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}return i.defaultProps=WF,i})();var GF=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];let YF=(()=>{class i extends ue.DZ{constructor(t){super(t),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,ue.gt)()]}pageIndexChange(t){var a,r;this.props.gridCompatibility?(this.setState(n=>({pageIndex:a=t+1})),this.props.pageIndexChange(a)):(this.setState(n=>({pageIndex:r=t})),this.props.pageIndexChange(r))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(t){var a;this.setState(r=>({pageSize:a=t})),this.props.pageSizeChange(a)}get className(){return this.props.gridCompatibility?(0,dn.G)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>(0,V.Z)({},(0,V.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:t=>this.pageIndexChange(t),pageSizeChange:t=>this.pageSizeChange(t)}))()}get restAttributes(){var t=(0,V.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,be.Z)(t,GF)}componentWillUpdate(t,a,r){super.componentWillUpdate(),(this.props!==t||this.props.gridCompatibility!==t.gridCompatibility||this.props.className!==t.className||this.state.pageIndex!==a.pageIndex||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange||this.props.pageSizeChange!==t.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){return(i=>{var{pagerProps:e,restAttributes:t}=i;return(0,K.vs)((0,K.Iz)(2,EB,(0,V.Z)({contentTemplate:KF,pagerProps:e},t)))})({props:(0,V.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}return i.defaultProps=IB,i})();class Qg extends vB{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return YF}}(0,X.Z)("dxPager",Qg);const jF=Qg;var Jg=function(i){return 1+(parseInt(i.pageIndex())||0)};P.registerModule("pager",{defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:y.Z.format("dxPager-ariaLabel")}}),views:{pagerView:class QF extends J.View{init(){var e=this.getController("data");e.changed.add(t=>{if(t&&t.repaintChangesOnly){var a=this._pager;a?a.option({pageIndex:Jg(e),pageSize:e.pageSize(),pageCount:e.pageCount(),totalCount:e.totalCount(),hasKnownLastPage:e.hasKnownLastPage()}):this.render()}else(!t||"update"!==t.changeType&&"updateSelection"!==t.changeType&&"updateFocusedRow"!==t.changeType)&&(this._pager=null,this.render())})}dispose(){this._pager=null}optionChanged(e){var{name:t}=e,a="pager"===t,r="paging"===t,n="dataSource"===t,s="scrolling"===t,o=this.getController("data");if(a||r||s||n){if(e.handled=!0,o.skipProcessingPagingChange(e.fullName))return;(a||r)&&(this._pageSizes=null),n||(this._pager=null,this._invalidate(),(0,B.Ym)()&&a&&this.component&&this.component.resize())}}_renderCore(){var e,t=this.element().addClass(this.addWidgetPrefix("pager")),a=null!==(e=this.option("pager"))&&void 0!==e?e:{},r=this.getController("data"),n=this.getController("keyboardNavigation"),s={maxPagesCount:10,pageIndex:Jg(r),pageCount:r.pageCount(),pageSize:r.pageSize(),showPageSizes:a.showPageSizeSelector,showInfo:a.showInfo,displayMode:a.displayMode,pagesNavigatorVisible:a.visible,showNavigationButtons:a.showNavigationButtons,label:a.label,pageSizes:this.getPageSizes(),totalCount:r.totalCount(),hasKnownLastPage:r.hasKnownLastPage(),pageIndexChanged(o){r.pageIndex()!==o-1&&r.pageIndex(o-1)},pageSizeChanged(o){r.pageSize(o)},onKeyDown:o=>n&&n.executeAction("onKeyDown",o),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,_.$K)(a.infoText)&&(s.infoText=a.infoText),this._pager?this._pager.repaint():(0,B.Ym)()?this._pager=this._createComponent(t,jF,s):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')}getPager(){return this._pager}getPageSizes(){var e=this.getController("data"),t=this.option("pager"),a=t&&t.allowedPageSizes,r=e.pageSize();return(!(0,_.$K)(this._pageSizes)||!this._pageSizes.includes(r))&&(this._pageSizes=[],t&&(Array.isArray(a)?this._pageSizes=a:a&&r>1&&(this._pageSizes=[Math.floor(r/2),r,2*r]))),this._pageSizes}isVisible(){var e=this.getController("data"),t=this.option("pager"),a=t&&t.visible,r=this.option("scrolling");return"auto"===a&&(a=(!r||"virtual"!==r.mode&&"infinite"!==r.mode)&&(e.pageCount()>1||e.isLoaded()&&!e.hasKnownLastPage())),!!a}getHeight(){return this.getElementHeight()}}}});var eM=T(9962),em="columns-separator-transparent",tm="drag-header",hl="drag-action",im="tracker",am="drop-highlight",rm="dx-block-separator",nm="dx-header-row",Ve="dxDataGridResizingReordering",Pa=function(i){return i.option("allowColumnResizing")||i.getController("columns").isColumnOptionUsed("allowResizing")},om=function(i){return i.option("allowColumnReordering")||i.getController("columns").isColumnOptionUsed("allowReordering")};class lm extends J.View{_renderSeparator(){}_renderCore(e){var t=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),t}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){var t=this.element();if(t){if(!(0,_.$K)(e))return(0,b.Cr)(t);(0,b.QQ)(t,e)}}width(e){var t=this.element();if(t){if(!(0,_.$K)(e))return(0,b.dz)(t);(0,b.cl)(t,e)}}}var pl=function(i){return"widget"!==i.option("columnResizingMode")},ni={views:{columnsSeparatorView:class oM extends lm{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=Pa(this),this.hide(!0))),super.optionChanged(e)}_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){var t,e=this;e._positionChanged=function(a){(t=e.element())&&(t.css({top:a.top}),(0,b.QQ)(t,a.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=Pa(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(om(this)||Pa(this))}show(){var e=this.element();e&&!this._isShown&&(this._isTransparent?e.removeClass(this.addWidgetPrefix(em)):e.show()),super.show()}hide(e){var t=this.element(),a=this.addWidgetPrefix(em);t&&(this._isShown||e)&&(this._isTransparent?(t.addClass(a),t.css("left",""),t.show()):(t.hasClass(a)&&t.removeClass(a),t.hide())),super.hide()}moveByX(e){var t=this.element();t&&t.css("left",null===e?0:e-this._parentElement().offset().left)}changeCursor(e){e=(0,_.$K)(e)?e:"";var t=this.element();t&&t.css("cursor",e)}},blockSeparatorView:class lM extends lm{init(){super.init(),this.getController("data").loadingChanged.add(t=>{t||this.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass(rm).html("&nbsp;")}hide(){var e=this._parentElement(),t=this.element();t&&this._isShown&&t.css("display","none"),e&&!e.children(".".concat(rm)).length&&e.prepend(this.element()),super.hide()}isVisible(){var e=this.option("groupPanel"),t=this.option("columnChooser");return e&&e.visible||t&&t.enabled}show(e){var a,t=this.element();if(t&&!this._isShown)switch(e){case"group":this.element().css("display","block");break;case"columnChooser":a={width:"100%",display:"block"},ge.Z.stop(t,!0),ge.Z.animate(t,{type:"slide",from:{width:0,display:a.display},to:a,duration:300,easing:"swing"});break;default:t.css("display","")}super.show()}},draggingHeaderView:class dM extends J.View{init(){super.init();var e=this.getController("data");this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._columnsController=this.getController("columns"),this._isDragging=!1,e.loadingChanged.add(t=>{var a=this.element();!t&&a&&a.hide()})}isDragging(){return this._isDragging}_getDraggingPanelByPos(e){var t;return(0,S.S6)(this._dragOptions.draggingPanels,(a,r)=>{if(r){var n=r.getBoundingRect();if(n&&(void 0===n.bottom||e.y<n.bottom)&&(void 0===n.top||e.y>n.top)&&(void 0===n.left||e.x>n.left)&&(void 0===n.right||e.x<n.right))return t=r,!1}}),t}_renderCore(){this.element().addClass("".concat(this.addWidgetPrefix(tm)," ").concat(this.addWidgetPrefix("text-content")," ").concat("dx-widget")).hide()}_resetTargetColumnOptions(){var e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,t){return(0,_.$K)(e)?{columnIndex:t,rowIndex:e}:t}dispose(){var e=this.element();this._dragOptions=null,e&&e.parent().find(".".concat(this.addWidgetPrefix(tm))).remove()}isVisible(){var e=this._columnsController.getCommonSettings();return this.option("showColumnHeaders")&&(om(this)||e.allowGrouping||e.allowHiding)}dragHeader(e){var{columnElement:t}=e,a=!!e.sourceColumn.type;this._isDragging=!0,this._dragOptions=e,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:e.columnElement,sourceLocation:e.sourceLocation};var r=Z.Z.getDocument();this._onSelectStart=r.onselectstart,r.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:t&&t.css("textAlign"),height:t&&(a&&t.get(0).clientHeight||(0,b.Cr)(t)),width:t&&(a&&t.get(0).clientWidth||(0,b.dz)(t)),whiteSpace:t&&t.css("whiteSpace")}).addClass(this.addWidgetPrefix(hl)).toggleClass("dx-drag-command-cell",a).text(a?"":e.sourceColumn.caption),this.element().appendTo(eM.Z.getSwatchContainer(t))}moveHeader(e){var t=e.event,{that:a}=t.data,r=(0,D.a0)(t),n=!!a._columnsResizerViewController&&a._columnsResizerViewController.isResizing(),s=a._dragOptions;if(a._isDragging&&!n){var o=a.element(),l=Math.abs(r.x-s.columnElement.offset().left-s.deltaX),d=Math.abs(r.y-s.columnElement.offset().top-s.deltaY);(o.is(":visible")||l>5||d>5)&&(o.show(),o.css({left:r.x-s.deltaX,top:r.y-s.deltaY}),a.dockHeader(r)),t.preventDefault()}}dockHeader(e){var t=this._getDraggingPanelByPos(e),a=this._controller,r=this._dropOptions,n=this._dragOptions;if(t){var s=this.option("rtlEnabled"),o="columnChooser"===t.getName(),l=o?"y":"x",d=t.getName(),u="headers"===d?n.rowIndex:void 0,{sourceColumn:h}=n,p=t.getColumnElements(u,h?.ownerBand)||[],v=n.pointsByTarget=n.pointsByTarget||{},g="columnChooser"===d?[]:v[d]||a._generatePointsByColumns((0,f.l)({},n,{targetDraggingPanel:t,columns:t.getColumns(u),columnElements:p,isVerticalOrientation:o,startColumnIndex:"headers"===d&&(0,c.Z)(p[0]).index()}));if(v[d]=g,r.targetLocation=d,g.length>0)for(var m=0;m<g.length;m++){var w=g[m+1]&&(g[m][l]+g[m+1][l])/2;if(void 0===w||(s&&"x"===l?e[l]>w:e[l]<w)){r.targetColumnIndex=this._getVisibleIndexObject(u,g[m].columnIndex),p[m]?(r.targetColumnElement=p.eq(m),r.isLast=!1):(r.targetColumnElement=p.last(),r.isLast=!0),r.posX=g[m].x,r.posY=g[m].y,a.dock(r);break}}else this._resetTargetColumnOptions(),a.dock(r)}}dropHeader(e){var t=e.event,{that:a}=t.data,r=a._controller;a.element().hide(),r&&a._isDragging&&r.drop(a._dropOptions),a.element().appendTo(a._parentElement()),a._dragOptions=null,a._dropOptions=null,a._isDragging=!1,Z.Z.getDocument().onselectstart=a._onSelectStart||null}},trackerView:class sM extends J.View{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}_renderCore(){var e=super._renderCore();return this.element().addClass(this.addWidgetPrefix(im)),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){var e=this;e._positionChanged=function(t){var a=e.element();a&&a.hasClass(e.addWidgetPrefix(im))&&(a.css({top:t.top}),(0,b.QQ)(a,t.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}isVisible(){return Pa(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(e){(0,b.QQ)(this.element(),e)}}},controllers:{draggingHeader:class cM extends J.ViewController{init(){super.init(),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._columnHeadersView=this.getView("columnHeadersView"),this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._draggingHeaderView=this.getView("draggingHeaderView"),this._rowsView=this.getView("rowsView"),this._blockSeparatorView=this.getView("blockSeparatorView"),this._headerPanelView=this.getView("headerPanel"),this._columnChooserView=this.getView("columnChooserView");var e=()=>{if(this._draggingHeaderView){var t=[this._columnChooserView,this._columnHeadersView,this._headerPanelView];this._unsubscribeFromEvents(this._draggingHeaderView,t),this._subscribeToEvents(this._draggingHeaderView,t)}};this._columnHeadersView.renderCompleted.add(e),this._headerPanelView&&this._headerPanelView.renderCompleted.add(e),this._columnChooserView&&this._columnChooserView.renderCompleted.add(e)}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}_generatePointsByColumns(e){var t=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e),O.getPointsByColumns(e.columnElements,r=>t._pointCreated(r,e.columns,e.targetDraggingPanel.getName(),e.sourceColumn),e.isVerticalOrientation,e.startColumnIndex)}checkIsCustomGroupColumnPosition(e){for(var t=!0,a=0;a<e.columns.length;a+=1){var r=e.columns[a];if("expand"===r.command&&!t)return!0;r.command||(t=!1)}return!1}_pointCreated(e,t,a,r){var n,s=t[e.columnIndex],o=t[e.columnIndex-1],l="expand"===o?.command,d="expand"===s?.command&&"expand"!==o?.command,u=r&&!r.allowReordering,h=!s?.allowReordering&&!o?.allowReordering;switch(a){case"columnChooser":return!0;case"headers":if(u)return!0;if(!d)return l||h;if(this.isCustomGroupColumnPosition)return!1;for(;"expand"===(null===(n=t[e.columnIndex])||void 0===n?void 0:n.command);)e.columnIndex+=1;return!1;default:return 0===t.length}}_subscribeToEvents(e,t){var a=this;(0,S.S6)(t,(r,n)=>{if(n)for(var s,o=n.getRowCount?n.getRowCount():1,l=n.getName(),d=function(p,v){if(v){var g=(0,c.Z)(v),m=s[p];m&&n.allowDragging(m)&&(g.addClass(a.addWidgetPrefix(hl)),C.Z.on(g,(0,D.V4)(fe.BL,Ve),a.createAction(w=>{var I=w.event,A=(0,D.a0)(I);e.dragHeader({deltaX:A.x-(0,c.Z)(I.currentTarget).offset().left,deltaY:A.y-(0,c.Z)(I.currentTarget).offset().top,sourceColumn:m,index:m.index,columnIndex:p,columnElement:g,sourceLocation:l,draggingPanels:t,rowIndex:a._columnsController.getRowIndex(m.index,!0)})})),C.Z.on(g,(0,D.V4)(fe.pB,Ve),{that:e},a.createAction(e.moveHeader)),C.Z.on(g,(0,D.V4)(fe.ut,Ve),{that:e},a.createAction(e.dropHeader)))}},u=0;u<o;u++){var h=n.getColumnElements(u)||[];h.length&&(s=n.getColumns(u)||[],(0,S.S6)(h,d))}})}_unsubscribeFromEvents(e,t){var a=this;(0,S.S6)(t,(r,n)=>{if(n){var s=n.getColumnElements()||[];(0,S.S6)(s,(o,l)=>{var d=(0,c.Z)(l);C.Z.off(d,(0,D.V4)(fe.BL,Ve)),C.Z.off(d,(0,D.V4)(fe.pB,Ve)),C.Z.off(d,(0,D.V4)(fe.ut,Ve)),d.removeClass(a.addWidgetPrefix(hl))})}})}_getSeparator(e){return"headers"===e?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){var t=this._blockSeparatorView,a=this._columnsSeparatorView;this._animationColumnIndex=void 0,t&&t.hide(),"block"!==e&&a&&a.hide()}allowDrop(e){return this._columnsController.allowMoveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}drag(e){var{sourceIndex:t}=e,{sourceLocation:a}=e,{sourceColumnElement:r}=e,n=this._columnHeadersView,s=this._rowsView;r&&(r.css({opacity:.5}),"headers"===a&&(n&&n.setRowsOpacity(t,.5),s&&s.setRowsOpacity(t,.5)))}dock(e){var t=this,a=(0,_.Kn)(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:r}=e,{targetLocation:n}=e,s=t._getSeparator(n),o=a>=0;t._columnHeadersView.element().find(".".concat(nm)).toggleClass(t.addWidgetPrefix(am),"headers"!==r&&"headers"===n&&!o),s&&(t.allowDrop(e)&&o?"group"===n||"columnChooser"===n?t._animationColumnIndex!==a&&(t.hideSeparators(),s.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),t._animationColumnIndex=a,s.show(n)):(t.hideSeparators("block"),t._tablePositionController.update(e.posY),s.moveByX(e.posX-s.width()),s.show()):t.hideSeparators())}drop(e){var{sourceColumnElement:t}=e;if(t&&(t.css({opacity:""}),this._columnHeadersView.setRowsOpacity(e.sourceIndex,""),this._rowsView.setRowsOpacity(e.sourceIndex,""),this._columnHeadersView.element().find(".".concat(nm)).removeClass(this.addWidgetPrefix(am))),this.allowDrop(e)){var a=this._getSeparator(e.targetLocation);a&&a.hide(),this._columnsController.moveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}}},tablePosition:class hM extends J.ViewController{constructor(e){super(e),this.positionChanged=(0,le.Z)()}init(){super.init(),this._columnsResizerController=this.getController("columnsResizer"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView"),this._pagerView=this.getView("pagerView"),this._rowsView.resizeCompleted.add(()=>{if(this.option("allowColumnResizing")){var e=this._columnsResizerController._targetPoint;this.update(e?e.y:null)}})}update(e){var t={},a=this._columnHeadersView.element(),r=a&&a.offset(),n=r&&r.top||0,s=(0,_.$K)(e)?Math.abs(e-n):0,o=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),d=this._rowsView?this._rowsView.height()-l:0,u=this.component.getView("draggingHeaderView");t.height=o,(this._columnsResizerController.isResizing()||u.isDragging())&&(t.height+=d-s),null!==e&&a&&a.length&&(t.top=a[0].offsetTop+s),this.positionChanged.fire(t)}},columnsResizer:class uM extends J.ViewController{init(){this._subscribesToCallbacks=[],Pa(this)&&this._init()}dispose(){this._unsubscribes(),super.dispose()}optionChanged(e){super.optionChanged(e),"allowColumnResizing"===e.name&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}_isHeadersRowArea(e){if(this._columnHeadersView){var t=this._columnHeadersView.element();if(t){var a=t.offset().top,r=this._columnHeadersView.getHeadersRowHeight();return e>=a&&e<=a+r}}return!1}_isRtlParentStyle(){var e;return this.option("rtlEnabled")&&"rtl"===(null===(e=this._$parentContainer)||void 0===e?void 0:e.parent().css("direction"))}_pointCreated(e,t,a){var r=pl(this),n=this.option("rtlEnabled"),s=this._isRtlParentStyle(),o=r||!n||s?1:0;if(e.index>=o&&e.index<t+(r||n&&!s?0:1)){e.columnIndex-=o;var l=a[e.columnIndex]||{};return!(r?l.allowResizing&&(a[e.columnIndex+1]||{}).allowResizing:l.allowResizing)}return!0}_getTargetPoint(e,t,a){if(e)for(var r=0;r<e.length;r++)if((e[r].x!==e[0].x||!e[r+1]||e[r].x!==e[r+1].x)&&e[r].x-a<=t&&t<=e[r].x+a)return e[r];return null}_moveSeparator(e){var t,a=e.event,r=a.data,n=r._columnsSeparatorView.width(),s=pl(r),o=n/2,l=r._$parentContainer.offset(),d=l.left,u=(0,D.a0)(a),h=r.option("rtlEnabled"),p=this._isRtlParentStyle(),v=null===(t=r._draggingHeaderView)||void 0===t?void 0:t.isDragging();if(r._isResizing&&r._resizingInfo){if((d<=u.x||!s&&p)&&(!s||u.x<=d+(0,b.dz)(r._$parentContainer))&&r._updateColumnsWidthIfNeeded(u.x)){var g=r._columnHeadersView.getColumnElements().eq(r._resizingInfo.currentColumnIndex),m=g[0];if(m){var w=m.getBoundingClientRect().width;r._columnsSeparatorView.moveByX(g.offset().left+((s||p)&&h?0:w)),r._tablePositionController.update(r._targetPoint.y),a.preventDefault()}}}else v||(r._isHeadersRowArea(u.y)?(r._previousParentOffset&&(r._previousParentOffset.left!==l.left||r._previousParentOffset.top!==l.top)&&r.pointsByColumns(null),r._targetPoint=r._getTargetPoint(r.pointsByColumns(),u.x,n),r._previousParentOffset=l,r._isReadyResizing=!1,r._targetPoint?(r._columnsSeparatorView.changeCursor("col-resize"),r._columnsSeparatorView.moveByX(r._targetPoint.x-o),r._tablePositionController.update(r._targetPoint.y),r._isReadyResizing=!0,a.preventDefault()):(r._columnsSeparatorView.changeCursor(),r._columnsSeparatorView.moveByX(null))):(r.pointsByColumns(null),r._isReadyResizing=!1,r._columnsSeparatorView.changeCursor(),r._columnsSeparatorView.moveByX(null)))}_endResizing(e){var a=e.event.data;a._isResizing&&(a.pointsByColumns(null),a._resizingInfo=null,a._columnsSeparatorView.hide(),a._columnsSeparatorView.changeCursor(),a._trackerView.hide(),a._isReadyResizing=!1,a._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){var t=this._targetPoint.columnIndex,a=this._getNextColumnIndex(t),r=this._columnHeadersView.getHeaderElement(t),n=this._columnHeadersView.getHeaderElement(a);this._resizingInfo={startPosX:e,currentColumnIndex:t,currentColumnWidth:r&&r.length>0?(0,ne.l)(r[0]).width:0,nextColumnIndex:a,nextColumnWidth:n&&n.length>0?(0,ne.l)(n[0]).width:0}}_startResizing(e){var t=e.event,a=t.data,r=(0,D.a0)(t);if((0,D.z6)(t)&&(a._isHeadersRowArea(r.y)?(a._targetPoint=a._getTargetPoint(a.pointsByColumns(),r.x,10),a._targetPoint&&(a._columnsSeparatorView.moveByX(a._targetPoint.x-a._columnsSeparatorView.width()/2),a._isReadyResizing=!0)):a._isReadyResizing=!1),a._isReadyResizing){a._setupResizingInfo(r.x),a._isResizing=!0,a._tablePositionController.update(a._targetPoint.y),a._columnsSeparatorView.show(),a._trackerView.show();var n=a.component.getScrollable();n&&a._isRtlParentStyle()&&(a._scrollRight=(0,b.dz)(n.$content())-(0,b.dz)(n.container())-n.scrollLeft()),t.preventDefault(),t.stopPropagation()}this.isResizing()&&this._editorFactoryController.loseFocus()}_generatePointsByColumns(){var e=this,t=e._columnsController?e._columnsController.getVisibleColumns():[],a=e._columnHeadersView.getColumnElements(),r=[];a&&a.length>0&&(r=O.getPointsByColumns(a,n=>e._pointCreated(n,a.length,t))),e._pointsByColumns=r}_unsubscribeFromEvents(){this._moveSeparatorHandler&&C.Z.off(Z.Z.getDocument(),(0,D.V4)(ae.Z.move,Ve),this._moveSeparatorHandler),this._startResizingHandler&&C.Z.off(this._$parentContainer,(0,D.V4)(ae.Z.down,Ve),this._startResizingHandler),this._endResizingHandler&&(C.Z.off(this._columnsSeparatorView.element(),(0,D.V4)(ae.Z.up,Ve),this._endResizingHandler),C.Z.off(Z.Z.getDocument(),(0,D.V4)(ae.Z.up,Ve),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),C.Z.on(Z.Z.getDocument(),(0,D.V4)(ae.Z.move,Ve),this,this._moveSeparatorHandler),C.Z.on(this._$parentContainer,(0,D.V4)(ae.Z.down,Ve),this,this._startResizingHandler),C.Z.on(this._columnsSeparatorView.element(),(0,D.V4)(ae.Z.up,Ve),this,this._endResizingHandler),C.Z.on(Z.Z.getDocument(),(0,D.V4)(ae.Z.up,Ve),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){var t,a,r=this._rowsView.contentWidth(),n=this._resizingInfo,s=this._columnsController,o=s.getVisibleColumns(),l=this._columnsSeparatorView.width(),d=pl(this),u=d&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),h=this.option("rtlEnabled"),p=this._isRtlParentStyle(),v=o[n.currentColumnIndex],g=o[n.nextColumnIndex];function m($){return(0,_.HD)($)&&$.endsWith("%")}function w($,ce,Ie,$e){if($){var Te=$.width;Te&&($e=m(Te)),$e?(s.columnOption($.index,"visibleWidth",ce),s.columnOption($.index,"width","".concat((ce/Ie*100).toFixed(3),"%"))):(s.columnOption($.index,"visibleWidth",null),s.columnOption($.index,"width",ce))}}t=e-n.startPosX,(d||p)&&h&&(t=-t);var $,ce,Ie,$e,Te,De,je,{cellWidth:I,nextCellWidth:A}=(je={},(Te=n.currentColumnWidth+($=t))>=(De=v&&v.minWidth||l)?je.cellWidth=Te:(je.cellWidth=De,$e=!0),d&&((Ie=n.nextColumnWidth-$)>=(ce=g&&g.minWidth||l)?je.nextCellWidth=$e?n.nextColumnWidth-($+De-Te):Ie:(je.nextCellWidth=ce,je.cellWidth=n.currentColumnWidth+($-ce+Ie))),je);if(a=v.width!==I){if(s.beginUpdate(),I=Math.floor(I),r=function($,ce){var Ie=ce.every(Te=>Te.width);if(Ie){var $e=ce.reduce((Te,De)=>(m(De.width)&&(Te+=parseFloat(De.width)),Te),0);$e>100&&($=$/$e*100)}return $}(r,o),w(v,I,r,u),d)w(g,A=Math.floor(A),r,u);else{var F=this._columnHeadersView.getColumnWidths();F[n.currentColumnIndex]=I;var G=F.reduce(($,ce)=>$+ce,0)>this._rowsView.contentWidth();if(!G){var M=O.getLastResizableColumnIndex(o);M>=0&&s.columnOption(o[M].index,"visibleWidth","auto")}for(var k=0;k<F.length;k++)o[k]&&o[k]!==v&&void 0===o[k].width&&s.columnOption(o[k].index,"width",F[k])}if(s.endUpdate(),!d){this.component.updateDimensions();var U=this.component.getScrollable();if(U&&p){var ee=(0,b.dz)(U.$content())-(0,b.dz)(U.container())-this._scrollRight;U.scrollTo({left:ee})}}}return a}_subscribeToCallback(e,t){e.add(t),this._subscribesToCallbacks.push({callback:e,handler:t})}_unsubscribeFromCallbacks(){for(var e=0;e<this._subscribesToCallbacks.length;e++){var t=this._subscribesToCallbacks[e];t.callback.remove(t.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){var e=()=>{this._isResizing||this.pointsByColumns(null)},t=n=>{this._scrollLeft!==n.left&&(this._scrollLeft=n.left,this.pointsByColumns(null))};this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._columnHeadersView=this.getView("columnHeadersView"),this._trackerView=this.getView("trackerView"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._editorFactoryController=this.getController("editorFactory"),this._draggingHeaderView=this.component.getView("draggingHeaderView"),this._$parentContainer=this.component.$element(),this._subscribeToCallback(this._columnHeadersView.renderCompleted,e),this._subscribeToCallback(this._columnHeadersView.resizeCompleted,e),this._subscribeToCallback(this._columnsSeparatorView.renderCompleted,()=>{this._unsubscribeFromEvents(),this._subscribeToEvents()}),this._subscribeToCallback(this._rowsView.renderCompleted,()=>{this._rowsView.scrollChanged.remove(t),this._rowsView.scrollChanged.add(t)});var a=0!==this._rowsView.getScrollbarWidth(),r=0;this._subscribeToCallback(this._tablePositionController.positionChanged,n=>{if(this._isResizing&&!this._rowsView.isResizing){var s=0!==this._rowsView.getScrollbarWidth();a!==s||r&&r!==n.height?(a=s,r=n.height,this.component.updateDimensions()):this._rowsView.updateFreeSpaceRowHeight()}r=n.height})}isResizing(){return this._isResizing}pointsByColumns(e){if(void 0===e)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=e}}},extenders:{views:{rowsView:i=>class extends i{_needUpdateRowHeight(e){var t=this.option("wordWrapEnabled"),a=this._columnsResizerController.isResizing();return super._needUpdateRowHeight.apply(this,arguments)||e>0&&t&&a}}},controllers:{editorFactory:i=>class extends i{renderFocusOverlay(){if(!this._columnsResizerController.isResizing())return super.renderFocusOverlay.apply(this,arguments)}}}}};P.registerModule("columnsResizingReordering",ni);var _l=T(3802),vM=(i,e)=>i.length===e.length&&!Object.keys(i).some(t=>i[t]!==e[t]),gM=(i,e)=>(0,E.bY)(i,e,{maxDepth:4}),mM=(i,e,t,a)=>{var r=i,n=e;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return a(o,r)||(r=o,n=t(...r)),n}},fM={compareType:"reference"},dm=function(i){var{compareType:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fM,t=null;return function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];if(!t){var s=i(...r);return t=mM(r,s,i,"reference"===e?vM:gM),s}return t(...r)}},gl="rowsview",um="dx-data-row",CM="dx-group-row",wM="dx-header-row",SM="dx-master-detail-row",hm="dx-freespace-row",cm="dx-master-detail-cell",cn="dx-command-expand",pm="dx-command-select",_m="dx-command-edit",ml="[class^=dx-command]",pn="dx-cell-focus-disabled",vm="dx-state-focused",gm="dx-focused",fl="delete",_n='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled],.dx-state-readonly)\n',mm="".concat(_n,", .dx-dropdowneditor-icon"),wm="columnHeadersView",RM=["shift","control","alt"];function Ba(i){return i&&i.hasClass(CM)}function Cl(i){return i&&i.hasClass(SM)}function Fa(i){return i&&i.hasClass(um)}function Sm(i,e){return!i._isRowEditMode()&&e&&!e.hasClass(pm)&&e.hasClass(Nr)}function Ze(i){return(0,_.$K)(i)&&i.length>0}function wl(){return"desktop"!==N.Z.current().deviceType}function ym(i){return!!i.parent(".".concat(wM)).length}var KM={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:class HM extends J.ViewController{init(){var e,t,a;this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnResizerController=this.getController("columnsResizer"),this._memoFireFocusedCellChanged=dm(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=dm(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this.rowsViewFocusOutHandlerContext=null!==(e=this.rowsViewFocusOutHandlerContext)&&void 0!==e?e:this.rowsViewFocusOutHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()?(function mf(){C.Z.on(Z.Z.getDocument(),"visibilitychange",Gl)}(),null===(t=this._editorFactory)||void 0===t||t.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")):(Ul(),null===(a=this._editorFactory)||void 0===a||a.focused.remove(this.focusedHandlerWithContext)),this.initViewHandlers(),this.initDocumentHandlers()}dispose(){super.dispose(),this._resetFocusedView(),_l.dG.off(this._keyDownListener),C.Z.off(Z.Z.getDocument(),(0,D.V4)(ae.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),Ul()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable()&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}rowsViewFocusHandler(e){var t,a=(0,c.Z)(e.target),r=(0,c.Z)(e.relatedTarget).closest(this._rowsView.element()).length,n=a.is("a");if(e.relatedTarget&&n&&!r&&this._isEventInCurrentGrid(e)){var s=this._getFocusedCell();s=Ze(s)?s:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),a.closest(s).length||(e.preventDefault(),C.Z.trigger(s,"focus"))}var o=a.is("td"),l=(null!==(t=this.option("focusedRowIndex"))&&void 0!==t?t:-1)<0;o&&l&&this._updateFocusedCellPosition(a)}rowsViewFocusOutHandler(){this._toggleInertAttr(!1)}subscribeToRowsViewFocusEvent(){var e,t=null===(e=this._rowsView)||void 0===e?void 0:e.element();C.Z.on(t,"focusin",this.rowsViewFocusHandlerContext),C.Z.on(t,"focusout",this.rowsViewFocusOutHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e,t=null===(e=this._rowsView)||void 0===e?void 0:e.element();C.Z.off(t,"focusin",this.rowsViewFocusHandlerContext),C.Z.off(t,"focusout",this.rowsViewFocusOutHandlerContext)}renderCompleted(e){var t=this._rowsView.element(),a=!e||"refresh"===e.changeType,r=this._focusedView&&this._focusedView.name===this._rowsView.name,s=e&&("append"===e.changeType||"prepend"===e.changeType),l=(0,c.Z)(Z.Z.getRootNode(t.get&&t.get(0))).find(":focus"),d=!l.length||l.closest(t).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),r&&d&&(this._isNeedFocus?!s:this._isHiddenFocus&&a&&!e?.virtualColumnsScrolling)&&this._updateFocus(!0)}initViewHandlers(){var e,t;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),null===(t=null===(e=this._rowsView)||void 0===e?void 0:e.renderCompleted)||void 0===t||t.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){var e=Z.Z.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(t=>{var a=(0,c.Z)(t.event.target),r=this._isEventInCurrentGrid(t.event)&&a.closest(".".concat(this.addWidgetPrefix(gl))).length,n=a.closest(".".concat("dx-dropdowneditor-overlay")).length,s=!!this._columnResizerController&&this._columnResizerController.isResizing();r||n||s||(!(this._focusedView&&a.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),C.Z.off(e,(0,D.V4)(ae.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&C.Z.on(e,(0,D.V4)(ae.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){var e=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){var e=wl()?se.u:ae.Z.down,t=this._getRowsViewElement();this._pointerEventAction&&C.Z.off(t,(0,D.V4)(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){var e=wl()?se.u:ae.Z.down,t=this._getRowsViewElement(),a=".".concat(Vt," > td, .").concat(Vt);C.Z.on(t,(0,D.V4)(e,"dxDataGridKeyboardNavigation"),a,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){_l.dG.off(this._keyDownListener)}subscribeToKeyDownEvent(){var e=this._getRowsViewElement();this._keyDownListener=_l.dG.on(e,null,t=>this._keyDownHandler(t))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}optionChanged(e){switch(e.name){case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this.init(),e.handled=!0;break;case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isRowFocusType(){return"row"===this.focusType}isCellFocusType(){return"cell"===this.focusType}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")}setCellFocusType(){this.focusType="cell"}_keyDownHandler(e){var t,a=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;var r=this._processOnKeyDown(e),n=null===(t=this._editingController)||void 0===t?void 0:t.isEditing(),{originalEvent:s}=e;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!RM.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!r){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,n),r=!0;break;case"upArrow":case"downArrow":e.ctrl?En("rowsView",this,s):this._upDownKeysHandler(e,n),r=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),r=!0;break;case"space":r=this._spaceKeyHandler(e,n);break;case"A":(0,D.j1)(e.originalEvent)?(this._ctrlAKeyHandler(e,n),r=!0):r=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,n),r=!0;break;case"enter":this._enterKeyHandler(e,n),r=!0;break;case"escape":r=this._escapeKeyHandler(e,n);break;case"F":(0,D.j1)(e.originalEvent)?(this._ctrlFKeyHandler(e),r=!0):r=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),r=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(r=this._beginFastEditing(s,!0))}!r&&!this._beginFastEditing(s)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,a=!1),a&&s.stopPropagation()}}_processOnKeyDown(e){var{originalEvent:t}=e,a={handled:!1,event:t};return this.executeAction("onKeyDown",a),e.ctrl=t.ctrlKey,e.alt=t.altKey,e.shift=t.shiftKey,!!a.handled}_closeEditCell(){var e=(0,x.BH)();return setTimeout(()=>{this._editingController.closeEditCell().always(e.resolve)}),e}_leftRightKeysHandler(e,t){var a=this.getVisibleRowIndex(),r=e.originalEvent,n=this._focusedView&&this._focusedView.getRow(a),s=this._getDirectionCodeByKey(e.keyName),o=this._isFastEditingStarted();if((!t||o)&&Fa(n)){this.setCellFocusType(),o&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s);var d=this._getNextCell(s);Ze(d)&&this._arrowKeysHandlerFocusCell(r,d,s),r&&r.preventDefault()}}_upDownKeysHandler(e,t){var a,r,n=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(n),o=e.originalEvent,l="upArrow"===e.keyName,d=this._dataController.dataSource(),u=null===(r=null===(a=this._editingController)||void 0===a?void 0:a.isEditRowByIndex)||void 0===r?void 0:r.call(a,n),h=this._isFastEditingStarted();if((!u||!t||h)&&s&&!Cl(s)){if(h&&this._closeEditCell(),!this._navigateNextCell(o,e.keyName)&&this._isVirtualRowRender()&&l&&d&&!d.isLoading()){var v=(0,b.zp)(s);this._scrollBy(0,-v,this._focusedCellPosition.rowIndex-1,o)}o&&o.preventDefault()}}_pageUpDownKeyHandler(e){var t=this._dataController.pageIndex(),a=this._dataController.pageCount(),r=this.option("paging.enabled"),n="pageUp"===e.keyName,s=n?-1:1,o=this._rowsView.getScrollable();r&&!this._isVirtualScrolling()?(n?t>0:t<a-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(t+s),e.originalEvent.preventDefault()):o&&(0,b.Cr)(o.container())<(0,b.Cr)(o.$content())&&(this._scrollBy(0,(0,b.Cr)(o.container())*s),e.originalEvent.preventDefault())}_spaceKeyHandler(e,t){var a=this.getVisibleRowIndex(),r=(0,c.Z)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!t){var n="row"===this._getElementType(r)&&this.isRowFocusType()&&Fa(r);return r.hasClass(pm)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(n||r.parent().hasClass(um)||r.hasClass(this.addWidgetPrefix(gl)))&&(this._selectionController.changeItemSelection(a,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0)}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,t){!t&&!e.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_toggleInertAttr(e){}_tabKeyHandler(e,t){var a=this.option("editing"),r=e.shift?"previous":"next",n=(0,_.$K)(this._focusedCellPosition)&&!(0,_.Qr)(this._focusedCellPosition),s=e.shift&&this._isFirstValidCell(this._focusedCellPosition),o=!e.shift&&this._isLastValidCell(this._focusedCellPosition),l=!n||s||o,d=e.originalEvent.target,u=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(d,r)){if((0,c.Z)(u).addClass(vm),a&&d&&!l)if((0,c.Z)(d).hasClass(this.addWidgetPrefix(gl))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(r),t){if(!this._editingCellTabHandler(e,r))return}else this._targetCellTabHandler(e,r)&&(l=!0);if(l){var p=this._getFocusedCell().is(ml);o&&!p&&this._toggleInertAttr(!0),this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())}else e.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){var e=this.component.getScrollable();return e?e.scrollWidth()-(0,b.dz)(this._rowsView.element()):0}_isColumnRendered(e){var t=this._columnsController.getVisibleColumns(null,!0),a=this._columnsController.getVisibleColumns(),r=t[e],n=!1;return r&&(n=a.indexOf(r)>=0),n}_isFixedColumn(e){var a=this._columnsController.getVisibleColumns(null,!0)[e];return!!a&&!!a.fixed}_isColumnVirtual(e){var t=e-this._columnsController.getColumnIndexOffset(),r=this._columnsController.getVisibleColumns()[t];return!!r&&"virtual"===r.command}_processVirtualHorizontalPosition(e){var r,t=this.component.getScrollable(),a=this.getColumnIndex(),n=0,s=!1;switch(e){case"next":case"nextInRow":var o=this._getVisibleColumnCount();r=a+1,n=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===e?o===r||this._isFixedColumn(a)&&!this._isColumnRendered(r):o>r&&this._isFixedColumn(a)&&!this._isColumnRendered(r);break;case"previous":case"previousInRow":if(r=a-1,n=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===e){var l=this._columnsController.getColumnIndexOffset();s=r<0&&0===l||this._isFixedColumn(a)&&!this._isColumnRendered(r)}else s=r>=0&&this._isFixedColumn(a)&&!this._isColumnRendered(r)}s?t.scrollTo({left:n}):(0,_.$K)(r)&&(0,_.$K)(e)&&this._isColumnVirtual(r)&&0!==(n=this._getHorizontalScrollPositionOffset(e))&&t.scrollBy({left:n,top:0})}_getHorizontalScrollPositionOffset(e){var t=0,a=this._getCell(this._focusedCellPosition),r=a&&(0,b.Y_)(a);if(r>0){var n=this.option("rtlEnabled")?-1:1;t="nextInRow"===e||"next"===e?r*n:r*n*-1}return t}_editingCellTabHandler(e,t){var n,a=e.originalEvent.target,r=this._getCellElementFromTarget(a),s=e.originalEvent,o=this._getElementType(a);if(r.is(ml))return!this._targetCellTabHandler(e,t);this._updateFocusedCellPosition(r);var l=this._getNextCellByTabKey(s,t,o);if(!(r=l.$cell)||this._handleTabKeyOnMasterDetailCell(r,t))return!1;var d=this._getColumnByCellElement(r),u=r.parent(),h=this._getRowIndex(u),p=this._dataController.items()[h];if(d&&d.allowEditing){var g=!p||"data"===p.rowType;n=this._editingController.allowUpdating({row:p})?g:p&&p.isNewRow}return n||this._closeEditCell(),this._focusCell(r,!l.isHighlighted)&&(!this._isRowEditMode()&&n?this._editFocusedCell():this._focusInteractiveElement(r,e.shift)),!0}_targetCellTabHandler(e,t){var a=e.originalEvent,r=a.target,n=this._getElementType(r),s=this._getCellElementFromTarget(r),o="cell"===n&&this._getInteractiveElement(s,!e.shift),l=!1;if(!Sm(this,s)&&o?.length&&r!==o.get(0))l=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,c.Z)(r).hasClass(Vt)&&this._updateFocusedCellPosition(s),n=this._getElementType(r),this.isRowFocusType()&&(this.setCellFocusType(),"row"===n&&Fa((0,c.Z)(r))&&(r=this.getFirstValidCellInRow((0,c.Z)(r)),n=this._getElementType(r)));var d=this._getNextCellByTabKey(a,t,n);if(!(s=d.$cell)||!(s=this._checkNewLineTransition(a,s)))return!1;this._focusCell(s,!d.isHighlighted),Sm(this,s)||this._focusInteractiveElement(s,e.shift)}return l}_getNextCellByTabKey(e,t,a){var r=this._getNextCell(t,a),n=r&&this._fireFocusedCellChanging(e,r,!0);return!n||n.cancel?{}:(n.$newCellElement&&(r=n.$newCellElement),{$cell:r,isHighlighted:n.isHighlighted})}_checkNewLineTransition(e,t){var a=this.getVisibleRowIndex(),r=t.parent();if(a!==this._getRowIndex(r)){var n=this._getCellPosition(t),s=this._fireFocusedRowChanging(e,r);if(s.cancel)return;s.rowIndexChanged&&n&&(this.setFocusedColumnIndex(n.columnIndex),t=this._getFocusedCell())}return t}_enterKeyHandler(e,t){var a,r=this.getVisibleRowIndex(),n=this._dataController.getKeyByRowIndex(r),s=null===(a=this._focusedView)||void 0===a?void 0:a.getRow(r),o=this._getFocusedCell(),l=this.option("grouping.allowCollapsing")&&Ba(s),d=this.option("masterDetail.enabled")&&o?.hasClass(cn),u=o?.hasClass("dx-command-adaptive");if(l||d){var h=this._dataController.items()[r],p=h?.data&&!h.data.isContinuation;(0,_.$K)(n)&&p&&this._dataController.changeRowExpand(n)}else u?(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(n),this._updateFocusedCellPosition(o)):o?.hasClass(_m)||this._processEnterKeyForDataCell(e,t)}_processEnterKeyForDataCell(e,t){var a=this._getEnterKeyDirection(e),r=this._allowEditingOnEnterKey();t||!r&&a?this._handleEnterKeyEditingCell(e.originalEvent).done(()=>{"next"===a||"previous"===a?this._targetCellTabHandler(e,a):("upArrow"===a||"downArrow"===a)&&this._navigateNextCell(e.originalEvent,a)}):r&&this._startEditing(e)}_getEnterKeyDirection(e){var t=this.option("keyboardNavigation.enterKeyDirection"),a=e.shift;return"column"===t?a?"upArrow":"downArrow":"row"===t?a?"previous":"next":void 0}_handleEnterKeyEditingCell(e){var t=(0,x.BH)(),{target:a}=e,r=this._getCellElementFromTarget(a),n=this._isRowEditMode();return this._updateFocusedCellPosition(r),n?(this._focusEditFormCell(r),setTimeout(this._editingController.saveEditData.bind(this._editingController)),t.resolve()):(C.Z.trigger((0,c.Z)(a),"change"),this._closeEditCell().always(t.resolve),e.preventDefault()),t}_escapeKeyHandler(e,t){var a=this._getCellElementFromTarget(e.originalEvent.target);return!!t&&(this._updateFocusedCellPosition(a),this._isRowEditMode()?(this._focusEditFormCell(a),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault(),!0)}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){var t=this._headerPanel.getSearchTextEditor();t&&(t.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){var e=this._editingController.isEditing(),t=this.getVisibleRowIndex(),a=this._focusedView&&this._focusedView.getRow(t);!e&&Fa(a)&&this._startEditing()}_navigateNextCell(e,t){var a=this._getNextCell(t),r=this._getDirectionCodeByKey(t);return!(!a||!this._isCellValid(a))&&this._arrowKeysHandlerFocusCell(e,a,r)}_arrowKeysHandlerFocusCell(e,t,a){var n=this._fireFocusChangingEvents(e,t,"prevRow"===a||"nextRow"===a,!0);return t=n.$newCellElement,!(n.cancel||!this._isCellValid(t)||(this._focus(t,!n.isHighlighted),0))}_beginFastEditing(e,t){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(t)this._startEditing(e,fl);else{var{key:a}=e,r=e.keyCode||e.which,n=a||r&&String.fromCharCode(r);n&&(1===n.length||n===fl)&&this._startEditing(e,n)}return!0}_pointerEventHandler(e){var t,a=e.event||e,r=(0,c.Z)(a.currentTarget),n=null===(t=this._rowsView)||void 0===t?void 0:t.element(),s=r.parent(),o=(0,c.Z)(a.target).is(_n),l=!!(0,c.Z)(a.target).closest(".".concat("dx-revert-button")).length,d=r.hasClass(cn);this._isEventInCurrentGrid(a)&&(l||!this._isCellValid(r,!o)&&!d?r.is("td")&&this._resetFocusedCell():(r=this._isInsideEditForm(r)?(0,c.Z)(a.target):r,this._focusView(),(0,c.Z)(n).removeClass(vm),s.hasClass(hm)?(this._updateFocusedCellPosition(r),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell(r)?this._updateFocusedCellPosition(r):this._clickTargetCellHandler(a,r)))}_clickTargetCellHandler(e,t){var a=this._getColumnByCellElement(t),r=this._isCellEditMode();this.setCellFocusType();var n=this._fireFocusChangingEvents(e,t,!0);if(t=n.$newCellElement,n.cancel)this.setRowFocusType(),this.setFocusedRowIndex(n.prevRowIndex),this._editingController.isEditing()&&r&&this._closeEditCell();else{if(n.resetFocusedRow)return void this._focusController._resetFocusedRow();if(n.rowIndexChanged&&(t=this._getFocusedCell()),!n.isHighlighted&&!r&&this.setRowFocusType(),this._updateFocusedCellPosition(t),this._allowRowUpdating()&&r&&a&&a.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{t=this._getFocusedCell();var s=e&&(0,c.Z)(e.target).closest("".concat(mm,", td")),o=s&&s.not(t).is(mm),l=!!a&&!a.command&&t.hasClass(Nr);this._focus(t,!l&&(!n.isHighlighted||o),o)}}}_allowRowUpdating(){var e=this.getVisibleRowIndex(),t=this._dataController.items()[e];return this._editingController.allowUpdating({row:t},"click")}focus(e){var t,a=this.option("focusedRowEnabled"),r=this._isCellElement((0,c.Z)(e));e||(t=".dx-datagrid-rowsview .dx-row[tabindex]",a||(t+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),e=this.component.$element().find(t).first()),e&&this._focusElement((0,c.Z)(e),r)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!(0,_.$K)(this._focusedView)&&this._focusView()}_focusElement(e,t){var a=(0,c.Z)(this._getRowsViewElement()),r=e.closest(a),n=this.isRowFocusType(),s={};!r.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||Ba(e))&&(this.setCellFocusType(),e=(s=this._fireFocusChangingEvents(null,e,!0,t)).$newCellElement,n&&!s.isHighlighted&&this.setRowFocusType()),s.cancel||(this._focus(e,!s.isHighlighted),this._focusInteractiveElement(e)))}_getFocusedViewByElement(e){var t=this.getFocusedView(),a=t&&(0,c.Z)(t.element());return e&&0!==e.closest(a).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,t){if(e){var a=this._getInteractiveElement(e,t);O.focusAndSelectElement(this,a)}}_focus(e,t,a){var r=e&&!e.hasClass(Vt)?e.closest(".".concat(Vt)):e;if(!r||!function FM(i){return!i||i.hasClass(hm)||i.hasClass("dx-virtual-row")}(r)){var o,n=this._focusedView,s=n&&n.element();this._isHiddenFocus=t;var l=Ba(r)||function BM(i){return i&&i.hasClass("dx-datagrid-group-footer")}(r)||this.isRowFocusType();l?(o=r,n&&this.setFocusedRowIndex(this._getRowIndex(r))):this._isCellElement(e)&&(o=e,this._updateFocusedCellPosition(e)),o&&(s&&s.find(".dx-row[tabindex], .dx-row > td[tabindex]").not(o).removeClass(pn).removeClass(gm).removeAttr("tabindex"),C.Z.one(o,"blur",d=>{d.relatedTarget&&o.removeClass(pn).removeClass(gm)}),a||(this._applyTabIndexToElement(o),C.Z.trigger(o,"focus")),t?(o.addClass(pn),l&&e.addClass(pn)):this._editorFactory.focus(o))}}_updateFocus(e){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())this._editingController._focusEditingCell();else{var t=this._getFocusedCell(),a=this._editingController.isEditing();if((!this._isMasterDetailCell(t)||this._isRowEditMode())&&(this._hasSkipRow(t.parent())&&(t=this._getNextCell(this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow")),Ze(t)))if(t.is("td")||t.hasClass(this.addWidgetPrefix("edit-form-item"))){var n=t.is(ml),s=t.find(":focus"),o=Ze(s),l=this._getColumnByCellElement(t);if(!e&&n||!this._editorFactory.focus())!o&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(t,this._isHiddenFocus);else{if(n&&o)return void O.focusAndSelectElement(this,s);!o&&this._focus(t)}a&&!l?.showEditorAlways&&this._focusInteractiveElement.bind(this)(t)}else C.Z.trigger(t,"focus")}})}_getColumnByCellElement(e){var a=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset();return this._columnsController.getVisibleColumns(null,!0)[a]}_needFocusEditingCell(){var e=this._editingController.getEditMode()===Ti,t=this._editingController.getEditMode()===Xt,a=e&&this._editingController.hasChanges(),r=t&&this._editingController.isNewRowInEditMode(),n=this._getFocusedCell();return(0===n.children().length||n.find(co).length>0)&&(a||r)}_getFocusedCell(){return(0,c.Z)(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(e){var t;if("row"===this._getElementType(e)&&(0,_.$K)(null===(t=this._focusedCellPosition)||void 0===t?void 0:t.columnIndex)){var r=(0,c.Z)(e);this._focusedView&&Ba(r)&&this.setFocusedRowIndex(this._getRowIndex(r))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_updateFocusedCellPosition(e,t){var a=this._getCellPosition(e,t);return a&&(!e.length||a.rowIndex>=0&&a.columnIndex>=0)&&this.setFocusedCellPosition(a.rowIndex,a.columnIndex),a}_getFocusedColumnIndexOffset(e){var t=0,a=this._columnsController.getVisibleColumns()[e];return a&&a.fixed?t=this._getFixedColumnIndexOffset(a):e>=0&&(t=this._columnsController.getColumnIndexOffset()),t}_getFixedColumnIndexOffset(e){var t=function MM(i,e){return i.option("rtlEnabled")?!("right"===e.fixedPosition||(0,_.$K)(e.command)&&!(0,_.$K)(e.fixedPosition)):!(!(0,_.$K)(e.fixedPosition)||"left"===e.fixedPosition)}(this,e)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return t}_getCellPosition(e,t){var a,r=Ze(e)&&e.closest("tr");if(Ze(r)){var n=this._getRowIndex(r);return a=this._rowsView.getCellIndex(e,n),a+=this._getFocusedColumnIndexOffset(a),t&&(a=this._applyColumnIndexBoundaries(a="previous"===t?a-1:a+1)),{rowIndex:n,columnIndex:a}}}_focusCell(e,t){if(this._isCellValid(e))return this._focus(e,t),!0}_focusEditFormCell(e){e.hasClass(cm)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var t,a=this._getFocusedCell();Ze(a)&&a.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(t=this._focusedView)||void 0===t||t.renderFocusState({preventScroll:e})}restoreFocusableElement(e,t){var a,r,n=(0,_.$K)(e),s=this._rowsView.element(),{columnIndex:o}=this._focusedCellPosition,l=this._dataController.getRowIndexOffset();e=n?e:this._rowsView.getTopVisibleItemIndex()+l,n?(r=this._rowsView.getRow(e-l),!(a=this._fireFocusedRowChanging(t,r)).cancel&&a.rowIndexChanged&&(e=a.newRowIndex)):(this._editorFactory.loseFocus(),this._applyTabIndexToElement(s),C.Z.trigger(s,"focus")),(!n||!a.cancel)&&this.setFocusedCellPosition(e,o),n&&this._updateFocus()}_getNewPositionByCode(e,t,a){var{columnIndex:r}=e,{rowIndex:n}=e;if(void 0===e.rowIndex&&"next"===a)return{columnIndex:0,rowIndex:0};switch(a){case"nextInRow":case"next":r<this._getVisibleColumnCount()-1&&"row"!==t&&this._hasValidCellAfterPosition({columnIndex:r,rowIndex:n})?r++:!this._isLastRow(n)&&"next"===a&&(r=0,n++);break;case"previousInRow":case"previous":r>0&&"row"!==t&&this._hasValidCellBeforePosition({columnIndex:r,rowIndex:n})?r--:n>0&&"previous"===a&&(n--,r=this._getVisibleColumnCount()-1);break;case"upArrow":n=n>0?n-1:n;break;case"downArrow":n=this._isLastRow(n)?n:n+1}return{columnIndex:r,rowIndex:n}}setFocusedCellPosition(e,t){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(t)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e,t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.rowIndex;return!(0,_.$K)(t)||t<0?-1:t-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e,t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex;return(0,_.$K)(t)?t-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(e){var t=this._getVisibleColumnCount();return e<0?e=0:e>=t&&(e=t-1),e}_isCellByPositionValid(e){var t=(0,c.Z)(this._getCell(e));return this._isCellValid(t)}_isLastRow(e){var t=this._dataController;return this._isVirtualRowRender()?e>=t.getMaxRowIndex():e===Math.max(...t.items().map((r,n)=>!1!==r.visible?n:-1))}_isFirstValidCell(e){var t=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(t=t||!this._hasValidCellBeforePosition(e)),t}_hasValidCellBeforePosition(e){for(var{columnIndex:t}=e,a=!1;t>0&&!a;){var r={columnIndex:--t,rowIndex:e.rowIndex};a=this._isCellByPositionValid(r)}return a}_hasValidCellAfterPosition(e){for(var{columnIndex:t}=e,a=!1,r=this._getVisibleColumnCount();t<r-1&&!a;){var n={columnIndex:++t,rowIndex:e.rowIndex};a=this._isCellByPositionValid(n)}return a}_isLastValidCell(e){var t=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:a}=e,r={columnIndex:t,rowIndex:a},n=this._dataController.getVisibleRows(),s=n&&n[a];return!!this._isLastRow(a)&&(!!(("group"===s?.rowType||"groupFooter"===s?.rowType)&&e.columnIndex>0||e.columnIndex===this._getVisibleColumnCount()-1)||!this._isCellByPositionValid(r)&&this._isLastValidCell(r))}_isCellValid(e,t){if(Ze(e)){var a=e.parent(),r=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset(),n=this._getColumnByCellElement(e),s=this._getVisibleColumnCount(),o=this._editingController,l=Cl(a),d=n&&n.showWhenGrouped,u=n&&!e.hasClass(cn)&&Fa(a);if((i=>void 0!==i.attr("dx-drag-cell"))(e))return!1;if(this._isMasterDetailCell(e))return!0;if(s>r&&(!l&&n&&(!(0,_.$K)(n.groupIndex)||d&&u)||parseInt(e.attr("colspan"),10)>1)){var p=this._dataController.items(),v=this._rowsView.getRowIndex(a),g=p[v],m=o&&this._isCellEditMode()&&o.isEditing(),w=o&&o.isEditRow(v),I=w||m;return n.command?this._isLegacyNavigation()?!I&&"expand"===n.command:!m&&(w?"select"!==n.command:!I):(!m||!g||"data"===g.rowType)&&(!I||n.allowEditing||t)}}}getFirstValidCellInRow(e,t){for(var r,n,a=e.find("> td"),s=t=t||0;s<a.length;++s)if(r=a.eq(s),this._isCellValid(r)){n=r;break}return n}_getNextCell(e,t,a){var o,l,r=a||this._focusedCellPosition,n=this.isRowFocusType(),s=n||["next","previous"].includes(e);if(this._focusedView&&r){var d=this._getNewPositionByCode(r,t,e);o=(0,c.Z)(this._getCell(d));var u="previous"===e?this._isFirstValidCell(d):this._isLastValidCell(d);if(Ze(o)&&!this._isCellValid(o)&&this._isCellInRow(d,s)&&!u&&(o=n?this.getFirstValidCellInRow(o.parent(),d.columnIndex):this._getNextCell(e,"cell",d)),l=Ze(o)&&o.parent(),this._hasSkipRow(l)){var h=this._getRowIndex(l);if(this._isLastRow(h))return null;o=this._getNextCell(e,"row",{columnIndex:r.columnIndex,rowIndex:h})}return Ze(o)?o:null}return null}_startEditing(e,t){var a=this._focusedCellPosition,r=this.getVisibleRowIndex(),n=this.getVisibleColumnIndex(),s=this._dataController.items()[r],o=this._columnsController.getVisibleColumns()[n];this._isAllowEditing(s,o)&&(this._isRowEditMode()?this._editingController.editRow(r):a&&this._startEditCell(e,t))}_isAllowEditing(e,t){return this._editingController.allowUpdating({row:e})&&t&&t.allowEditing}_editFocusedCell(){var e=this.getVisibleRowIndex(),t=this.getVisibleColumnIndex();return this._editingController.editCell(e,t)}_startEditCell(e,t){this._fastEditingStarted=(0,_.$K)(t);var a=this._editFocusedCell(),r=(0,_.EY)(a);if(this._isFastEditingStarted()&&(r||a)){var s=r&&t===fl?"":t,o=r?a:(0,x.BH)().resolve(),l=this._rowsView.waitAsyncTemplates(!0);(0,x.gx)(o,l).done(()=>{this._editingCellHandler(e,s)})}}_editingCellHandler(e,t){var a,r,n=this._getFocusedCell().find(_n).eq(0),s=n.get(0);if(s){var o=(0,D.yM)(e,{type:"keydown",target:s}),l=(0,D.yM)(e,{type:"keypress",target:s}),d=(0,D.yM)(e,{type:"input",target:s});d.originalEvent&&(d.originalEvent=(0,D.yM)(d.originalEvent,{data:t})),null===(r=(a=s).select)||void 0===r||r.call(a),C.Z.trigger(n,o),o.isDefaultPrevented()||(C.Z.trigger(n,l),l.isDefaultPrevented())||setTimeout(()=>{var h=this._getKeyPressInputValue(n,t);n.val(h);var p=n.closest(".".concat("dx-widget"));C.Z.off(p,"focusout"),C.Z.one(p,"focusout",()=>{C.Z.trigger(n,"change")}),C.Z.trigger(n,d)},oe.Z.mozilla?25:0)}}_getKeyPressInputValue(e,t){var a=e.val();return"-"===t&&"-0"===a?"-0":t}_fireFocusChangingEvents(e,t,a,r){var n,s={},o=null!==(n=this._getCellPosition(t))&&void 0!==n?n:{};return this.isCellFocusType()&&((s=this._fireFocusedCellChanging(e,t,r)).cancel||(o.columnIndex=s.newColumnIndex,o.rowIndex=s.newRowIndex,r=s.isHighlighted,t=(0,c.Z)(this._getCell(o)))),!s.cancel&&a&&t&&((s=this._fireFocusedRowChanging(e,t.parent())).cancel||(o.rowIndex=s.newRowIndex,s.isHighlighted=r)),s.$newCellElement=(0,c.Z)(this._getCell(o)),s.$newCellElement.length||(s.$newCellElement=t),s}_fireFocusedCellChanging(e,t,a){var r=this.option("focusedColumnIndex"),n=this.option("focusedRowIndex"),s=this._getCellPosition(t),o=s?s.columnIndex:-1,l=s?s.rowIndex:-1,h={cellElement:t,prevColumnIndex:r,prevRowIndex:n,newColumnIndex:o,newRowIndex:l,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:e,isHighlighted:a||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",h),(h.newColumnIndex!==o||h.newRowIndex!==l)&&(h.$newCellElement=(0,c.Z)(this._getCell({columnIndex:h.newColumnIndex,rowIndex:h.newRowIndex}))),h.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:o}),h}_fireFocusedCellChanged(e){var t=this._rowsView.getCellIndex(e),a=e?.parent().data("options"),r=a?.key;this._memoFireFocusedCellChanged(r,t)}_memoFireFocusedCellChanged(e,t){var a=this._getFocusedCell(),r=this._getRowIndex(a?.parent()),n=Math.min(r-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(!this._editingController.isEditCell(n,t)){var o=this._dataController.items()[n],l=this._columnsController.getVisibleColumns()[t];this.executeAction("onFocusedCellChanged",{cellElement:a?(0,j.uD)(a):void 0,columnIndex:t,rowIndex:r,row:o,column:l})}}_fireFocusedRowChanging(e,t){var a=this._getRowIndex(t),r=this.option("focusedRowIndex"),n=this._dataController.loadingOperationTypes(),s={rowElement:t,prevRowIndex:r,newRowIndex:a,event:e,rows:this._dataController.getVisibleRows(),cancel:!1},o=n.sorting||n.grouping||n.filtering||n.paging;return!this._dataController||this._dataController.isLoading()&&o?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),!s.cancel&&s.newRowIndex!==a&&(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var e,t=this.option("focusedRowEnabled"),a=this.option("focusedRowKey"),r=null===(e=this._focusController)||void 0===e?void 0:e.getFocusedRowIndexByKey(a);!t||(0,_.$K)(a)&&r<0||this._memoFireFocusedRowChanged(a,r)}_memoFireFocusedRowChanged(e,t){var a=t-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:t<0?void 0:this._rowsView.getRowElement(a),rowIndex:t,row:t<0?void 0:this._dataController.getVisibleRows()[a]})}_isEventInCurrentGrid(e){return O.isElementInCurrentGrid(this,(0,c.Z)(e.target))}_isRowEditMode(){var e=this._editingController.getEditMode();return e===pt||e===Di}_isCellEditMode(){var e=this._editingController.getEditMode();return e===Ti||e===Xt}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(e,t){var a=e.find(_n).filter(":visible");return t?a.last():a.first()}_applyTabIndexToElement(e){var t,a=null!==(t=this.option("tabIndex"))&&void 0!==t?t:0;e.attr("tabindex",a)}_getCell(e){if(this._focusedView&&e){var t=this._dataController.getRowIndexOffset(),a=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],r=a&&a.fixed?this._getFixedColumnIndexOffset(a):this._columnsController.getColumnIndexOffset();return this._focusedView.getCell({rowIndex:e.rowIndex>=0?e.rowIndex-t:-1,columnIndex:e.columnIndex>=0?e.columnIndex-r:-1})}}_getRowIndex(e){var t=this._rowsView.getRowIndex(e);return t>=0&&(t+=this._dataController.getRowIndexOffset()),t}_hasSkipRow(e){var t=e&&e.get(0);return t&&("none"===t.style.display||Cl(e)&&!e.hasClass(this.addWidgetPrefix(Hr)))}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){var t;switch(e){case"upArrow":t="prevRow";break;case"downArrow":t="nextRow";break;case"leftArrow":t=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":t=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return t}_isVirtualScrolling(){var e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e}_isVirtualRowRender(){return this._isVirtualScrolling()||O.isVirtualRowRendering(this)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}_scrollBy(e,t,a,r){var n=this,s=this._rowsView.getScrollable();return n._focusedCellPosition&&s.on("scroll",function o(){s.off("scroll",o),setTimeout(n.restoreFocusableElement.bind(n,a,r))}),s.scrollBy({left:e,top:t})}_isInsideEditForm(e){var t=(0,c.Z)(e).closest(".".concat(this.addWidgetPrefix(Hr)));return t.length&&this.elementIsInsideGrid(t)}_isMasterDetailCell(e){var t=(0,c.Z)(e).closest(".".concat(cm));return t.length&&this.elementIsInsideGrid(t)}_processNextCellInMasterDetail(e,t){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,t){if(this._isMasterDetailCell(e)){this._updateFocusedCellPosition((0,c.Z)(e),t);var a=this._getNextCell(t,"row");return this._processNextCellInMasterDetail(a,(0,c.Z)(e)),!0}return!1}_getElementType(e){return(0,c.Z)(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,t){var{columnIndex:a}=e,r=this._getVisibleColumnCount();return t?a>=0&&a<=r-1:a>0&&a<r-1}_isCellElement(e){return e.length&&"TD"===e[0].tagName}_getCellElementFromTarget(e){var t=this._getElementType(e),a=(0,c.Z)(e);return"cell"===t?a.closest(".".concat(Vt," > td")):a.children().not(".".concat(cn)).first()}_getRowsViewElement(){var e;return null===(e=this._rowsView)||void 0===e?void 0:e.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(e,t){if(this._canceledCellPosition){var a=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===t;return this._canceledCellPosition=null,a}}updateFocusedRowIndex(){var e=this._dataController,t=this.getVisibleRowIndex(),a=e.items(),r=a.length?a.length-1:-1,n=e.getRowIndexOffset();r>=0&&t>r&&this.setFocusedRowIndex(r+n)}}},extenders:{views:{rowsView:i=>class extends i{_rowClick(e){var t=this._editingController.getEditRowIndex(),a=this._keyboardNavigationController.isKeyboardEnabled();t===e.rowIndex&&this._keyboardNavigationController.setCellFocusType(),(wl()||!a)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(e,!a),super._rowClick.apply(this,arguments)}_triggerPointerDownEventHandler(e,t){var{originalEvent:a}=e.event;if(a){var r=(0,c.Z)(a.target),n=this.getCellIndex(r),s=this._columnsController.getVisibleColumns()[n],o=this._dataController.items()[e.rowIndex];if(this._keyboardNavigationController._isAllowEditing(o,s)||t){var l=(0,D.yM)(a,{currentTarget:a.target});this._keyboardNavigationController._pointerEventHandler(l)}}}renderFocusState(e){super.renderFocusState(e);var{preventScroll:t,pageSizeChanged:a}=e??{},r=this.element();r&&!(0,Dr.si)(r)&&r.attr("tabindex",null),a&&this._keyboardNavigationController.updateFocusedRowIndex();var n=this._keyboardNavigationController.getVisibleRowIndex();(!(0,_.$K)(n)||n<0)&&(n=0);var s=this.getCellElements(n);this._keyboardNavigationController.isKeyboardEnabled()&&s?.length&&this.updateFocusElementTabIndex(s,t)}updateFocusElementTabIndex(e,t){var a=e.eq(0).parent();if(Ba(a))this._keyboardNavigationController._applyTabIndexToElement(a);else{var r=this._keyboardNavigationController.getColumnIndex();(!(0,_.$K)(r)||r<0)&&(r=0),this._updateFocusedCellTabIndex(e,r)}}_updateFocusedCellTabIndex(e,t){var a=this._keyboardNavigationController,r=e?e.length:-1,n=function(l){var d=a._isMasterDetailCell(l),u=a._isCellValid(l);if(!d&&u&&a._isCellElement(l))return a._applyTabIndexToElement(l),a.setCellFocusType(),!0},s=((i,e)=>i.filter((i=>["[".concat("aria-colindex",'="').concat(i+1,'"]'),":not([".concat("dx-drag-cell","])"),":not([aria-hidden=true])"].join(""))(e)).first())(e,t);if(s.length)n(s);else{r<=t&&(t=r-1);for(var o=t;o<r&&!n((0,c.Z)(e[o]));++o);}}renderDelayedTemplates(e){super.renderDelayedTemplates.apply(this,arguments),this.waitAsyncTemplates().done(()=>{this._renderFocusByChange(e)})}_renderFocusByChange(e){var t,{operationTypes:a,repaintChangesOnly:r}=e??{},{fullReload:n,pageSize:s}=a??{},o=!(null===(t=e?.changeTypes)||void 0===t||!t.find(d=>"insert"===d||"remove"===d));if(!e||!r||n||s||o){var l=function kM(i){var e=i.getController("keyboardNavigation");return!!e._isVirtualScrolling()&&i.option("focusedRowIndex")===e.getRowIndex()}(this);this.renderFocusState({preventScroll:l,pageSizeChanged:s})}}_renderCore(e){var t=super._renderCore.apply(this,arguments);return this._renderFocusByChange(e),t}_editCellPrepared(e){var t,a=this._getEditorInstance(e),r=null===(t=this._keyboardNavigationController)||void 0===t?void 0:t._isFastEditingStarted();a&&r&&this._handleEditingNavigationMode(a),super._editCellPrepared.apply(this,arguments)}_handleEditingNavigationMode(e){["downArrow","upArrow"].forEach(a=>{var r=e._supportedKeys()[a];e.registerKeyHandler(a,n=>{if("true"===e._input().attr("aria-expanded"))return r&&r.call(e,n)})}),e.registerKeyHandler("leftArrow",E.ZT),e.registerKeyHandler("rightArrow",E.ZT),"dxDateBox"===e.NAME&&e.option("useMaskBehavior")&&e.registerKeyHandler("enter",E.ZT)}_getEditorInstance(e){var t=e.find(".dx-texteditor").eq(0);return O.getWidgetInstance(t)}}},controllers:{editing:i=>class extends i{editCell(e,t){if(this._keyboardNavigationController._processCanceledEditCellPosition(e,t))return!1;var a=super.editCell(e,t);return a&&this._keyboardNavigationController.setupFocusedView(),a}editRow(e){var t=this._keyboardNavigationController.getVisibleColumnIndex(),a=this._columnsController.getVisibleColumns()[t];(a&&a.type||this.option("editing.mode")===Di)&&this._keyboardNavigationController._resetFocusedCell(),super.editRow(e)}addRow(e){return this._keyboardNavigationController.setupFocusedView(),this._keyboardNavigationController.setCellFocusType(),super.addRow.apply(this,arguments)}getFocusedCellInRow(e){var t=super.getFocusedCellInRow(e),a=this._dataController.getRowIndexOffset(),r=this._keyboardNavigationController._focusedCellPosition.rowIndex-a;if(this._keyboardNavigationController.isKeyboardEnabled()&&r===e){var n=this._keyboardNavigationController._getFocusedCell();Ze(n)&&!n.hasClass(_m)&&(t=n)}return t}_processCanceledEditingCell(){this.closeEditCell().done(()=>{this._keyboardNavigationController._updateFocus()})}closeEditCell(){var e=this._keyboardNavigationController;e._fastEditingStarted=!1;var t=super.closeEditCell.apply(this,arguments);return!!this._getFocusedElement().closest(".".concat(this.addWidgetPrefix("filter-row"))).length||e._updateFocus(),t}_getFocusedElement(){var e,t;return(0,c.Z)(null===(t=(e=this.component).element)||void 0===t?void 0:t.call(e)).find(":focus")}_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,super._delayedInputFocus.apply(this,arguments)}_isEditingStart(){var e=super._isEditingStart.apply(this,arguments);if(e&&!this._keyboardNavigationController._isNeedFocus){var t=this._keyboardNavigationController._getFocusedCell();this._keyboardNavigationController._focus(t,!0)}return e}},data:i=>class extends i{_correctRowIndices(e){var t=this._keyboardNavigationController._focusedCellPosition;if(super._correctRowIndices.apply(this,arguments),t&&t.rowIndex>=0){var a=e(t.rowIndex);a&&(t.rowIndex+=a,this._editorFactoryController.refocus())}}getMaxRowIndex(){var e=this.items().length-1,t=this.virtualItemsCount();return t&&(e+=this.getRowIndexOffset()+t.end),e}},adaptiveColumns:i=>class extends i{_showHiddenCellsInView(e){var{viewName:t,$cells:a,isCommandColumn:r}=e;super._showHiddenCellsInView.apply(this,arguments),t===wm&&!r&&a.each((n,s)=>{var o=(0,c.Z)(s);ym(o)&&o.attr("tabindex",0)})}_hideVisibleCellInView(e){var{viewName:t,$cell:a,isCommandColumn:r}=e;super._hideVisibleCellInView.apply(this,arguments),t===wm&&!r&&ym(a)&&a.removeAttr("tabindex")}_hideVisibleColumnInView(e){var{view:t,isCommandColumn:a,visibleIndex:r}=e;super._hideVisibleColumnInView({view:t,isCommandColumn:a,visibleIndex:r}),"rowsView"===t.name&&this._rowsView.renderFocusState(null)}},keyboardNavigation:i=>class extends i{rowsViewFocusHandler(e){var t=(0,c.Z)(e.target);this.translateFocusIfNeed(e,t),super.rowsViewFocusHandler(e)}rowsViewFocusOutHandler(){super.rowsViewFocusOutHandler(),this.makeScrollableFocusableIfNeed()}translateFocusIfNeed(e,t){var a=this.isScrollableNeedFocusable(),r=this._isFixedColumn(0);if(a&&r){var n=this._rowsView.getCell({rowIndex:0,columnIndex:0}),s=!!n.attr("tabindex"),o=t.is(this._$firstNotFixedCell);s&&o&&(e.preventDefault(),this._focus(n))}}renderCompleted(e){this._$firstNotFixedCell=this.getFirstNotFixedCell(),this.makeScrollableFocusableIfNeed(),super.renderCompleted(e)}_focus(e,t,a){super._focus(e,t,a),this.makeScrollableFocusableIfNeed()}_tabKeyHandler(e,t){var a,n=!((0,_.$K)(this._focusedCellPosition)&&!(0,_.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),s=this.isScrollableNeedFocusable();n&&s&&(null===(a=this._$firstNotFixedCell)||void 0===a||a.removeAttr("tabIndex")),super._tabKeyHandler(e,t)}getFirstNotFixedCell(){var e,a=this._columnsController.getVisibleColumns().findIndex(n=>{var{fixed:s}=n;return!s}),r=null===(e=this._editingController)||void 0===e?void 0:e.isEditing();return-1===a||r?void 0:this._rowsView._getCellElement(0,a)}isScrollableNeedFocusable(){var e,t,a=!!this._rowsView.getScrollable(),r=!(null===(e=this._rowsView._fixedTableElement)||void 0===e||!e.length),n=!(null===(t=this._rowsView.getCellElements(0))||void 0===t||!t.length);return a&&r&&n}makeScrollableFocusableIfNeed(){!this.isScrollableNeedFocusable()||!this._$firstNotFixedCell||this._applyTabIndexToElement(this._$firstNotFixedCell)}}}}};function xl(i,e,t,a){var r=0;if(i<e)for(;r<t.items.length;r++)xl(i+1,e,t.items[r],a);i===e&&a(t)}function vn(i,e){var t;if("map"in i)return i.map(e);var a=new Array(i.length);for(t in i)a[t]=e(i[t],t);return a}function UM(i){return i===lt.bG.count}function bm(i){var e=(0,q.vb)(i.selector),t=!("skipEmptyValues"in i)||i.skipEmptyValues,{aggregator:a}=i;if("string"==typeof a&&!(a=lt.bG[a]))throw xr.R0.Error("E4001",i.aggregator);return{selector:e,aggregator:a,skipEmptyValues:t}}P.registerModule("keyboardNavigation",KM);class YM{constructor(e){this._data=e.data,this._groupLevel=e.groupLevel||0,this._totalAggregates=vn(e.totalAggregates||[],bm),this._groupAggregates=vn(e.groupAggregates||[],bm),this._totals=[]}calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})}totalAggregates(){return this._totals}_aggregate(e,t,a){for(var r=t.items?t.items.length:0,n=0;n<e.length;n++)if(UM(e[n].aggregator))a[n]=(a[n]||0)+r;else for(var s=0;s<r;s++)this._accumulate(n,e[n],a,t.items[s])}_calculateTotals(e,t){if(0===e&&(this._totals=this._seed(this._totalAggregates)),e===this._groupLevel)this._aggregate(this._totalAggregates,t,this._totals);else for(var a=0;a<t.items.length;a++)this._calculateTotals(e+1,t.items[a]);0===e&&(this._totals=this._finalize(this._totalAggregates,this._totals))}_calculateGroups(e){var t=this._groupLevel,a=t+1,r=this._seed.bind(this,this._groupAggregates),n=this._aggregate.bind(this,this._groupAggregates),s=this._finalize.bind(this,this._groupAggregates);function o(l){l.aggregates=r(a-1),a===t?n(l,l.aggregates):xl(a,t,l,d=>{n(d,l.aggregates)}),l.aggregates=s(l.aggregates)}for(;--a>0;)xl(0,a,e,o)}_seed(e,t){return vn(e,a=>{var{aggregator:r}=a;return"seed"in r?(0,_.mf)(r.seed)?r.seed(t):r.seed:NaN})}_accumulate(e,t,a,r){var n=t.selector(r),{aggregator:s}=t,{skipEmptyValues:o}=t;o&&function GM(i){return i!=i||""===i||null==i}(n)||(a[e]=a[e]!=a[e]?n:s.step(a[e],n))}_finalize(e,t){return vn(e,(a,r)=>{var n=a.aggregator.finalize;return n?n(t[r]):t[r]})}}var Sl="groupFooter",Em="totalFooter",Im=function(i,e){var t=(0,c.Z)(i),{column:a}=e,{summaryItems:r}=e,n=[];if(!a.command&&r){for(var s=0;s<r.length;s++){var o=r[s],l=P.getSummaryText(o,e.summaryTexts);n.push((0,c.Z)("<div>").css("textAlign",o.alignment||a.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(o.cssClass).toggleClass("dx-datagrid-group-text-content","group"===e.rowType).text(l).attr("aria-label","".concat(a.caption," ").concat(l)))}t.append(n)}},Tm=function(i,e){var t=i.option("summary.texts")||{};return{totalItem:e.row,summaryItems:e.row.summaryCells[e.columnIndex],summaryTexts:t}},yl=function(i){return i.summary||i.aggregates||[]},bl=function(i){return i.option("summary.recalculateWhileEditing")},ak=function i(e,t,a,r){r=r||[];for(var n=0;n<e.length;n++)r.push(e[n].key),1===t?a(r,e[n].items):i(e[n].items,t-1,a,r),r.pop()},rk=function i(e,t,a){return a?i(e,t.map(r=>({items:[r]}),a-1)):e.concat(t)},nk=function i(e,t,a){return a?e.map(r=>{var n={},s=i(r.items||[],t,a-1);return Object.defineProperty(n,"aggregates",{get:()=>r.aggregates,set:o=>{r.aggregates=o}}),(0,f.l)(n,r,{items:s})}):e.filter(r=>t.indexOf(r)<0)},sk=function i(e,t,a){if(!e||!t.length)return e;var s,n=a[0];return t[0]&&n&&n.length&&(s=(0,Gt.Z)(e),(0,S.S6)(n,function(o){s=0===o?s.sortBy(this.selector,this.desc):s.thenBy(this.selector,this.desc)}),s.enumerate().done(o=>{e=o})),t=t.slice(1),a=a.slice(1),t.length&&a.length&&(0,S.S6)(e,function(){this.items=i(this.items,t,a)}),e},Dm=function(i,e,t){var a=t&&t.sortByGroups&&t.sortByGroups();return a&&a.length?sk(i,e,a):i},Am=function(i,e,t,a){var r;if(bl(i)){var n=i._editingController;if(n){var s=n.getInsertedData();s.length&&(t=rk(t,s,a));var o=n.getRemovedData();o.length&&(t=nk(t,o,a))}}return e&&(r=new YM({totalAggregates:e.totalAggregates,groupAggregates:e.groupAggregates,data:t,groupLevel:a})).calculate(),r?r.totalAggregates():[]};ar.extend(i=>class extends i{init(){super.init.apply(this,arguments),this._editingController=this.getController("editing"),this._totalAggregates=[],this._summaryGetter=E.ZT}summaryGetter(e){if(!arguments.length)return this._summaryGetter;(0,_.mf)(e)&&(this._summaryGetter=e)}summary(e){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return e}}totalAggregates(){return this._totalAggregates}isLastLevelGroupItemsPagingLocal(){var t=this.summary()?.sortByGroups();return t?.length}sortLastLevelGroupItems(e,t,a){var r=ua.Z.multiLevelGroup((0,Gt.Z)(e),t).toArray(),n=[];return a.forEach(s=>{ak(r,t.length,(o,l)=>{s.toString()===o.toString()&&(n=n.concat(l))})}),n}_customizeRemoteOperations(e){var t=this.summary();t&&(e.remoteOperations.summary?(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)&&(e.storeLoadOptions.group&&(e.remoteOperations.grouping?e.storeLoadOptions.groupSummary=t.groupAggregates:t.groupAggregates.length&&(e.remoteOperations.paging=!1)),e.storeLoadOptions.totalSummary=t.totalAggregates):(t.totalAggregates.length||t.groupAggregates.length&&e.storeLoadOptions.group)&&(e.remoteOperations.paging=!1)),super._customizeRemoteOperations.apply(this,arguments),e.cachedData.extra?.summary&&!e.isCustomLoading&&(e.storeLoadOptions.totalSummary=void 0)}_handleDataLoadedCore(e){var t,a,r=(0,lt.G5)(e.storeLoadOptions.group||e.loadOptions.group||[]),n=e.remoteOperations||{},s=this.summaryGetter()(n);if(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)if(n.summary)!n.paging&&r.length&&s&&(n.grouping||Am(this,{groupAggregates:s.groupAggregates},e.data,r.length),e.data=Dm(e.data,r,s));else if(!n.paging&&s){var o=e.operationTypes||{};if(!Object.keys(o).some(u=>o[u])||null===(a=null===(t=e.cachedData)||void 0===t?void 0:t.extra)||void 0===a||!a.summary||r.length&&s.groupAggregates.length){var d=Am(this,s,e.data,r.length);e.extra=(0,_.PO)(e.extra)?e.extra:{},e.extra.summary=d,e.cachedData&&(e.cachedData.extra=e.extra)}e.data=Dm(e.data,r,s)}e.isCustomLoading||(this._totalAggregates=e.extra&&e.extra.summary||this._totalAggregates),super._handleDataLoadedCore(e)}}),P.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:y.Z.format("dxDataGrid-summarySum"),sumOtherColumn:y.Z.format("dxDataGrid-summarySumOtherColumn"),min:y.Z.format("dxDataGrid-summaryMin"),minOtherColumn:y.Z.format("dxDataGrid-summaryMinOtherColumn"),max:y.Z.format("dxDataGrid-summaryMax"),maxOtherColumn:y.Z.format("dxDataGrid-summaryMaxOtherColumn"),avg:y.Z.format("dxDataGrid-summaryAvg"),avgOtherColumn:y.Z.format("dxDataGrid-summaryAvgOtherColumn"),count:y.Z.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:class ok extends Gi{_getRows(){return this._dataController.footerItems()}_getCellOptions(e){return(0,f.l)(super._getCellOptions(e),Tm(this,e))}_renderCellContent(e,t){Im(e,t),super._renderCellContent.apply(this,arguments)}_renderCore(e){var t=!1,a=this._dataController.footerItems()[0];(!e||!e.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),t=!0),a&&a.summaryCells&&a.summaryCells.length&&(this._updateContent(this._renderTable({change:e}),e),t&&this._updateScrollLeftPosition())}_updateContent(e,t){return t&&"update"===t.changeType&&t.columnIndices?this.waitAsyncTemplates().done(()=>{var a=this.getTableElement().find(".dx-row"),r=e.find(".dx-row");this._updateCells(a,r,t.columnIndices[0])}):super._updateContent.apply(this,arguments)}_rowClick(e){var t=this._dataController.footerItems()[e.rowIndex]||{};this.executeAction("onRowClick",(0,f.l)({},e,t))}_columnOptionChanged(e){var{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&super._columnOptionChanged(e)}_handleDataChanged(e){var{changeType:t}=e;"update"===e.changeType&&e.repaintChangesOnly?e.totalColumnIndices?e.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[e.totalColumnIndices]}):this.render():("refresh"===t||"append"===t||"prepend"===t)&&this.render()}_createRow(e){var t=super._createRow.apply(this,arguments);return e.rowType===Em&&(t.addClass("dx-footer-row"),t.addClass("dx-cell-focus-disabled"),t.attr("tabindex",0)),t}getHeight(){return this.getElementHeight()}isVisible(){return!!this._dataController.footerItems().length}}},extenders:{controllers:{data:i=>class extends i{_isDataColumn(e){return e&&(!(0,_.$K)(e.groupIndex)||e.showWhenGrouped)}_isGroupFooterVisible(){for(var e=this.option("summary.groupItems")||[],t=0;t<e.length;t++){var a=e[t],r=this._columnsController.columnOption(a.showInColumn||a.column);if(a.showInGroupFooter&&this._isDataColumn(r))return!0}return!1}_processGroupItems(e,t,a){var r=a&&a.data,n=super._processGroupItems.apply(this,arguments);return a&&(void 0===a.isGroupFooterVisible&&(a.isGroupFooterVisible=this._isGroupFooterVisible()),r&&r.items&&a.isGroupFooterVisible&&(a.collectContinuationItems||!r.isContinuationOnNextPage)&&n.push({rowType:Sl,key:a.path.slice(),data:r,groupIndex:a.path.length-1,values:[]})),n}_processGroupItem(e,t){var a=this;if(t.summaryGroupItems||(t.summaryGroupItems=a.option("summary.groupItems")||[]),"group"===e.rowType){var r=-1,n=-1;(0,S.S6)(t.visibleColumns,function(s){e.groupIndex===this.groupIndex&&(r=this.index),s>0&&"expand"===t.visibleColumns[s-1].command&&"expand"!==this.command&&(n=this.index)}),e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,yl(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter?-1:s.alignByColumn&&o&&!(0,_.$K)(o.groupIndex)&&o.index!==n?o.index:r,!0)}return e.rowType===Sl&&(e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,yl(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter&&a._isDataColumn(o)?o.index:-1)),e}_calculateSummaryCells(e,t,a,r,n){var s=this,o=[],l={};return(0,S.S6)(e,(d,u)=>{var h=s._columnsController.columnOption(u.column),p=u.showInColumn&&s._columnsController.columnOption(u.showInColumn)||h,v=r(u,p);if(v>=0){l[v]||(l[v]=[]);var m,g=t[d];g==g&&((0,_.$K)(u.valueFormat)?m=u.valueFormat:"count"!==u.summaryType&&(m=P.getFormatByDataType(h&&h.dataType)),l[v].push((0,f.l)({},u,{value:(0,_.HD)(g)&&h&&h.deserializeValue?h.deserializeValue(g):g,valueFormat:m,columnCaption:h&&h.index!==v?h.caption:void 0})))}}),(0,_.Qr)(l)||a.forEach((d,u)=>{var h=a[u-1];o.push(l[!n||"expand"!==h?.command&&"expand"!==d.command?d.index:h?.index]||[])}),o}_getSummaryCells(e,t){var a=this;return a._calculateSummaryCells(e,t,a._columnsController.getVisibleColumns(),(n,s)=>a._isDataColumn(s)?s.index:-1)}_updateItemsCore(e){var t,a=this._dataSource,r=this._footerItems,n=r&&r[0]&&r[0].summaryCells,s=this.option("summary.totalItems");if(this._footerItems=[],a&&s&&s.length){var o=a.totalAggregates();t=this._getSummaryCells(s,o),e&&e.repaintChangesOnly&&n&&(e.totalColumnIndices=t.map((l,d)=>JSON.stringify(l)!==JSON.stringify(n[d])?d:-1).filter(l=>l>=0)),t.length&&this._footerItems.push({rowType:Em,summaryCells:t})}super._updateItemsCore(e)}_prepareUnsavedDataSelector(e){if(bl(this)){var t=this._editingController;if(t)return function(a){return a=t.getUpdatedData(a),e(a)}}return e}_prepareAggregateSelector(e,t){return e=this._prepareUnsavedDataSelector(e),"avg"===t||"sum"===t?function(a){var r=e(a);return(0,_.$K)(r)?Number(r):r}:e}_getAggregates(e,t){var a=this,r=a.option("summary.calculateCustomSummary"),n=a.option("summary.skipEmptyValues");return(0,S.UI)(e||[],s=>{var o=this._columnsController.columnOption(s.column),l=o&&o.calculateCellValue?o.calculateCellValue.bind(o):(0,q.vb)(o?o.dataField:s.column),d=s.summaryType||"count",u=(0,_.$K)(s.skipEmptyValues)?s.skipEmptyValues:n;if(t)return{selector:s.column,summaryType:d};var h=a._prepareAggregateSelector(l,d);if("custom"===d){r||(Q.Z.log("E1026"),r=function(){});var p={component:a.component,name:s.name};r(p),p.summaryProcess="calculate",d={seed:v=>(p.summaryProcess="start",p.totalValue=void 0,p.groupIndex=v,delete p.value,r(p),p.totalValue),step:(v,g)=>(p.summaryProcess="calculate",p.totalValue=v,p.value=g,r(p),p.totalValue),finalize:v=>(p.summaryProcess="finalize",p.totalValue=v,delete p.value,r(p),p.totalValue)}}return{selector:h,aggregator:d,skipEmptyValues:u}})}_addSortInfo(e,t,a,r){if(t){var{groupIndex:n}=t;r=r||t.sortOrder,(0,_.$K)(n)&&(e[n]=e[n]||[],e[n].push({selector:a,desc:"desc"===r}))}}_findSummaryItem(e,t){var a=-1;return(0,_.$K)(t)&&(0,S.S6)(e||[],function(r){if(this.name===t||r===t||this.summaryType===t||this.column===t||function(n){var{summaryType:s}=n,{column:o}=n;return s&&o&&"".concat(s,"_").concat(o)}(this)===t)return a=r,!1}),a}_getSummarySortByGroups(e,t){var a=this,r=a._columnsController,n=r.getGroupColumns(),s=[];if(t&&t.length)return(0,S.S6)(e||[],function(){var{sortOrder:o}=this,{groupColumn:l}=this,d=a._findSummaryItem(t,this.summaryItem);if(!(d<0)){var u=function(h){return yl(h)[d]};(0,_.$K)(l)?(l=r.columnOption(l),a._addSortInfo(s,l,u,o)):(0,S.S6)(n,(h,p)=>{a._addSortInfo(s,p,u,o)})}}),s}_createDataSourceAdapterCore(e,t){var a=this,r=super._createDataSourceAdapterCore(e,t);return r.summaryGetter(n=>a._getSummaryOptions(n||t)),r}_getSummaryOptions(e){var t=this,a=t.option("summary.groupItems"),r=t.option("summary.totalItems"),n=t.option("sortByGroupSummaryInfo"),s=t._getAggregates(a,e&&e.grouping&&e.summary),o=t._getAggregates(r,e&&e.summary);if(s.length||o.length)return{groupAggregates:s,totalAggregates:o,sortByGroups:function(){return t._getSummarySortByGroups(n,a)}}}publicMethods(){var e=super.publicMethods();return e.push("getTotalSummaryValue"),e}getTotalSummaryValue(e){var t=this._findSummaryItem(this.option("summary.totalItems"),e),a=this._dataSource.totalAggregates();if(a.length&&t>-1)return a[t]}optionChanged(e){("summary"===e.name||"sortByGroupSummaryInfo"===e.name)&&(e.name="dataSource"),super.optionChanged(e)}init(){this._footerItems=[],super.init()}footerItems(){return this._footerItems}},editing:i=>class extends i{_refreshSummary(){bl(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})}_addChange(e){var t=super._addChange.apply(this,arguments);return e.type&&this._refreshSummary(),t}_removeChange(){var e=super._removeChange.apply(this,arguments);return this._refreshSummary(),e}cancelEditData(){var e=super.cancelEditData.apply(this,arguments);return this._refreshSummary(),e}}},views:{rowsView:i=>class extends i{_createRow(e){var t=super._createRow.apply(this,arguments);return e&&t.addClass(e.rowType===Sl?"dx-datagrid-group-footer":""),t}_renderCells(e,t){super._renderCells.apply(this,arguments),"group"===t.row.rowType&&t.row.summaryCells&&t.row.summaryCells.length&&this._renderGroupSummaryCells(e,t)}_hasAlignByColumnSummaryItems(e,t){return!(0,_.$K)(t.columns[e].groupIndex)&&t.row.summaryCells[e].length}_getAlignByColumnCellCount(e,t){for(var a=0,r=1;r<e;r++)a=this._hasAlignByColumnSummaryItems(t.row.summaryCells.length-r,t)?r:a;return a}_renderGroupSummaryCells(e,t){var a=e.children().last(),r=Number(a.attr("colSpan"))||1,n=this._getAlignByColumnCellCount(r,t);this._renderGroupSummaryCellsCore(a,t,r,n)}_renderGroupSummaryCellsCore(e,t,a,r){if(r>0){e.attr("colSpan",a-r);for(var n=0;n<r;n++){var s=t.columns.length-r+n;this._renderCell(e.parent(),(0,f.l)({column:t.columns[s],columnIndex:this._getSummaryCellIndex(s,t.columns)},t))}}}_getSummaryCellIndex(e,t){return e}_getCellTemplate(e){return!e.column.command&&!(0,_.$K)(e.column.groupIndex)&&e.summaryItems&&e.summaryItems.length?Im:super._getCellTemplate(e)}_getCellOptions(e){var t=super._getCellOptions(e);return e.row.summaryCells?(0,f.l)(t,Tm(this,e)):t}}}}});var ck=T(7256),Rm="content",Ma="content-fixed",Om="dx-first-cell",Vm="dx-state-hover",Lm="dx-col-fixed",El="dx-pointer-events-none",si="transparent",Pm="dx-group-row",ft=function(i){var e=-1;return(0,S.S6)(i,(t,a)=>{if(a.command===si)return e=t,!1}),e},Bm=function(i,e,t){var a=0;if(i&&e&&t)for(var r=0;r<i.length;r++)i[r].command===si?a+=i[r].colspan:(e[a]<t[r]&&(e[a]=t[r]),a++);return e},Il=i=>class extends i{init(){super.init(),this._isFixedTableRendering=!1,this._isFixedColumns=!1}_createCol(e){return super._createCol(e).toggleClass(Lm,!(!this._isFixedTableRendering||!(e.fixed||e.command&&e.command!==si)))}isIndicesArray(e){return Array.isArray(e)&&e.length>0}_correctColumnIndicesForFixedColumns(e,t){var a,r=t?.columnIndices;if(this.isIndicesArray(r)){var n=ft(e),s=e[n].colspan,o=n+s,l=null===(a=t?.items)||void 0===a?void 0:a.map(d=>{var{rowType:u}=d;return u});t.columnIndices=r.map((d,u)=>this.isIndicesArray(d)?l&&"group"===l[u]?[...d]:d.reduce((p,v)=>{switch(!0){case v<n:p.push(v);break;case v>=o:p.push(v-s+1)}return p},[]):d)}}_partialUpdateFixedTable(e,t){var a=this._fixedTableElement,r=this._getRowElementsCore(a);a.children("colgroup").replaceWith(this._createColGroup(e));for(var s=0;s<t.length;s++)this._partialUpdateFixedRow((0,c.Z)(r[s]),e,t[s])}_partialUpdateFixedRow(e,t,a){var r,d,n=e.get(0).childNodes,s=ft(t),o=t[s],u=this._columnsController.getColumnIndexOffset()+1,{colspan:h}=o;if(e.hasClass("dx-master-detail-row"))n[0].setAttribute("colspan",null===(r=this._columnsController.getVisibleColumns())||void 0===r?void 0:r.length);else{if(e.hasClass(Pm))if(d=this._getGroupCellOptions({row:a,columns:this._columnsController.getVisibleColumns()}),a.summaryCells.length>0){var v=this._getAlignByColumnCellCount(d.colspan,{columns:this._columnsController.getVisibleColumns(),row:a,isFixed:!0});h=d.colspan-v}else h=d.colspan-Math.max(0,n.length-(d.columnIndex+2));for(var g=0;g<n.length;g++){var m=d?g===d.columnIndex+1:g===s;n[g].setAttribute("aria-colindex",u),m?(n[g].setAttribute("colspan",h),u+=h):u++}}}_renderTable(e){var t,a,r,n=this.getFixedColumns();this._isFixedColumns=!!n.length;var s=super._renderTable(e);if(this._isFixedColumns){var o=e?.change,l=this._getRowElements(this._fixedTableElement),d=o?.virtualColumnsScrolling&&l.length===(null===(t=o?.items)||void 0===t?void 0:t.length);if(this._isFixedTableRendering=!0,d&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(n,null===(a=e?.change)||void 0===a?void 0:a.items),this._isFixedTableRendering=!1;else{var u=o?.columnIndices;this._correctColumnIndicesForFixedColumns(n,o),r=this._createTable(n),this._renderRows(r,(0,f.l)({},e,{columns:n})),this._updateContent(r,o,!0),u&&(o.columnIndices=u),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return s}_renderRow(e,t){var a,{cells:r}=t.row;if(super._renderRow.apply(this,arguments),this._isFixedTableRendering&&r&&r.length){a=0;var n=t.row.cells||[];r=r.slice(),t.row.cells=r;for(var s=0;s<n.length;s++)n[s].column&&n[s].column.command===si?a=(n[s].column.colspan||1)-1:r[s+a]=n[s]}}_createCell(e){var s,o,l,{column:t}=e,a=t&&t.command,{rowType:r}=e,n=super._createCell.apply(this,arguments);(this._isFixedTableRendering||"filter"===r)&&(o=(s=this.getFixedColumns())[(l=ft(s))-1]),this._isFixedTableRendering?a===si&&(n.addClass(El).toggleClass(Om,0===l||o&&"expand"===o.command).toggleClass("dx-last-cell",s.length&&l===s.length-1),"freeSpace"!==r&&O.setEmptyText(n)):"filter"===r&&n.toggleClass(Om,e.columnIndex===l);var d=this.option("rowAlternationEnabled")&&e.isAltRow,u="multiple"===this.option("selection.mode")&&0===e.columnIndex&&"header"===e.rowType;return oe.Z.mozilla&&e.column.fixed&&"group"!==e.rowType&&!d&&!u&&n.addClass(Lm),n}_getContent(e){var t;return e?null===(t=this._fixedTableElement)||void 0===t?void 0:t.parent():super._getContent.apply(this,arguments)}_wrapTableInScrollContainer(e,t){var a=super._wrapTableInScrollContainer.apply(this,arguments);return(this._isFixedTableRendering||t)&&a.addClass(this.addWidgetPrefix(Ma)),a}_renderCellContent(e,t){var a,r,n,{column:s}=t,o=this._isFixedTableRendering,l="group"===t.rowType&&(0,_.$K)(s.groupIndex);if(o&&l&&!s.command&&!s.groupCellTemplate&&e.css("pointerEvents","none"),!o&&this._isFixedColumns){if(n=s.fixed||s.command&&!1!==s.fixed,l&&(n=!1,t.row.summaryCells&&t.row.summaryCells.length)){var d=this._columnsController.getVisibleColumns(),u=null!==(r=null===(a=this._getAlignByColumnCellCount)||void 0===a?void 0:a.call(this,s.colspan,{columns:d,row:t.row,isFixed:!0}))&&void 0!==r?r:0;if(u>0){var h=ft(this._columnsController.getFixedColumns());n=d.length-u<h}}if(n){if(s.command&&"buttons"!==s.type||"group"===t.rowType)return void e.html("&nbsp;").addClass(s.cssClass);e.addClass("dx-hidden-cell")}}s.command!==si&&super._renderCellContent.apply(this,arguments)}_getCellElementsCore(e){var t=super._getCellElementsCore.apply(this,arguments),a=t?.parent().hasClass(Pm),r="columnHeadersView"===this.name?e:void 0;if(this._fixedTableElement&&t){var n=this.getFixedColumns(r),s=this._getRowElements(this._fixedTableElement).eq(e).children("td");(0,S.S6)(s,(o,l)=>{if(a)t[o]&&"hidden"!==l.style.visibility&&(t[o]=l);else{var d=n[o];if(d)if(d.command===si)s.eq(o).hasClass("dx-master-detail-cell")&&(t[o]=l||t[o]);else{var u=this._columnsController.getVisibleIndexByColumn(d,r);t[u]=l||t[u]}}})}return t}getColumnWidths(e){var t=super.getColumnWidths(),a=this.getFixedColumns(),r=this._fixedTableElement&&t.length?super.getColumnWidths(this._fixedTableElement):void 0;return Bm(a,t,r)}getTableElement(e){return(e=this._isFixedTableRendering||e)?this._fixedTableElement:super.getTableElement()}setTableElement(e,t){this._isFixedTableRendering||t?this._fixedTableElement=e.addClass(El):super.setTableElement(e)}getColumns(e){var t=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(e):super.getColumns(e,t)}getRowIndex(e){var t=this._fixedTableElement;return t&&t.find(e).length?this._getRowElements(t).index(e):super.getRowIndex(e)}getTableElements(){var e=super.getTableElements.apply(this,arguments);return this._fixedTableElement&&(e=(0,c.Z)([e.get(0),this._fixedTableElement.get(0)])),e}getFixedColumns(e){return this._columnsController.getFixedColumns(e)}getFixedColumnsOffset(){var t,e={left:0,right:0};if(this._fixedTableElement){var a=(t=this.getTransparentColumnElement()).position();e={left:a.left,right:(0,b.Y_)(this.element(),!0)-((0,b.Y_)(t,!0)+a.left)}}return e}getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".".concat(El)).first()}getFixedTableElement(){return this._fixedTableElement}isFixedColumns(){return this._isFixedColumns}_resizeCore(){super._resizeCore(),this.synchronizeRows()}setColumnWidths(e){var t,{widths:a}=e,r=this._columnsController.getVisibleColumns(),n=a?.length&&r.some(p=>(0,_.$K)(p.visibleWidth)),s=null===(t=e.optionNames)||void 0===t?void 0:t.width;if(super.setColumnWidths(e),this._fixedTableElement){var o=a?.some(p=>"auto"===p||!(0,_.$K)(p)),d=!o||n&&this.isScrollbarVisible(!0)?this.getFixedColumns():r;this.setFixedTableColumnWidths(d,a)}var u=this.option("wordWrapEnabled");(n||s&&u)&&this.synchronizeRows()}setFixedTableColumnWidths(e,t){if(this._fixedTableElement&&t){var a=this._fixedTableElement.children("colgroup").children("col");a.toArray().forEach(n=>n.removeAttribute("style"));var r=0;e.forEach(n=>{if(n.colspan)r+=n.colspan;else{var s=Yd(t[r]);(0,_.$K)(s)&&(0,Fe.cl)(a.eq(r),s),r+=1}})}}_getClientHeight(e){var t=e.getBoundingClientRect&&(0,ne.l)(e);return t&&t.height?t.height:e.clientHeight}synchronizeRows(){var a,r,n,s,e=[],t=[];this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var o=this._getClientHeight(this._tableElement.get(0)),l=this._getClientHeight(this._fixedTableElement.get(0));if(r=this._getRowElements(this._tableElement),n=this._getRowElements(this._fixedTableElement),s=this._findContentElement(),o!==l){for(s&&s.css("height",o),r.css("height",""),n.css("height",""),a=0;a<r.length;a++)e.push(this._getClientHeight(r.get(a))),t.push(this._getClientHeight(n.get(a)));for(a=0;a<r.length;a++){var d=e[a],u=t[a];d>u?n.eq(a).css("height",d):d<u&&r.eq(a).css("height",u)}s&&s.css("height","")}}})}setScrollerSpacing(e,t){var a=this.option("rtlEnabled");super.setScrollerSpacing(e),this.element().children(".".concat(this.addWidgetPrefix(Ma))).css({paddingLeft:a?e:"",paddingRight:a?"":e})}},Ek={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:y.Z.format("dxDataGrid-columnFixingFix"),unfix:y.Z.format("dxDataGrid-columnFixingUnfix"),leftPosition:y.Z.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:y.Z.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:i=>class extends(Il(i)){_getRowVisibleColumns(e){return this._isFixedTableRendering?this.getFixedColumns(e):super._getRowVisibleColumns(e)}getContextMenuItems(e){var{column:t}=e,a=this.option("columnFixing"),r=super.getContextMenuItems(e);if(e.row&&"header"===e.row.rowType&&!0===a.enabled&&t&&t.allowFixing){var n=s=>{switch(s.itemData.value){case"none":this._columnsController.columnOption(t.index,"fixed",!1);break;case"left":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"right"})}};(r=r||[]).push({text:a.texts.fix,beginGroup:!0,items:[{text:a.texts.leftPosition,value:"left",disabled:t.fixed&&(!t.fixedPosition||"left"===t.fixedPosition),onItemClick:n},{text:a.texts.rightPosition,value:"right",disabled:t.fixed&&"right"===t.fixedPosition,onItemClick:n}]},{text:a.texts.unfix,value:"none",disabled:!t.fixed,onItemClick:n})}return r}getFixedColumnElements(e){if((0,_.$K)(e))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(e).children();var t=this.getColumnElements(),a=this.getTransparentColumnElement();if(t&&a&&a.length){var r=ft(this.getFixedColumns());t.splice(r,a.get(0).colSpan,a.get(0))}return t}getColumnWidths(){var e,t=super.getColumnWidths(),a=this.getFixedColumnElements(),r=this.getFixedColumns();return this._fixedTableElement&&(e=a&&a.length?this._getWidths(a):super.getColumnWidths(this._fixedTableElement)),Bm(r,t,e)}},rowsView:i=>class extends(Il(i)){dispose(){super.dispose.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}optionChanged(e){super.optionChanged(e),"hoverStateEnabled"===e.name&&this._isFixedColumns&&(e.value?this._attachHoverEvents():this._detachHoverEvents())}_detachHoverEvents(){var e=this.element();this._fixedTableElement&&this._tableElement&&C.Z.off(e,"mouseover mouseout",".dx-data-row")}_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&C.Z.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(e=>{var{event:t}=e,a=this.getRowIndex((0,c.Z)(t.target).closest(".dx-row")),r="mouseover"===t.type;a>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(a).toggleClass(Vm,r),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(a).toggleClass(Vm,r))}))}_getScrollDelay(){var e;return(null===(e=this._resizingController)||void 0===e?void 0:e.hasResizeTimeout())?this.option("scrolling.updateTimeout"):oe.Z.mozilla?60:0}_findContentElement(e){var t,a,r=this.addWidgetPrefix(Rm),n=this.element();if(e=this._isFixedTableRendering||e,n&&e){t=n.children(".".concat(r));var s=this.getScrollable();return!t.length&&s&&(t=(0,c.Z)("<div>").addClass(r),C.Z.on(t,"scroll",o=>{var{target:l}=o,d=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{a=(0,c.Z)(l).scrollTop(),s.scrollTo({y:a})},d)}),C.Z.on(t,ck.u,o=>{var l=(0,c.Z)(o.target).closest(".dx-scrollable"),d=!1;if(s&&s.$element().is(l))d=!0;else{var u=l.length&&It.Z.getInstance(l.get(0)),h=u&&u.scrollHeight()-u.clientHeight()>0;d=u&&!h}if(d){a=s.scrollTop(),s.scrollTo({y:a-o.delta});var p=s.scrollTop()+s.clientHeight(),v=s.scrollHeight()+this.getScrollbarWidth();if(s.scrollTop()>0&&p<v)return!1}}),t.appendTo(n)),t}return super._findContentElement()}_updateScrollable(){super._updateScrollable();var e=this.getScrollable();if(!e?._disposed){var t=e&&e.scrollOffset().top;this._updateFixedTablePosition(t)}}_renderContent(e,t,a){return this._isFixedTableRendering||a?e.empty().addClass("".concat(this.addWidgetPrefix(Rm)," ").concat(this.addWidgetPrefix(Ma))).append(t):super._renderContent(e,t)}_getGroupCellOptions(e){return super._getGroupCellOptions(this._isFixedTableRendering?(0,f.l)({},e,{columns:this._columnsController.getVisibleColumns()}):e)}_renderGroupedCells(e,t){return super._renderGroupedCells(e,(0,f.l)({},t,{columns:this._columnsController.getVisibleColumns()}))}_renderGroupSummaryCells(e,t){super._renderGroupSummaryCells(e,this._isFixedTableRendering?(0,f.l)({},t,{columns:this._columnsController.getVisibleColumns()}):t)}_hasAlignByColumnSummaryItems(e,t){var a=super._hasAlignByColumnSummaryItems.apply(this,arguments),r=t.columns[e];return t.isFixed?r.fixed&&(a||"right"===r.fixedPosition):a&&(!this._isFixedColumns||!r.fixed)}_renderGroupSummaryCellsCore(e,t,a,r){var n;if(this._isFixedTableRendering){t.isFixed=!0,n=this._getAlignByColumnCellCount(a,t),t.isFixed=!1;var s=t.columns.length-n;t=(0,f.l)({},t,{columns:this.getFixedColumns()});var o=ft(t.columns);s<o?(n-=t.columns[o].colspan-1||0,a-=t.columns[o].colspan-1||0):r>0&&e.css("visibility","hidden"),r=n}super._renderGroupSummaryCellsCore(e,t,a,r)}_getSummaryCellIndex(e,t){if(this._isFixedTableRendering){var a=ft(t);return e>a&&(e+=t[a].colspan-1),e}return super._getSummaryCellIndex.apply(this,arguments)}_renderCore(e){this._detachHoverEvents();var t=super._renderCore(e),a=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",a),this.option("hoverStateEnabled")&&a&&this._attachHoverEvents(),t}setAriaOwns(e,t,a){var r,n;if(a){var s=this.addWidgetPrefix(Ma),o=null===(r=this.element())||void 0===r?void 0:r.children(".".concat(s)),l=this.getFixedTableElement();o.length&&l?.length&&this.setAria("owns","".concat(e??""," ").concat(null!==(n=l.attr("id"))&&void 0!==n?n:""," ").concat(t??"").trim(),o)}else super.setAriaOwns.apply(this,arguments)}setRowsOpacity(e,t){super.setRowsOpacity(e,t);var a=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(a,this.getFixedColumns(),e,t)}getCellIndex(e){var t=this._fixedTableElement,a=0;if(t&&e.is("td")&&e.closest(t).length){var r=this.getFixedColumns();return(0,S.S6)(r,(n,s)=>{if(n===e[0].cellIndex)return!1;s.colspan?a+=s.colspan:a++}),a}return super.getCellIndex.apply(this,arguments)}_updateFixedTablePosition(e,t){var a;this._fixedTableElement&&this._tableElement&&(this._fixedTableElement.parent().scrollTop(e),t&&this._editorFactoryController&&(a=this._editorFactoryController.focus())&&this._editorFactoryController.focus(a))}setScrollerSpacing(e,t){var a={marginBottom:0},r=this.element().children(".".concat(this.addWidgetPrefix(Ma)));r.length&&this._fixedTableElement&&(r.css(a),this._fixedTableElement.css(a),a[this.option("rtlEnabled")?"marginLeft":"marginRight"]=e,a.marginBottom=t,(this._scrollable&&this._scrollable.option("useNative")?r:this._fixedTableElement).css(a))}_getElasticScrollTop(e){var t=0;if(e.scrollOffset.top<0)t=-e.scrollOffset.top;else if(e.reachedBottom){var a=(0,c.Z)(e.component.content()),r=(0,c.Z)(e.component.container()),n=Math.max(a.get(0).clientHeight-r.get(0).clientHeight,0);t=Math.min(n-e.scrollOffset.top,0)}return Math.floor(t)}_applyElasticScrolling(e){if(this._fixedTableElement){var t=this._getElasticScrollTop(e);0!==Math.ceil(t)?(0,de.pB)(this._fixedTableElement,{top:t}):this._fixedTableElement.css("transform","")}}_handleScroll(e){this._updateFixedTablePosition(e.scrollOffset.top,!0),this._applyElasticScrolling(e),super._handleScroll(e)}_updateContentPosition(e){super._updateContentPosition.apply(this,arguments),e||this._updateFixedTablePosition(this._scrollTop)}_afterRowPrepared(e){this._isFixedTableRendering||super._afterRowPrepared(e)}_scrollToElement(e){super._scrollToElement(e,this.getFixedColumnsOffset())}},footerView:i=>class extends(Il(i)){}},controllers:{draggingHeader:i=>class extends i{_generatePointsByColumns(e){var t=e.columns,{targetDraggingPanel:a}=e;if(a&&"headers"===a.getName()&&a.isFixedColumns()&&e.sourceColumn.fixed){e.rowIndex||(e.columnElements=a.getFixedColumnElements(0)),e.columns=a.getFixedColumns(e.rowIndex);var r=super._generatePointsByColumns(e);return function(i,e,t){var a=ft(e),r=i.length-e.length;(0,S.S6)(t,(n,s)=>{s.index>a&&(s.columnIndex+=r,s.index+=r)})}(t,e.columns,r),r}return super._generatePointsByColumns(e)}_pointCreated(e,t,a,r){var n=super._pointCreated.apply(this,arguments),s=t[e.columnIndex],o=this._columnHeadersView.getTransparentColumnElement();if(!n&&"headers"===a&&o&&o.length){var l=(0,ne.l)(o.get(0));return r&&r.fixed?"right"===r.fixedPosition?e.x<l.right:e.x>l.left:!(!s||!s.fixed||"right"===s.fixedPosition)||e.x<l.left||e.x>l.right}return n}},columnsResizer:i=>class extends i{_generatePointsByColumns(){var e=this,t=e._columnsController,a=t&&e._columnsController.getVisibleColumns(),r=t&&e._columnsController.getFixedColumns(),n=ft(r),s=a.length-r.length,o=e._columnHeadersView.getFixedColumnElements();super._generatePointsByColumns(),o&&o.length>0&&(e._pointsByFixedColumns=O.getPointsByColumns(o,l=>(l.index>n&&(l.columnIndex+=s,l.index+=s),e._pointCreated(l,a.length,a))))}_getTargetPoint(e,t,a){var r=this._columnHeadersView.getTransparentColumnElement();if(r&&r.length){var n=(0,ne.l)(r.get(0));if(t<=n.left||t>=n.right)return super._getTargetPoint(this._pointsByFixedColumns,t,a)}return super._getTargetPoint(e,t,a)}},resizing:i=>class extends i{_setAriaOwns(){var e,t,a;super._setAriaOwns.apply(this,arguments);var r=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getFixedTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getFixedTableElement();null===(a=this._rowsView)||void 0===a||a.setAriaOwns(r?.attr("id"),n?.attr("id"),!0)}},keyboardNavigation:i=>class extends i{_toggleInertAttr(e){var t,a=null===(t=this._rowsView)||void 0===t?void 0:t.getFixedContentElement();e?a?.attr("inert",!0):a?.removeAttr("inert")}}}}};P.registerModule("columnFixing",Ek);var Fm="columnHeadersView",Mm="rowsView",Tl=[Fm,Mm,"footerView"],Tk="dxDataGridAdaptivity",Ct="adaptiveHidden",oi="detailAdaptive",Dl="dx-field-item-content",ka="hidden-column",Ak="adaptive-more",km="dx-command-adaptive",gn="dx-command-adaptive-hidden",Al="dx-adaptive-item-text",mn="adaptive",Nm="dx-group-cell",Hm="dxDataGrid-ariaAdaptiveExpand";function fn(i,e){return i._columnsController.getColumnId(e)}function Zk(i,e){var t,a=(0,c.Z)(i),r=e.component.getController("adaptiveColumns");"data"===e.rowType?(t=(0,c.Z)("<span>").addClass(r.addWidgetPrefix(Ak)),C.Z.on(t,(0,D.V4)(se.u,Tk),r.createAction(()=>{r.toggleExpandAdaptiveDetailRow(e.key)})),t.appendTo(a)):O.setEmptyText(a)}function Ol(i){var e,t=null===(e=i.data)||void 0===e?void 0:e.$nextCell;C.Z.off(t,"focus",Ol),C.Z.trigger(t,"dxclick")}var Jk={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:class zk extends J.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._rowsView=this.getView("rowsView"),this._columnsController.addCommandColumn({type:mn,command:mn,visible:!0,adaptiveHidden:!0,cssClass:km,alignment:"center",width:"auto",cellTemplate:Zk,fixedPosition:"right"}),this._columnsController.columnsChanged.add(()=>{var e=!!this.updateHidingQueue(this._columnsController.getColumns()).length;this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),this._hidingColumnsQueue=[],this._hiddenColumns=[],this.createAction("onAdaptiveDetailRowPreparing"),super.init()}optionChanged(e){"columnHidingEnabled"===e.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e.value),super.optionChanged(e)}publicMethods(){return["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"]}_isRowEditMode(){return"row"===this._getEditMode()}_isItemModified(e,t){var a=this._columnsController.getVisibleIndex(e.column.index),r=this._dataController.getRowIndexByKey(t.key),n=this._dataController.items()[r+1];return n&&n.modifiedValues&&(0,_.$K)(n.modifiedValues[a])}_renderFormViewTemplate(e,t,a){var r=this,{column:n}=e,s=r.createAction(()=>{r._editingController.isEditing()&&C.Z.trigger(a,se.u)}),o=t.row.data,l=n.calculateCellValue(o),d=O.getDisplayValue(n,l,o,t.rowType),u=O.formatValue(d,n),h=this._editingController.isCellOrBatchEditMode(),p=r._rowsView;if(n.allowEditing&&this._keyboardNavigationController.isKeyboardEnabled()&&(a.attr("tabIndex",r.option("tabIndex")),h&&(C.Z.off(a,"focus",s),C.Z.on(a,"focus",s))),n.cellTemplate){var v=(0,f.l)({},t,{value:l,displayValue:d,text:u,column:n});p.renderTemplate(a,n.cellTemplate,v,(0,Rt.al)(a)).done(()=>{p._cellPrepared(a,t)})}else{var g=a.get(0);n.encodeHtml?g.textContent=u:g.innerHTML=u,a.addClass(Al),(!(0,_.$K)(u)||""===u)&&a.html("&nbsp;"),r._isRowEditMode()||r._isItemModified(e,t)&&a.addClass("dx-item-modified"),p._cellPrepared(a,t)}}_getTemplate(e,t,a){var r=this,{column:n}=e,s=this._editingController;return function(o,l){var d=(0,c.Z)(l),u=r._columnsController.getVisibleIndex(n.index),h=(0,f.l)({},t),p=function(){var g=r._isItemEdited(e);h.value=t.row.values[u],g||n.showEditorAlways?s.renderFormEditorTemplate(h,e,o,d,!g):(h.column=n,h.columnIndex=u,r._renderFormViewTemplate(e,h,d))};if(p(),h.watch){var v=h.watch(()=>({isItemEdited:r._isItemEdited(e),value:t.row.values[u]}),()=>{d.contents().remove(),d.removeClass(Al),p()});C.Z.on(d,Ft.x,v)}}}_isVisibleColumnsValid(e){return!(e<2||e.length-function(){for(var t=0,a=0;a<e.length;a++)e[a].command&&t++;return t}()<=1)}_calculatePercentWidths(e,t){var a=this,r=0;return t.forEach((n,s)=>{e[s]!==Ct&&(r+=a._getItemPercentWidth(n))}),r}_isPercentWidth(e){return(0,_.HD)(e)&&e.endsWith("%")}_isColumnHidden(e){return this._hiddenColumns.filter(t=>t.index===e.index).length>0}_getAverageColumnsWidth(e,t,a){var r=this,n=0,s=0;return t.forEach(o=>{if(!r._isColumnHidden(o)){var{width:l}=o;(0,_.$K)(l)&&!isNaN(parseFloat(l))?n+=r._isPercentWidth(l)?r._calculatePercentWidth({visibleIndex:o.visibleIndex,columnsCount:t.length,columnsCanFit:a,bestFitWidth:o.bestFitWidth,columnWidth:l,containerWidth:e}):parseFloat(l):s++}}),(e-n)/s}_calculateColumnWidth(e,t,a,r){var d,n=fn(this,e),s=this._columnsController.columnOption(n,"width"),o=this._columnsController.columnOption(n,"bestFitWidth"),l=a.length;if(s&&"auto"!==s){if(!this._isPercentWidth(s))return parseFloat(s);d=this._calculatePercentWidth({visibleIndex:e.visibleIndex,columnsCount:l,columnsCanFit:r,bestFitWidth:o,columnWidth:s,containerWidth:t})}else d=this.option("columnAutoWidth")||e.command?o:this._getAverageColumnsWidth(t,a,r);return d}_calculatePercentWidth(e){var t=e.visibleIndex<e.columnsCount-1&&e.columnsCanFit,a=e.containerWidth*parseFloat(e.columnWidth)/100,r=e.columnsCanFit&&a<e.bestFitWidth?e.bestFitWidth:a;return t?e.containerWidth*parseFloat(e.columnWidth)/100:r}_getNotTruncatedColumnWidth(e,t,a,r){var n=fn(this,e),s=this._columnsController.columnOption(n,"width"),o=this._columnsController.columnOption(n,"bestFitWidth");if(s&&"auto"!==s&&!this._isPercentWidth(s))return parseFloat(s);var l=this._calculateColumnWidth(e,t,a,r);return l<o?null:l}_getItemPercentWidth(e){var t=0;return e.width&&this._isPercentWidth(e.width)&&(t=parseFloat(e.width)),t}_getCommandColumnsWidth(){var e=this,t=e._columnsController.getVisibleColumns(),a=0;return(0,S.S6)(t,(r,n)=>{(n.index<0||n.command)&&(a+=e._columnsController.columnOption(fn(e,n),"bestFitWidth")||0)}),a}_isItemEdited(e){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){var a=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,r=this._columnsController.getVisibleIndex(e.column.index);return this._editingController.isEditCell(a,r)}var t=this.option("editing.editRowKey");return!!(0,E.bY)(t,this._dataController.adaptiveExpandedKey())||void 0}_getFormItemsByHiddenColumns(e){var t=[];return(0,S.S6)(e,(a,r)=>{t.push({column:r,name:r.name,dataField:r.dataField,visibleIndex:r.visibleIndex})}),t}_getAdaptiveColumnVisibleIndex(e){for(var t=0;t<e.length;t++)if(e[t].command===mn)return t}_hideAdaptiveColumn(e,t){var a=this._getAdaptiveColumnVisibleIndex(t);(0,_.$K)(a)&&(e[a]=Ct,this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:a}))}_showHiddenCellsInView(e){var{$cells:t,isCommandColumn:a}=e,r=this.addWidgetPrefix(ka);a?(r=gn,t.attr({tabIndex:0,"aria-hidden":null}).removeClass(r)):t.removeClass(r)}_showHiddenColumns(){for(var e=0;e<Tl.length;e++){var t=this.getView(Tl[e]);if(t&&t.isVisible()&&t.element()){var a=t.name,r=t.element().find(".".concat(gn));this._showHiddenCellsInView({viewName:a,$cells:r,isCommandColumn:!0});var n=t.element().find(".".concat(this.addWidgetPrefix(ka)));this._showHiddenCellsInView({viewName:a,$cells:n})}}}_isCellValid(e){return e&&e.length&&!e.hasClass("dx-master-detail-cell")&&!e.hasClass(Nm)}_hideVisibleColumn(e){var{isCommandColumn:t,visibleIndex:a}=e,r=this;Tl.forEach(n=>{var s=r.getView(n);s&&r._hideVisibleColumnInView({view:s,isCommandColumn:t,visibleIndex:a})})}_hideVisibleColumnInView(e){var s,{view:t,isCommandColumn:a,visibleIndex:r}=e,n=t.name,o=this._columnsController.getVisibleColumns()[r],l=this._editingController&&this._editingController.getEditFormRowIndex();if(t&&t.isVisible()&&o)for(var d=t.getRowsCount(),u=t._getRowElements(),h=0;h<d;h++)if(h!==l||n!==Mm||"popup"===this.option("editing.mode")){var v=n===Fm?this._columnsController.getVisibleIndex(o.index,h):r;if(v>=0){var g=u.eq(h);s=this._findCellElementInRow(g,v),this._isCellValid(s)&&this._hideVisibleCellInView({viewName:n,isCommandColumn:a,$cell:s})}}}_findCellElementInRow(e,t){var a=e.children(),r=t,n=!1;if(e.hasClass("dx-group-row")){var s=e.find(".".concat(Nm)),o=s.attr("colspan");if(s.length&&(0,_.$K)(o)){var l=parseInt(o);t>s.index()+l-1?r=t-l+1:n=!0}}return n?void 0:a.eq(r)}_hideVisibleCellInView(e){var{$cell:t,isCommandColumn:a}=e,r=a?gn:this.addWidgetPrefix(ka);t.attr({tabIndex:-1,"aria-hidden":!0}).addClass(r)}_getEditMode(){return this._editingController.getEditMode()}isFormOrPopupEditMode(){var e=this._getEditMode();return"form"===e||"popup"===e}hideRedundantColumns(e,t,a){if(this._hiddenColumns=[],this._isVisibleColumnsValid(t)&&a.length){var u,h,p,r=0,n=this.component.$element(),s=(0,b.dz)(n)-this._getCommandColumnsWidth(),o=function(){return t.filter(U=>!U.command&&0===this._hiddenColumns.filter(ee=>ee.index===U.index).length)}.bind(this),l=o(),d=l.length;do{p=!1,r=0;var v=this._calculatePercentWidths(e,t),g=v<100&&0!==v;for(u=0;u<t.length;u++){var m=t[u],w=this._getNotTruncatedColumnWidth(m,s,l,g),I=fn(this,m),A=this._columnsController.columnOption(I,"width"),F=this._columnsController.columnOption(I,"minWidth"),G=this._columnsController.columnOption(I,"bestFitWidth");if(e[u]!==Ct){if(!w&&!m.command&&!m.fixed){p=!0;break}(!A||"auto"===A)&&(w=Math.max(G||0,F||0)),(m.command!==mn||h)&&(r+=w)}else h=!0}if(p=p||r>(0,b.dz)(n)){var M=a.pop(),k=this._columnsController.getVisibleIndex(M.index);s+=this._calculateColumnWidth(M,s,l,g),this._hideVisibleColumn({visibleIndex:k}),e[k]=Ct,this._hiddenColumns.push(M),l=o()}}while(p&&l.length>1&&a.length);d===l.length&&this._hideAdaptiveColumn(e,t)}else this._hideAdaptiveColumn(e,t)}getAdaptiveDetailItems(){return this._$itemContents}getItemContentByColumnIndex(e){for(var t,a=0;a<this._$itemContents.length;a++){var r=(t=this._$itemContents.eq(a)).data("dx-form-item");if(r&&r.column&&this._columnsController.getVisibleIndex(r.column.index)===e)return t}}toggleExpandAdaptiveDetailRow(e,t){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this._dataController.toggleExpandAdaptiveDetailRow(e,t)}createFormByHiddenColumns(e,t){var a=this,r=(0,c.Z)(e),n={items:a._getFormItemsByHiddenColumns(a._hiddenColumns),formID:"dx-".concat(new ve.Z)},s=(0,z.x2)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:n}),a._$itemContents=null,a._form=a._createComponent((0,c.Z)("<div>").appendTo(r),lv,(0,f.l)(s,n,{customizeItem(o){var l=o.column||a._columnsController.columnOption(o.name||o.dataField);l&&(o.label=o.label||{},o.label.text=o.label.text||l.caption,o.column=l,o.template=a._getTemplate(o,t,a.updateForm.bind(a))),n.customizeItem&&n.customizeItem.call(this,o)},onContentReady(o){n.onContentReady&&n.onContentReady.call(this,o),a._$itemContents=r.find(".".concat(Dl))}}))}hasAdaptiveDetailRowExpanded(){return(0,_.$K)(this._dataController.adaptiveExpandedKey())}updateForm(e){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,_.$K)(this._form._contentReadyAction)&&(e&&e.length?this._form.option("items",this._getFormItemsByHiddenColumns(e)):this._form.repaint())}updateHidingQueue(e){var a,r,t=e.filter(s=>s.visible&&!s.type&&!s.fixed&&!((0,_.$K)(s.groupIndex)&&s.groupIndex>=0));if(this._hidingColumnsQueue=[],this.option("allowColumnResizing")&&"widget"===this.option("columnResizingMode"))return this._hidingColumnsQueue;for(r=0;r<t.length;r++)(0,_.$K)(t[r].hidingPriority)&&t[r].hidingPriority>=0&&(a=!0,this._hidingColumnsQueue[t[r].hidingPriority]=t[r]);if(a)this._hidingColumnsQueue.reverse();else if(this.option("columnHidingEnabled"))for(r=0;r<t.length;r++){var n=this._columnsController.getVisibleIndex(t[r].index);this._hidingColumnsQueue[n]=t[r]}return this._hidingColumnsQueue=this._hidingColumnsQueue.filter(Object),this._hidingColumnsQueue}getHiddenColumns(){return this._hiddenColumns}hasHiddenColumns(){return this._hiddenColumns.length>0}getHidingColumnsQueue(){return this._hidingColumnsQueue}isAdaptiveDetailRowExpanded(e){var t=this._dataController;return t.adaptiveExpandedKey()&&(0,E.bY)(t.adaptiveExpandedKey(),e)}expandAdaptiveDetailRow(e){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(e)}collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()}updateCommandAdaptiveAriaLabel(e,t){var a=this._dataController.getRowIndexByKey(e);if(-1!==a){var r=(0,c.Z)(this.component.getRowElement(a));this.setCommandAdaptiveAriaLabel(r,t)}}setCommandAdaptiveAriaLabel(e,t){e.find(".dx-command-adaptive").attr("aria-label",y.Z.format(t))}}},extenders:{views:{rowsView:i=>class extends i{_getCellTemplate(e){var t=this,{column:a}=e;return e.rowType===oi&&"detail"===a.command?function(r,n){t._adaptiveColumnsController.createFormByHiddenColumns((0,c.Z)(r),n)}:super._getCellTemplate(e)}_createRow(e){var t=super._createRow.apply(this,arguments);return e&&e.rowType===oi&&e.key===this._dataController.adaptiveExpandedKey()&&t.addClass("dx-adaptive-detail-row"),t}_renderCells(e,t){super._renderCells(e,t);var a=this._adaptiveColumnsController,r=a.getHidingColumnsQueue().length,n=a.getHiddenColumns().length;r&&!n&&function Hk(i){return i.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}(e).last().addClass("dx-last-data-cell"),"data"===t.row.rowType&&a.setCommandAdaptiveAriaLabel(e,Hm)}_getColumnIndexByElementCore(e){var t=e.closest(".".concat(Dl));if(t.length&&t.closest(this.component.$element()).length){var a=t.length?t.first().data("dx-form-item"):null;return a&&a.column&&this._columnsController.getVisibleIndex(a.column.index)}return super._getColumnIndexByElementCore(e)}_cellPrepared(e,t){super._cellPrepared.apply(this,arguments),t.row.rowType!==oi&&t.column.visibleWidth===Ct&&e.addClass(this.addWidgetPrefix(ka))}getCell(e,t){if(this._dataController.items()[e?.rowIndex]?.rowType===oi){var r=this._adaptiveColumnsController.getAdaptiveDetailItems();return super.getCell(e,t,r)}return super.getCell.apply(this,arguments)}_getCellElement(e,t){var a=this._dataController.items()[e];return a&&a.rowType===oi?this._adaptiveColumnsController.getItemContentByColumnIndex(t):super._getCellElement.apply(this,arguments)}getContextMenuItems(e){var t;if(e.row&&"detailAdaptive"===e.row.rowType){var a=this._columnHeadersView,r=(0,c.Z)(e.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return e.column=r?r.column:e.column,a.getContextMenuItems&&a.getContextMenuItems(e)}return null===(t=super.getContextMenuItems)||void 0===t?void 0:t.call(this,e)}isClickableElement(e){var t,a;return null!==(a=null===(t=super.isClickableElement)||void 0===t?void 0:t.call(this,e))&&void 0!==a&&a||!!e.closest(".".concat(km)).length}}},controllers:{export:i=>class extends i{_updateColumnWidth(e,t){super._updateColumnWidth(e,e.visibleWidth===Ct?e.bestFitWidth:t)}},columnsResizer:i=>class extends i{_pointCreated(e,t,a){var r=super._pointCreated(e,t,a),n=a[e.columnIndex]||{},s=this._getNextColumnIndex(e.columnIndex);return r||n.visibleWidth===Ct||s!==e.columnIndex+1&&(a[s]||{}).command}_getNextColumnIndex(e){for(var t=this._columnsController.getVisibleColumns(),a=super._getNextColumnIndex(e);t[a]&&t[a].visibleWidth===Ct;)a++;return a}},draggingHeader:i=>class extends i{_pointCreated(e,t,a,r){return super._pointCreated(e,t,a,r)||(t[e.columnIndex-1]||{}).visibleWidth===Ct}},editing:i=>class extends i{_isRowEditMode(){return"row"===this.getEditMode()}_getFormEditItemTemplate(e,t){return"row"!==this.getEditMode()&&"detailAdaptive"===e.rowType?(e.columnIndex=this._columnsController.getVisibleIndex(t.index),this.getColumnTemplate(e)):super._getFormEditItemTemplate(e,t)}_closeEditItem(e){var t=e.closest(".".concat(Dl)),a=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,r=t.length?t.first().data("dx-form-item"):null,n=r&&r.column&&this._columnsController.getVisibleIndex(r.column.index);this.isEditCell(a,n)||super._closeEditItem(e)}_beforeUpdateItems(e,t){if(!this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()){var a=this._dataController.items(),r=a[t],n=O.getIndexByKey(this._dataController.adaptiveExpandedKey(),a);this._isForceRowAdaptiveExpand=!this._adaptiveColumnsController.hasAdaptiveDetailRowExpanded(),n>=0&&e.push(n+1),e.push(t+1),this._dataController.adaptiveExpandedKey(r.key)}}_afterInsertRow(e){super._afterInsertRow.apply(this,arguments),this._adaptiveColumnsController.hasHiddenColumns()&&(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(e,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)}_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveColumnsController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)}_cancelEditAdaptiveDetailRow(){this._adaptiveColumnsController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()}_afterSaveEditData(){super._afterSaveEditData.apply(this,arguments);var e=new x.BH;return this._isRowEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()?(0,x.gx)(this._validatingController.validate(!0)).done(t=>{t&&this._cancelEditAdaptiveDetailRow(),e.resolve()}):e.resolve(),e.promise()}_beforeCancelEditData(){super._beforeCancelEditData(),this._cancelEditAdaptiveDetailRow()}_getRowIndicesForCascadeUpdating(e){var t=super._getRowIndicesForCascadeUpdating.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e.key)&&t.push(e.rowType===oi?e.rowIndex-1:e.rowIndex+1),t}_beforeCloseEditCellInBatchMode(e){var t=this._dataController._adaptiveExpandedKey;if(t){var a=O.getIndexByKey(t,this._dataController.items());a>-1&&e.unshift(a)}}editRow(e){return this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.editRow(e)}deleteRow(e){var t=this._dataController.getKeyByRowIndex(e);"batch"===this.getEditMode()&&this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(t)&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.deleteRow(e)}},resizing:i=>class extends i{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}_needBestFit(){return super._needBestFit()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length}_correctColumnWidths(e,t){var a=this._adaptiveColumnsController,r=a.getHiddenColumns(),n=a.updateHidingQueue(this._columnsController.getColumns());a.hideRedundantColumns(e,t,n);var s=a.getHiddenColumns();return a.hasAdaptiveDetailRowExpanded()&&r.length!==s.length&&a.updateForm(s),!s.length&&a.collapseAdaptiveDetailRow(),super._correctColumnWidths.apply(this,arguments)}_toggleBestFitMode(e){e&&this._adaptiveColumnsController._showHiddenColumns(),super._toggleBestFitMode(e)}_needStretch(){var e=this._adaptiveColumnsController;return super._needStretch.apply(this,arguments)||e.getHidingColumnsQueue().length||e.hasHiddenColumns()}},data:i=>class extends i{_processItems(e,t){var{changeType:a}=t;if(e=super._processItems.apply(this,arguments),"loadingAll"===a||!(0,_.$K)(this._adaptiveExpandedKey))return e;var r=O.getIndexByKey(this._adaptiveExpandedKey,e),n=!1===this.option("scrolling.legacyMode");if(r>=0){var s=e[r];e.splice(r+1,0,{visible:!0,rowType:oi,key:s.key,data:s.data,node:s.node,modifiedValues:s.modifiedValues,isNewRow:s.isNewRow,values:s.values})}else"refresh"===a&&(!n||!t.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return e}_getRowIndicesForExpand(e){var t=super._getRowIndicesForExpand.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e)&&t.push(t[t.length-1]+1),t}adaptiveExpandedKey(e){if(!(0,_.$K)(e))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=e}toggleExpandAdaptiveDetailRow(e,t){var a=O.getIndexByKey(this._adaptiveExpandedKey,this._items),r=O.getIndexByKey(e,this._items);a>=0&&a===r&&!t&&(e=void 0,r=-1);var n=this._adaptiveExpandedKey;this._adaptiveExpandedKey=e,a>=0&&a++,r>=0&&r++;var s=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[a-s,r-s]}),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(e,"dxDataGrid-ariaAdaptiveCollapse"),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(n,Hm)}},editorFactory:i=>class extends i{_needHideBorder(e){return super._needHideBorder(e)||e?.hasClass("dx-field-item-content")&&e?.find(".dx-checkbox").length}_getFocusCellSelector(){return"".concat(super._getFocusCellSelector(),", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content")}_getRevertTooltipsSelector(){return"".concat(super._getRevertTooltipsSelector(),", .dx-field-item-content .").concat(this.addWidgetPrefix("revert-tooltip"))}},columns:i=>class extends i{_isColumnVisible(e){return super._isColumnVisible(e)&&!e.adaptiveHidden}},keyboardNavigation:i=>class extends i{_isCellValid(e,t){return super._isCellValid(e,t)&&!e.hasClass(this.addWidgetPrefix(ka))&&!e.hasClass(gn)}_processNextCellInMasterDetail(e,t){super._processNextCellInMasterDetail(e,t);var a=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&e&&a&&!this._isInsideEditForm(e)&&(C.Z.off(e,"focus",Ol),C.Z.on(e,"focus",{$nextCell:e},Ol),C.Z.trigger(t,"focus"))}_isCellElement(e){return super._isCellElement(e)||e.hasClass(Al)}}}}};function Zm(i,e,t,a,r,n){n=n||[],(a=a||[])[t=t||0]=a[t]||0;var d,s=i[t],l=0;if(s){for(d=n[t]+1||0;d<s.length;d++){var u=s[d],h=d+a[t],p=u.colspan||1;if(Zm(i,e,t+(u.rowspan||1),a,p,n),a[t]+=p-1,l+=p,u.rowspan)for(var v=t+1;v<t+u.rowspan;v++)a[v]=a[v]||0,a[v]+=u.colspan||1;if(!1===e(u,h,t,d)||void 0!==r&&l>=r)break}n[t]=d}}function Vl(i,e,t){var a=[];Zm(i,(n,s,o)=>{var d,l=n,u=l.colspan||1,h=s+u-1>=e&&s<t;if(a[o]=a[o]||[],h)s<e?(d=u-(e-s),s=e):d=u,s+d>t&&(d=t-s),d!==u&&(l=(0,f.l)({},l,{colspan:d})),a[o].push(l);else if(s>t)return!1});for(var r=0;r<a.length;r++)a[r]=a[r]||[];return a}P.registerModule("adaptivity",Jk);var zm=i=>class extends i{_needToSetCellWidths(){var e=super._needToSetCellWidths();return!e&&this._columnsController.isVirtualMode()&&(e=this._columnsController.getColumns().some(a=>"auto"===a.width)),e}},Cn=function(i){return i.map(e=>e.visibleWidth||parseFloat(e.width)||50)},rN={defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:i=>class extends i{init(){var e;super.init.apply(this,arguments),this._resizingController=this.getController("resizing"),this._beginPageIndex=null,this._endPageIndex=null,null!==(e=this._position)&&void 0!==e||(this._position=0),this._virtualVisibleColumns={}}dispose(){clearTimeout(this._changedTimeout),super.dispose.apply(this,arguments)}resetColumnsCache(){super.resetColumnsCache(),this._virtualVisibleColumns={}}getBeginPageIndex(e){for(var t=this.getVisibleColumns(void 0,!0),a=Cn(t),r=0,n=0;n<a.length;n++){if(r>=e)return Math.floor(n/this.getColumnPageSize());r+=a[n]}return 0}getTotalWidth(){var e=this.option("width");return"number"==typeof e?e:this._resizingController._lastWidth||(0,b.Y_)(this.component.$element())}getEndPageIndex(e){var t=this.getVisibleColumns(void 0,!0),a=Cn(t),r=0;e+=this.getTotalWidth();for(var n=0;n<a.length;n++){if(r>=e)return Math.ceil(n/this.getColumnPageSize());r+=a[n]}return Math.ceil(a.length/this.getColumnPageSize())}getColumnPageSize(){return this.option("scrolling.columnPageSize")}_fireColumnsChanged(){var e=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-e}getScrollingTimeout(){var e=this.option("scrolling.columnRenderingThreshold"),t=this.option("scrolling.renderAsync"),a=0;return(!(0,_.$K)(t)&&this._renderTime>e||t)&&(a=this.option("scrolling.timeout")),a}setScrollPosition(e){var t=this.getScrollingTimeout();t>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(e)},t)):this._setScrollPositionCore(e)}isVirtualMode(){return(0,B.Ym)()&&"virtual"===this.option("scrolling.columnRenderingMode")}resize(){this._setScrollPositionCore(this._position)}_setScrollPositionCore(e){if(this.isVirtualMode()){var t=this.getBeginPageIndex(e),a=this.getEndPageIndex(e),r=e<this._position?this._beginPageIndex>t:this._endPageIndex<a;this._position=e,r&&(this._beginPageIndex=t,this._endPageIndex=a,this._fireColumnsChanged())}}getFixedColumns(e,t){var a=super.getFixedColumns(e);if(this.isVirtualMode()&&!t&&a.length){var r=a.map(n=>n.command).indexOf("transparent");return a[r].colspan=this.getVisibleColumns().length-super.getFixedColumns().length+1,a}return a}_compileVisibleColumns(e,t){var a;if(t||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return super._compileVisibleColumns(e);null!==(a=this._columns)&&void 0!==a&&a.length&&!(0,_.$K)(this._beginPageIndex)&&!(0,_.$K)(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var r=this._beginPageIndex,n=this._endPageIndex,s="".concat(e,"-").concat(r,"-").concat(n);if(this._virtualVisibleColumns[s])return this._virtualVisibleColumns[s];var o=super._compileVisibleColumns(),l=this.getRowCount(),d=this.getColumnPageSize(),u=r*d,h=n*d,p=this.getFixedColumns(void 0,!0),v=p.map(ee=>ee.command).indexOf("transparent"),g=p.length?v:0,m=o.slice(0,g),w=o.slice(g,u),I=Cn(w).reduce((ee,$)=>ee+$,0);I||(u=0);var A=p.length?p.length-v-1:0,F=o.slice(o.length-A),G=o.slice(h,o.length-A),M=Cn(G).reduce((ee,$)=>ee+$,0);if(M||(h=o.length),l>1&&"number"==typeof e){for(var k=[],U=0;U<=l;U++)k.push(super._compileVisibleColumns(U));m=Vl(k,0,m.length)[e]||[],F=Vl(k,o.length-F.length,o.length)[e]||[],o=Vl(k,u,h)[e]||[]}else o=o.slice(u,h);return I&&(o.unshift({command:"virtual",width:I}),o=m.concat(o)),M&&(o.push({command:"virtual",width:M}),o=o.concat(F)),this._virtualVisibleColumns[s]=o,o}getColumnIndexOffset(){var e=0;if(this._beginPageIndex>0){var a=this.getFixedColumns().map(n=>n.command).indexOf("transparent"),r=a>=0?a:0;e=this._beginPageIndex*this.getColumnPageSize()-r-1}return e>0?e:0}}},views:{columnHeadersView:i=>class extends(zm(i)){_renderCore(){var e=super._renderCore.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),e}},rowsView:i=>class extends(zm(i)){_resizeCore(){super._resizeCore.apply(this,arguments),this._columnsController.resize()}_handleScroll(e){var t=this.getScrollable(),{left:a}=e.scrollOffset;super._handleScroll.apply(this,arguments),this.option("rtlEnabled")&&t&&(a=(0,b.dz)(t.$content())-(0,b.dz)(t.$element())-a),this._columnsController.setScrollPosition(a)}_renderCore(e){var t,a;if(e?.virtualColumnsScrolling){var r=this._findContentElement(),n=null===(t=this._columnsController)||void 0===t?void 0:t.getFixedColumns(),s=null===(a=this._scrollable)||void 0===a?void 0:a.option("useNative");if(n?.length){r.css({minHeight:s?(0,b.Cr)(r):O.getContentHeightLimit(oe.Z)});var o=()=>{this.resizeCompleted.remove(o),r.css({minHeight:""})};this.resizeCompleted.add(o)}}return super._renderCore.apply(this,arguments)}}}}};P.registerModule("virtualColumns",rN);var Na="dx-buttongroup",nN="".concat(Na,"-wrapper"),$m="".concat(Na,"-item"),sN="".concat(Na,"-first-item"),oN="".concat(Na,"-last-item"),Wm="".concat($m,"-has-width"),wn={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},dN=Br.Z.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Qi.c((i,e,t)=>{this._prepareItemStyles(i);var a=this.option("buttonTemplate");this._createComponent(i,ye.Z,(0,f.l)({},t,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(a)?t:{},template:t.template||a}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return(0,f.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(i){return(0,_.mf)(i)||this.option("integrationOptions.templates")[i]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(i){var e=i.data("dxItemIndex");0===e&&i.addClass(sN);var t=this.option("items");t&&e===t.length-1&&i.addClass(oN),i.addClass("dx-shape-standard")},_renderItemContent(i){return i.container=(0,c.Z)(i.container).parent(),this.callBase(i)},_setAriaSelectionAttribute(i,e){this.setAria("pressed",e,i)},_renderItemContentByNode(i,e){return i.container=(0,c.Z)(i.container.children().first()),this.callBase(i,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>$m,_itemSelectHandler(i){"single"===this.option("selectionMode")&&this.isItemSelected(i.currentTarget)||this.callBase(i)}}),Km=Ge.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(Na),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){var i,{stylingMode:e}=this.option();for(var t in wn)this.$element().removeClass(wn[t]);this.$element().addClass(null!==(i=wn[e])&&void 0!==i?i:wn.contained)},_fireSelectionChangeEvent(i,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:i,removedItems:e})},_renderButtons(){var i=(0,c.Z)("<div>").addClass(nN).appendTo(this.$element()),e=this.option("selectedItems"),t={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:a=>{var r=this.option("width");(0,_.$K)(r)&&(0,c.Z)(a.itemElement).addClass(Wm)},onSelectionChanged:a=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(a.addedItems,a.removedItems)},onItemClick:a=>{this._itemClickAction(a)}};(0,_.$K)(e)&&e.length&&(t.selectedItems=e),this._buttonsCollection=this._createComponent(i,dN,t)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(i){switch(i.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(i.name,i.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(i),this._buttonsCollection.itemElements().toggleClass(Wm,!!i.value);break;default:this.callBase(i)}}});(0,X.Z)("dxButtonGroup",Km);const uN=Km;var Gm="dx-dropdownbutton",Um="dx-dropdownbutton-action",Ym="dx-dropdownbutton-toggle",fN=Ge.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:y.Z.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",type:"normal",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new Ws.k(i=>{var e=(0,c.Z)(i.container),t=(0,c.Z)("<div>").appendTo(e);this._list=this._createComponent(t,ca,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource(i){this._dataSource||(this._dataSource=new St.o({store:new ir.Z({key:this._getKey(),data:i}),pageSize:0}))},_getKey(){var i,e=this.option("keyExpr"),t=null===(i=this._dataSource)||void 0===i?void 0:i.key();return!(0,_.$K)(t)||(0,_.$K)(e)&&"this"!==e?e:t},_compileKeyGetter(){this._keyGetter=(0,q.vb)(this._getKey())},_compileDisplayGetter(){this._displayGetter=(0,q.vb)(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(Gm),this._renderButtonGroup(),this._updateArrowClass(),(0,_.$K)(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:E.ZT,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var i;null===(i=this._loadSingleDeferred)||void 0===i||i.reject();var e=(0,x.BH)();if(this._list&&void 0!==this._lastSelectedItemData){var t=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(t)}this._lastSelectedItemData=void 0;var a=this.option("selectedItemKey");return this._loadSingle(this._getKey(),a).done(e.resolve).fail(()=>{e.resolve(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(i){var{previousValue:e,value:t}=i;this._selectionChangedAction({item:t,previousItem:e})},_fireItemClickAction(i){var{event:e,itemElement:t,itemData:a}=i;return this._itemClickAction({event:e,itemElement:t,itemData:this._actionItem||a})},_actionButtonConfig(){var{icon:i,text:e,type:t}=this.option();return{text:e,icon:i,type:t,elementAttr:{class:Um}}},_getButtonGroupItems(){var{splitButton:i,type:e}=this.option(),t=[];return t.push(this._actionButtonConfig()),i&&t.push({icon:"spindown",type:e,elementAttr:{class:Ym}}),t},_buttonGroupItemClick(i){var{event:e,itemData:t}=i,a=t.elementAttr.class===Um;t.elementAttr.class===Ym?this.toggle():a&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:i,showArrowIcon:e,focusStateEnabled:t,hoverStateEnabled:a,stylingMode:r,accessKey:n,tabIndex:s}=this.option(),o=i||!e?"content":(l,d)=>{var{text:u,icon:h}=l,p=(0,zt.H)(h),v=u?(0,c.Z)("<span>").text(u).addClass("dx-button-text"):void 0,g=(0,zt.H)("spindown").addClass("dx-icon-right");(0,c.Z)(d).append(p,v,g)};return(0,f.l)({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:l=>this._keyboardHandler(l),buttonTemplate:o,focusStateEnabled:t,hoverStateEnabled:a,stylingMode:r,accessKey:n,tabIndex:s},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var i=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return i.empty(),this._popupContentId="dx-".concat(new ve.Z),this.setAria("id",this._popupContentId,i),e.render({container:(0,j.uD)(i),model:this.option("items")||this._dataSource})},_popupOptions(){var i=this.option("rtlEnabled")?"right":"left";return(0,f.l)({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{var t=this.$element();return!(0,c.Z)(e.target).closest(".".concat(Gm)).is(t)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>Ar(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:"".concat(i," top"),at:"".concat(i," bottom")},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var i=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:(0,_.$K)(i)&&e?[i]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:t=>{this.option("useSelectMode")||(this._lastSelectedItemData=t.itemData),this.option("selectedItemKey",this._keyGetter(t.itemData)),!1!==this._fireItemClickAction(t)&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var i=(0,c.Z)("<div>");this.$element().append(i),this._popup=this._createComponent(i,Dt,this._popupOptions()),this._popup.$content().addClass("dx-dropdownbutton-content"),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged(i){var e=Ge.Z.getOptionsFromContainer(i);this._setPopupOption(e);var t=Object.keys(e);(t.includes("width")||t.includes("height"))&&this._dimensionChanged()},_dimensionChanged(){void 0===Ks(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>Ar(this.$element()))},_setPopupOption(i,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(i){this.setAria({owns:i?this._popupContentId:void 0},this.$element())},_setButtonsAria(i){var e={expanded:i,haspopup:"listbox"},t={};this.option("text")||(t.label="dropdownbutton"),this._getButtons().each((a,r)=>{this.setAria(0===a?(0,V.Z)((0,V.Z)({},t),e):e,(0,c.Z)(r))})},_updateAriaAttributes(i){this._setElementAria(i),this._setButtonsAria(i)},_getButtons(){return this._buttonGroup.$element().find(".".concat("dx-button"))},_renderButtonGroup(){var i=this._buttonGroup&&this._buttonGroup.$element()||(0,c.Z)("<div>");this._buttonGroup||this.$element().append(i),this._buttonGroup=this._createComponent(i,uN,this._buttonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){var i=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",i)},toggle(i){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(i)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(i,e){this._list&&this._list.option(i,e)},_getDisplayValue(i){var t=(0,_.Kn)(i)?this._displayGetter(i):i;return(0,_.Kn)(t)?"":String((0,E.IS)(t,""))},_updateActionButton(i){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(i),icon:(0,_.PO)(i)?i.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",i),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(i))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(i){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&(0,_.$K)(i)?[i]:[]);var e=this.option("selectedItem");this._loadSelectedItem().done(t=>{this._updateActionButton(t),this._displayGetter(e)!==this._displayGetter(t)&&this._fireSelectionChangedAction({previousValue:e,value:t})})},_updateButtonGroup(i,e){this._buttonGroup.option(i,e),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(i){var{name:e,value:t}=i,a={};a[e]=t,this._updateButtonGroup("items[0]",(0,f.l)({},this._actionButtonConfig(),a)),this._popup&&this._popup.repaint()},_selectModeChanged(i){if(i){this._setListOption("selectionMode","single");var e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",(0,_.$K)(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(i){var e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[i]),(0,_.$K)(e)&&this._loadSelectedItem().done(t=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",t)}).fail(t=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(i),this._updateKeyExpr()},_updateKeyExpr(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus(){this._buttonGroup.focus()},_optionChanged(i){var e,{name:t,value:a}=i;switch(t){case"useSelectMode":this._selectModeChanged(a);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(t,a),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,i);break;case"dropDownOptions":if("dropDownOptions.visible"===i.fullName)break;void 0!==i.value.visible&&delete i.value.visible,this._popupOptionChanged(i),this._innerWidgetOptionChanged(this._popup,i);break;case"opened":this.toggle(a);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(t,a),this._updateButtonGroup(t,a),this.callBase(i);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(t);break;case"dataSource":Array.isArray(a)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(t);break;case"icon":case"text":this._actionButtonOptionChanged(i);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(i),null===(e=this._popup)||void 0===e||e.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(t,a);break;case"type":this._updateButtonGroup("items",this._getButtonGroupItems());break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(t,a);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(a);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;case"template":this._renderButtonGroup();break;default:this.callBase(i)}}}).include(Ac.Z);(0,X.Z)("dxDropDownButton",fN);var jm="dx-datagrid-export-button";class EN{constructor(e,t,a){this._exportController=e,this._initialColumnWidthsByColumnIndex=t,this._selectedRowsOnly=a}_getGroupValue(e){var{key:t,data:a,rowType:r,groupIndex:n,summaryCells:s}=e,o=this._options.groupColumns[n],l=P.getDisplayValue(o,o.deserializeValue?o.deserializeValue(t[n]):t[n],a,r),d="".concat(o.caption,": ").concat(P.formatValue(l,o));return s&&s[0]&&s[0].length&&(d+=" ".concat(P.getGroupRowSummaryText(s[0],this._options.summaryTexts))),d}_correctCellIndex(e){return e}_initOptions(){var e=this._exportController,t=e._columnsController.getGroupColumns();this._options={columns:e._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:t,items:this._selectedRowsOnly||e._selectionOnly?e._getSelectedItems():e._getAllItems(),isHeadersVisible:e.option("showColumnHeaders"),summaryTexts:e.option("summary.texts"),rtlEnabled:e.option("rtlEnabled")}}getHeaderStyles(){return[{bold:!0,alignment:"center"},{bold:!0,alignment:"left"},{bold:!0,alignment:"right"}]}getGroupRowStyle(){return{bold:!0,alignment:(0,ne.q)(this._options.rtlEnabled)}}getColumnStyles(){var e=[];return this.getColumns().forEach(t=>{e.push({alignment:t.alignment||"left",format:t.format,dataType:t.dataType})}),e}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(e){var t,a=(null===(t=this.getColumns()[e])||void 0===t?void 0:t.alignment)||"right";return this.getHeaderStyles().map(r=>r.alignment).indexOf(a)}getStyleId(e,t){return e<this.getHeaderRowCount()?0:this.isTotalCell(e-this.getHeaderRowCount(),t)?this._getTotalCellStyleId(t):this.isGroupRow(e-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:t+this.getHeaderStyles().length}getColumns(e){var{columns:t}=this._options;return e?t:t[t.length-1]}getColumnsWidths(){var e=this.getColumns();return(0,_.$K)(e)?e.map(t=>t.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(e){return e<this._options.items.length&&"group"===this._options.items[e].rowType}getGroupLevel(e){var t=this._options.items[e-this.getHeaderRowCount()],a=t&&t.groupIndex;return t&&"totalFooter"===t.rowType?0:(0,_.$K)(a)?a:this._options.groupColumns.length}getCellType(e,t){var a=this.getColumns();if(e<this.getHeaderRowCount())return"string";if(e-=this.getHeaderRowCount(),t<a.length){var r=this._options.items.length&&this._options.items[e],n=a[t];return r&&"data"===r.rowType&&isFinite(r.values[this._correctCellIndex(t)])&&!(0,_.$K)(n.customizeText)?(0,_.$K)(n.lookup)?n.lookup.dataType:n.dataType:"string"}}ready(){this._initOptions();var e=this._options;return(0,x.gx)(e.items).done(t=>{e.items=t}).fail(()=>{e.items=[]})}_convertFromGridGroupSummaryItems(e){if((0,_.$K)(e)&&e.length>0)return e.map(t=>({value:t.value,name:t.name}))}getCellData(e,t,a){var r,n,s={cellSourceData:{},value:r},o=this.getColumns(),l=this._correctCellIndex(t);if(e<this.getHeaderRowCount())n=this.getColumns(!0)[e][t],s.cellSourceData.rowType="header",s.cellSourceData.column=n&&n.gridColumn,s.value=n&&n.caption;else{e-=this.getHeaderRowCount();var u=this._options.items.length&&this._options.items[e];if(u){var h=u.values;switch(s.cellSourceData.rowType=u.rowType,s.cellSourceData.column=o[t]&&o[t].gridColumn,u.rowType){case"groupFooter":case"totalFooter":l<h.length&&((0,_.$K)(r=h[l])?(s.cellSourceData.value=r.value,s.cellSourceData.totalSummaryItemName=r.name,s.value=P.getSummaryText(r,this._options.summaryTexts)):s.cellSourceData.value=void 0);break;case"group":if(s.cellSourceData.groupIndex=u.groupIndex,t<1)s.cellSourceData.column=this._options.groupColumns[u.groupIndex],s.cellSourceData.value=u.key[u.groupIndex],s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(u.summaryCells[0]),s.value=this._getGroupValue(u);else{var p=u.values[l];if(Array.isArray(p)){s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(p),r="";for(var v=0;v<p.length;v++)r+=(v>0?a?"\n":" \n ":"")+P.getSummaryText(p[v],this._options.summaryTexts);s.value=r}else s.cellSourceData.value=void 0}break;default:if(n=o[t]){var g=h[l],m=P.getDisplayValue(n,g,u.data,u.rowType);s.value=!isFinite(m)||(0,_.$K)(n.customizeText)?a&&(0,_.$K)(n.customizeText)&&n.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?m:P.formatValue(m,n):m,s.cellSourceData.value=g}s.cellSourceData.data=u.data}}}return s}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(e,t){var{items:a}=this._options,r=a[e],n=this._correctCellIndex(t);return r&&"groupFooter"===r.rowType||"totalFooter"===r.rowType||r.summaryCells&&r.summaryCells[n]&&r.summaryCells[n].length>0&&r.summaryCells[n][0].alignByColumn}getCellMerging(e,t){var{columns:a}=this._options,r=a[e]&&a[e][t];return r?{colspan:(r.exportColspan||1)-1,rowspan:(r.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}P.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",formats:["xlsx"],allowExportSelectedData:!1,texts:{exportTo:y.Z.format("dxDataGrid-exportTo"),exportAll:y.Z.format("dxDataGrid-exportAll"),exportSelectedRows:y.Z.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:class IN extends P.ViewController{init(){this.throwWarningIfNoOnExportingEvent(),this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]})}_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(e,t){e.width=t}_getColumns(e){var a,r,t=[],n=this._columnsController,s=n.getRowCount();for(a=0;a<=s;a++){var o=[];r=n.getVisibleColumns(a,!0);var l=void 0;if(a===s)if(this._updateLockCount)l=e;else{var d=this._getColumnWidths(this._headersView,this._rowsView);if(d&&d.length){l={};for(var u=0;u<r.length;u++)l[r[u].index]=d[u]}}for(var h=0;h<r.length;h++){var p=(0,f.l)({},r[h],{dataType:"datetime"===r[h].dataType?"date":r[h].dataType,gridColumn:r[h]});if(this._needColumnExporting(p)){var v=this._calculateExportColspan(p);(0,_.$K)(v)&&(p.exportColspan=v),l&&this._updateColumnWidth(p,l[p.index]),o.push(p)}}t.push(o)}return r=t[s],t=function CN(i,e){for(var t=u=>u||1,a=[],r=(i[0]||[]).reduce((u,h)=>u+t(h.colspan),0),n=(u=>{var h=0,p=0;return()=>{var v=u[h]||[],g=v[p++];return p>=v.length&&(h++,p=0),g&&(g.colspan=t(g.colspan),g.rowspan=t(g.rowspan)),g}})(i),s=(u,h,p)=>{if((a[u]=a[u]||[])[h]=p,p.colspan>1||p.rowspan>1){for(var g=(0,f.l)({},p,e),m=1;m<p.colspan;m++)s(u,h+m,g);for(var w=1;w<p.rowspan;w++)for(var I=0;I<p.colspan;I++)s(u+w,h+I,g)}},o=n(),l=0;o;){for(var d=0;d<r&&o;d++)a[l]&&a[l][d]||(s(l,d,o),d+=o.colspan-1,o=n());l++}return a}(t.slice(0,-1),this._getEmptyCell()),t.push(r),t}_calculateExportColspan(e){if(e.isBand){var t=this._columnsController.getChildrenByBandColumn(e.index,!0);if((0,_.$K)(t))return t.reduce((a,r)=>this._needColumnExporting(r)?a+(this._calculateExportColspan(r)||1):a,0)}}_needColumnExporting(e){return!e.command&&(e.allowExporting||void 0===e.allowExporting)}_getFooterSummaryItems(e,t){var a=[],r=1,n=0;do{for(var s=[],o=0;o<e.length;o++){var l=e[o],d=l.length;r<d&&(r=d),s.push(l[n])}a.push({values:s,rowType:t?"totalFooter":"groupFooter"})}while(n++<r-1);return a}_hasSummaryGroupFooters(){var e=this.option("summary.groupItems");if((0,_.$K)(e))for(var t=0;t<e.length;t++)if(e[t].showInGroupFooter)return!0;return!1}_getItemsWithSummaryGroupFooters(e){for(var t=[],a=[],r=[],n=0;n<e.length;n++){var s=e[n];"groupFooter"===s.rowType?(r=this._getFooterSummaryItems(s.summaryCells),t=t.concat(a,r),a=[]):a.push(s)}return t.length?t:a}_updateGroupValuesWithSummaryByColumn(e){for(var t=[],a=0;a<e.length;a++){var r=e[a],{summaryCells:n}=r;if("group"===r.rowType&&n&&n.length>1){for(var s=r.values.length,o=1;o<n.length;o++)for(var l=0;l<n[o].length;l++){var d=n[o][l];d&&d.alignByColumn&&(Array.isArray(t[o-s])||(t[o-s]=[]),t[o-s].push(d))}t.length>0&&(r.values.push(...t),t=[])}}}_processUnExportedItems(e){for(var r,n,t=this._columnsController.getVisibleColumns(null,!0),a=this._columnsController.getGroupColumns(),s=0;s<e.length;s++){var o=e[s],l=!1;r=[],n=[];for(var d=0;d<t.length;d++){var u=t[d];if(l||(l=["detailExpand","buttons"].includes(u.type)),this._needColumnExporting(u)&&(o.values&&r.push("group"!==o.rowType||r.length?o.values[d]:o.key[o.groupIndex]),o.summaryCells))if("group"!==o.rowType||n.length)n.push(o.summaryCells[d]);else{var h=d-a.length+o.groupIndex;n.push(o.summaryCells[l?h:h+1])}}r.length&&(o.values=r),n.length&&(o.summaryCells=n)}}_getAllItems(e){var l,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,r=new x.BH,n=this._dataController.footerItems(),s=n.length&&n[0],o=a.option("summary.totalItems");return(0,x.gx)(e).done(d=>{this._dataController.loadAll(d,t).done((u,h)=>{a._updateGroupValuesWithSummaryByColumn(u),a._hasSummaryGroupFooters()&&(u=a._getItemsWithSummaryGroupFooters(u)),l=s&&s.summaryCells,(0,_.$K)(h)&&o&&(l=a._getSummaryCells(o,h));var p=s&&a._getFooterSummaryItems(l,!0);p&&(u=u.concat(p)),a._processUnExportedItems(u),r.resolve(u)}).fail(r.reject)}).fail(r.reject),r}_getSummaryCells(e,t){return this._dataController._calculateSummaryCells(e,t,this._columnsController.getVisibleColumns(null,!0),(a,r)=>this._dataController._isDataColumn(r)?r.index:-1)}_getSelectedItems(){return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(this._selectionController.loadSelectedItemsWithFilter(),!0):this._getAllItems(this._selectionController.getSelectedRowsData())}_getColumnWidths(e,t){return e&&e.isVisible()?e.getColumnWidths():t.getColumnWidths()}throwWarningIfNoOnExportingEvent(){var e,t,a=null===(t=(e=this.component).hasActionSubscription)||void 0===t?void 0:t.call(e,"onExporting");this.option("export.enabled")&&!a&&Q.Z.log("W1024")}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(e){var a,t=this._getColumnWidths(this._headersView,this._rowsView);if(t&&t.length){a={};for(var r=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0),n=0;n<r.length;n++)a[r[n].index]=t[n]}return new EN(this,a,e)}exportTo(e,t){this._selectionOnly=e;var a=this.getAction("onExporting"),r={rtlEnabled:this.option("rtlEnabled"),selectedRowsOnly:!!e,format:t,fileName:"DataGrid",cancel:!1};(0,_.mf)(a)&&a(r)}publicMethods(){return["getDataProvider"]}selectionOnly(e){if(!(0,_.$K)(e))return this._isSelectedRows;this._isSelectedRows=e,this.selectionOnlyChanged.fire()}optionChanged(e){super.optionChanged(e),"export"===e.name&&this.throwWarningIfNoOnExportingEvent()}needLoadItemsOnExportingSelectedItems(){var e;return null!==(e=this.option("loadItemsOnExportingSelectedItems"))&&void 0!==e?e:this._dataController._dataSource.remoteOperations().filtering}}},extenders:{controllers:{editing:i=>class extends i{callbackNames(){var e=super.callbackNames();return(0,_.$K)(e)?e.push("editingButtonsUpdated"):["editingButtonsUpdated"]}_updateEditButtons(){super._updateEditButtons(),this.editingButtonsUpdated.fire()}}},views:{headerPanel:i=>class extends i{_getToolbarItems(){var e=super._getToolbarItems(),t=this._getExportToolbarButton();return t&&(e.push(t),this._correctItemsPosition(e)),e}_getExportToolbarButton(){var e=this._getExportToolbarItems();if(0===e.length)return null;var t=this._needDisableExportButton(),a={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:e},disabled:t};if(1===e.length){var r=(0,V.Z)((0,V.Z)({},e[0]),{hint:e[0].text,elementAttr:{class:jm}});a.widget="dxButton",a.showText="inMenu",a.options=r}else{var n={icon:"export",displayExpr:"text",items:e,hint:this.option("export.texts.exportTo"),elementAttr:{class:jm},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};a.options=n,a.widget="dxDropDownButton",a.menuItemTemplate=(s,o,l)=>{this._createComponent((0,c.Z)(l),ca,{items:e})}}return a}_getExportToolbarItems(){var e,t=this.option("export"),a=this.option("export.texts"),r=null!==(e=this.option("export.formats"))&&void 0!==e?e:[];if(!t.enabled)return[];var n=[];return r.forEach(s=>{var o=s.toUpperCase(),l="export";"xlsx"===s&&(o="Excel",l="xlsxfile"),"pdf"===s&&(l="pdffile"),n.push({text:(0,qe.WU)(a.exportAll,o),icon:l,onClick:()=>{this._exportController.exportTo(!1,s)}}),t.allowExportSelectedData&&n.push({text:(0,qe.WU)(a.exportSelectedRows,o),icon:"exportselected",onClick:()=>{this._exportController.exportTo(!0,s)}})}),n}_correctItemsPosition(e){e.sort((t,a)=>t.sortIndex-a.sortIndex)}_isExportButtonVisible(){return this.option("export.enabled")}optionChanged(e){super.optionChanged(e),"export"===e.name&&(e.handled=!0,this._invalidate())}_needDisableExportButton(){var e=!this._columnsController.hasVisibleDataColumns(),t=this._editingController.hasChanges();return e||t}_columnOptionChanged(e){if(super._columnOptionChanged(e),P.checkChanges(e.optionNames,["groupIndex","visible","all"])){var a=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",a)}}init(){super.init(),this._exportController=this.getController("export"),this._editingController.editingButtonsUpdated.add(()=>{var e=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",e)})}isVisible(){return super.isVisible()||this._isExportButtonVisible()}}}}});var Ha="dx-row-focused",ON=".dx-row.".concat(Ha),Xm="dx-cell-focus-disabled",xn={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:class LN extends J.ViewController{getKeyboardController(){return this.getController("keyboardNavigation")}getDataController(){return this.getController("data")}init(){this.component._optionsByReference.focusedRowKey=!0}optionChanged(e){var{name:t,value:a,previousValue:r}=e;switch(t){case"focusedRowIndex":this._focusRowByIndex(a),this.getKeyboardController()._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(a)&&JSON.stringify(a)===JSON.stringify(r))return;this._focusRowByKey(a),this.getKeyboardController()._fireFocusedRowChanged(),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return["navigateToRow","isRowFocused"]}isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")}_focusRowByIndex(e,t){this.option("focusedRowEnabled")&&((e=void 0!==e?e:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(e,t))}_focusRowByIndexCore(e,t){var a=this.getDataController().pageSize(),r=()=>{if(this._isValidFocusedRowIndex(e)){var s=e-this.getDataController().getRowIndexOffset(!0);if(!t||t.paging&&!t.filtering){var o=this.getDataController()._getLastItemIndex();s=Math.min(s,o)}var l=this.getDataController().getKeyByRowIndex(s,!0);(0,_.$K)(l)&&!this.isRowFocused(l)&&this.option("focusedRowKey",l)}};if(a>=0)if(this._isLocalRowIndex(e))r();else{var n=Math.floor(e/this.getDataController().pageSize());(0,x.gx)(this.getDataController().pageIndex(n),this.getDataController().waitReady()).done(()=>{r()})}}_isLocalRowIndex(e){if(this.getKeyboardController()._isVirtualScrolling()){var a=Math.floor(e/this.getDataController().pageSize()),r=this.getDataController().virtualItemsCount(),n=r?r.begin:-1,s=this.getDataController().getVisibleRows().length+this.getDataController().getRowIndexOffset(),o=Math.ceil(s/this.getDataController().pageSize());return n<=e&&o>a}return!0}_setFocusedRowKeyByIndex(e){if(this._isValidFocusedRowIndex(e)){var t=Math.min(e-this.getDataController().getRowIndexOffset(),this.getDataController().items().length-1),a=this.getDataController().getKeyByRowIndex(t);(0,_.$K)(a)&&!this.isRowFocused(a)&&this.option("focusedRowKey",a)}}_focusRowByKey(e){(0,_.$K)(e)?this._navigateToRow(e,!0):this._resetFocusedRow()}_resetFocusedRow(){var e=this.option("focusedRowKey"),t=(0,_.$K)(e);!t&&this.option("focusedRowIndex")<0||(t&&this.option("focusedRowKey",null),this.getKeyboardController().setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getDataController().updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),this.getKeyboardController()._fireFocusedRowChanged())}_isValidFocusedRowIndex(e){var t=this.getDataController().getVisibleRows()[e];return!t||"data"===t.rowType||"group"===t.rowType}navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e)}_navigateToRow(e,t){var a=this,r=a.isAutoNavigateToFocusedRow(),n=new x.BH;if(void 0===e||!this.getDataController().dataSource())return n.reject().promise();var s=a.getFocusedRowIndexByKey(e);return!r&&t||s>=0?a._navigateTo(e,n,t):this.getDataController().getPageIndexByKey(e).done(o=>{o<0?n.resolve(-1):o===this.getDataController().pageIndex()?this.getDataController().reload().done(()=>{a.isRowFocused(e)&&this.getDataController().getRowIndexByKey(e)>=0?n.resolve(a.getFocusedRowIndexByKey(e)):a._navigateTo(e,n,t)}).fail(n.reject):this.getDataController().pageIndex(o).done(()=>{a._navigateTo(e,n,t)}).fail(n.reject)}).fail(n.reject),n.promise()}_navigateTo(e,t,a){var r=this.getDataController().getRowIndexByKey(e),n=O.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&n&&r<0?this._navigateToVirtualRow(e,t,a):this._navigateToVisibleRow(e,t,a)}_navigateToVisibleRow(e,t,a){if(a)this._triggerUpdateFocusedRow(e,t);else{var r=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,t).done(()=>{t.resolve(r)})}}_navigateToVirtualRow(e,t,a){var r=this.getDataController()._rowsScrollController,n=O.getIndexByKey(e,this.getDataController().items(!0)),s=this.getView("rowsView").getScrollable();if(r&&s&&n>=0){var o=n+this.getDataController().getRowIndexOffset(!0),l=r.getItemOffset(o),d=()=>{this.getDataController().totalCount()&&!this.getDataController().items().length||(this.component.off("contentReady",d),a?this._triggerUpdateFocusedRow(e,t):t.resolve(o))};this.component.on("contentReady",d),this.getView("rowsView").scrollTopPosition(l)}else t.resolve(-1)}_triggerUpdateFocusedRow(e,t){var r,a=this.getFocusedRowIndexByKey(e);this._isValidFocusedRowIndex(a)?(this.option("focusedRowEnabled")?this.getDataController().updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):r=this.getView("rowsView").scrollToRowElement(e),(0,x.gx)(r).done(()=>{this.getKeyboardController().setFocusedRowIndex(a),t&&t.resolve(a)})):t&&t.resolve(-1)}getFocusedRowIndexByKey(e){var t=this.getDataController().getRowIndexByKey(e,!0);return t>=0?t+this.getDataController().getRowIndexOffset(!0):-1}_focusRowByKeyOrIndex(){var e=this.option("focusedRowKey"),t=this.option("focusedRowIndex");if((0,_.$K)(e)){var a=this.getDataController().getRowIndexByKey(e);a>=0?(this.getKeyboardController()._isVirtualScrolling()&&(t=a+this.getDataController().getRowIndexOffset()),this.getKeyboardController().setFocusedRowIndex(t),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(r=>{t>=0&&r<0?this._focusRowByIndex():t<0&&r>=0&&this.getKeyboardController().setFocusedRowIndex(r)})}else t>=0&&this._focusRowByIndex(t)}isRowFocused(e){var t=this.option("focusedRowKey");if((0,_.$K)(t))return(0,E.bY)(e,this.option("focusedRowKey"))}updateFocusedRow(e){var t,s,o,a=this,r=null!==(t=e.focusedRowIndex)&&void 0!==t?t:a.getDataController().getRowIndexByKey(e.focusedRowKey),n=a.getView("rowsView");(0,S.S6)(n.getTableElements(),(l,d)=>{var u=0===l;s=(0,c.Z)(d),a._clearPreviousFocusedRow(s,r);var h=a._prepareFocusedRow({changedItem:a.getDataController().getVisibleRows()[r],$tableElement:s,focusedRowIndex:r});u&&(o=h)}),!e.preventScroll&&o&&n.scrollToElementVertically(o)}_clearPreviousFocusedRow(e,t){var a=e.find(ON).filter((n,s)=>{var o=(0,c.Z)(s).closest(".".concat(this.addWidgetPrefix("table")));return e.is(o)});a.removeClass(Ha).removeClass(Xm).removeAttr("tabindex"),a.children("td").removeAttr("tabindex"),0!==t&&(0,c.Z)(this.getView("rowsView").getRowElement(0)).removeClass(Xm).removeAttr("tabIndex")}_prepareFocusedRow(e){var t,{changedItem:a}=e;if(a&&("data"===a.rowType||"group"===a.rowType)){var{focusedRowIndex:r}=e,{$tableElement:n}=e,s=this.option("tabindex")||0,o=this.getView("rowsView");(t=(0,c.Z)(o._getRowElements(n).eq(r))).addClass(Ha).attr("tabindex",s)}return t}}},extenders:{controllers:{keyboardNavigation:i=>class extends i{init(){var e=this.option("focusedRowIndex"),t=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),super.init(),this.setRowFocusType(),this._focusedCellPosition={},(0,_.$K)(e)&&e>=0&&(this._focusedCellPosition.rowIndex=e),(0,_.$K)(t)&&t>=0&&(this._focusedCellPosition.columnIndex=t)}setFocusedRowIndex(e){super.setFocusedRowIndex(e),this.option("focusedRowIndex",e)}setFocusedColumnIndex(e){super.setFocusedColumnIndex(e),this.option("focusedColumnIndex",e)}_escapeKeyHandler(e,t){return t||!this.option("focusedRowEnabled")?super._escapeKeyHandler(e,t):!!this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(e.originalEvent.target),!0),!0)}_updateFocusedCellPosition(e,t){var a=super._updateFocusedCellPosition(e,t);return a&&a.columnIndex>=0&&this._fireFocusedCellChanged(e),a}},editorFactory:i=>class extends i{renderFocusOverlay(e,t){var a,n,r=this.option("focusedRowEnabled");r&&null!==(a=this._keyboardNavigationController)&&void 0!==a&&a.isRowFocusType()&&!this._editingController.isEditing()?r&&"row"===this._keyboardNavigationController._getElementType(e)&&!e.hasClass(Ha)&&(n=this._keyboardNavigationController.getFirstValidCellInRow(e),this._keyboardNavigationController.focus(n)):super.renderFocusOverlay(e,t)}},columns:i=>class extends i{getSortDataSourceParameters(e,t){var a=super.getSortDataSourceParameters.apply(this,arguments),r=this._dataController._dataSource,n=this._dataController.store(),s=n&&n.key(),o=r&&r.remoteOperations()||{},l=Object.keys(o).every(u=>!o[u]);if(s&&(this.option("focusedRowEnabled")&&!1!==this._focusController.isAutoNavigateToFocusedRow()||t)){var d=(s=Array.isArray(s)?s:[s]).filter(u=>!this.columnOption(u,"sortOrder"));d.length&&(a=a||[],l?a.push({selector:r.getDataIndexGetter(),desc:!1}):d.forEach(u=>a.push({selector:u,desc:!1})))}return a}},data:i=>class extends i{constructor(){super(...arguments),this._needToUpdateFocusedRowByIndex=!1}_applyChange(e){if(!e||"updateFocusedRow"!==e.changeType)return super._applyChange.apply(this,arguments)}_fireChanged(e){if(super._fireChanged(e),this.option("focusedRowEnabled")&&this._dataSource){var a="update"===e.changeType&&e.repaintChangesOnly&&e.changeTypes&&e.changeTypes.indexOf("remove")>=0;this._needToUpdateFocusedRowByIndex?(this._needToUpdateFocusedRowByIndex=!1,this._focusController._focusRowByIndex()):"refresh"===e.changeType&&e.items.length||a?(this._updatePageIndexes(),this._updateFocusedRow(e)):"append"===e.changeType||"prepend"===e.changeType?this._updatePageIndexes():"update"===e.changeType&&e.repaintChangesOnly&&this._updateFocusedRow(e)}}_handleDataPushed(e){super._handleDataPushed(e);var t=this.option("focusedRowKey");this._needToUpdateFocusedRowByIndex=e?.some(a=>"remove"===a.type&&(0,E.bY)(a.key,t))}_updatePageIndexes(){var e=this._lastRenderingPageIndex||0,t=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=t,this._isPagingByRendering=t!==e}isPagingByRendering(){return this._isPagingByRendering}_updateFocusedRow(e){var t=e.operationTypes||{},{reload:a,fullReload:r,pageIndex:n,paging:s}=t,o=this._keyboardNavigationController._isVirtualScrolling(),l=s&&!o,d=this.option("focusedRowKey"),u=this._focusController.isAutoNavigateToFocusedRow();if(a&&!1===n&&!r&&(0,_.$K)(d))this._focusController._navigateToRow(d,!0).done(I=>{I<0&&this._focusController._focusRowByIndex(void 0,t)});else if(l&&u){var p=this.getRowIndexByKey(d),v=this.option("focusedRowIndex");v>=0&&(v===p||!(p>=0))&&this._focusController._focusRowByIndex(v,t)}else l&&!u&&this.getRowIndexByKey(d)<0?this.option("focusedRowIndex",-1):t.fullReload&&this._focusController._focusRowByKeyOrIndex()}getPageIndexByKey(e){var t=this,a=new x.BH;return t.getGlobalRowIndexByKey(e).done(r=>{a.resolve(r>=0?Math.floor(r/t.pageSize()):-1)}).fail(a.reject),a.promise()}getGlobalRowIndexByKey(e){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(e):this._calculateGlobalRowIndexByFlatData(e)}_calculateGlobalRowIndexByFlatData(e,t,a){var r=this,n=new x.BH,s=r._dataSource;if(Array.isArray(e)||(i=>"string"==typeof i&&i.startsWith(vo)&&i.length===vo.length+36)(e))return n.resolve(-1).promise();var o=r._generateFilterByKey(e);return s.load({filter:r._concatWithCombinedFilter(o),skip:0,take:1}).done(l=>{l.length>0?(o=r._generateOperationFilterByKey(e,l[0],a),s.load({filter:r._concatWithCombinedFilter(o,t),skip:0,take:1,requireTotalCount:!0}).done((d,u)=>{n.resolve(u.totalCount)})):n.resolve(-1)}),n.promise()}_concatWithCombinedFilter(e,t){var a=this.getCombinedFilter();return O.combineFilters([e,a,t])}_generateBooleanFilter(e,t,a){var{desc:r}=a;switch(!0){case!1===t&&r:return[e,"=",!0];case!1===t&&!r:return[e,"=",null];case!0===t&&!r:case!(0,_.jn)(t)&&r:return[e,"<>",t];default:return}}_generateOperationFilterByKey(e,t,a){var r=this,n=r.option("dateSerializationFormat"),s=r._dataSource.remoteOperations().filtering,o=r._dataSource.remoteOperations().sorting,l=r._generateFilterByKey(e,"<"),d=r._columnsController.getSortDataSourceParameters(!s,!0);if(a){var u=r._columnsController.getGroupDataSourceParameters(!s);u&&(d=d?u.concat(d):u)}return d&&d.slice().reverse().forEach(h=>{var{selector:p,desc:v,compare:g}=h,{getter:m,rawValue:w,safeValue:I}=((i,e,t)=>{var{isRemoteFiltering:a,dateSerializationFormat:r,getSelector:n}=t,{selector:s}=i,o=(0,_.mf)(s)?s:n(s),l=o?o(e):e[s];return{getter:o,rawValue:l,safeValue:a&&(0,_.J_)(l)?he.serializeDate(l,r):l}})(h,t,{isRemoteFiltering:s,dateSerializationFormat:n,getSelector:M=>r._columnsController.columnOption(M,"selector")});if(l=[[p,"=",I],"and",l],null===w||(0,_.jn)(w)){var A=r._generateBooleanFilter(p,I,v);A&&(l=[A,"or",l])}else{var G,F=v?">":"<";g&&!o?G=M=>"<"===F?g(w,m(M))>=1:g(w,m(M))<=-1:(G=[p,F,I],v||(G=[G,"or",[p,"=",null]])),l=[G,"or",l]}}),l}_generateFilterByKey(e,t){var a=this._dataSource.key(),r=[];if(t||(t="="),Array.isArray(a))for(var n=0;n<a.length;++n){var s=e[a[n]];s&&(r.length>0&&r.push("and"),r.push([a[n],t,s]))}else r=[a,t,e];return r}_getLastItemIndex(){return this.items(!0).length-1}},editing:i=>class extends i{_deleteRowCore(e){var t=super._deleteRowCore.apply(this,arguments),a=this._dataController.getKeyByRowIndex(e);t.done(()=>{var r=this._dataController.getRowIndexByKey(a),n=this._dataController.getVisibleRows();-1===r&&!n.length&&this._focusController._resetFocusedRow()})}}},views:{rowsView:i=>class extends i{_createRow(e){var t=super._createRow.apply(this,arguments);return this.option("focusedRowEnabled")&&e&&this._focusController.isRowFocused(e.key)&&t.addClass(Ha),t}_checkRowKeys(e){if(super._checkRowKeys.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var t=this._dataController.store();t&&!t.key()&&this._dataController.fireError("E1042","Row focusing")}}_update(e){"updateFocusedRow"===e.changeType?this.option("focusedRowEnabled")&&this._focusController.updateFocusedRow(e):super._update(e)}updateFocusElementTabIndex(e,t){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(t):super.updateFocusElementTabIndex(e)}_setFocusedRowElementTabIndex(e){var t,a=this.option("focusedRowKey"),r=null!==(t=this.option("tabIndex"))&&void 0!==t?t:0,n=this._columnsController,s=this._dataController.getRowIndexByKey(a),o=this.option("focusedColumnIndex"),l=this._findRowElementForTabIndex(),u=this._dataController.dataSource()?.operationTypes(),h=!u||u.paging;(0,_.$K)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),l.attr("tabIndex",r);var p=this.option("focusedRowIndex")-this._dataController.getRowIndexOffset(!0);!h&&s<0&&p>=0&&this._focusController.updateFocusedRow({focusedRowIndex:p,preventScroll:e}),s>=0&&!e&&(o<0&&(o=0),s+=this._dataController.getRowIndexOffset(),o+=n.getColumnIndexOffset(),this._keyboardNavigationController.setFocusedCellPosition(s,o),this._focusController.isAutoNavigateToFocusedRow()&&!h&&!this._dataController.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize)))}_findRowElementForTabIndex(){var e=this.option("focusedRowKey"),t=this._dataController.getRowIndexByKey(e);return(0,c.Z)(this.getRowElement(t>=0?t:0))}scrollToRowElement(e){var t=this._dataController.getRowIndexByKey(e),a=(0,c.Z)(this.getRow(t));return this.scrollToElementVertically(a)}scrollToElementVertically(e){var t=this.getScrollable();if(t&&e.length){var a=t.getScrollElementPosition(e,"vertical");return this.scrollTopPosition(a)}return(new x.BH).resolve()}scrollTopPosition(e){var t=new x.BH,a=this.getScrollable();if(a){var r=a.scrollTop(),n=()=>{a.off("scroll",n),t.resolve()};if(e!==r)return a.on("scroll",n),this._dataController.resetFilterApplying(),a.scrollTo({top:e}),t.promise()}return t.resolve()}}}}},HN=Number.MAX_SAFE_INTEGER||9007199254740991;P.registerModule("focus",(0,V.Z)((0,V.Z)({},xn),{extenders:(0,V.Z)((0,V.Z)({},xn.extenders),{controllers:(0,V.Z)((0,V.Z)({},xn.extenders.controllers),{data:i=>class extends(xn.extenders.controllers.data(i)){changeRowExpand(e,t){return this.option("focusedRowEnabled")&&Array.isArray(e)&&this.isRowExpanded(e)&&(!t||!this._keyboardNavigationController.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(e)&&this.option("focusedRowKey",e),super.changeRowExpand(e,t)}_isFocusedRowInsideGroup(e){var t=this.option("focusedRowKey"),a=this.getRowIndexByKey(t),r=a>=0&&this.getVisibleRows()[a],n=this._columnsController.getGroupDataSourceParameters(!0);if(r)for(var s=0;s<e.length;++s)if((0,q.vb)(n[s]&&n[s].selector)(r.data)!==e[s])return!1;return!0}_getGroupPath(e,t){for(var a=[],r=[e];r&&r[0]&&t;){var n=r[0];void 0!==n.key&&a.push(n.key),r=n.items,t--}return a}_expandGroupByPath(e,t,a){var r=new x.BH;return a++,e.expandRow(t.slice(0,a)).done(()=>{a===t.length?r.resolve():e._expandGroupByPath(e,t,a).done(r.resolve).fail(r.reject)}).fail(r.reject),r.promise()}_calculateGlobalRowIndexByGroupedData(e){var t=this,a=t._dataSource,r=t._generateFilterByKey(e),n=new x.BH,s=Array.isArray(e),o=a.group();return s?n.resolve(-1).promise():a._grouping._updatePagingOptions?(a.load({filter:t._concatWithCombinedFilter(r),group:o}).done(l=>{if(!l||0===l.length||!(0,_.$K)(l[0].key)||-1===l[0].key)return n.resolve(-1).promise();var d=t._getGroupPath(l[0],o.length);t._expandGroupByPath(t,d,0).done(()=>{t._calculateExpandedRowGlobalIndex(n,e,d,o)}).fail(n.reject)}).fail(n.reject),n.promise()):(t._calculateGlobalRowIndexByFlatData(e,null,!0).done(n.resolve).fail(n.reject),n)}_calculateExpandedRowGlobalIndex(e,t,a,r){var u,n=Kt(a,{group:r}),s=this._dataSource,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=s.pageSize();s._grouping._updatePagingOptions({skip:0,take:HN},(h,p)=>{(0,E.bY)(h.path,a)&&(u=p)}),this._calculateGlobalRowIndexByFlatData(t,n).done(h=>{var p,v;h<0?e.resolve(-1):(p=(u%d||d)+h-a.length,v=l?0:Math.floor(p/(d-a.length))*a.length,e.resolve(p=u+h+v))}).fail(e.reject)}}})})}));var Ll,Fi,zN=T(8473),Qm=(0,B.Jj)(),ot="dxDraggable",WN=(0,D.V4)(fe.BL,ot),KN=(0,D.V4)(fe.pB,ot),GN=(0,D.V4)(fe.ut,ot),UN=(0,D.V4)(fe.IO,ot),YN=(0,D.V4)(fe.Zu,ot),jN=(0,D.V4)(ae.Z.down,ot),qN=(0,D.V4)("keydown",ot),Pl=i=>({x:i.pageX-(0,c.Z)(Qm).scrollLeft(),y:i.pageY-(0,c.Z)(Qm).scrollTop()});class ef{constructor(e,t){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=t,"vertical"===e?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,t){var a=!1;e.some(r=>{var n=(0,c.Z)(r),s=n.hasClass("dx-overlay-wrapper"),o=n.hasClass("dx-overlay-content");return!(!s&&!o)||(a=this._trySetScrollable(r,t))}),a||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return("auto"===e.css(this._overFlowAttr)||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,b.dz)(e):(0,b.Cr)(e))}_trySetScrollable(e,t){var r,a=(0,c.Z)(e),n=this._component.option("scrollSensitivity"),s=this.isScrollable(a);return s&&(n>(r=this._calculateDistanceToBorders(a,t))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(r[this._limitProps.start]),this._$scrollableAtPointer=a):n>r[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(r[this._limitProps.end]),this._$scrollableAtPointer=a):(s=!1,this._preventScroll=!1)),s}_calculateDistanceToBorders(e,t){var r,a=e.get(0);return a?(r=(0,ne.l)(a),{left:t.x-r.left,top:t.y-r.top,right:r.right-t.x,bottom:r.bottom-t.y}):{}}_calculateScrollSpeed(e){var t=this._component,a=t.option("scrollSensitivity"),r=t.option("scrollSpeed");return Math.ceil(((a-e)/a)**2*r)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var e=this._$scrollableAtPointer.closest(".dx-scrollable"),t=e.data("dxScrollable")||e.data("dxScrollView");if(t){var a=t.scrollOffset()[this._limitProps.start]+this._scrollSpeed;t.scrollTo({[this._limitProps.start]:a})}}else{var r=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](r)}var n=this._component._dragMoveArgs;n&&this._component._dragMoveHandler(n)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,t){if(!e)return!1;var a=(0,ne.l)(e.get(0)),r=a[this._limitProps.start],n=a[this._sizeAttr],s=Pl(t),o="width"===this._sizeAttr?s.x:s.y;return o<r||o>r+n}}var tH=zN.Z.inherit({ctor(i){this.callBase(),this._strategy=i},_step(){var i=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;i&&i.scrollByStep(),e&&e.scrollByStep()}}),tf=ta.Z.inherit({reset:E.ZT,dragMove:E.ZT,dragEnter:E.ZT,dragLeave:E.ZT,dragEnd(i){return this._getSourceDraggable()._fireRemoveEvent(i),(0,x.BH)().resolve()},_fireRemoveEvent:E.ZT,_getDefaultOptions(){return(0,f.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,f.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new tH(this),this._horizontalScrollHelper=new ef("horizontal",this),this._verticalScrollHelper=new ef("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:i=>((0,_.Kn)(i)&&(i={h:i.x,v:i.y}),{left:(i=(0,E.Um)(i).map(e=>parseFloat(e)))[0],top:1===i.length?i[0]:i[1]}),_getNormalizedCursorOffset(i,e){return(0,_.mf)(i)&&(i=i.call(this,e)),this._normalizeCursorOffset(i)},_calculateElementOffset(i){var e,t,{event:a}=i,r=(0,c.Z)(i.itemElement),n=(0,c.Z)(i.dragElement),s=this._dragElementIsCloned(),o=this.option("cursorOffset"),l={left:0,top:0},d=this._initialLocate=(0,de.jt)(n);return(s||i.initialOffset||o)&&(e=i.initialOffset||r.offset(),o&&(l=this._getNormalizedCursorOffset(o,i),isFinite(l.left)&&(e.left=a.pageX),isFinite(l.top)&&(e.top=a.pageY)),t=n.offset(),e.top-=t.top+(l.top||0)-d.top,e.left-=t.left+(l.left||0)-d.left),e},_initPosition(i){var e=(0,c.Z)(i.dragElement),t=this._calculateElementOffset(i);t&&this._move(t,e),this._startPosition=(0,de.jt)(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(i){return(0,Me.H0)(this.NAME)+(i?"-".concat(i):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var i=this.$element(),e=i.children(".dx-template-wrapper");return e.length?e:i},_attachEventHandlers(){if(!this.option("disabled")){var i=this._$content(),e=this._getItemsSelector(),t=this.option("allowMoveByClick"),a={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(r,n)=>{var s=this.option("group"),o=this._getSourceDraggable().option("group"),l=this._getScrollable(r);return!this._verticalScrollHelper.isOutsideScrollable(l,n)&&!this._horizontalScrollHelper.isOutsideScrollable(l,n)&&o&&o===s}};t&&(i=this._getArea(),C.Z.on(i,jN,a,this._pointerDownHandler.bind(this))),">"===e[0]&&(e=e.slice(1)),C.Z.on(i,WN,e,a,this._dragStartHandler.bind(this)),C.Z.on(i,KN,a,this._dragMoveHandler.bind(this)),C.Z.on(i,GN,a,this._dragEndHandler.bind(this)),C.Z.on(i,UN,a,this._dragEnterHandler.bind(this)),C.Z.on(i,YN,a,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&C.Z.on(i,qN,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(i,e){return{container:(0,j.uD)(e),model:{itemData:this.option("itemData"),itemElement:(0,j.uD)(i)}}},_createDragElement(i){var e=i,t=this.option("clone"),a=this._getContainer(),r=this.option("dragTemplate");return r?(r=this._getTemplate(r),e=(0,c.Z)("<div>").appendTo(a),r.render(this._getDragTemplateArgs(i,e))):t&&(e=(0,c.Z)("<div>").appendTo(a),i.clone().css({width:i.css("width"),height:i.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==i.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){C.Z.off(this._$content(),".".concat(ot)),C.Z.off(this._getArea(),".".concat(ot))},_move(i,e){(0,de.pB)(e||this._$dragElement,i)},_getDraggableElement(i){var e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();var a=(0,c.Z)(i&&i.target),r=this._getItemsSelector();if(">"===r[0]){var n=this._$content().find(r);n.is(a)||(a=a.closest(n))}return a},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(i){if(!(0,D.r1)(i)){var e={},t=this.$element(),a=this.option("dragDirection");("horizontal"===a||"both"===a)&&(e.left=i.pageX-t.offset().left+(0,de.jt)(t).left-(0,b.dz)(t)/2),("vertical"===a||"both"===a)&&(e.top=i.pageY-t.offset().top+(0,de.jt)(t).top-(0,b.Cr)(t)/2),this._move(e,t),this._getAction("onDragMove")(this._getEventArgs(i))}},_isValidElement(i,e){var t=this.option("handle"),a=(0,c.Z)(i.originalEvent&&i.originalEvent.target);return!(t&&!a.closest(t).length||!e.length||e.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(i){var e=this._getDraggableElement(i);if(this.dragInProgress=!0,this._isValidElement(i,e)){if(!this._$sourceElement){var t=this._getDragStartArgs(i,e);if(this._getAction("onDragStart")(t),t.cancel)return void(i.cancel=!0);this.option("itemData",t.itemData),this._setSourceDraggable(),this._$sourceElement=e;var a=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),a=this._getDraggableElementOffset(a.left,a.top));var r=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(r.children());var n="fixed"===r.css("position");this._initPosition((0,f.l)({},t,{dragElement:r.get(0),initialOffset:n&&a})),this._getAction("onDraggableElementShown")((0,V.Z)((0,V.Z)({},t),{dragElement:r}));var s=this._getArea(),o=this._getAreaOffset(s),l=this._getBoundOffset(),d=(0,b.Y_)(s),u=(0,b.zp)(s),h=(0,b.dz)(r),p=(0,b.Cr)(r),v=r.offset().left-o.left,g=r.offset().top-o.top;s.length&&(i.maxLeftOffset=v-l.left,i.maxRightOffset=d-v-h-l.right,i.maxTopOffset=g-l.top,i.maxBottomOffset=u-g-p-l.bottom),this.option("autoScroll")&&this._startAnimator()}}else i.cancel=!0},_getAreaOffset:i=>i&&fi.Z.offset(i)||{left:0,top:0},_toggleDraggingClass(i){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),i)},_toggleDragSourceClass(i,e){var t=e||this._$sourceElement;t&&t.toggleClass(this._addWidgetPrefix("source"),i)},_setGestureCoverCursor(i){(0,c.Z)(".".concat("dx-gesture-cover")).css("cursor",i.css("cursor"))},_getBoundOffset(){var i=this.option("boundOffset");return(0,_.mf)(i)&&(i=i.call(this)),(0,qe.$b)(i)},_getArea(){var i=this.option("boundary");return(0,_.mf)(i)&&(i=i.call(this)),(0,c.Z)(i)},_getContainer(){var i=this.option("container");return void 0===i&&(i=(0,ls.S3)()),(0,c.Z)(i)},_getDraggableElementOffset(i,e){var t,a,r,n,s=this._initScrollTop,o=this._initScrollLeft,l=this._getScrollableScrollTop(),d=this._getScrollableScrollLeft(),u=(0,c.Z)(this.element()).css("position"),p={left:(null!==(a=null===(t=this._startPosition)||void 0===t?void 0:t.left)&&void 0!==a?a:0)+i,top:(null!==(n=null===(r=this._startPosition)||void 0===r?void 0:r.top)&&void 0!==n?n:0)+e};return"fixed"===u||this._hasClonedDraggable()?p:{left:(0,_.kE)(d)?p.left+d-o:p.left,top:(0,_.kE)(l)?p.top+l-s:p.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(i){if(this._dragMoveArgs=i,this._$dragElement){var e=this._getDraggableElementOffset(i.offset.x,i.offset.y);this._move(e),this._updateScrollable(i);var t=this._getEventArgs(i);this._getAction("onDragMove")(t),!0!==t.cancel&&this._getTargetDraggable().dragMove(i,scrollBy)}else i.cancel=!0},_updateScrollable(i){if(this.option("autoScroll")){var e=Pl(i),t=Z.Z.elementsFromPoint(e.x,e.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(t,e),this._horizontalScrollHelper.updateScrollable(t,e)}},_getScrollable(i){var e;return i.parents().toArray().some(t=>{var a=(0,c.Z)(t);return!(!this._horizontalScrollHelper.isScrollable(a)&&!this._verticalScrollHelper.isScrollable(a)||(e=a,0))}),e},_getScrollableScrollTop(){var i,e;return null!==(e=null===(i=this._getScrollable((0,c.Z)(this.element())))||void 0===i?void 0:i.scrollTop())&&void 0!==e?e:0},_getScrollableScrollLeft(){var i,e;return null!==(e=null===(i=this._getScrollable((0,c.Z)(this.element())))||void 0===i?void 0:i.scrollLeft())&&void 0!==e?e:0},_defaultActionArgs(){var i=this.callBase.apply(this,arguments),e=this.option("component");return e&&(i.component=e,i.element=e.element()),i},_getEventArgs(i){var e=this._getSourceDraggable(),t=this._getTargetDraggable();return{event:i,itemData:e.option("itemData"),itemElement:(0,j.uD)(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:t.option("component")||t,fromData:e.option("data"),toData:t.option("data")}},_getDragStartArgs(i,e){var t=this._getEventArgs(i);return{event:t.event,itemData:t.itemData,itemElement:e,fromData:t.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(i){var e=(0,x.BH)(),t=this._getEventArgs(i),a=this._getEventArgs(i),r=this._getTargetDraggable(),n=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(t)}finally{(0,x.gx)((0,x.p4)(t.cancel)).done(s=>{if(!s&&(r!==this&&r._getAction("onDrop")(a),!a.cancel))return n=!1,void(0,x.gx)((0,x.p4)(r.dragEnd(t))).always(e.resolve);e.resolve()}).fail(e.resolve),e.done(()=>{n&&this._revertItemToInitialPosition(),this._resetDragOptions(r)})}},_isTargetOverAnotherDraggable(i){var e=this._getSourceDraggable();if(this===e)return!1;var t=e._$dragElement,a=e.$element(),r=this.$element(),n=Pl(i),o=Z.Z.elementsFromPoint(n.x,n.y,this.element()).filter(h=>{var p=(0,c.Z)(h);return!!p.hasClass(this._addWidgetPrefix())&&!p.closest(t).length})[0],l=this._getSourceElement(),d=o===a.get(0),u=(0,c.Z)(o).closest(l).length;return!o||o===r.get(0)&&!d&&!u},_dragEnterHandler(i){this._fireDragEnterEvent(i),this._isTargetOverAnotherDraggable(i)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(i)},_dragLeaveHandler(i){this._fireDragLeaveEvent(i),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(i)},_keydownHandler(i){this.dragInProgress&&"Escape"===i.key&&this._keydownEscapeHandler(i)},_keydownEscapeHandler(i){if(this._getSourceElement()){var t=this._getEventArgs(i);if(this._getAction("onDragCancel")(t),!t.cancel){this.dragInProgress=!1,Fi?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var a=this._getTargetDraggable();this._resetDragOptions(a),this._attachEventHandlers()}}},_getAction(i){return this["_".concat(i,"Action")]||this._createActionByOption(i)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new or.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var i=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&(0,c.Z)(e.render({container:this.element(),transclude:i}))},_optionChanged(i){var{name:e}=i;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(i)}},_getTargetDraggable(){return Ll||this},_getSourceDraggable(){return Fi||this},_setTargetDraggable(){var i=this.option("group"),e=this._getSourceDraggable();i&&i===e.option("group")&&(Ll=this)},_setSourceDraggable(){Fi=this},_resetSourceDraggable(){Fi=null},_resetTargetDraggable(){Ll=null},_resetDragOptions(i){this.reset(),i.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(i){var e=this._getEventArgs(i);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(i){var e=this._getEventArgs(i);this._getAction("onDragLeave")(e)}});(0,X.Z)(ot,tf);const iH=tf;var af=(0,B.Jj)(),rf="placeholder",nf=i=>(0,c.Z)(i).is(":visible"),nH=(i,e)=>{var t,a;if(i){var r=(null===(t=e.to)||void 0===t?void 0:t.left)||0,n=(null===(a=e.to)||void 0===a?void 0:a.top)||0;i.style.transform="translate(".concat(r,"px,").concat(n,"px)"),i.style.transition=ge.Z.off?"":"transform ".concat(e.duration,"ms ").concat(e.easing)}},sH=i=>{i&&(i.style.transform="",i.style.transition="")},sf=iH.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return(0,f.l)(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(i,e)=>i.slice(0,e).reverse().filter(nf)[0],_dragStartHandler(i){if(this.callBase.apply(this,arguments),!0!==i.cancel){var e=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(i),this.option("fromIndex",this._getElementIndex(e)),this.option("fromIndexOffset",this.option("offset"))}},_subscribeToSourceScroll(i){var e=this._getScrollable((0,c.Z)(i.target));e&&(this._sourceScrollableInfo={element:e,scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop()},C.Z.off(e,"scroll",this._sourceScrollHandler),C.Z.on(e,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(C.Z.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(i){var e=this._sourceScrollableInfo;e&&["scrollLeft","scrollTop"].forEach(t=>{i.target[t]!==e[t]&&(this._correctItemPoints(i.target[t]-e[t]),this._movePlaceholder(),e[t]=i.target[t])})},_dragEnterHandler(i){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(i),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){var e=this.option("itemPoints"),t=e[e.length-1];if(t){var a=this.$element(),r=this._getSourceElement(),n=this._isVerticalOrientation(),s=n?(0,b.zp)(r,!0):(0,b.Y_)(r,!0),o=a.get(0)[n?"scrollHeight":"scrollWidth"],l=a.get(0)[n?"scrollTop":"scrollLeft"],d=n?"top":"left",u=t[d],p=a.offset()[d]+o-l-u;if(p<s&&n){var v=this._getItems(),g=(0,c.Z)(this._getPrevVisibleItem(v));this._$modifiedItem=g,this._modifiedItemMargin=g.get(0).style.marginBottom,g.css("marginBottom",s-p);var m=g.closest(".dx-sortable"),w=m.data("dxScrollable")||m.data("dxScrollView");w&&w.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(i){var t=this._getTargetDraggable().$element(),a=this._getScrollable(t);if(a){var{left:r,right:n,top:s,bottom:o}=function oH(i){var e=i.offset(),{style:t}=i[0],a=parseFloat(t.paddingLeft)||0,r=parseFloat(t.paddingRight)||0,n=parseFloat(t.paddingTop)||0,s=i[0].clientWidth-(a+r),o=(0,b.Cr)(i),l=e.left+a,d=e.top+n;return{left:l,right:l+s,top:d,bottom:d+o}}(a),l=this.option("toIndex"),u=this.option("itemPoints")?.filter(p=>p.index===l)[0];if(u&&void 0!==u.top)return this._isVerticalOrientation()?s<=Math.ceil(u.top)&&Math.floor(u.top)<=o:r<=Math.ceil(u.left)&&Math.floor(u.left)<=n}return!0},dragEnd(i){this._unsubscribeFromSourceScroll();var o,l,e=this._getSourceElement(),t=this._getSourceDraggable(),a=t.NAME!==this.NAME,r=this.option("toIndex"),{event:n}=i,s=this._allowDrop(n);return null!==r&&r>=0&&s&&(t!==this&&((o=this._fireAddEvent(n))||(l=this._fireRemoveEvent(n))),a&&(0,de.Kx)(e),this.option("moveItemOnDrop")&&!o&&this._moveItem(e,r,l),t===this)?this._fireReorderEvent(n):(0,x.BH)().resolve()},dragMove(i){var e=this.option("itemPoints");if(e){for(var s,t=this._isVerticalOrientation(),a=t?"top":"left",r=t?i.pageY:i.pageX,n=this.option("rtlEnabled"),o=e.length-1;o>=0;o--){var l=e[o+1]&&(e[o][a]+e[o+1][a])/2;if(!(!t&&n?r>l:l>r)&&void 0!==l)break;s=e[o]}s&&(this._updatePlaceholderPosition(i,s),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())}},_isIndicateMode(){return"indicate"===this.option("dropFeedbackMode")||this.option("allowDropInsideItem")},_createPlaceholder(){var i;return this._isIndicateMode()&&(i=(0,c.Z)("<div>").addClass(this._addWidgetPrefix(rf)).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=i,i},_getItems(){var i=this._getItemsSelector();return this._$content().find(i).not(".".concat(this._addWidgetPrefix(rf))).not(".".concat(this._addWidgetPrefix("clone"))).toArray()},_allowReordering(){return this._getSourceDraggable()!==this._getTargetDraggable()||this.option("allowReordering")},_isValidPoint(i,e,t){var a=this.option("allowDropInsideItem");return!!(t||this._allowReordering()||0===i&&a)&&(!this._isIndicateMode()||-1===e||i!==e&&(t||i!==e+1))},_getItemPoints(){var e,t,a,i=[],r=this.option("rtlEnabled"),n=this._isVerticalOrientation(),s=this._getItems(),o=s.filter(nf),l=o.length,d=this._getDraggableElement(),u=o.indexOf(d.get(0));if(l){for(var h=0;h<=l;h++){var p=!n&&r^h===l,v=n&&h===l;h<l&&(t=(e=(0,c.Z)(o[h])).offset(),a=(0,b.Y_)(e)),i.push({dropInsideItem:!1,left:t.left+(p?a:0),top:t.top+(v?i[h-1].height:0),index:h===l?s.length:s.indexOf(e.get(0)),$item:e,width:(0,b.Y_)(e),height:(0,b.zp)(e),isValid:this._isValidPoint(h,u)})}if(this.option("allowDropInsideItem")){var g=i;i=[];for(var m=0;m<g.length;m++)i.push(g[m]),g[m+1]&&i.push((0,f.l)({},g[m],{dropInsideItem:!0,top:Math.floor((g[m].top+g[m+1].top)/2),left:Math.floor((g[m].left+g[m+1].left)/2),isValid:this._isValidPoint(m,u,!0)}))}}else i.push({dropInsideItem:!1,index:0,isValid:!0});return i},_updateItemPoints(i){(i||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(i){var e=this.option("itemPoints");if(i&&e&&!this.option("autoUpdate")){var a=this._isVerticalOrientation()?"top":"left";e.forEach(r=>{r[a]-=i})}},_getElementIndex(i){return this._getItems().indexOf(i.get(0))},_getDragTemplateArgs(i){var e=this.callBase.apply(this,arguments);return e.model.fromIndex=this._getElementIndex(i),e},_togglePlaceholder(i){this._$placeholderElement&&this._$placeholderElement.toggle(i)},_isVerticalOrientation(){return"vertical"===this.option("itemOrientation")},_normalizeToIndex(i,e){var t=this._getSourceDraggable()!==this._getTargetDraggable(),a=this._getActualFromIndex();return null===i?a:Math.max(t||a>=i||e?i:i-1,0)},_updatePlaceholderPosition(i,e){var t=this._getSourceDraggable(),a=this._normalizeToIndex(e.index,e.dropInsideItem),r=(0,f.l)(this._getEventArgs(i),{toIndex:a,dropInsideItem:e.dropInsideItem});e.isValid&&this._getAction("onDragChange")(r),!r.cancel&&e.isValid?(this.option({dropInsideItem:e.dropInsideItem,toIndex:e.index}),this._getAction("onPlaceholderPrepared")((0,f.l)(this._getEventArgs(i),{placeholderElement:(0,j.uD)(this._$placeholderElement),dragElement:(0,j.uD)(t._$dragElement)})),this._updateItemPoints()):e.isValid||this.option({dropInsideItem:!1,toIndex:null})},_makeWidthCorrection(i,e){if(this._$scrollable=this._getScrollable(i),this._$scrollable){var t=(0,b.dz)(this._$scrollable),a=this._$scrollable.offset().left-i.offset().left,r=(0,b.Y_)(i)-a-t;a>0&&(e-=a),r>0&&(e-=r)}return e},_updatePlaceholderSizes(i,e){var t=this.option("dropInsideItem"),a=(0,c.Z)(e),r=this._isVerticalOrientation(),n="",s="";i.toggleClass(this._addWidgetPrefix("placeholder-inside"),t),(r||t)&&(n=(0,b.Y_)(a)),(!r||t)&&(s=(0,b.zp)(a)),n=this._makeWidthCorrection(a,n),i.css({width:n,height:s})},_moveItem(i,e,t){var a,r=this._getItems(),n=r[e],s=this._getSourceDraggable();t&&(i=i.clone(),s._toggleDragSourceClass(!1,i)),n||(a=r[e-1]),this._moveItemCore(i,n,a)},_moveItemCore(i,e,t){e||t?t?i.insertAfter((0,c.Z)(t)):i.insertBefore((0,c.Z)(e)):i.appendTo(this.$element())},_getDragStartArgs(i,e){return(0,f.l)(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(e)})},_getEventArgs(i){var e=this._getSourceDraggable(),t=this._getTargetDraggable(),a=t.option("dropInsideItem");return(0,f.l)(this.callBase.apply(this,arguments),{fromIndex:e.option("fromIndex"),toIndex:this._normalizeToIndex(t.option("toIndex"),a),dropInsideItem:a})},_optionChanged(i){var{name:e}=i;switch(e){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(t=>{var a=t?i.value:i.previousValue;if(null!==a){var r=(0,c.Z)(this._getItems()[a]);this._toggleDragSourceClass(t,r)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(i);break;case"toIndex":this._optionChangedToIndex(i);break;default:this.callBase(i)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(i){var t,e=this.$element();if("hidden"!==e.css("overflow")?t=e.get(0):e.parents().each(function(){if("visible"!==(0,c.Z)(this).css("overflow"))return t=this,!1}),t){var a=(0,ne.l)(t),r=this._isVerticalOrientation(),n=r?"top":"left",o=r?af.pageYOffset:af.pageXOffset;if(i[n]<a[n]+o||i[n]>a[r?"bottom":"right"]+o)return!1}return!0},_optionChangedToIndex(i){var e=i.value;if(this._isIndicateMode()){var t=null!==e&&e>=0;this._togglePlaceholder(t),t&&this._movePlaceholder()}else this._moveItems(i.previousValue,i.value,i.fullUpdate)},update(){if(null!==this.option("fromIndex")||null!==this.option("toIndex")){this._updateItemPoints(!0),this._updateDragSourceClass();var i=this.option("toIndex");this._optionChangedToIndex({value:i,fullUpdate:!0})}},_updateDragSourceClass(){var i=this._getActualFromIndex(),e=(0,c.Z)(this._getItems()[i]);e.length&&(this._$sourceElement=e,this._toggleDragSourceClass(!0,e))},_makeLeftCorrection(i){var e=this._$scrollable;if(e&&this._isVerticalOrientation()){var t=e.offset().left-i;t>0&&(i+=t)}return i},_movePlaceholder(){var i=this._$placeholderElement||this._createPlaceholder();if(i){var e=this._getItems(),t=this.option("toIndex"),a=this._isVerticalOrientation(),r=this.option("rtlEnabled"),n=this.option("dropInsideItem"),s=null,o=e[t];if(o){var l=(0,c.Z)(o);s=l.offset(),!a&&r&&!n&&(s.left+=(0,b.Y_)(l,!0))}else{var d=o=this._getPrevVisibleItem(e,t);d&&(s=(0,c.Z)(d).offset(),a?s.top+=(0,b.zp)(d,!0):r||(s.left+=(0,b.Y_)(d,!0)))}if(this._updatePlaceholderSizes(i,o),s&&!this._isPositionVisible(s)&&(s=null),s){var u=a&&t===e.length,h=(0,b.zp)(i);s.left=this._makeLeftCorrection(s.left),s.top=u&&s.top>=h?s.top-h:s.top,this._move(s,i)}i.toggle(!!s)}},_getPositions(i,e,t,a){for(var r=[],n=0;n<i.length;n++){var s=0;null!==a&&null!==t?(-1===t?n>=a&&(s=e):-1===a?n>t&&(s=-e):t<a?n>t&&n<a&&(s=-e):t>a&&n>=a&&n<t&&(s=e),r.push(s)):r.push(s)}return r},_getDraggableElementSize(i){var e=this._getDraggableElement(),t=this.option("draggableElementSize");return t||(t=i?((0,b.zp)(e)+(0,b.zp)(e,!0))/2:((0,b.Y_)(e)+(0,b.Y_)(e,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",t)),t},_getActualFromIndex(){var{fromIndex:i,fromIndexOffset:e,offset:t}=this.option();return null==i?null:i+e-t},_moveItems(i,e,t){for(var a=this._getActualFromIndex(),r=this._isVerticalOrientation(),n=r?"top":"left",s=this._getDraggableElementSize(r),o=this._getItems(),l=this._getPositions(o,s,a,i),d=this._getPositions(o,s,a,e),u=this.option("animation"),h=this.option("rtlEnabled"),p=0;p<o.length;p++){var v=o[p],g=l[p],m=d[p];null===e||null===a?sH(v):(g!==m||t&&(0,_.$K)(m))&&nH(v,(0,f.l)({},u,{to:{[n]:!r&&h?-m:m}}))}},_toggleDragSourceClass(i,e){var t=e||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||t&&t.toggleClass(this._addWidgetPrefix("source-hidden"),i)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(i){var e=this._getEventArgs(i);return this._getAction("onAdd")(e),e.cancel},_fireRemoveEvent(i){var e=this._getSourceDraggable(),t=this._getEventArgs(i);return e._getAction("onRemove")(t),t.cancel},_fireReorderEvent(i){var e=this._getEventArgs(i);return this._getAction("onReorder")(e),e.promise||(0,x.BH)().resolve()}});(0,X.Z)("dxSortable",sf);const lH=sf;var pH={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:i=>class extends i{init(){super.init.apply(this,arguments),this._updateHandleColumn()}optionChanged(e){"rowDragging"===e.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),e.handled=!0),super.optionChanged.apply(this,arguments)}_allowReordering(){var e=this.option("rowDragging");return!(!e||!(e.allowReordering||e.allowDropInsideItem||e.group))}_updateHandleColumn(){var e=this.option("rowDragging"),t=this._allowReordering(),a=this._columnsController,r=t&&e.showDragIcons;a?.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:"dx-drag-cell",value:""}],cssClass:"dx-command-drag",width:"auto",cellTemplate:this._getHandleTemplate(),visible:r}),a?.columnOption("type:drag","visible",r)}_renderContent(){var e=this.option("rowDragging"),t=this._allowReordering(),a=super._renderContent.apply(this,arguments),r=this._isFixedTableRendering,n=r?"_sortableFixed":"_sortable",s=r?"_sortable":"_sortableFixed",o=u=>{var h;null===(h=this._sortableFixed)||void 0===h||h.$element().css("pointerEvents",u?"auto":"")},l=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",d=this.option("dataRowTemplate")?"> table > tbody".concat(l):"> table > tbody > ".concat(l);return(t||this[n])&&a.length&&(this[n]=this._createComponent(a,lH,(0,f.l)({component:this.component,contentTemplate:null,filter:d,cursorOffset:u=>{var{event:h}=u,p=(0,c.Z)(this.element()).offset();return{x:h.pageX-p.left}},onDraggableElementShown:u=>{if(!e.dragTemplate){var p=(0,c.Z)(u.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(p)}},dragTemplate:this._getDraggableRowTemplate(),handle:e.showDragIcons&&".".concat("dx-command-drag"),dropFeedbackMode:"indicate"},e,{onDragStart:u=>{var h,p;null===(h=this.getController("keyboardNavigation"))||void 0===h||h._resetFocusedCell();var v=u.component.getVisibleRows()[u.fromIndex];u.itemData=v&&v.data,u.cancel=!t||!(v&&"data"===v.rowType),null===(p=e.onDragStart)||void 0===p||p.call(e,u)},onDragEnter:u=>{u.fromComponent!==u.toComponent&&o(!0)},onDragLeave:()=>{o(!1)},onDragEnd:u=>{var h;o(!1),null===(h=e.onDragEnd)||void 0===h||h.call(e,u)},onAdd:u=>{var h;o(!1),null===(h=e.onAdd)||void 0===h||h.call(e,u)},dropFeedbackMode:e.dropFeedbackMode,onOptionChanged:u=>{this._sortableFixed&&("fromIndex"===u.name||"toIndex"===u.name)&&this[s].option(u.name,u.value)}})),a.toggleClass("dx-scrollable-container",r),a.toggleClass("dx-sortable-without-handle",t&&!e.showDragIcons)),a}_renderCore(e){super._renderCore.apply(this,arguments),e&&"update"===e.changeType&&e.repaintChangesOnly&&O.isVirtualRowRendering(this)&&(0,E.Su)(()=>{this._updateSortable()})}_updateSortable(){var e=this._dataController.getRowIndexOffset(),t=e-this._previousOffset;[this._sortable,this._sortableFixed].forEach(a=>{var r=a?.option("toIndex");(0,_.$K)(r)&&(0,_.$K)(this._previousOffset)&&a?.option("toIndex",r-t),a?.option("offset",e),a?.update()}),this._previousOffset=e}_resizeCore(){super._resizeCore.apply(this,arguments),this._updateSortable()}_getDraggableGridOptions(e){var t=this.option(),a=this.getColumns(),r=(0,c.Z)(this.getRowElement(e.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:t.columnFixing,columnAutoWidth:t.columnAutoWidth,showColumnLines:t.showColumnLines,columns:a.map(n=>({width:n.width||n.visibleWidth,fixed:n.fixed,fixedPosition:n.fixedPosition})),onRowPrepared:n=>{var s=n.component.getView("rowsView");(0,c.Z)(n.rowElement).replaceWith(r.eq(s._isFixedTableRendering?1:0).clone())}}}_synchronizeScrollLeftPosition(e){var t=e?.getScrollable();t?.scrollTo({x:this._scrollLeft})}_getDraggableRowTemplate(){return e=>{var t=this.component.$element(),a=(0,c.Z)("<div>");(0,b.cl)(a,(0,b.dz)(t));var r=this._dataController.items(),s=this._getDraggableGridOptions(r&&r[e.fromIndex]);return this._createComponent(a,this.component.NAME,s),a.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix("rowsview"),")")).hide(),a.addClass(this.addWidgetPrefix("dragview")),a}}_getHandleTemplate(){return(i=>(e,t)=>{var a=(0,c.Z)(e);if("data"===t.rowType)return a.addClass("dx-cell-focus-disabled"),(0,c.Z)("<span>").addClass(i("drag-icon"));O.setEmptyText(a)})(e=>this.addWidgetPrefix(e))}}}}};P.registerModule("rowDragging",pH);const _H=ub;var ze=T(7217),R=T(4943);let vH=(()=>{class i extends ze.Ay{constructor(t,a,r,n,s,o,l,d){super(t,a,r,n,l,d),this._watcherHelper=n,this._idh=s,this.instance=null,this._createEventEmitters([{subscribe:"adaptiveDetailRowPreparing",emit:"onAdaptiveDetailRowPreparing"},{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellDblClick",emit:"onCellDblClick"},{subscribe:"cellHoverChanged",emit:"onCellHoverChanged"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"dataErrorOccurred",emit:"onDataErrorOccurred"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"editCanceled",emit:"onEditCanceled"},{subscribe:"editCanceling",emit:"onEditCanceling"},{subscribe:"editingStart",emit:"onEditingStart"},{subscribe:"editorPrepared",emit:"onEditorPrepared"},{subscribe:"editorPreparing",emit:"onEditorPreparing"},{subscribe:"exporting",emit:"onExporting"},{subscribe:"focusedCellChanged",emit:"onFocusedCellChanged"},{subscribe:"focusedCellChanging",emit:"onFocusedCellChanging"},{subscribe:"focusedRowChanged",emit:"onFocusedRowChanged"},{subscribe:"focusedRowChanging",emit:"onFocusedRowChanging"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"initNewRow",emit:"onInitNewRow"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"rowClick",emit:"onRowClick"},{subscribe:"rowCollapsed",emit:"onRowCollapsed"},{subscribe:"rowCollapsing",emit:"onRowCollapsing"},{subscribe:"rowDblClick",emit:"onRowDblClick"},{subscribe:"rowExpanded",emit:"onRowExpanded"},{subscribe:"rowExpanding",emit:"onRowExpanding"},{subscribe:"rowInserted",emit:"onRowInserted"},{subscribe:"rowInserting",emit:"onRowInserting"},{subscribe:"rowPrepared",emit:"onRowPrepared"},{subscribe:"rowRemoved",emit:"onRowRemoved"},{subscribe:"rowRemoving",emit:"onRowRemoving"},{subscribe:"rowUpdated",emit:"onRowUpdated"},{subscribe:"rowUpdating",emit:"onRowUpdating"},{subscribe:"rowValidating",emit:"onRowValidating"},{subscribe:"saved",emit:"onSaved"},{subscribe:"saving",emit:"onSaving"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"toolbarPreparing",emit:"onToolbarPreparing"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"allowColumnReorderingChange"},{emit:"allowColumnResizingChange"},{emit:"autoNavigateToFocusedRowChange"},{emit:"cacheEnabledChange"},{emit:"cellHintEnabledChange"},{emit:"columnAutoWidthChange"},{emit:"columnChooserChange"},{emit:"columnFixingChange"},{emit:"columnHidingEnabledChange"},{emit:"columnMinWidthChange"},{emit:"columnResizingModeChange"},{emit:"columnsChange"},{emit:"columnWidthChange"},{emit:"customizeColumnsChange"},{emit:"dataRowTemplateChange"},{emit:"dataSourceChange"},{emit:"dateSerializationFormatChange"},{emit:"disabledChange"},{emit:"editingChange"},{emit:"elementAttrChange"},{emit:"errorRowEnabledChange"},{emit:"exportChange"},{emit:"filterBuilderChange"},{emit:"filterBuilderPopupChange"},{emit:"filterPanelChange"},{emit:"filterRowChange"},{emit:"filterSyncEnabledChange"},{emit:"filterValueChange"},{emit:"focusedColumnIndexChange"},{emit:"focusedRowEnabledChange"},{emit:"focusedRowIndexChange"},{emit:"focusedRowKeyChange"},{emit:"groupingChange"},{emit:"groupPanelChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"highlightChangesChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"keyboardNavigationChange"},{emit:"keyExprChange"},{emit:"loadPanelChange"},{emit:"masterDetailChange"},{emit:"noDataTextChange"},{emit:"pagerChange"},{emit:"pagingChange"},{emit:"remoteOperationsChange"},{emit:"renderAsyncChange"},{emit:"repaintChangesOnlyChange"},{emit:"rowAlternationEnabledChange"},{emit:"rowDraggingChange"},{emit:"rowTemplateChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"searchPanelChange"},{emit:"selectedRowKeysChange"},{emit:"selectionChange"},{emit:"selectionFilterChange"},{emit:"showBordersChange"},{emit:"showColumnHeadersChange"},{emit:"showColumnLinesChange"},{emit:"showRowLinesChange"},{emit:"sortByGroupSummaryInfoChange"},{emit:"sortingChange"},{emit:"stateStoringChange"},{emit:"summaryChange"},{emit:"syncLookupFilterValuesChange"},{emit:"tabIndexChange"},{emit:"toolbarChange"},{emit:"twoWayBindingEnabledChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(t){this._setOption("accessKey",t)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(t){this._setOption("activeStateEnabled",t)}get allowColumnReordering(){return this._getOption("allowColumnReordering")}set allowColumnReordering(t){this._setOption("allowColumnReordering",t)}get allowColumnResizing(){return this._getOption("allowColumnResizing")}set allowColumnResizing(t){this._setOption("allowColumnResizing",t)}get autoNavigateToFocusedRow(){return this._getOption("autoNavigateToFocusedRow")}set autoNavigateToFocusedRow(t){this._setOption("autoNavigateToFocusedRow",t)}get cacheEnabled(){return this._getOption("cacheEnabled")}set cacheEnabled(t){this._setOption("cacheEnabled",t)}get cellHintEnabled(){return this._getOption("cellHintEnabled")}set cellHintEnabled(t){this._setOption("cellHintEnabled",t)}get columnAutoWidth(){return this._getOption("columnAutoWidth")}set columnAutoWidth(t){this._setOption("columnAutoWidth",t)}get columnChooser(){return this._getOption("columnChooser")}set columnChooser(t){this._setOption("columnChooser",t)}get columnFixing(){return this._getOption("columnFixing")}set columnFixing(t){this._setOption("columnFixing",t)}get columnHidingEnabled(){return this._getOption("columnHidingEnabled")}set columnHidingEnabled(t){this._setOption("columnHidingEnabled",t)}get columnMinWidth(){return this._getOption("columnMinWidth")}set columnMinWidth(t){this._setOption("columnMinWidth",t)}get columnResizingMode(){return this._getOption("columnResizingMode")}set columnResizingMode(t){this._setOption("columnResizingMode",t)}get columns(){return this._getOption("columns")}set columns(t){this._setOption("columns",t)}get columnWidth(){return this._getOption("columnWidth")}set columnWidth(t){this._setOption("columnWidth",t)}get customizeColumns(){return this._getOption("customizeColumns")}set customizeColumns(t){this._setOption("customizeColumns",t)}get dataRowTemplate(){return this._getOption("dataRowTemplate")}set dataRowTemplate(t){this._setOption("dataRowTemplate",t)}get dataSource(){return this._getOption("dataSource")}set dataSource(t){this._setOption("dataSource",t)}get dateSerializationFormat(){return this._getOption("dateSerializationFormat")}set dateSerializationFormat(t){this._setOption("dateSerializationFormat",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get editing(){return this._getOption("editing")}set editing(t){this._setOption("editing",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get errorRowEnabled(){return this._getOption("errorRowEnabled")}set errorRowEnabled(t){this._setOption("errorRowEnabled",t)}get export(){return this._getOption("export")}set export(t){this._setOption("export",t)}get filterBuilder(){return this._getOption("filterBuilder")}set filterBuilder(t){this._setOption("filterBuilder",t)}get filterBuilderPopup(){return this._getOption("filterBuilderPopup")}set filterBuilderPopup(t){this._setOption("filterBuilderPopup",t)}get filterPanel(){return this._getOption("filterPanel")}set filterPanel(t){this._setOption("filterPanel",t)}get filterRow(){return this._getOption("filterRow")}set filterRow(t){this._setOption("filterRow",t)}get filterSyncEnabled(){return this._getOption("filterSyncEnabled")}set filterSyncEnabled(t){this._setOption("filterSyncEnabled",t)}get filterValue(){return this._getOption("filterValue")}set filterValue(t){this._setOption("filterValue",t)}get focusedColumnIndex(){return this._getOption("focusedColumnIndex")}set focusedColumnIndex(t){this._setOption("focusedColumnIndex",t)}get focusedRowEnabled(){return this._getOption("focusedRowEnabled")}set focusedRowEnabled(t){this._setOption("focusedRowEnabled",t)}get focusedRowIndex(){return this._getOption("focusedRowIndex")}set focusedRowIndex(t){this._setOption("focusedRowIndex",t)}get focusedRowKey(){return this._getOption("focusedRowKey")}set focusedRowKey(t){this._setOption("focusedRowKey",t)}get grouping(){return this._getOption("grouping")}set grouping(t){this._setOption("grouping",t)}get groupPanel(){return this._getOption("groupPanel")}set groupPanel(t){this._setOption("groupPanel",t)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(t){this._setOption("headerFilter",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get highlightChanges(){return this._getOption("highlightChanges")}set highlightChanges(t){this._setOption("highlightChanges",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(t){this._setOption("hoverStateEnabled",t)}get keyboardNavigation(){return this._getOption("keyboardNavigation")}set keyboardNavigation(t){this._setOption("keyboardNavigation",t)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(t){this._setOption("keyExpr",t)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(t){this._setOption("loadPanel",t)}get masterDetail(){return this._getOption("masterDetail")}set masterDetail(t){this._setOption("masterDetail",t)}get noDataText(){return this._getOption("noDataText")}set noDataText(t){this._setOption("noDataText",t)}get pager(){return this._getOption("pager")}set pager(t){this._setOption("pager",t)}get paging(){return this._getOption("paging")}set paging(t){this._setOption("paging",t)}get remoteOperations(){return this._getOption("remoteOperations")}set remoteOperations(t){this._setOption("remoteOperations",t)}get renderAsync(){return this._getOption("renderAsync")}set renderAsync(t){this._setOption("renderAsync",t)}get repaintChangesOnly(){return this._getOption("repaintChangesOnly")}set repaintChangesOnly(t){this._setOption("repaintChangesOnly",t)}get rowAlternationEnabled(){return this._getOption("rowAlternationEnabled")}set rowAlternationEnabled(t){this._setOption("rowAlternationEnabled",t)}get rowDragging(){return this._getOption("rowDragging")}set rowDragging(t){this._setOption("rowDragging",t)}get rowTemplate(){return this._getOption("rowTemplate")}set rowTemplate(t){this._setOption("rowTemplate",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get scrolling(){return this._getOption("scrolling")}set scrolling(t){this._setOption("scrolling",t)}get searchPanel(){return this._getOption("searchPanel")}set searchPanel(t){this._setOption("searchPanel",t)}get selectedRowKeys(){return this._getOption("selectedRowKeys")}set selectedRowKeys(t){this._setOption("selectedRowKeys",t)}get selection(){return this._getOption("selection")}set selection(t){this._setOption("selection",t)}get selectionFilter(){return this._getOption("selectionFilter")}set selectionFilter(t){this._setOption("selectionFilter",t)}get showBorders(){return this._getOption("showBorders")}set showBorders(t){this._setOption("showBorders",t)}get showColumnHeaders(){return this._getOption("showColumnHeaders")}set showColumnHeaders(t){this._setOption("showColumnHeaders",t)}get showColumnLines(){return this._getOption("showColumnLines")}set showColumnLines(t){this._setOption("showColumnLines",t)}get showRowLines(){return this._getOption("showRowLines")}set showRowLines(t){this._setOption("showRowLines",t)}get sortByGroupSummaryInfo(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfo(t){this._setOption("sortByGroupSummaryInfo",t)}get sorting(){return this._getOption("sorting")}set sorting(t){this._setOption("sorting",t)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(t){this._setOption("stateStoring",t)}get summary(){return this._getOption("summary")}set summary(t){this._setOption("summary",t)}get syncLookupFilterValues(){return this._getOption("syncLookupFilterValues")}set syncLookupFilterValues(t){this._setOption("syncLookupFilterValues",t)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(t){this._setOption("tabIndex",t)}get toolbar(){return this._getOption("toolbar")}set toolbar(t){this._setOption("toolbar",t)}get twoWayBindingEnabled(){return this._getOption("twoWayBindingEnabled")}set twoWayBindingEnabled(t){this._setOption("twoWayBindingEnabled",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(t){this._setOption("wordWrapEnabled",t)}get columnsChildren(){return this._getOption("columns")}set columnsChildren(t){this.setChildren("columns",t)}get sortByGroupSummaryInfoChildren(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfoChildren(t){this.setChildren("sortByGroupSummaryInfo",t)}_createInstance(t,a){return new _H(t,a)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("columns",t),this.setupChanges("dataSource",t),this.setupChanges("keyExpr",t),this.setupChanges("selectedRowKeys",t),this.setupChanges("sortByGroupSummaryInfo",t)}setupChanges(t,a){t in this._optionsToUpdate||this._idh.setup(t,a)}ngDoCheck(){this._idh.doCheck("columns"),this._idh.doCheck("dataSource"),this._idh.doCheck("keyExpr"),this._idh.doCheck("selectedRowKeys"),this._idh.doCheck("sortByGroupSummaryInfo"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,a){let r=this._idh.setupSingle(t,a),n=null!==this._idh.getChanges(t,a);(r||n)&&super._setOption(t,a)}}return i.\u0275fac=function(t){return new(t||i)(Y.Y36(Y.SBq),Y.Y36(Y.R0b),Y.Y36(ze._5),Y.Y36(ze._h),Y.Y36(ze.i9),Y.Y36(ze.al),Y.Y36(hf.ki),Y.Y36(Y.Lbi))},i.\u0275cmp=Y.Xpm({type:i,selectors:[["dx-data-grid"]],contentQueries:function(t,a,r){if(1&t&&(Y.Suo(r,R.qvW,4),Y.Suo(r,R.KkC,4)),2&t){let n;Y.iGM(n=Y.CRH())&&(a.columnsChildren=n),Y.iGM(n=Y.CRH())&&(a.sortByGroupSummaryInfoChildren=n)}},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",allowColumnReordering:"allowColumnReordering",allowColumnResizing:"allowColumnResizing",autoNavigateToFocusedRow:"autoNavigateToFocusedRow",cacheEnabled:"cacheEnabled",cellHintEnabled:"cellHintEnabled",columnAutoWidth:"columnAutoWidth",columnChooser:"columnChooser",columnFixing:"columnFixing",columnHidingEnabled:"columnHidingEnabled",columnMinWidth:"columnMinWidth",columnResizingMode:"columnResizingMode",columns:"columns",columnWidth:"columnWidth",customizeColumns:"customizeColumns",dataRowTemplate:"dataRowTemplate",dataSource:"dataSource",dateSerializationFormat:"dateSerializationFormat",disabled:"disabled",editing:"editing",elementAttr:"elementAttr",errorRowEnabled:"errorRowEnabled",export:"export",filterBuilder:"filterBuilder",filterBuilderPopup:"filterBuilderPopup",filterPanel:"filterPanel",filterRow:"filterRow",filterSyncEnabled:"filterSyncEnabled",filterValue:"filterValue",focusedColumnIndex:"focusedColumnIndex",focusedRowEnabled:"focusedRowEnabled",focusedRowIndex:"focusedRowIndex",focusedRowKey:"focusedRowKey",grouping:"grouping",groupPanel:"groupPanel",headerFilter:"headerFilter",height:"height",highlightChanges:"highlightChanges",hint:"hint",hoverStateEnabled:"hoverStateEnabled",keyboardNavigation:"keyboardNavigation",keyExpr:"keyExpr",loadPanel:"loadPanel",masterDetail:"masterDetail",noDataText:"noDataText",pager:"pager",paging:"paging",remoteOperations:"remoteOperations",renderAsync:"renderAsync",repaintChangesOnly:"repaintChangesOnly",rowAlternationEnabled:"rowAlternationEnabled",rowDragging:"rowDragging",rowTemplate:"rowTemplate",rtlEnabled:"rtlEnabled",scrolling:"scrolling",searchPanel:"searchPanel",selectedRowKeys:"selectedRowKeys",selection:"selection",selectionFilter:"selectionFilter",showBorders:"showBorders",showColumnHeaders:"showColumnHeaders",showColumnLines:"showColumnLines",showRowLines:"showRowLines",sortByGroupSummaryInfo:"sortByGroupSummaryInfo",sorting:"sorting",stateStoring:"stateStoring",summary:"summary",syncLookupFilterValues:"syncLookupFilterValues",tabIndex:"tabIndex",toolbar:"toolbar",twoWayBindingEnabled:"twoWayBindingEnabled",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onAdaptiveDetailRowPreparing:"onAdaptiveDetailRowPreparing",onCellClick:"onCellClick",onCellDblClick:"onCellDblClick",onCellHoverChanged:"onCellHoverChanged",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDataErrorOccurred:"onDataErrorOccurred",onDisposing:"onDisposing",onEditCanceled:"onEditCanceled",onEditCanceling:"onEditCanceling",onEditingStart:"onEditingStart",onEditorPrepared:"onEditorPrepared",onEditorPreparing:"onEditorPreparing",onExporting:"onExporting",onFocusedCellChanged:"onFocusedCellChanged",onFocusedCellChanging:"onFocusedCellChanging",onFocusedRowChanged:"onFocusedRowChanged",onFocusedRowChanging:"onFocusedRowChanging",onInitialized:"onInitialized",onInitNewRow:"onInitNewRow",onKeyDown:"onKeyDown",onOptionChanged:"onOptionChanged",onRowClick:"onRowClick",onRowCollapsed:"onRowCollapsed",onRowCollapsing:"onRowCollapsing",onRowDblClick:"onRowDblClick",onRowExpanded:"onRowExpanded",onRowExpanding:"onRowExpanding",onRowInserted:"onRowInserted",onRowInserting:"onRowInserting",onRowPrepared:"onRowPrepared",onRowRemoved:"onRowRemoved",onRowRemoving:"onRowRemoving",onRowUpdated:"onRowUpdated",onRowUpdating:"onRowUpdating",onRowValidating:"onRowValidating",onSaved:"onSaved",onSaving:"onSaving",onSelectionChanged:"onSelectionChanged",onToolbarPreparing:"onToolbarPreparing",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",allowColumnReorderingChange:"allowColumnReorderingChange",allowColumnResizingChange:"allowColumnResizingChange",autoNavigateToFocusedRowChange:"autoNavigateToFocusedRowChange",cacheEnabledChange:"cacheEnabledChange",cellHintEnabledChange:"cellHintEnabledChange",columnAutoWidthChange:"columnAutoWidthChange",columnChooserChange:"columnChooserChange",columnFixingChange:"columnFixingChange",columnHidingEnabledChange:"columnHidingEnabledChange",columnMinWidthChange:"columnMinWidthChange",columnResizingModeChange:"columnResizingModeChange",columnsChange:"columnsChange",columnWidthChange:"columnWidthChange",customizeColumnsChange:"customizeColumnsChange",dataRowTemplateChange:"dataRowTemplateChange",dataSourceChange:"dataSourceChange",dateSerializationFormatChange:"dateSerializationFormatChange",disabledChange:"disabledChange",editingChange:"editingChange",elementAttrChange:"elementAttrChange",errorRowEnabledChange:"errorRowEnabledChange",exportChange:"exportChange",filterBuilderChange:"filterBuilderChange",filterBuilderPopupChange:"filterBuilderPopupChange",filterPanelChange:"filterPanelChange",filterRowChange:"filterRowChange",filterSyncEnabledChange:"filterSyncEnabledChange",filterValueChange:"filterValueChange",focusedColumnIndexChange:"focusedColumnIndexChange",focusedRowEnabledChange:"focusedRowEnabledChange",focusedRowIndexChange:"focusedRowIndexChange",focusedRowKeyChange:"focusedRowKeyChange",groupingChange:"groupingChange",groupPanelChange:"groupPanelChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",highlightChangesChange:"highlightChangesChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",keyboardNavigationChange:"keyboardNavigationChange",keyExprChange:"keyExprChange",loadPanelChange:"loadPanelChange",masterDetailChange:"masterDetailChange",noDataTextChange:"noDataTextChange",pagerChange:"pagerChange",pagingChange:"pagingChange",remoteOperationsChange:"remoteOperationsChange",renderAsyncChange:"renderAsyncChange",repaintChangesOnlyChange:"repaintChangesOnlyChange",rowAlternationEnabledChange:"rowAlternationEnabledChange",rowDraggingChange:"rowDraggingChange",rowTemplateChange:"rowTemplateChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",searchPanelChange:"searchPanelChange",selectedRowKeysChange:"selectedRowKeysChange",selectionChange:"selectionChange",selectionFilterChange:"selectionFilterChange",showBordersChange:"showBordersChange",showColumnHeadersChange:"showColumnHeadersChange",showColumnLinesChange:"showColumnLinesChange",showRowLinesChange:"showRowLinesChange",sortByGroupSummaryInfoChange:"sortByGroupSummaryInfoChange",sortingChange:"sortingChange",stateStoringChange:"stateStoringChange",summaryChange:"summaryChange",syncLookupFilterValuesChange:"syncLookupFilterValuesChange",tabIndexChange:"tabIndexChange",toolbarChange:"toolbarChange",twoWayBindingEnabledChange:"twoWayBindingEnabledChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[Y._Bn([ze._5,ze._h,ze.al,ze.i9]),Y.qOj,Y.TTD],decls:0,vars:0,template:function(t,a){},encapsulation:2}),i})(),gH=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Y.oAB({type:i}),i.\u0275inj=Y.cJS({imports:[[R.Uz5,R.D_l,R.JxK,R.zZW,R.ynY,R.lgR,R.sni,R.FcQ,R.kEo,R.LNK,R.mtS,R.tRk,R.idP,R.HaS,R.CxW,R.FZZ,R.Inm,R.e1H,R.$D5,R.SCM,R.DTR,R.ZCX,R.Oll,R.Q8p,R.Jiy,R._9O,R.kSd,R.fOF,R.IOm,R.kOw,R.weU,R.waX,R.pxS,R.pGy,R.lj9,R.SH1,R.FJZ,R.RbS,R.$wd,R.xHg,R.p6x,R.vLN,R.rH1,R.lUW,R.kIp,R.yFA,R.$9q,R.nD3,R.Pj6,R.Upd,R.WSE,R.LHj,R._PP,R.ywL,R.WyY,R.$YR,R.aLr,R.uKt,R.YOZ,R.Axk,R.Zjs,R.GaT,R.zLN,R.azD,ze.Lz,ze.ie],R.Uz5,R.D_l,R.JxK,R.zZW,R.ynY,R.lgR,R.sni,R.FcQ,R.kEo,R.LNK,R.mtS,R.tRk,R.idP,R.HaS,R.CxW,R.FZZ,R.Inm,R.e1H,R.$D5,R.SCM,R.DTR,R.ZCX,R.Oll,R.Q8p,R.Jiy,R._9O,R.kSd,R.fOF,R.IOm,R.kOw,R.weU,R.waX,R.pxS,R.pGy,R.lj9,R.SH1,R.FJZ,R.RbS,R.$wd,R.xHg,R.p6x,R.vLN,R.rH1,R.lUW,R.kIp,R.yFA,R.$9q,R.nD3,R.Pj6,R.Upd,R.WSE,R.LHj,R._PP,R.ywL,R.WyY,R.$YR,R.aLr,R.uKt,R.YOZ,R.Axk,R.Zjs,R.GaT,R.zLN,R.azD,ze.ie]}),i})();const mH=function(){return[10]},fH=[{path:"",component:(()=>{const e=class{constructor(a){this.clientService=a,this.clients=[]}ngOnInit(){this.loadClients()}loadClients(){this.clientService.getClients().subscribe(a=>{this.clients=a},a=>{console.log(a)})}};let i=e;return e.\u0275fac=function(r){return new(r||e)(Y.Y36(uf.a))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["app-grid"]],decls:9,vars:11,consts:[["id","dataGrid","keyExpr","id",3,"allowColumnReordering","dataSource","allowColumnResizing","columnAutoWidth","showBorders"],[3,"visible"],["dataField","id","sortOrder","asc"],["dataField","name","sortOrder","asc"],["dataField","phone","sortOrder","asc"],["dataField","email","sortOrder","asc"],["dataField","address","sortOrder","asc"],[3,"pageSize"],[3,"visible","showPageSizeSelector","allowedPageSizes"]],template:function(r,n){1&r&&(Y.TgZ(0,"dx-data-grid",0),Y._UZ(1,"dxo-search-panel",1)(2,"dxi-column",2)(3,"dxi-column",3)(4,"dxi-column",4)(5,"dxi-column",5)(6,"dxi-column",6)(7,"dxo-paging",7)(8,"dxo-pager",8),Y.qZA()),2&r&&(Y.Q6J("allowColumnReordering",!0)("dataSource",n.clients)("allowColumnResizing",!0)("columnAutoWidth",!0)("showBorders",!0),Y.xp6(1),Y.Q6J("visible",!0),Y.xp6(6),Y.Q6J("pageSize",10),Y.xp6(1),Y.Q6J("visible",!0)("showPageSizeSelector",!0)("allowedPageSizes",Y.DdM(10,mH)))},dependencies:[vH,R.qvW,R.ilc,R.sXh,R.XXE],styles:["#dataGrid[_ngcontent-%COMP%]{height:500px}"]}),i})()}];let CH=(()=>{const e=class{};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Y.oAB({type:e}),e.\u0275inj=Y.cJS({imports:[Ml.ez,kl.Bz.forChild(fH),kl.Bz]}),i})(),wH=(()=>{const e=class{};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Y.oAB({type:e}),e.\u0275inj=Y.cJS({imports:[Ml.ez,CH,gH]}),i})()}}]);